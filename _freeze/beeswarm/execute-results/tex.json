{
  "hash": "15b318d5600c7e23c6ed7dd8755ff9de",
  "result": {
    "engine": "knitr",
    "markdown": "# Beeswarm {#sec-beeswarm}\n\n群蜂图,像蜂群一样展示数据,使用R包` beeswarm` 和 `ggbeeswarm` 包实现。\n\n## PKG\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(beeswarm) # beeswarm包,绘制群峰图\nlibrary(ggplot2)\nlibrary(ggbeeswarm) # ggbeeswarm包,基于ggplot2的群峰图\n```\n:::\n\n\n## `iris`\n\n`iris`数据集，又称为“安德森鸢尾花卉数据集”（Anderson's Iris data set），是 R 语言内置的一个“玩具”数据集，也是统计学、数据科学和机器学习领域中使用最频繁、最著名的示例数据集之一。\n\n它包含了150个鸢尾花样本的测量数据，这150个样本分别来自三个不同的鸢尾花品种：山鸢尾 (Setosa)、变色鸢尾 (Versicolor) 和 维吉尼亚鸢尾 (Virginica)，每个品种各50个样本。\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata(iris) # 载入内置数据集\nknitr::kable(head(iris))\n```\n\n::: {.cell-output-display}\n\n\n| Sepal.Length| Sepal.Width| Petal.Length| Petal.Width|Species |\n|------------:|-----------:|------------:|-----------:|:-------|\n|          5.1|         3.5|          1.4|         0.2|setosa  |\n|          4.9|         3.0|          1.4|         0.2|setosa  |\n|          4.7|         3.2|          1.3|         0.2|setosa  |\n|          4.6|         3.1|          1.5|         0.2|setosa  |\n|          5.0|         3.6|          1.4|         0.2|setosa  |\n|          5.4|         3.9|          1.7|         0.4|setosa  |\n\n\n\n群峰图使用的数据集iris\n:::\n:::\n\n\n`iris`数据集共有5个变量:\n\n- Sepal.Length: 花萼长度，单位是厘米。\n- Sepal.Width: 花萼宽度，单位是厘米。\n- Petal.Length: 花瓣长度，单位是厘米。\n- Petal.Width: 花瓣宽度，单位是厘米。\n- Species: 物种/品种，一个因子变量，包含三个水平（levels）：setosa, versicolor, 和 virginica。\n\n\n## beeswarm\n\n### 基础\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbeeswarm(iris$Sepal.Length)\n```\n\n::: {.cell-output-display}\n![最简单的群峰图](beeswarm_files/figure-pdf/unnamed-chunk-3-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n### 翻转坐标轴\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbeeswarm(iris$Sepal.Length, horizontal=TRUE)\n```\n\n::: {.cell-output-display}\n![翻转坐标轴的群峰图](beeswarm_files/figure-pdf/unnamed-chunk-4-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n### 自定义\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbeeswarm(\n  iris$Sepal.Length,\n  pch=16, # 点的形状\n  col='blue', # 点的颜色\n  cex=1.5, # 点的大小\n)\n```\n\n::: {.cell-output-display}\n![自定义的群峰图](beeswarm_files/figure-pdf/unnamed-chunk-5-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n### 分组\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbeeswarm(\n  Sepal.Length ~ Species, \n  data=iris,\n  col=c(\"orange\", \"lightblue\", \"magenta\"),\n  pch = 19, # fill the dots\n#   corral = \"gutter\" # 使用“gutter”方法来处理重叠,边缘裁切\n)\n```\n\n::: {.cell-output-display}\n![分组的群峰图](beeswarm_files/figure-pdf/unnamed-chunk-6-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n更多可以更改的参数见[beeswarm包文档](https://cran.r-project.org/web/packages/beeswarm/beeswarm.pdf)。\n\n\n## ggbeeswarm\n\n`ggbeeswarm`包是`ggplot2`的扩展包，有两个核心函数:\n\n- `geom_beeswarm()`函数创建群峰图。\n- `geom_quasirandom()`函数创建准随机分布图,这是一种介于蜂群图和抖动图之间的混合图。\n\n### 基础\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris,aes(y=Sepal.Length,x='')) +\n  geom_beeswarm()\n```\n\n::: {.cell-output-display}\n![最基本的geom_beeswarm](beeswarm_files/figure-pdf/unnamed-chunk-7-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n### 翻转坐标轴\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris,aes(x=Sepal.Length,y='')) +\n  geom_beeswarm()\n```\n\n::: {.cell-output-display}\n![翻转坐标轴的geom_beeswarm](beeswarm_files/figure-pdf/unnamed-chunk-8-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n### 自定义颜色\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris,aes(y=Sepal.Length,x='')) +\n  geom_beeswarm(color='blue') +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![自定义颜色的geom_beeswarm](beeswarm_files/figure-pdf/unnamed-chunk-9-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n还有更多可以通过“method”参数来控制的群峰图方法,例如`\"center\"`、`\"square\"`、`\"hexagon\"`等。 见[ggbeeswarm包文档](https://cran.r-project.org/web/packages/ggbeeswarm/ggbeeswarm.pdf)。\n\n### 分组\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris,aes(x=Species, y=Sepal.Length, colour=Species)) +\n  geom_beeswarm() + \n  theme(legend.position = \"none\")\n```\n\n::: {.cell-output-display}\n![分组的geom_beeswarm](beeswarm_files/figure-pdf/unnamed-chunk-10-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris,aes(x=Species, y=Sepal.Length, colour=Species)) +\n  geom_beeswarm() +\n  scale_color_manual(values=c(\"#999999\", \"#E69F00\", \"#56B4E9\")) +\n  theme_minimal() + \n  theme(legend.position = \"none\")\n```\n\n::: {.cell-output-display}\n![自定义主题的分组geom_beeswarm](beeswarm_files/figure-pdf/unnamed-chunk-11-1.pdf){fig-pos='H'}\n:::\n:::\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {
      "knitr": [
        "{\"type\":\"list\",\"attributes\":{},\"value\":[]}"
      ]
    },
    "preserve": null,
    "postProcess": false
  }
}