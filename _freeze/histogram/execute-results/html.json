{
  "hash": "7c7fce565e96d56449b341057f543853",
  "result": {
    "engine": "knitr",
    "markdown": "# Histogram {#sec-histogram}\n\n非常简单的数据可视化形式,可以用`base R::hist()`或`ggplot2::geom_histogram()`来实现。\n\n## PKG\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(hrbrthemes) # 主题包\nlibrary(patchwork) # 图形拼接\n```\n:::\n\n\n## ggplot2\n\n### 基本\n\n::: {.cell}\n\n```{.r .cell-code}\ndata = data.frame(value = rnorm(1000))\n\nggplot(data, aes(x = value)) +\n  geom_histogram()\n```\n\n::: {.cell-output-display}\n![最基本的geom_histogram](histogram_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data, aes(x = value)) + \n  geom_histogram(binwidth=0.1, fill=\"#69b3a2\", color=\"#e9ecef\", alpha=0.9) +\n  theme_ipsum()\n```\n\n::: {.cell-output-display}\n![定制的geom_histogram](histogram_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n\n### 分组/镜像 {#sec-mirror-histogram}\n还有用于比较两个变量分布(从0开始)的镜像直方图。\n\n直方图的默认`y = -..count..`，因此可以通过设置`y = -..count..`来实现镜像效果。\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata <- data.frame(\n  var1 = rnorm(100),\n  var2 = rnorm(100, mean = 2)\n)\n\nggplot(data, aes(x = x)) +\n  # 上方图\n  geom_histogram(aes(x = var1, y = ..count..), fill = \"#69b3a2\") +\n  geom_label(aes(x = 4.5, y = 6, label = \"variable1\"), color = \"#69b3a2\") +\n  # 下方图,主要是通过y = -..count..来实现镜像\n  geom_histogram(aes(x = var2, y = -..count..), fill = \"#404080\") +\n  geom_label(aes(x = 4.5, y = -4, label = \"variable2\"), color = \"#404080\") \n```\n\n::: {.cell-output-display}\n![通过y = -..count.. 来绘制镜像直方图](histogram_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n\n密度曲线图默认`y = ..density..`，因此可以通过设置`y = -..density..`来实现镜像效果。\n\n下图,左侧是直方图(y改为密度),右侧是密度曲线图。\n\n\n::: {.cell}\n\n```{.r .cell-code}\np1 <- ggplot(data, aes(x = x)) +\n  # 上方图\n  geom_histogram(aes(x = var1, y = ..density..), fill = \"#69b3a2\") +\n  geom_label(aes(x = 3.5, y = 0.2, label = \"variable1\"), color = \"#69b3a2\") +\n  # 下方图\n  geom_histogram(aes(x = var2, y = -..density..), fill = \"#404080\") +\n  geom_label(aes(x = 3.5, y = -0.2, label = \"variable2\"), color = \"#404080\") \n\np2 <- ggplot(data, aes(x = x)) +\n  # 上方图\n  geom_density(aes(x = var1, y = ..density..), fill = \"#69b3a2\") +\n  geom_label(aes(x = 3.5, y = 0.2, label = \"variable1\"), color = \"#69b3a2\") +\n  # 下方图\n  geom_density(aes(x = var2, y = -..density..), fill = \"#404080\") +\n  geom_label(aes(x = 3.5, y = -0.2, label = \"variable2\"), color = \"#404080\")\n\np1 + p2\n```\n\n::: {.cell-output-display}\n![通过y = -..count.. 来绘制镜像直方图](histogram_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata <- data.frame(\n  type = c(rep(\"variable 1\", 1000), rep(\"variable 2\", 1000)),\n  value = c(rnorm(1000), rnorm(1000, mean = 4))\n)\n\nggplot(data, aes(x = value, fill = type)) +\n  geom_histogram(color = \"#e9ecef\", alpha = 0.6, position = 'identity') +\n  scale_fill_manual(values = c(\"#69b3a2\", \"#404080\")) # 使用自定义颜色\n```\n\n::: {.cell-output-display}\n![通过fill来绘制双色直方图](histogram_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n### 分面\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(x = `Sepal.Length`, fill = `Sepal.Length`)) + \n  geom_histogram() + \n  facet_wrap(~ Species, scale = \"free_x\")\n```\n\n::: {.cell-output-display}\n![facet_wrap分面,scale来控制自由坐标轴](histogram_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n### 边缘图\n\n见 @sec-ggMarginal。\n\n## base R\n\n查看 [r-graph-gallery](https://r-graph-gallery.com/histogram.html)的例子。\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}