{
  "hash": "f4f08d24a5d64508ffd6f83b8348a7e6",
  "result": {
    "engine": "knitr",
    "markdown": "# Color {#sec-color}\n\n::: {.callout-note}\n[好用的调色板查找器](https://r-graph-gallery.com/color-palette-finder)\n\n[更多颜色示例](https://r-graph-gallery.com/ggplot2-color.html)\n:::\n\n\n## `fill` or `color`\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\n\nggplot(mtcars, aes(x=drat)) +\n  geom_density(\n    color=\"purple\", # 边框颜色\n    fill=\"#69b3a2\", # 填充颜色\n    size=2\n  )\n```\n\n::: {.cell-output-display}\n![`fill` or `color` 设置颜色](color_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n:::\n\n\n## Pick one\n\n选择颜色的 5 种方法\n\n### name\n\n最常见的方法是直接调用颜色的名称。\n\nR 提供了大约 657 种颜色名称。可以使用 `colors()` 来获取所有这些颜色名称。\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npar(mar=c(0,0,0,0)) # 去掉图的边距\n\nplot(0, 0, type = \"n\", \n xlim = c(0, 1), ylim = c(0, 1), \n axes = FALSE, xlab = \"\", ylab = \"\") # 创建一个空图\n\nline <- 25 # 行数\ncol <- 5 # 列数\n\nrect(  \n  rep((0:(col - 1)/col),line) ,  \n  sort(rep((0:(line - 1)/line),col),decreasing=T),   \n  rep((1:col/col),line) , \n  sort(rep((1:line/line),col),decreasing=T),  \n  border = \"white\" , \n  col=colors()[seq(1,line*col)]) # 填充颜色\n\n# 颜色名称\ntext(  \n  rep((0:(col - 1)/col),line)+0.1 ,  \n  sort(rep((0:(line - 1)/line),col),decreasing=T)+0.015 , \n  colors()[seq(1,line*col)]  , \n  cex=1)\n```\n\n::: {.cell-output-display}\n![`colors()` 获取所有颜色名称](color_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\n### rgb\n\n`rgb()` 函数允许使用红色、绿色和蓝色的量来构建颜色。\n\n还有一个附加参数可以设置透明度。所有参数的值都在 0 到 1 之间。\n\n`rgb(red, green, blue, alpha)`\n\n\n::: {.cell}\n\n```{.r .cell-code}\npar(\n  mfrow = c(2, 3), # 2 行 3 列\n  mar = c(2, 2, 2, 1), # 图的边距\n  oma = c(4, 5, 1, 1)\n) # 图的外边距\n\nline <- 6 # 行数\ncol <- 6 # 列数\nred <- sort(rep(c(0, 0.2, 0.4, 0.6, 0.8, 1), col)) # 红色\ngreen <- rep(c(0, 0.2, 0.4, 0.6, 0.8, 1), line) # 绿色\nnum <- 0 # 计数器\n\nfor (i in seq(0, 1, 0.2)) {\n  num <- num + 1 # 计数器加 1\n  plot(\n    0,\n    0,\n    type = \"n\",\n    xlim = c(0, 1),\n    ylim = c(0, 1),\n    axes = FALSE,\n    xlab = \"\",\n    ylab = \"\"\n  )\n  colors <- rgb(red, green, i, 1) # 构建颜色\n  mtext(\n    paste(\"blue = \", i, sep = \"\"),\n    side = 3,\n    line = 0.15,\n    col = \"blue\",\n    font = 2\n  )\n  rect( # 绘制矩形\n    rep((0:(col - 1) / col), line),\n    sort(rep((0:(line - 1) / line), col), decreasing = T),\n    rep((1:col / col), line),\n    sort(rep((1:line / line), col), decreasing = T),\n    border = \"light gray\",\n    col = colors\n  )\n  axis( # 绘制坐标轴\n    2,\n    at = c(17, 14, 11, 8, 5, 2) / 18 - 0.035,\n    labels = c(\"0\", \"0.2\", \"0.4\", \"0.6\", \"0.8\", \"1\"),\n    tick = F,\n    lty = 6,\n    pos = 0.01\n  )\n  axis( # 绘制坐标轴\n    3,\n    at = c(1.5, 3.5, 5.5, 7.5, 9.5, 11.5) / 12 - 0.045,\n    labels = c(\"0\", \"0.2\", \"0.4\", \"0.6\", \"0.8\", \"1\"),\n    tick = F,\n    pos = -0.15\n  )\n}\n\nmtext(\"Quantity of red\", # 添加文本\n  side = 2, \n  line = 34, \n  col = \"red\", \n  font = 2, \n  at = 1.2\n)\nmtext(\n  \"Quantity of green\", # 添加文本\n  side = 1,\n  line = 3,\n  at = -0.8,\n  col = \"forestgreen\",\n  font = 2\n)\n```\n\n::: {.cell-output-display}\n![`rgb()` 函数允许使用红色、绿色和蓝色的量来构建颜色](color_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# 恢复布局\npar(mfrow = c(1, 1))\n```\n:::\n\n\n### number\n\n也可以通过函数的编号来调用。例如，内置颜色的第 143 个，可以使用 `colors()[143]`。\n\n\n::: {.cell}\n\n```{.r .cell-code}\npar(mar = c(0, 0, 0, 0)) # 去掉图的边距\n\nplot( # 创建一个空图\n  0,\n  0,\n  type = \"n\",\n  xlim = c(0, 1),\n  ylim = c(0, 1),\n  axes = FALSE,\n  xlab = \"\",\n  ylab = \"\"\n) \n\n# 参数\nline <- 31 # 行数\ncol <- 21 # 列数\n\n# 矩形\nrect(\n  rep((0:(col - 1) / col), line),\n  sort(rep((0:(line - 1) / line), col), decreasing = T),\n  rep((1:col / col), line),\n  sort(rep((1:line / line), col), decreasing = T),\n  border = \"light gray\",\n  col = colors()[seq(1, 651)]\n)\n\n# 文本\ntext(\n  rep((0:(col - 1) / col), line) + 0.02,\n  sort(rep((0:(line - 1) / line), col), decreasing = T) + 0.01,\n  seq(1, 651),\n  cex = 0.5\n)\n```\n\n::: {.cell-output-display}\n![`colors()[number]` 调用内置颜色](color_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n### hex\n\n我们都很熟悉， hex 格式是 `#` 开头，后面跟着 6 个十六进制数字。\n\n#000000 表示黑色；#FFFFFF 表示白色。\n\n### function\n\n还可以使用调色板函数来设置颜色。\n\n## 变量颜色\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\n\nggplot(iris, aes(x = Sepal.Length, y = Sepal.Width, color = Species)) + \n  geom_point(size = 6)\n```\n\n::: {.cell-output-display}\n![把变量映射到颜色](color_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}