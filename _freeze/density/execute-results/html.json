{
  "hash": "1bd1881eb06fdc9bd8b3ff97f680657c",
  "result": {
    "engine": "knitr",
    "markdown": "# Density {#sec-density}\n\n核密度曲线图其实是一个平滑的直方图，曲线下面积是1。\n\n通过`geom_density()`函数可以绘制核密度曲线图。\n\n## PKG\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(geomtextpath) # 添加文本路径\nlibrary(hrbrthemes) # theme_ipsum主题\n```\n:::\n\n\n## 单组\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(x = Sepal.Length)) + \n  geom_density(fill=\"#69b3a2\", alpha=0.8) # 可选主题 theme_ipsum()\n```\n\n::: {.cell-output-display}\n![基本的geom_density](density_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\n## 多组\n\n### 镜像\n\n镜像密度曲线图见 @sec-mirror-histogram\n\n### 分组和分面\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(x = Sepal.Length, fill = Species), ) + \n  geom_density(alpha=0.8)\n```\n\n::: {.cell-output-display}\n![分组](density_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(x = Sepal.Length, fill = Species)) + \n  geom_density(alpha=0.8) + \n  facet_wrap(~ Species) + \n  theme(legend.position = \"none\")\n```\n\n::: {.cell-output-display}\n![分面](density_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n### 山脊图\n\n分面不如山脊图好看，见 [@sec-ridgeline]\n\n### 堆叠\n\n通过position=\"fill\"绘制堆叠密度图，可以看到每个组的比例\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=diamonds, aes(x=price, group=cut, fill=cut)) +\n    geom_density(adjust=1.5, position=\"fill\") +\n    theme_ipsum()\n```\n\n::: {.cell-output-display}\n![堆叠密度图](density_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n## 注释/标签\n还可以使用annot数据框来添加注释，下面的例子中，我们在鸢尾花的密度曲线上添加了每个物种的名称注释。\n\n### geom_text\n\n\n::: {.cell}\n\n```{.r .cell-code}\nannot <- data.frame(\n  Species = c(\"setosa\", \"versicolor\", \"virginica\"),\n  x = c(5.2, 5.5, 6.4),\n  y = c(1.2, 0.8, 0.8)\n)\n\nggplot(iris, aes(x = Sepal.Length, fill = Species)) + \n  geom_density(alpha=0.8)  +\n  geom_text(data=annot, aes(x=x, y=y, label=Species, color=Species), hjust=0, size=4.5) +\n  theme_ipsum() + # 适合印刷的主题\n  theme(legend.position = \"none\") \n```\n\n::: {.cell-output-display}\n![带注释的密度曲线图](density_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n### textdensity\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(x = Sepal.Length, color = Species, label = Species)) +\n  geom_textdensity() + \n  theme_bw() + \n  theme(legend.position = \"none\")\n```\n\n::: {.cell-output-display}\n![geomtextpath 更方便添加标签,但是不能带fill颜色](density_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(x = Sepal.Length, color = Species, label = Species)) +\n  geom_textdensity(vjust = -0.4, hjust = \"ymid\") + # hjust = \"ymid\" 调整标签位置\n  theme_bw() + \n  theme(legend.position = \"none\")\n```\n\n::: {.cell-output-display}\n![geomtextpath 调整标签位置](density_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n**text参数: **\n\n- **size**: 文本大小\n- **fontface**: 字体样式\n- **vjust**: 垂直调整\n- **hjust**: 水平调整\n\nr-graph-gallery 还有一些示例: [geomtextpath](https://r-graph-gallery.com/361-density-plot-with-labels-on-lines.html)\n\n## 边缘图\n\n见 @sec-ggMarginal\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}