{
  "hash": "d3184b93e091d8383853ddc3a4431a94",
  "result": {
    "engine": "knitr",
    "markdown": "# Area {#sec-area}\n\n跟折线图实在是很像, 区别是下面加了阴影(面积)\n\n## PKG\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)    # 加载tidyverse，包含数据处理和可视化常用包\n# library(dygraph)      # 加载dygraph，交互式时间序列可视化\nlibrary(dygraphs)     # 加载dygraphs，dygraph的扩展包\nlibrary(xts)          # 加载xts，处理时间序列数据\nlibrary(lubridate)    # 加载lubridate，处理日期和时间\nlibrary(babynames)   # 加载babynames，包含美国婴儿名字数据\nlibrary(ggpattern)   # 加载ggpattern，ggplot2的扩展包，用于添加图案填充\nlibrary(hrbrthemes)  # 加载hrbrthemes，提供美观的ggplot2主题\n```\n:::\n\n\n\n## `ggplot2`\n\n### 基本\n\n`geom_area()` 是用来绘制面积图的函数。\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\n\n# 创建示例数据\nxValue <- 1:50\nyValue <- cumsum(rnorm(50))\ndata <- data.frame(xValue,yValue)\n\n# 绘制面积图\nggplot(data, aes(x=xValue, y=yValue)) +\n  geom_area()\n```\n\n::: {.cell-output-display}\n![`geom_area()` 绘制面积图](area_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)      # 加载 ggplot2 包用于数据可视化\nlibrary(hrbrthemes)   # 加载 hrbrthemes 包用于美化图表主题\n\n# 创建数据\nxValue <- 1:10\nyValue <- abs(cumsum(rnorm(10)))  # 生成 10 个正的累积正态分布随机数\ndata <- data.frame(xValue, yValue)  # 合并为数据框\n\n# 绘制面积图\nggplot(data, aes(x = xValue, y = yValue)) +           # 指定数据和映射关系\n    geom_area(fill = \"#69b3a2\", alpha = 0.4) +          # 添加半透明的面积\n    geom_line(color = \"#69b3a2\", size = 2) +            # 添加线条\n    geom_point(size = 3, color = \"#69b3a2\") +           # 添加数据点\n    theme_ipsum() +                                     # 应用 hrbrthemes 主题\n    ggtitle(\"Evolution of something\")                   # 添加标题\n```\n\n::: {.cell-output-display}\n![使用 geom_area() 绘制带有线条和点的面积图，并应用 hrbrthemes 主题](area_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n### 对数\n\n\n::: {.cell layout-ncol=\"2\"}\n\n```{.r .cell-code}\n# 加载 ggplot2 包用于数据可视化\nlibrary(ggplot2)\n\n# 创建示例数据框，x 从 10 到 100，y 是 x/2 加上正态分布噪声\ndata <- data.frame(\n    x = seq(10, 100),                       # x 变量，取值从 10 到 100\n    y = seq(10, 100) / 2 + rnorm(90)        # y 变量，x/2 加上正态噪声\n)\n\n# 绘制面积图(原始数据)\nggplot(data, aes(x = x, y = y)) +\n  geom_line() \n\n# 绘制面积图(对数)\nggplot(data, aes(x = x, y = y)) +         # 指定数据和映射关系\n    geom_line() +                           # 添加折线\n    scale_y_log10(                          # y 轴使用对数刻度\n        breaks = c(1, 5, 10, 15, 20, 50, 100),# 指定对数刻度的断点\n        limits = c(1, 100)                    # y 轴范围限制在 1 到 100\n    )\n```\n\n::: {.cell-output-display}\n![原始数据,无对数转换](area_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n\n::: {.cell-output-display}\n![对数坐标轴面积图](area_files/figure-html/unnamed-chunk-4-2.png){width=672}\n:::\n\n使用对数坐标轴绘制面积图，展示 scale_y_log10 的用法\n:::\n\n\n\n### 堆叠\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)      # 加载 ggplot2 包用于数据可视化\nlibrary(dplyr)        # 加载 dplyr 包用于数据处理\n\n# 创建数据\ntime <- as.numeric(rep(seq(1,7), each=7))   # x 轴变量，1 到 7，每个重复 7 次\nvalue <- runif(49, 10, 100)                 # y 轴变量，49 个 10 到 100 之间的随机数\ngroup <- rep(LETTERS[1:7], times=7)         # 分组变量，A 到 G，每组 7 个\ndata <- data.frame(time, value, group)      # 合并为数据框\n\n# 绘制堆叠面积图\nggplot(data, aes(x = time, y = value, fill = group)) +  # 指定数据和映射关系，fill 按 group 分组\n    geom_area()                                         # 绘制堆叠面积\n```\n\n::: {.cell-output-display}\n![使用 geom_area() 绘制堆叠面积图，展示不同分组的面积堆叠效果](area_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n\n控制堆叠顺序:\n\n\n::: {.cell layout-ncol=\"3\"}\n\n```{.r .cell-code}\n# 给定特定顺序：将 group 列转换为因子，并指定分组顺序\ndata$group <- factor(data$group, levels = c(\"B\", \"A\", \"D\", \"E\", \"G\", \"F\", \"C\"))\n\n# 再次绘制面积图，分组顺序按照上面指定的 levels\nggplot(data, aes(x = time, y = value, fill = group)) +\n  geom_area() + \n  theme(legend.position = \"bottom\") # 将图例放在底部, 为了排版\n\n# 也可以按字母顺序排序分组\nmyLevels <- levels(data$group) # 获取当前分组的 levels\ndata$group <- factor(data$group, levels = sort(myLevels)) # 按字母顺序排序\nggplot(data, aes(x = time, y = value, fill = group)) +\n  geom_area() + \n  theme(legend.position = \"bottom\") # 将图例放在底部, 为了排版\n\n# 按某一时间点（如 time = 6）对应的 value 值进行排序\nmyLevels <- data |>\n  dplyr::filter(time == 6) |> # 过滤出 time 等于 6 的数据\n  dplyr::arrange(value) # 按 value 升序排列\ndata$group <- factor(data$group, levels = myLevels$group) # 按 value 排序后的分组顺序设置因子 levels\nggplot(data, aes(x = time, y = value, fill = group)) +\n  geom_area() + \n  theme(legend.position = \"bottom\") # 将图例放在底部, 为了排版\n```\n\n::: {.cell-output-display}\n![指定分组顺序](area_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n\n::: {.cell-output-display}\n![按字母顺序分组](area_files/figure-html/unnamed-chunk-6-2.png){width=672}\n:::\n\n::: {.cell-output-display}\n![按特定时间点的数值排序分组](area_files/figure-html/unnamed-chunk-6-3.png){width=672}\n:::\n\n控制堆叠面积图的分组顺序，并演示如何按指定顺序、字母顺序和特定时间点的数值排序\n:::\n\n\n\n比例堆叠面积图(每组的总和都是100): \n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr)\n\n# 按 time 和 group 分组，计算每组的 value 总和，并计算每组所占比例\ndata <- data |>\n  group_by(time, group) |> # 按时间和分组分组\n  summarise(n = sum(value)) |> # 计算每组的 value 总和，命名为 n\n  mutate(percentage = n / sum(n)) # 计算每组所占比例\n\n# # 注意：如果不用 dplyr 也可以这样计算百分比\n# my_fun <- function(vec){\n#     as.numeric(vec[2]) / sum(data$value[data$time == vec[1]]) * 100   # 计算每一行 value 占该时间点总和的百分比\n# }\n# data$percentage <- apply(data, 1, my_fun)   # 对每一行应用函数，得到百分比\n\n# 绘制比例堆叠面积图\nggplot(data, aes(x = time, y = percentage, fill = group)) +\n  geom_area(alpha = 0.6, size = 1, colour = \"black\") # 绘制面积图，设置透明度、线宽和边框颜色\n```\n\n::: {.cell-output-display}\n![使用新管道 |> 语法绘制比例堆叠面积图，并详细注释每一步数据处理](area_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n再更改一下颜色和样式:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# 加载所需包\nlibrary(viridis)      # 提供高可读性的配色方案\nlibrary(hrbrthemes)   # 提供美观的 ggplot2 主题\n\n# 绘制堆叠面积图\nggplot(data, aes(x = time, y = value, fill = group)) +   # 指定数据和映射关系，fill 按 group 分组\n    geom_area(alpha = 0.6, size = .5, colour = \"white\") + # 绘制面积，设置透明度、边框宽度和颜色\n    scale_fill_viridis(discrete = TRUE) +                 # 使用 viridis 离散色板填充\n    theme_ipsum() +                                       # 应用 hrbrthemes 主题\n    ggtitle(\"The race between ...\")                       # 添加标题\n```\n\n::: {.cell-output-display}\n![使用 viridis 调色板和 hrbrthemes 主题美化堆叠面积图](area_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n\n分面:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(babynames) # 加载 babynames 包，包含美国婴儿名字数据\n\n# 过滤出感兴趣的名字和性别为女性的数据\ndata <- babynames |>\n    dplyr::filter(name %in% c(\"Amanda\", \"Jessica\", \"Patricia\", \"Deborah\", \"Dorothy\", \"Helen\")) |> # 只保留指定名字\n    dplyr::filter(sex == \"F\") # 只保留女性\n\n# 绘制分面堆叠面积图\ndata |>\n    ggplot(aes(x = year, y = n, group = name, fill = name)) +   # year为x轴，n为y轴，按name分组和填充\n        geom_area() +                                           # 绘制面积图\n        scale_fill_viridis(discrete = TRUE) +                   # 使用viridis调色板\n        theme(legend.position = \"none\") +                       # 不显示图例\n        ggtitle(\"Popularity of American names in the previous 30 years\") + # 添加标题\n        theme_ipsum() +                                         # 应用hrbrthemes主题\n        theme(\n            legend.position = \"none\",                             # 再次确保不显示图例\n            panel.spacing = unit(0.1, \"lines\"),                   # 分面之间的间距\n            strip.text.x = element_text(size = 8)                 # 分面标题字体大小\n        ) +\n        facet_wrap(~name, scale = \"free_y\")                     # 按名字分面，y轴自适应\n```\n\n::: {.cell-output-display}\n![使用 facet_wrap 分面展示美国不同女性名字在过去 30 年的流行度变化](area_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n\n### 渐变色\n\n\n::: {.cell layout-ncol=\"2\"}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nlibrary(ggpattern)\nlibrary(hrbrthemes)\n\n# 构造数据\nset.seed(0)\nn = 10\nx = 1:n\ny = x + rnorm(n = n, mean = 100, sd = 20)\ndf = data.frame(xValue = x, yValue = y)\n\n# 基础面积图，填充为浅蓝色，边框为黑色\nggplot(df, aes(x = xValue, y = yValue)) +\n    geom_area(colour = 'black', fill = 'lightblue')\n\n# 使用 ggpattern 的渐变填充，白色到红色\nggplot(df, aes(xValue, yValue)) +\n    geom_area_pattern(\n        data = df,\n        pattern = \"gradient\",         # 使用渐变填充\n        pattern_fill = \"white\",       # 渐变起始色为白色\n        pattern_fill2 = \"red\"         # 渐变结束色为红色\n    )\n\n# 使用 ggpattern 的渐变填充，透明到蓝色\nggplot(df, aes(xValue, yValue)) +\n    geom_area_pattern(\n        data = df,\n        pattern = \"gradient\",         # 使用渐变填充\n        fill = \"#00000010\",           # 主体填充为半透明黑色\n        pattern_fill = \"#00000010\",   # 渐变起始色为半透明黑色\n        pattern_fill2 = \"blue\"        # 渐变结束色为蓝色\n    )\n\n# 使用 ggpattern 的渐变填充，完全透明到品红色，并叠加线条和点\nggplot(df, aes(xValue, yValue)) +\n    geom_area_pattern(\n        data = df,\n        pattern = \"gradient\",         # 使用渐变填充\n        fill = \"#00000000\",           # 主体填充为完全透明\n        pattern_fill = \"#00000000\",   # 渐变起始色为完全透明\n        pattern_fill2 = \"magenta\"     # 渐变结束色为品红色\n    ) +\n    geom_line(data = df, colour = \"black\", linewidth = 0.8) + # 添加黑色线条\n    geom_point(shape = 16, size = 4.5, colour = \"purple\") +   # 添加紫色大点\n    geom_point(shape = 16, size = 2.5, colour = \"white\") +    # 添加白色小点覆盖\n    ggtitle(\"Area chart with a color gradient and line with data points\") + # 添加标题\n    theme_bw() +                                              # 使用黑白主题\n    theme(\n        plot.title = element_text(size = 14),                   # 标题字体大小\n        panel.border = element_blank(),                         # 去除面板边框\n        axis.line.x = element_line(),                           # x轴线\n        text = element_text(size = 12),                         # 全局字体大小\n        axis.ticks = element_blank(),                           # 去除坐标轴刻度\n        axis.text.y = element_text(margin = margin(0, 15, 0, 0, unit = \"pt\")) # y轴文字右侧留白\n    ) +\n    scale_alpha_identity() +                                  # 保持透明度\n    labs(x = \"\", y = \"\")                                      # 去除坐标轴标题\n```\n\n::: {.cell-output-display}\n![浅蓝色填充，黑色边框](area_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n\n::: {.cell-output-display}\n![渐变填充，白色到红色](area_files/figure-html/unnamed-chunk-10-2.png){width=672}\n:::\n\n::: {.cell-output-display}\n![渐变填充，透明到蓝色](area_files/figure-html/unnamed-chunk-10-3.png){width=672}\n:::\n\n::: {.cell-output-display}\n![渐变填充，完全透明到品红色，并叠加线条和点](area_files/figure-html/unnamed-chunk-10-4.png){width=672}\n:::\n\n使用 ggpattern 绘制带有渐变色填充的面积图，演示不同渐变色和叠加线条、点的效果\n:::\n\n\n\n\n## Interactive\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# 加载所需的 R 包\nlibrary(dygraphs)      # 加载 dygraphs 包用于交互式时间序列可视化\nlibrary(xts)           # 加载 xts 包用于数据框与 xts 格式转换\nlibrary(tidyverse)     # 加载 tidyverse 包用于数据处理\nlibrary(lubridate)     # 加载 lubridate 包用于处理日期和时间\n\n# 读取数据\npath = 'https://raw.githubusercontent.com/holtzy/R-graph-gallery/master/DATA/bike.csv'\ndata <- read.table(path, header=TRUE, sep=\",\") |> head(300) # 读取前 300 行数据\n\n# 检查变量类型（可选）\n# str(data)\n\n# 将 datetime 列从因子类型转换为日期时间格式\ndata$datetime <- ymd_hms(data$datetime)\n\n# 创建 xts 对象，dygraphs 需要 xts 格式的数据\ndon <- xts(x = data$count, order.by = data$datetime)\n\n# 绘制交互式面积图\np <- dygraph(don) |>\n    dyOptions(\n        labelsUTC = TRUE,         # 使用 UTC 时间标签\n        fillGraph = TRUE,         # 填充面积\n        fillAlpha = 0.1,          # 填充透明度\n        drawGrid = FALSE,         # 不显示网格线\n        colors = \"#D8AE5A\"        # 设置线条颜色\n    ) |>\n    dyRangeSelector() |>        # 添加范围选择器\n    dyCrosshair(direction = \"vertical\") |> # 添加垂直十字准线\n    dyHighlight(\n        highlightCircleSize = 5,                # 高亮时圆圈大小\n        highlightSeriesBackgroundAlpha = 0.2,   # 高亮系列背景透明度\n        hideOnMouseOut = FALSE                  # 鼠标移出时不隐藏高亮\n    ) |>\n    dyRoller(rollPeriod = 1)   # 添加滚动平均选择器，默认窗口为 1\n\np\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"dygraphs html-widget html-fill-item\" id=\"htmlwidget-06484ed42468d86de4a4\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-06484ed42468d86de4a4\">{\"x\":{\"attrs\":{\"labels\":[\"hour\",\"V1\"],\"legend\":\"auto\",\"retainDateWindow\":false,\"axes\":{\"x\":{\"pixelsPerLabel\":60,\"drawAxis\":true},\"y\":{\"drawAxis\":true}},\"stackedGraph\":false,\"fillGraph\":true,\"fillAlpha\":0.1,\"stepPlot\":false,\"drawPoints\":false,\"pointSize\":1,\"drawGapEdgePoints\":false,\"connectSeparatedPoints\":false,\"strokeWidth\":1,\"strokeBorderColor\":\"white\",\"colors\":[\"#D8AE5A\"],\"colorValue\":0.5,\"colorSaturation\":1,\"includeZero\":false,\"drawAxesAtZero\":false,\"logscale\":false,\"axisTickSize\":3,\"axisLineColor\":\"black\",\"axisLineWidth\":0.3,\"axisLabelColor\":\"black\",\"axisLabelFontSize\":14,\"axisLabelWidth\":60,\"drawGrid\":false,\"gridLineWidth\":0.3,\"rightGap\":5,\"digitsAfterDecimal\":2,\"labelsKMB\":false,\"labelsKMG2\":false,\"labelsUTC\":true,\"maxNumberWidth\":6,\"animatedZooms\":false,\"mobileDisableYTouch\":true,\"disableZoom\":false,\"showRangeSelector\":true,\"rangeSelectorHeight\":40,\"rangeSelectorPlotFillColor\":\" #A7B1C4\",\"rangeSelectorPlotStrokeColor\":\"#808FAB\",\"interactionModel\":\"Dygraph.Interaction.defaultModel\",\"highlightCircleSize\":5,\"highlightSeriesBackgroundAlpha\":0.2,\"highlightSeriesOpts\":[],\"hideOverlayOnMouseOut\":false,\"showRoller\":true,\"rollPeriod\":1},\"scale\":\"hourly\",\"annotations\":[],\"shadings\":[],\"events\":[],\"format\":\"date\",\"data\":[[\"2011-01-01T00:00:00.000Z\",\"2011-01-01T01:00:00.000Z\",\"2011-01-01T02:00:00.000Z\",\"2011-01-01T03:00:00.000Z\",\"2011-01-01T04:00:00.000Z\",\"2011-01-01T05:00:00.000Z\",\"2011-01-01T06:00:00.000Z\",\"2011-01-01T07:00:00.000Z\",\"2011-01-01T08:00:00.000Z\",\"2011-01-01T09:00:00.000Z\",\"2011-01-01T10:00:00.000Z\",\"2011-01-01T11:00:00.000Z\",\"2011-01-01T12:00:00.000Z\",\"2011-01-01T13:00:00.000Z\",\"2011-01-01T14:00:00.000Z\",\"2011-01-01T15:00:00.000Z\",\"2011-01-01T16:00:00.000Z\",\"2011-01-01T17:00:00.000Z\",\"2011-01-01T18:00:00.000Z\",\"2011-01-01T19:00:00.000Z\",\"2011-01-01T20:00:00.000Z\",\"2011-01-01T21:00:00.000Z\",\"2011-01-01T22:00:00.000Z\",\"2011-01-01T23:00:00.000Z\",\"2011-01-02T00:00:00.000Z\",\"2011-01-02T01:00:00.000Z\",\"2011-01-02T02:00:00.000Z\",\"2011-01-02T03:00:00.000Z\",\"2011-01-02T04:00:00.000Z\",\"2011-01-02T06:00:00.000Z\",\"2011-01-02T07:00:00.000Z\",\"2011-01-02T08:00:00.000Z\",\"2011-01-02T09:00:00.000Z\",\"2011-01-02T10:00:00.000Z\",\"2011-01-02T11:00:00.000Z\",\"2011-01-02T12:00:00.000Z\",\"2011-01-02T13:00:00.000Z\",\"2011-01-02T14:00:00.000Z\",\"2011-01-02T15:00:00.000Z\",\"2011-01-02T16:00:00.000Z\",\"2011-01-02T17:00:00.000Z\",\"2011-01-02T18:00:00.000Z\",\"2011-01-02T19:00:00.000Z\",\"2011-01-02T20:00:00.000Z\",\"2011-01-02T21:00:00.000Z\",\"2011-01-02T22:00:00.000Z\",\"2011-01-02T23:00:00.000Z\",\"2011-01-03T00:00:00.000Z\",\"2011-01-03T01:00:00.000Z\",\"2011-01-03T04:00:00.000Z\",\"2011-01-03T05:00:00.000Z\",\"2011-01-03T06:00:00.000Z\",\"2011-01-03T07:00:00.000Z\",\"2011-01-03T08:00:00.000Z\",\"2011-01-03T09:00:00.000Z\",\"2011-01-03T10:00:00.000Z\",\"2011-01-03T11:00:00.000Z\",\"2011-01-03T12:00:00.000Z\",\"2011-01-03T13:00:00.000Z\",\"2011-01-03T14:00:00.000Z\",\"2011-01-03T15:00:00.000Z\",\"2011-01-03T16:00:00.000Z\",\"2011-01-03T17:00:00.000Z\",\"2011-01-03T18:00:00.000Z\",\"2011-01-03T19:00:00.000Z\",\"2011-01-03T20:00:00.000Z\",\"2011-01-03T21:00:00.000Z\",\"2011-01-03T22:00:00.000Z\",\"2011-01-03T23:00:00.000Z\",\"2011-01-04T00:00:00.000Z\",\"2011-01-04T01:00:00.000Z\",\"2011-01-04T02:00:00.000Z\",\"2011-01-04T04:00:00.000Z\",\"2011-01-04T05:00:00.000Z\",\"2011-01-04T06:00:00.000Z\",\"2011-01-04T07:00:00.000Z\",\"2011-01-04T08:00:00.000Z\",\"2011-01-04T09:00:00.000Z\",\"2011-01-04T10:00:00.000Z\",\"2011-01-04T11:00:00.000Z\",\"2011-01-04T12:00:00.000Z\",\"2011-01-04T13:00:00.000Z\",\"2011-01-04T14:00:00.000Z\",\"2011-01-04T15:00:00.000Z\",\"2011-01-04T16:00:00.000Z\",\"2011-01-04T17:00:00.000Z\",\"2011-01-04T18:00:00.000Z\",\"2011-01-04T19:00:00.000Z\",\"2011-01-04T20:00:00.000Z\",\"2011-01-04T21:00:00.000Z\",\"2011-01-04T22:00:00.000Z\",\"2011-01-04T23:00:00.000Z\",\"2011-01-05T00:00:00.000Z\",\"2011-01-05T01:00:00.000Z\",\"2011-01-05T02:00:00.000Z\",\"2011-01-05T04:00:00.000Z\",\"2011-01-05T05:00:00.000Z\",\"2011-01-05T06:00:00.000Z\",\"2011-01-05T07:00:00.000Z\",\"2011-01-05T08:00:00.000Z\",\"2011-01-05T09:00:00.000Z\",\"2011-01-05T10:00:00.000Z\",\"2011-01-05T11:00:00.000Z\",\"2011-01-05T12:00:00.000Z\",\"2011-01-05T13:00:00.000Z\",\"2011-01-05T14:00:00.000Z\",\"2011-01-05T15:00:00.000Z\",\"2011-01-05T16:00:00.000Z\",\"2011-01-05T17:00:00.000Z\",\"2011-01-05T18:00:00.000Z\",\"2011-01-05T19:00:00.000Z\",\"2011-01-05T20:00:00.000Z\",\"2011-01-05T21:00:00.000Z\",\"2011-01-05T22:00:00.000Z\",\"2011-01-05T23:00:00.000Z\",\"2011-01-06T00:00:00.000Z\",\"2011-01-06T01:00:00.000Z\",\"2011-01-06T02:00:00.000Z\",\"2011-01-06T04:00:00.000Z\",\"2011-01-06T05:00:00.000Z\",\"2011-01-06T06:00:00.000Z\",\"2011-01-06T07:00:00.000Z\",\"2011-01-06T08:00:00.000Z\",\"2011-01-06T09:00:00.000Z\",\"2011-01-06T10:00:00.000Z\",\"2011-01-06T11:00:00.000Z\",\"2011-01-06T12:00:00.000Z\",\"2011-01-06T13:00:00.000Z\",\"2011-01-06T14:00:00.000Z\",\"2011-01-06T15:00:00.000Z\",\"2011-01-06T16:00:00.000Z\",\"2011-01-06T17:00:00.000Z\",\"2011-01-06T18:00:00.000Z\",\"2011-01-06T19:00:00.000Z\",\"2011-01-06T20:00:00.000Z\",\"2011-01-06T21:00:00.000Z\",\"2011-01-06T22:00:00.000Z\",\"2011-01-06T23:00:00.000Z\",\"2011-01-07T00:00:00.000Z\",\"2011-01-07T01:00:00.000Z\",\"2011-01-07T02:00:00.000Z\",\"2011-01-07T04:00:00.000Z\",\"2011-01-07T05:00:00.000Z\",\"2011-01-07T06:00:00.000Z\",\"2011-01-07T07:00:00.000Z\",\"2011-01-07T08:00:00.000Z\",\"2011-01-07T09:00:00.000Z\",\"2011-01-07T10:00:00.000Z\",\"2011-01-07T11:00:00.000Z\",\"2011-01-07T12:00:00.000Z\",\"2011-01-07T13:00:00.000Z\",\"2011-01-07T14:00:00.000Z\",\"2011-01-07T15:00:00.000Z\",\"2011-01-07T16:00:00.000Z\",\"2011-01-07T17:00:00.000Z\",\"2011-01-07T18:00:00.000Z\",\"2011-01-07T19:00:00.000Z\",\"2011-01-07T20:00:00.000Z\",\"2011-01-07T21:00:00.000Z\",\"2011-01-07T22:00:00.000Z\",\"2011-01-07T23:00:00.000Z\",\"2011-01-08T00:00:00.000Z\",\"2011-01-08T01:00:00.000Z\",\"2011-01-08T02:00:00.000Z\",\"2011-01-08T03:00:00.000Z\",\"2011-01-08T04:00:00.000Z\",\"2011-01-08T05:00:00.000Z\",\"2011-01-08T06:00:00.000Z\",\"2011-01-08T07:00:00.000Z\",\"2011-01-08T08:00:00.000Z\",\"2011-01-08T09:00:00.000Z\",\"2011-01-08T10:00:00.000Z\",\"2011-01-08T11:00:00.000Z\",\"2011-01-08T12:00:00.000Z\",\"2011-01-08T13:00:00.000Z\",\"2011-01-08T14:00:00.000Z\",\"2011-01-08T15:00:00.000Z\",\"2011-01-08T16:00:00.000Z\",\"2011-01-08T17:00:00.000Z\",\"2011-01-08T18:00:00.000Z\",\"2011-01-08T19:00:00.000Z\",\"2011-01-08T20:00:00.000Z\",\"2011-01-08T21:00:00.000Z\",\"2011-01-08T22:00:00.000Z\",\"2011-01-08T23:00:00.000Z\",\"2011-01-09T00:00:00.000Z\",\"2011-01-09T01:00:00.000Z\",\"2011-01-09T02:00:00.000Z\",\"2011-01-09T03:00:00.000Z\",\"2011-01-09T04:00:00.000Z\",\"2011-01-09T05:00:00.000Z\",\"2011-01-09T06:00:00.000Z\",\"2011-01-09T07:00:00.000Z\",\"2011-01-09T08:00:00.000Z\",\"2011-01-09T09:00:00.000Z\",\"2011-01-09T10:00:00.000Z\",\"2011-01-09T11:00:00.000Z\",\"2011-01-09T12:00:00.000Z\",\"2011-01-09T13:00:00.000Z\",\"2011-01-09T14:00:00.000Z\",\"2011-01-09T15:00:00.000Z\",\"2011-01-09T16:00:00.000Z\",\"2011-01-09T17:00:00.000Z\",\"2011-01-09T18:00:00.000Z\",\"2011-01-09T19:00:00.000Z\",\"2011-01-09T20:00:00.000Z\",\"2011-01-09T21:00:00.000Z\",\"2011-01-09T22:00:00.000Z\",\"2011-01-09T23:00:00.000Z\",\"2011-01-10T00:00:00.000Z\",\"2011-01-10T01:00:00.000Z\",\"2011-01-10T02:00:00.000Z\",\"2011-01-10T03:00:00.000Z\",\"2011-01-10T04:00:00.000Z\",\"2011-01-10T05:00:00.000Z\",\"2011-01-10T06:00:00.000Z\",\"2011-01-10T07:00:00.000Z\",\"2011-01-10T08:00:00.000Z\",\"2011-01-10T09:00:00.000Z\",\"2011-01-10T10:00:00.000Z\",\"2011-01-10T11:00:00.000Z\",\"2011-01-10T12:00:00.000Z\",\"2011-01-10T13:00:00.000Z\",\"2011-01-10T14:00:00.000Z\",\"2011-01-10T15:00:00.000Z\",\"2011-01-10T16:00:00.000Z\",\"2011-01-10T17:00:00.000Z\",\"2011-01-10T18:00:00.000Z\",\"2011-01-10T19:00:00.000Z\",\"2011-01-10T20:00:00.000Z\",\"2011-01-10T21:00:00.000Z\",\"2011-01-10T22:00:00.000Z\",\"2011-01-10T23:00:00.000Z\",\"2011-01-11T00:00:00.000Z\",\"2011-01-11T01:00:00.000Z\",\"2011-01-11T02:00:00.000Z\",\"2011-01-11T05:00:00.000Z\",\"2011-01-11T06:00:00.000Z\",\"2011-01-11T07:00:00.000Z\",\"2011-01-11T08:00:00.000Z\",\"2011-01-11T09:00:00.000Z\",\"2011-01-11T10:00:00.000Z\",\"2011-01-11T11:00:00.000Z\",\"2011-01-11T12:00:00.000Z\",\"2011-01-11T13:00:00.000Z\",\"2011-01-11T14:00:00.000Z\",\"2011-01-11T15:00:00.000Z\",\"2011-01-11T16:00:00.000Z\",\"2011-01-11T17:00:00.000Z\",\"2011-01-11T18:00:00.000Z\",\"2011-01-11T19:00:00.000Z\",\"2011-01-11T20:00:00.000Z\",\"2011-01-11T21:00:00.000Z\",\"2011-01-11T22:00:00.000Z\",\"2011-01-11T23:00:00.000Z\",\"2011-01-12T00:00:00.000Z\",\"2011-01-12T01:00:00.000Z\",\"2011-01-12T02:00:00.000Z\",\"2011-01-12T05:00:00.000Z\",\"2011-01-12T06:00:00.000Z\",\"2011-01-12T07:00:00.000Z\",\"2011-01-12T08:00:00.000Z\",\"2011-01-12T09:00:00.000Z\",\"2011-01-12T10:00:00.000Z\",\"2011-01-12T11:00:00.000Z\",\"2011-01-12T12:00:00.000Z\",\"2011-01-12T13:00:00.000Z\",\"2011-01-12T14:00:00.000Z\",\"2011-01-12T15:00:00.000Z\",\"2011-01-12T16:00:00.000Z\",\"2011-01-12T17:00:00.000Z\",\"2011-01-12T18:00:00.000Z\",\"2011-01-12T19:00:00.000Z\",\"2011-01-12T20:00:00.000Z\",\"2011-01-12T21:00:00.000Z\",\"2011-01-12T22:00:00.000Z\",\"2011-01-12T23:00:00.000Z\",\"2011-01-13T00:00:00.000Z\",\"2011-01-13T01:00:00.000Z\",\"2011-01-13T02:00:00.000Z\",\"2011-01-13T03:00:00.000Z\",\"2011-01-13T04:00:00.000Z\",\"2011-01-13T05:00:00.000Z\",\"2011-01-13T06:00:00.000Z\",\"2011-01-13T07:00:00.000Z\",\"2011-01-13T08:00:00.000Z\",\"2011-01-13T09:00:00.000Z\",\"2011-01-13T10:00:00.000Z\",\"2011-01-13T11:00:00.000Z\",\"2011-01-13T12:00:00.000Z\",\"2011-01-13T13:00:00.000Z\",\"2011-01-13T14:00:00.000Z\",\"2011-01-13T15:00:00.000Z\",\"2011-01-13T16:00:00.000Z\",\"2011-01-13T17:00:00.000Z\",\"2011-01-13T18:00:00.000Z\",\"2011-01-13T19:00:00.000Z\",\"2011-01-13T20:00:00.000Z\",\"2011-01-13T21:00:00.000Z\",\"2011-01-13T22:00:00.000Z\"],[16,40,32,13,1,1,2,3,8,14,36,56,84,94,106,110,93,67,35,37,36,34,28,39,17,17,9,6,3,2,1,8,20,53,70,93,75,59,74,76,65,53,30,22,31,9,8,5,2,1,3,30,64,154,88,44,51,61,61,77,72,76,157,157,110,52,52,20,12,5,2,1,2,4,36,94,179,100,42,57,78,97,63,65,83,212,182,112,54,48,35,11,6,6,2,2,3,33,88,195,115,57,46,79,71,62,62,89,190,169,132,89,43,42,19,11,4,2,1,4,36,95,219,122,45,59,84,67,70,62,86,172,163,112,69,48,52,23,17,7,1,1,5,34,84,210,134,63,67,59,73,50,72,87,187,123,95,51,39,36,15,25,16,16,7,1,5,2,9,15,20,61,62,98,102,95,74,76,69,55,30,28,37,34,22,25,12,11,4,1,1,1,6,10,19,49,49,83,75,72,82,92,62,48,41,38,20,15,6,5,1,3,1,3,3,31,77,188,94,31,30,52,54,47,45,74,178,155,95,74,38,24,18,12,3,3,6,27,99,217,130,54,35,57,52,63,47,76,136,95,51,32,20,29,19,7,6,1,5,16,54,128,81,39,35,55,49,44,49,68,139,137,83,56,57,33,20,7,2,2,3,4,3,28,72,202,139,38,37,52,83,42,60,78,162,144,99,64,40,30]],\"fixedtz\":false,\"tzone\":\"UTC\",\"plugins\":{\"Crosshair\":{\"direction\":\"vertical\"}}},\"evals\":[\"attrs.interactionModel\"],\"jsHooks\":[]}</script>\n```\n\n\n使用 dygraphs 包绘制交互式面积图\n:::\n:::\n\n\n## `Base R`\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# 创建数据框，x 从 1 到 10，y 为 1 到 15 的随机排列\ndata <- data.frame(x=seq(1,10), y=sample(seq(1,15),10))\n\n# 先绘制折线图，type=\"o\" 表示点和线都画，lwd=3 线宽，pch=20 实心圆点\nplot(\n    data, \n    col=rgb(0.2,0.1,0.5,0.9), # 设置颜色为半透明深紫色\n    type=\"o\",                 # o 表示点和线都画\n    lwd=3,                    # 线宽为3\n    xlab=\"\",                  # 不显示x轴标题\n    ylab=\"size\",              # y轴标题为 size\n    pch=20                    # 点的形状为实心圆\n)\n\n# 用 polygon 填充面积\n# c(min(data$x), data$x, max(data$x))：x 轴从最小值到最大值，首尾闭合\n# c(min(data$y), data$y, min(data$y))：y 轴从最小值到最大值，首尾闭合\npolygon(\n    c(min(data$x), data$x, max(data$x)),   # x 坐标，首尾闭合\n    c(min(data$y), data$y, min(data$y)),   # y 坐标，首尾闭合\n    col=rgb(0.2,0.1,0.5,0.2),              # 填充为更透明的紫色\n    border=FALSE                           # 不显示边框\n)\n```\n\n::: {.cell-output-display}\n![使用 Base R 绘制面积图，先绘制折线图，再用 polygon 填充面积](area_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n\n\n## Pearl\n\n\n[![每条线末端有精美标签](./image/line-label.png)](https://r-graph-gallery.com/web-line-chart-with-labels-at-end-of-line.html)\n\n[![折线图和堆叠面积图](./image/line-stack.png)](https://r-graph-gallery.com/web-lineplots-and-area-chart-the-economist.html)\n\n\n[![1976 年至今美国众议院中的政党优势](./image/line-vertical.png)](https://r-graph-gallery.com/web-vertical-line-chart-with-ggplot2.html)\n\n\n[![伦敦不同区域能动物救助的演变](./image/line-area.png)](https://r-graph-gallery.com/web-time-series-and-facetting.html)\n\n\n[![近几年全球消费者信心的演变](./image/line-mult.png)](https://r-graph-gallery.com/web-line-chart-small-multiple-all-group-greyed-out.html)\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"site_libs/htmltools-fill-0.5.8.1/fill.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<script src=\"site_libs/jquery-1.11.1/jquery.min.js\"></script>\n<link href=\"site_libs/dygraphs-1.1.1/dygraph.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/dygraphs-1.1.1/dygraph-combined.js\"></script>\n<script src=\"site_libs/dygraphs-1.1.1/shapes.js\"></script>\n<script src=\"site_libs/moment-2.8.4/moment.js\"></script>\n<script src=\"site_libs/moment-timezone-0.2.5/moment-timezone-with-data.js\"></script>\n<script src=\"site_libs/moment-fquarter-1.0.0/moment-fquarter.min.js\"></script>\n<script src=\"site_libs/dygraphs-binding-1.1.1.6/dygraphs.js\"></script>\n<script src=\"site_libs/Dygraph.Plugins.Crosshair-1.0/crosshair.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}