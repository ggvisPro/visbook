<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>25&nbsp; Circular – 数据可视化探索(从入门到放弃)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./waffle.html" rel="next">
<link href="./dendrogram.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-485d01fc63b59abcd3ee1bf1e8e2748d.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="site_libs/d3-bundle-5.16.0/d3-bundle.min.js"></script>
<script src="site_libs/d3-lasso-0.0.5/d3-lasso.min.js"></script>
<script src="site_libs/save-svg-as-png-1.4.17/save-svg-as-png.min.js"></script>
<script src="site_libs/flatbush-4.4.0/flatbush.min.js"></script>
<link href="site_libs/ggiraphjs-0.8.10/ggiraphjs.min.css" rel="stylesheet">
<script src="site_libs/ggiraphjs-0.8.10/ggiraphjs.min.js"></script>
<script src="site_libs/girafe-binding-0.8.13/girafe.js"></script>
<script src="site_libs/d3-3.5.6/./d3.min.js"></script>
<link href="site_libs/circlepackeR-0.1/./style.css" rel="stylesheet">
<script src="site_libs/circlepackeR-binding-0.0.0.9000/circlepackeR.js"></script>


</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./part-of-a-whole.html">Part of a Whole</a></li><li class="breadcrumb-item"><a href="./circular.html"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Circular</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">数据可视化探索(从入门到放弃)</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quick_start.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">0 Quick start</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./distribution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Distribution</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./beeswarm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Beeswarm</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./histogram.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Histogram</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./boxplot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Boxplot</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./density.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Density</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ridgeline.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Ridgeline</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./violin.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Violin</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./correlation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Correlation</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./scatter.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Scatter</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./heatmap.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Heatmap</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./correlogram.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Correlogram</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./bubble.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Bubble</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./connected-scatter.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Conn-Scatter</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./density2d.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Density 2D</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Ranking</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./bar.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Bar</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./spider.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Spider</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wordcloud.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Wordcloud</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./parallel.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Parallel</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lollipop.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Lollipop</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cir-bar.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Cir-bar</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./table.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Table</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./part-of-a-whole.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Part of a Whole</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./group-bar.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Group bar</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./treemap.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Treemap</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./pie.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Pie</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./donut.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Donut</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dendrogram.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Dendrogram</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./circular.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Circular</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./waffle.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Waffle</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./summary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Summary</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#pkg" id="toc-pkg" class="nav-link active" data-scroll-target="#pkg"><span class="header-section-number">25.1</span> PKG</a></li>
  <li><a href="#one-level" id="toc-one-level" class="nav-link" data-scroll-target="#one-level"><span class="header-section-number">25.2</span> One level</a>
  <ul class="collapse">
  <li><a href="#basic" id="toc-basic" class="nav-link" data-scroll-target="#basic"><span class="header-section-number">25.2.1</span> Basic</a></li>
  <li><a href="#color" id="toc-color" class="nav-link" data-scroll-target="#color"><span class="header-section-number">25.2.2</span> Color</a></li>
  <li><a href="#space" id="toc-space" class="nav-link" data-scroll-target="#space"><span class="header-section-number">25.2.3</span> Space</a></li>
  <li><a href="#interactive" id="toc-interactive" class="nav-link" data-scroll-target="#interactive"><span class="header-section-number">25.2.4</span> Interactive</a></li>
  </ul></li>
  <li><a href="#several-levels" id="toc-several-levels" class="nav-link" data-scroll-target="#several-levels"><span class="header-section-number">25.3</span> Several levels</a>
  <ul class="collapse">
  <li><a href="#ggraph" id="toc-ggraph" class="nav-link" data-scroll-target="#ggraph"><span class="header-section-number">25.3.1</span> <code>ggraph()</code></a></li>
  <li><a href="#type" id="toc-type" class="nav-link" data-scroll-target="#type"><span class="header-section-number">25.3.2</span> type</a></li>
  <li><a href="#color-1" id="toc-color-1" class="nav-link" data-scroll-target="#color-1"><span class="header-section-number">25.3.3</span> color</a></li>
  <li><a href="#label" id="toc-label" class="nav-link" data-scroll-target="#label"><span class="header-section-number">25.3.4</span> label</a></li>
  <li><a href="#hide" id="toc-hide" class="nav-link" data-scroll-target="#hide"><span class="header-section-number">25.3.5</span> Hide</a></li>
  <li><a href="#特定-label" id="toc-特定-label" class="nav-link" data-scroll-target="#特定-label"><span class="header-section-number">25.3.6</span> 特定 label</a></li>
  <li><a href="#可缩放" id="toc-可缩放" class="nav-link" data-scroll-target="#可缩放"><span class="header-section-number">25.3.7</span> 可缩放</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./part-of-a-whole.html">Part of a Whole</a></li><li class="breadcrumb-item"><a href="./circular.html"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Circular</span></a></li></ol></nav>
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span id="sec-circular" class="quarto-section-identifier"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Circular</span></span></h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="pkg" class="level2" data-number="25.1">
<h2 data-number="25.1" class="anchored" data-anchor-id="pkg"><span class="header-section-number">25.1</span> PKG</h2>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(packcircles) <span class="co"># for packing circles</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) <span class="co"># for data manipulation and visualization</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis) <span class="co"># for color palettes</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggiraph) <span class="co"># for interactive plots</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggraph) <span class="co"># for graph visualization</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(igraph) <span class="co"># for graph manipulation</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(circlepackeR) <span class="co"># for interactive circle packing</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># remotes::install_github("jeromefroe/circlepackeR")</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.tree)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="one-level" class="level2" data-number="25.2">
<h2 data-number="25.2" class="anchored" data-anchor-id="one-level"><span class="header-section-number">25.2</span> One level</h2>
<section id="basic" class="level3" data-number="25.2.1">
<h3 data-number="25.2.1" class="anchored" data-anchor-id="basic"><span class="header-section-number">25.2.1</span> Basic</h3>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(packcircles)  <span class="co"># 加载 packcircles 包，用于圆形打包</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)      <span class="co"># 加载 ggplot2 包，用于绘图</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 创建数据框，包含分组名称和对应的数值</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> <span class="fu">paste</span>(<span class="st">"Group"</span>, letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>]),   <span class="co"># 生成 20 个分组名</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">value =</span> <span class="fu">sample</span>(<span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">100</span>), <span class="dv">20</span>)          <span class="co"># 随机生成 20 个 1~100 之间的数值</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 生成圆形打包布局，返回每个圆的中心坐标 (x, y) 和半径 (radius)</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="co"># sizetype='area' 表示半径根据面积成比例分配</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>packing <span class="ot">&lt;-</span> <span class="fu">circleProgressiveLayout</span>(data<span class="sc">$</span>value, <span class="at">sizetype =</span> <span class="st">'area'</span>)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="co"># 将打包信息（中心坐标和半径）合并到原始数据框中</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">cbind</span>(data, packing)</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="co"># 检查半径与数值的关系（可选）</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="co"># plot(data$radius, data$value)</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="co"># 根据每个圆的中心和半径，生成用于绘制圆形的多边形顶点坐标</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a><span class="co"># npoints=50 表示每个圆用 50 个点近似</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>dat.gg <span class="ot">&lt;-</span> <span class="fu">circleLayoutVertices</span>(packing, <span class="at">npoints =</span> <span class="dv">50</span>)</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a><span class="co"># 绘制圆形打包图</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制圆形多边形（气泡）</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_polygon</span>(</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> dat.gg,</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">group =</span> id, <span class="at">fill =</span> <span class="fu">as.factor</span>(id)),</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">"black"</span>, <span class="at">alpha =</span> <span class="fl">0.6</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 在每个圆心添加文本标签，并根据 value 控制字体大小</span></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> data,</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">size =</span> value, <span class="at">label =</span> group)</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>)) <span class="sc">+</span>  <span class="co"># 设置字体大小范围</span></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置主题为无坐标轴、无背景</span></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span>         <span class="co"># 不显示图例</span></span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_equal</span>()                             <span class="co"># 保持 x、y 轴比例相等</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>Circle packing with packcircles</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="color" class="level3" data-number="25.2.2">
<h3 data-number="25.2.2" class="anchored" data-anchor-id="color"><span class="header-section-number">25.2.2</span> Color</h3>
<p>使用自定义调色板（magma）进行圆形打包可视化:</p>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggplot2 绘制圆形打包图，并自定义颜色</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制圆形多边形（气泡），每个圆用不同颜色填充</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_polygon</span>(</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> dat.gg,</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">group =</span> id, <span class="at">fill =</span> <span class="fu">as.factor</span>(id)), <span class="co"># 按 id 分组并填充颜色</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">"black"</span>,    <span class="co"># 圆边界为黑色</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">alpha =</span> <span class="fl">0.6</span>          <span class="co"># 设置透明度</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 使用 viridis 包中的 magma 调色板为每个圆分配颜色</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">magma</span>(<span class="fu">nrow</span>(data))) <span class="sc">+</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 在每个圆心添加文本标签，字体大小与 value 成比例</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> data,</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">size =</span> value, <span class="at">label =</span> group)</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>)) <span class="sc">+</span>  <span class="co"># 设置字体大小范围</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>                            <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span>         <span class="co"># 不显示图例</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_equal</span>()                             <span class="co"># 保持 x、y 轴比例相等</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>使用自定义调色板（magma）进行圆形打包可视化</figcaption>
</figure>
</div>
</div>
</div>
<p>使用渐变色（BuPu 调色板）根据 value 显示圆形打包图:</p>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 首先，将每个分组的 value 添加到 dat.gg 数据框中。</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 由于每个圆形多边形由 51 个点近似（npoints=50，首尾闭合），所以每个 value 需要重复 51 次。</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>dat.gg<span class="sc">$</span>value <span class="ot">&lt;-</span> <span class="fu">rep</span>(data<span class="sc">$</span>value, <span class="at">each =</span> <span class="dv">51</span>)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 绘制圆形打包图</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制圆形多边形（气泡），根据 value 使用渐变色填充</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_polygon</span>(</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> dat.gg,</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">group =</span> id, <span class="at">fill =</span> value),   <span class="co"># 按 value 渐变填充</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">"black"</span>,                      <span class="co"># 边界为黑色</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">alpha =</span> <span class="fl">0.6</span>                            <span class="co"># 设置透明度</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_distiller</span>(<span class="at">palette =</span> <span class="st">"BuPu"</span>, <span class="at">direction =</span> <span class="dv">1</span>) <span class="sc">+</span>  <span class="co"># 使用 BuPu 调色板</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 在每个圆心添加文本标签，字体大小与 value 成比例</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> data,</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">size =</span> value, <span class="at">label =</span> group)</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>)) <span class="sc">+</span>  <span class="co"># 设置字体大小范围</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置主题为无坐标轴、无背景</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span>         <span class="co"># 不显示图例</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_equal</span>()                             <span class="co"># 保持 x、y 轴比例相等</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>使用渐变色（BuPu 调色板）根据 value 显示圆形打包图</figcaption>
</figure>
</div>
</div>
</div>
<p>通过 theme() 函数及其 plot.background() 参数更改背景:</p>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggplot2 绘制圆形打包图，并设置黑色背景和自定义标题</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 绘制圆形多边形（气泡），根据 value 使用渐变色填充</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> dat.gg, </span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(x, y, <span class="at">group =</span> id, <span class="at">fill =</span> value),   <span class="co"># 按 value 渐变填充</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"grey"</span>,                       <span class="co"># 边界为灰色</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="fl">0.6</span>,                           <span class="co"># 设置透明度</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> .<span class="dv">5</span>                              <span class="co"># 边界线宽</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_distiller</span>(<span class="at">palette =</span> <span class="st">"Spectral"</span>, <span class="at">direction =</span> <span class="dv">1</span> ) <span class="sc">+</span>  <span class="co"># 使用 Spectral 调色板</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 在每个圆心添加标签，字体大小与 value 成比例</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label</span>(</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> data, </span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(x, y, <span class="at">size =</span> value, <span class="at">label =</span> group) <span class="co"># 标签内容为分组名</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>)) <span class="sc">+</span> <span class="co"># 设置字体大小范围</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 设置主题为无坐标轴、无背景，并自定义背景和标题颜色</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>()  <span class="sc">+</span> </span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span>,                        <span class="co"># 不显示图例</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"black"</span>),  <span class="co"># 设置背景为黑色</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"white"</span>)       <span class="co"># 标题字体为白色</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_equal</span>() <span class="sc">+</span>                                    <span class="co"># 保持 x、y 轴比例相等</span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"A custom circle packing with</span><span class="sc">\n</span><span class="st">black background"</span>) <span class="co"># 添加标题</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>自定义黑色背景的圆形打包图，使用Spectral调色板和标签</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="space" class="level3" data-number="25.2.3">
<h3 data-number="25.2.3" class="anchored" data-anchor-id="space"><span class="header-section-number">25.2.3</span> Space</h3>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 创建数据框，包含分组名称和对应的数值</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">group =</span> <span class="fu">paste</span>(<span class="st">"Group"</span>, letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>]),</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">value =</span> <span class="fu">sample</span>(<span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">100</span>), <span class="dv">20</span>)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 生成布局</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>packing <span class="ot">&lt;-</span> <span class="fu">circleProgressiveLayout</span>(data<span class="sc">$</span>value, <span class="at">sizetype =</span> <span class="st">'area'</span>)</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>packing<span class="sc">$</span>radius <span class="ot">&lt;-</span> <span class="fl">0.95</span> <span class="sc">*</span> packing<span class="sc">$</span>radius <span class="co"># 让直径小于 1, 留有空隙</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">cbind</span>(data, packing)</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>dat.gg <span class="ot">&lt;-</span> <span class="fu">circleLayoutVertices</span>(packing, <span class="at">npoints =</span> <span class="dv">50</span>)</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggplot2 绘制圆形打包图，采用 viridis 调色板</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制圆形多边形（气泡），每个圆用不同颜色填充</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_polygon</span>(</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> dat.gg,                           <span class="co"># 多边形顶点数据</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">group =</span> id, <span class="at">fill =</span> id),        <span class="co"># 按 id 分组并填充颜色</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">"black"</span>,                        <span class="co"># 边界为黑色</span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">alpha =</span> <span class="fl">0.6</span>                              <span class="co"># 设置透明度</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis</span>() <span class="sc">+</span>                     <span class="co"># 使用 viridis 调色板</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 在每个圆心添加文本标签，字体大小与 value 成比例</span></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> data,                             <span class="co"># 圆心及标签数据</span></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">size =</span> value, <span class="at">label =</span> group),  <span class="co"># 设置圆心坐标、字体大小和标签内容</span></span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="st">"black"</span>                          <span class="co"># 标签字体颜色为黑色</span></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>                             <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span>          <span class="co"># 不显示图例</span></span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_equal</span>()                              <span class="co"># 保持 x、y 轴比例相等</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>使用 viridis 调色板展示圆形打包图</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="interactive" class="level3" data-number="25.2.4">
<h3 data-number="25.2.4" class="anchored" data-anchor-id="interactive"><span class="header-section-number">25.2.4</span> Interactive</h3>
<p>使用 <code>ggiraph::girafe()</code> 函数生成交互式圆形打包图，悬停查看详细信息:</p>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载所需包</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(packcircles)   <span class="co"># 用于圆形打包布局</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)       <span class="co"># 用于绘图</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis)       <span class="co"># 用于配色</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggiraph)       <span class="co"># 用于交互式图形</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 创建数据框，包含分组名称和对应的数值</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> <span class="fu">paste</span>(</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Group_"</span>,</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sample</span>(letters, <span class="dv">70</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>),  <span class="co"># 随机生成 70 个字母</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sample</span>(letters, <span class="dv">70</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>),</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sample</span>(letters, <span class="dv">70</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>),</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">sep =</span> <span class="st">""</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">value =</span> <span class="fu">sample</span>(<span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">70</span>), <span class="dv">70</span>)          <span class="co"># 随机生成 70 个 1~70 之间的数值</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a><span class="co"># 添加文本列，用于气泡悬停时显示详细信息</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>text <span class="ot">&lt;-</span> <span class="fu">paste</span>(</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>    <span class="st">"name: "</span>, data<span class="sc">$</span>group, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>    <span class="st">"value: "</span>, data<span class="sc">$</span>value, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>    <span class="st">"You can add a story here!"</span></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a><span class="co"># 生成圆形打包布局，返回每个圆的中心坐标 (x, y) 和半径 (radius)</span></span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>packing <span class="ot">&lt;-</span> <span class="fu">circleProgressiveLayout</span>(data<span class="sc">$</span>value, <span class="at">sizetype =</span> <span class="st">'area'</span>)</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">cbind</span>(data, packing)</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a><span class="co"># 根据每个圆的中心和半径，生成用于绘制圆形的多边形顶点坐标</span></span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>dat.gg <span class="ot">&lt;-</span> <span class="fu">circleLayoutVertices</span>(packing, <span class="at">npoints =</span> <span class="dv">50</span>)</span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a><span class="co"># 绘制交互式圆形打包图</span></span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制交互式圆形多边形（气泡），可悬停显示 tooltip</span></span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_polygon_interactive</span>(</span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> dat.gg,</span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(</span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a>            x, y, <span class="at">group =</span> id, <span class="at">fill =</span> id,</span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a>            <span class="at">tooltip =</span> data<span class="sc">$</span>text[id],   <span class="co"># 悬停显示的文本</span></span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a>            <span class="at">data_id =</span> id               <span class="co"># 交互用的唯一标识</span></span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">"black"</span>,            <span class="co"># 边界为黑色</span></span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a>        <span class="at">alpha =</span> <span class="fl">0.6</span>                  <span class="co"># 设置透明度</span></span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis</span>() <span class="sc">+</span>         <span class="co"># 使用 viridis 调色板</span></span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 在每个圆心添加文本标签，去掉 "Group_" 前缀</span></span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(</span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> data,</span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">label =</span> <span class="fu">gsub</span>(<span class="st">"Group_"</span>, <span class="st">""</span>, group)),</span>
<span id="cb7-51"><a href="#cb7-51" aria-hidden="true" tabindex="-1"></a>        <span class="at">size =</span> <span class="dv">2</span>,</span>
<span id="cb7-52"><a href="#cb7-52" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="st">"black"</span></span>
<span id="cb7-53"><a href="#cb7-53" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb7-54"><a href="#cb7-54" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>                 <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb7-55"><a href="#cb7-55" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb7-56"><a href="#cb7-56" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">"none"</span>, </span>
<span id="cb7-57"><a href="#cb7-57" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.margin =</span> <span class="fu">unit</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>), <span class="st">"cm"</span>)  <span class="co"># 去除边距</span></span>
<span id="cb7-58"><a href="#cb7-58" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb7-59"><a href="#cb7-59" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_equal</span>()                  <span class="co"># 保持 x、y 轴比例相等</span></span>
<span id="cb7-60"><a href="#cb7-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-61"><a href="#cb7-61" aria-hidden="true" tabindex="-1"></a><span class="co"># 生成交互式图形</span></span>
<span id="cb7-62"><a href="#cb7-62" aria-hidden="true" tabindex="-1"></a><span class="fu">girafe</span>(<span class="at">ggobj =</span> p) <span class="co"># 旧版本用 ggiraph()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="girafe html-widget html-fill-item" id="htmlwidget-62b2a4b6911577ba7c86" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-62b2a4b6911577ba7c86">{"x":{"html":"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' class='ggiraph-svg' role='graphics-document' id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe' viewBox='0 0 504 360'>\n <defs id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_defs'>\n  <clipPath id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_c1'>\n   <rect x='0' y='0' width='504' height='360'/>\n  <\/clipPath>\n  <clipPath id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_c2'>\n   <rect x='69.3' y='0' width='365.4' height='360'/>\n  <\/clipPath>\n <\/defs>\n <g id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_rootg' class='ggiraph-svg-rootg'>\n  <g clip-path='url(#svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_c1)'>\n   <rect x='0' y='0' width='504' height='360' fill='#FFFFFF' fill-opacity='1' stroke='#FFFFFF' stroke-opacity='1' stroke-width='0.75' stroke-linejoin='round' stroke-linecap='round' class='ggiraph-svg-bg'/>\n  <\/g>\n  <g clip-path='url(#svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_c2)'>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e1' points='263.56,177.87 263.44,175.97 263.09,174.10 262.50,172.29 261.69,170.57 260.67,168.96 259.45,167.49 258.07,166.19 256.53,165.07 254.86,164.16 253.09,163.46 251.24,162.98 249.36,162.74 247.45,162.74 245.56,162.98 243.72,163.46 241.95,164.16 240.28,165.07 238.74,166.19 237.36,167.49 236.14,168.96 235.12,170.57 234.31,172.29 233.72,174.10 233.37,175.97 233.25,177.87 233.37,179.77 233.72,181.64 234.31,183.45 235.12,185.17 236.14,186.78 237.36,188.25 238.74,189.55 240.28,190.67 241.95,191.58 243.72,192.28 245.56,192.76 247.45,193.00 249.36,193.00 251.24,192.76 253.09,192.28 254.86,191.58 256.53,190.67 258.07,189.55 259.45,188.25 260.67,186.78 261.69,185.17 262.50,183.45 263.09,181.64 263.44,179.77 263.56,177.87' fill='#440154' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_nnh &amp;lt;br/&amp;gt; value:  29 &amp;lt;br/&amp;gt; You can add a story here!' data-id='1'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e2' points='298.71,177.87 298.58,175.67 298.16,173.50 297.48,171.40 296.54,169.40 295.36,167.54 293.95,165.84 292.34,164.33 290.56,163.03 288.62,161.97 286.57,161.15 284.43,160.60 282.24,160.33 280.03,160.33 277.84,160.60 275.71,161.15 273.65,161.97 271.72,163.03 269.93,164.33 268.33,165.84 266.92,167.54 265.74,169.40 264.80,171.40 264.11,173.50 263.70,175.67 263.56,177.87 263.70,180.07 264.11,182.24 264.80,184.34 265.74,186.34 266.92,188.20 268.33,189.90 269.93,191.41 271.72,192.71 273.65,193.77 275.71,194.59 277.84,195.14 280.03,195.41 282.24,195.41 284.43,195.14 286.57,194.59 288.62,193.77 290.56,192.71 292.34,191.41 293.95,189.90 295.36,188.20 296.54,186.34 297.48,184.34 298.16,182.24 298.58,180.07 298.71,177.87' fill='#46065A' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_npq &amp;lt;br/&amp;gt; value:  39 &amp;lt;br/&amp;gt; You can add a story here!' data-id='2'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e3' points='275.22,201.69 275.12,200.11 274.82,198.56 274.33,197.06 273.66,195.62 272.81,194.29 271.81,193.07 270.65,191.99 269.38,191.06 267.99,190.30 266.52,189.72 264.99,189.32 263.42,189.13 261.84,189.13 260.27,189.32 258.74,189.72 257.27,190.30 255.89,191.06 254.61,191.99 253.46,193.07 252.45,194.29 251.60,195.62 250.93,197.06 250.44,198.56 250.14,200.11 250.04,201.69 250.14,203.27 250.44,204.82 250.93,206.32 251.60,207.75 252.45,209.09 253.46,210.31 254.61,211.39 255.89,212.32 257.27,213.08 258.74,213.66 260.27,214.05 261.84,214.25 263.42,214.25 264.99,214.05 266.52,213.66 267.99,213.08 269.38,212.32 270.65,211.39 271.81,210.31 272.81,209.09 273.66,207.75 274.33,206.32 274.82,204.82 275.12,203.27 275.22,201.69' fill='#460C5F' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_hos &amp;lt;br/&amp;gt; value:  20 &amp;lt;br/&amp;gt; You can add a story here!' data-id='3'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e4' points='250.36,198.33 250.31,197.62 250.18,196.93 249.96,196.26 249.66,195.62 249.28,195.02 248.83,194.47 248.32,193.99 247.74,193.58 247.12,193.23 246.47,192.97 245.78,192.80 245.08,192.71 244.37,192.71 243.67,192.80 242.99,192.97 242.33,193.23 241.71,193.58 241.14,193.99 240.62,194.47 240.17,195.02 239.79,195.62 239.49,196.26 239.28,196.93 239.14,197.62 239.10,198.33 239.14,199.03 239.28,199.73 239.49,200.40 239.79,201.04 240.17,201.64 240.62,202.18 241.14,202.67 241.71,203.08 242.33,203.42 242.99,203.68 243.67,203.86 244.37,203.95 245.08,203.95 245.78,203.86 246.47,203.68 247.12,203.42 247.74,203.08 248.32,202.67 248.83,202.18 249.28,201.64 249.66,201.04 249.96,200.40 250.18,199.73 250.31,199.03 250.36,198.33' fill='#471164' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_seb &amp;lt;br/&amp;gt; value:  4 &amp;lt;br/&amp;gt; You can add a story here!' data-id='4'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e5' points='239.31,195.49 239.20,193.80 238.89,192.14 238.36,190.53 237.64,188.99 236.73,187.56 235.65,186.25 234.42,185.09 233.04,184.10 231.56,183.28 229.98,182.66 228.34,182.24 226.66,182.02 224.96,182.02 223.28,182.24 221.64,182.66 220.06,183.28 218.58,184.10 217.21,185.09 215.97,186.25 214.89,187.56 213.98,188.99 213.26,190.53 212.74,192.14 212.42,193.80 212.31,195.49 212.42,197.19 212.74,198.85 213.26,200.46 213.98,202.00 214.89,203.43 215.97,204.73 217.21,205.90 218.58,206.89 220.06,207.71 221.64,208.33 223.28,208.75 224.96,208.97 226.66,208.97 228.34,208.75 229.98,208.33 231.56,207.71 233.04,206.89 234.42,205.90 235.65,204.73 236.73,203.43 237.64,202.00 238.36,200.46 238.89,198.85 239.20,197.19 239.31,195.49' fill='#481769' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_wro &amp;lt;br/&amp;gt; value:  23 &amp;lt;br/&amp;gt; You can add a story here!' data-id='5'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e6' points='233.26,177.30 233.22,176.69 233.10,176.09 232.91,175.51 232.65,174.95 232.32,174.44 231.93,173.97 231.49,173.55 230.99,173.19 230.46,172.89 229.89,172.67 229.29,172.51 228.69,172.44 228.07,172.44 227.47,172.51 226.87,172.67 226.31,172.89 225.77,173.19 225.27,173.55 224.83,173.97 224.44,174.44 224.11,174.95 223.85,175.51 223.66,176.09 223.54,176.69 223.51,177.30 223.54,177.91 223.66,178.51 223.85,179.10 224.11,179.65 224.44,180.17 224.83,180.64 225.27,181.06 225.77,181.42 226.31,181.71 226.87,181.94 227.47,182.09 228.07,182.17 228.69,182.17 229.29,182.09 229.89,181.94 230.46,181.71 230.99,181.42 231.49,181.06 231.93,180.64 232.32,180.17 232.65,179.65 232.91,179.10 233.10,178.51 233.22,177.91 233.26,177.30' fill='#481B6D' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_mro &amp;lt;br/&amp;gt; value:  3 &amp;lt;br/&amp;gt; You can add a story here!' data-id='6'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e7' points='235.43,169.00 235.40,168.50 235.30,168.01 235.15,167.53 234.94,167.08 234.67,166.66 234.35,166.27 233.99,165.93 233.58,165.64 233.14,165.39 232.68,165.21 232.20,165.09 231.70,165.02 231.20,165.02 230.70,165.09 230.22,165.21 229.75,165.39 229.32,165.64 228.91,165.93 228.55,166.27 228.23,166.66 227.96,167.08 227.75,167.53 227.59,168.01 227.50,168.50 227.47,169.00 227.50,169.49 227.59,169.99 227.75,170.46 227.96,170.91 228.23,171.34 228.55,171.72 228.91,172.06 229.32,172.36 229.75,172.60 230.22,172.78 230.70,172.91 231.20,172.97 231.70,172.97 232.20,172.91 232.68,172.78 233.14,172.60 233.58,172.36 233.99,172.06 234.35,171.72 234.67,171.34 234.94,170.91 235.15,170.46 235.30,169.99 235.40,169.49 235.43,169.00' fill='#482071' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_vcl &amp;lt;br/&amp;gt; value:  2 &amp;lt;br/&amp;gt; You can add a story here!' data-id='7'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e8' points='242.77,160.04 242.73,159.25 242.58,158.47 242.33,157.72 242.00,157.01 241.57,156.34 241.07,155.73 240.49,155.19 239.85,154.73 239.16,154.34 238.43,154.05 237.66,153.86 236.88,153.76 236.09,153.76 235.30,153.86 234.54,154.05 233.80,154.34 233.11,154.73 232.47,155.19 231.89,155.73 231.39,156.34 230.97,157.01 230.63,157.72 230.39,158.47 230.24,159.25 230.19,160.04 230.24,160.83 230.39,161.60 230.63,162.36 230.97,163.07 231.39,163.74 231.89,164.35 232.47,164.89 233.11,165.35 233.80,165.73 234.54,166.02 235.30,166.22 236.09,166.32 236.88,166.32 237.66,166.22 238.43,166.02 239.16,165.73 239.85,165.35 240.49,164.89 241.07,164.35 241.57,163.74 242.00,163.07 242.33,162.36 242.58,161.60 242.73,160.83 242.77,160.04' fill='#482576' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_efq &amp;lt;br/&amp;gt; value:  5 &amp;lt;br/&amp;gt; You can add a story here!' data-id='8'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e9' points='279.44,142.56 279.27,139.87 278.77,137.23 277.94,134.67 276.79,132.23 275.35,129.96 273.63,127.89 271.67,126.05 269.49,124.46 267.13,123.17 264.63,122.18 262.02,121.51 259.35,121.17 256.66,121.17 253.99,121.51 251.38,122.18 248.88,123.17 246.52,124.46 244.34,126.05 242.38,127.89 240.67,129.96 239.22,132.23 238.08,134.67 237.25,137.23 236.74,139.87 236.57,142.56 236.74,145.25 237.25,147.89 238.08,150.45 239.22,152.89 240.67,155.16 242.38,157.23 244.34,159.08 246.52,160.66 248.88,161.96 251.38,162.95 253.99,163.62 256.66,163.95 259.35,163.95 262.02,163.62 264.63,162.95 267.13,161.96 269.49,160.66 271.67,159.08 273.63,157.23 275.35,155.16 276.79,152.89 277.94,150.45 278.77,147.89 279.27,145.25 279.44,142.56' fill='#472A7A' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_hql &amp;lt;br/&amp;gt; value:  58 &amp;lt;br/&amp;gt; You can add a story here!' data-id='9'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e10' points='311.49,147.25 311.36,145.22 310.98,143.23 310.35,141.30 309.49,139.46 308.40,137.75 307.10,136.18 305.62,134.79 303.98,133.60 302.20,132.62 300.31,131.87 298.35,131.37 296.33,131.11 294.30,131.11 292.29,131.37 290.32,131.87 288.43,132.62 286.65,133.60 285.01,134.79 283.53,136.18 282.24,137.75 281.15,139.46 280.28,141.30 279.66,143.23 279.28,145.22 279.15,147.25 279.28,149.28 279.66,151.27 280.28,153.20 281.15,155.04 282.24,156.75 283.53,158.32 285.01,159.71 286.65,160.90 288.43,161.88 290.32,162.63 292.29,163.13 294.30,163.39 296.33,163.39 298.35,163.13 300.31,162.63 302.20,161.88 303.98,160.90 305.62,159.71 307.10,158.32 308.40,156.75 309.49,155.04 310.35,153.20 310.98,151.27 311.36,149.28 311.49,147.25' fill='#472E7C' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_bbz &amp;lt;br/&amp;gt; value:  33 &amp;lt;br/&amp;gt; You can add a story here!' data-id='10'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e11' points='317.98,170.40 317.90,169.12 317.67,167.87 317.27,166.66 316.73,165.51 316.05,164.43 315.23,163.45 314.30,162.58 313.27,161.83 312.16,161.21 310.97,160.75 309.74,160.43 308.47,160.27 307.20,160.27 305.93,160.43 304.70,160.75 303.52,161.21 302.40,161.83 301.37,162.58 300.44,163.45 299.63,164.43 298.94,165.51 298.40,166.66 298.01,167.87 297.77,169.12 297.69,170.40 297.77,171.67 298.01,172.92 298.40,174.13 298.94,175.29 299.63,176.36 300.44,177.34 301.37,178.22 302.40,178.96 303.52,179.58 304.70,180.05 305.93,180.36 307.20,180.52 308.47,180.52 309.74,180.36 310.97,180.05 312.16,179.58 313.27,178.96 314.30,178.22 315.23,177.34 316.05,176.36 316.73,175.29 317.27,174.13 317.67,172.92 317.90,171.67 317.98,170.40' fill='#46337F' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_vrp &amp;lt;br/&amp;gt; value:  13 &amp;lt;br/&amp;gt; You can add a story here!' data-id='11'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e12' points='331.10,200.26 330.94,197.76 330.47,195.31 329.70,192.93 328.63,190.67 327.30,188.56 325.70,186.63 323.88,184.92 321.86,183.45 319.67,182.25 317.34,181.33 314.92,180.71 312.44,180.40 309.95,180.40 307.47,180.71 305.04,181.33 302.72,182.25 300.53,183.45 298.51,184.92 296.69,186.63 295.09,188.56 293.75,190.67 292.69,192.93 291.92,195.31 291.45,197.76 291.29,200.26 291.45,202.75 291.92,205.21 292.69,207.58 293.75,209.85 295.09,211.96 296.69,213.88 298.51,215.59 300.53,217.06 302.72,218.27 305.04,219.19 307.47,219.81 309.95,220.12 312.44,220.12 314.92,219.81 317.34,219.19 319.67,218.27 321.86,217.06 323.88,215.59 325.70,213.88 327.30,211.96 328.63,209.85 329.70,207.58 330.47,205.21 330.94,202.75 331.10,200.26' fill='#453882' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_pow &amp;lt;br/&amp;gt; value:  50 &amp;lt;br/&amp;gt; You can add a story here!' data-id='12'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e13' points='296.95,219.03 296.84,217.27 296.51,215.53 295.96,213.85 295.21,212.25 294.26,210.76 293.14,209.40 291.85,208.19 290.42,207.15 288.87,206.30 287.23,205.65 285.52,205.21 283.76,204.99 281.99,204.99 280.24,205.21 278.53,205.65 276.89,206.30 275.34,207.15 273.91,208.19 272.62,209.40 271.49,210.76 270.55,212.25 269.79,213.85 269.25,215.53 268.92,217.27 268.81,219.03 268.92,220.80 269.25,222.53 269.79,224.21 270.55,225.81 271.49,227.30 272.62,228.66 273.91,229.87 275.34,230.91 276.89,231.76 278.53,232.42 280.24,232.85 281.99,233.08 283.76,233.08 285.52,232.85 287.23,232.42 288.87,231.76 290.42,230.91 291.85,229.87 293.14,228.66 294.26,227.30 295.21,225.81 295.96,224.21 296.51,222.53 296.84,220.80 296.95,219.03' fill='#443C84' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_iel &amp;lt;br/&amp;gt; value:  25 &amp;lt;br/&amp;gt; You can add a story here!' data-id='13'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e14' points='271.17,231.26 271.03,228.92 270.59,226.62 269.86,224.39 268.87,222.27 267.61,220.29 266.11,218.48 264.41,216.87 262.51,215.50 260.45,214.37 258.27,213.50 256.00,212.92 253.68,212.63 251.33,212.63 249.01,212.92 246.74,213.50 244.56,214.37 242.50,215.50 240.60,216.87 238.90,218.48 237.40,220.29 236.15,222.27 235.15,224.39 234.42,226.62 233.98,228.92 233.84,231.26 233.98,233.60 234.42,235.90 235.15,238.13 236.15,240.25 237.40,242.23 238.90,244.04 240.60,245.64 242.50,247.02 244.56,248.15 246.74,249.02 249.01,249.60 251.33,249.89 253.68,249.89 256.00,249.60 258.27,249.02 260.45,248.15 262.51,247.02 264.41,245.64 266.11,244.04 267.61,242.23 268.87,240.25 269.86,238.13 270.59,235.90 271.03,233.60 271.17,231.26' fill='#424086' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_zhv &amp;lt;br/&amp;gt; value:  44 &amp;lt;br/&amp;gt; You can add a story here!' data-id='14'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e15' points='233.90,228.94 233.72,226.03 233.17,223.17 232.27,220.40 231.03,217.76 229.47,215.30 227.61,213.06 225.48,211.06 223.13,209.35 220.57,207.94 217.86,206.87 215.04,206.15 212.15,205.78 209.23,205.78 206.34,206.15 203.52,206.87 200.81,207.94 198.25,209.35 195.90,211.06 193.77,213.06 191.91,215.30 190.35,217.76 189.11,220.40 188.21,223.17 187.66,226.03 187.48,228.94 187.66,231.85 188.21,234.72 189.11,237.49 190.35,240.12 191.91,242.59 193.77,244.83 195.90,246.83 198.25,248.54 200.81,249.94 203.52,251.02 206.34,251.74 209.23,252.11 212.15,252.11 215.04,251.74 217.86,251.02 220.57,249.94 223.13,248.54 225.48,246.83 227.61,244.83 229.47,242.59 231.03,240.12 232.27,237.49 233.17,234.72 233.72,231.85 233.90,228.94' fill='#404588' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_gxc &amp;lt;br/&amp;gt; value:  68 &amp;lt;br/&amp;gt; You can add a story here!' data-id='15'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e16' points='230.35,157.03 230.17,154.23 229.64,151.47 228.78,148.81 227.58,146.27 226.08,143.90 224.29,141.74 222.25,139.82 219.98,138.17 217.52,136.82 214.91,135.78 212.19,135.09 209.41,134.73 206.60,134.73 203.82,135.09 201.10,135.78 198.50,136.82 196.04,138.17 193.77,139.82 191.72,141.74 189.93,143.90 188.43,146.27 187.24,148.81 186.37,151.47 185.84,154.23 185.67,157.03 185.84,159.83 186.37,162.59 187.24,165.25 188.43,167.79 189.93,170.16 191.72,172.32 193.77,174.24 196.04,175.89 198.50,177.24 201.10,178.28 203.82,178.97 206.60,179.33 209.41,179.33 212.19,178.97 214.91,178.28 217.52,177.24 219.98,175.89 222.25,174.24 224.29,172.32 226.08,170.16 227.58,167.79 228.78,165.25 229.64,162.59 230.17,159.83 230.35,157.03' fill='#3F4889' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_jnc &amp;lt;br/&amp;gt; value:  63 &amp;lt;br/&amp;gt; You can add a story here!' data-id='16'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e17' points='243.57,119.99 243.42,117.68 242.99,115.40 242.27,113.20 241.29,111.10 240.05,109.15 238.57,107.36 236.88,105.77 235.00,104.41 232.97,103.29 230.82,102.44 228.57,101.86 226.27,101.57 223.96,101.57 221.66,101.86 219.41,102.44 217.26,103.29 215.22,104.41 213.35,105.77 211.66,107.36 210.18,109.15 208.94,111.10 207.95,113.20 207.24,115.40 206.80,117.68 206.66,119.99 206.80,122.31 207.24,124.58 207.95,126.79 208.94,128.89 210.18,130.84 211.66,132.63 213.35,134.21 215.22,135.58 217.26,136.69 219.41,137.55 221.66,138.12 223.96,138.41 226.27,138.41 228.57,138.12 230.82,137.55 232.97,136.69 235.00,135.58 236.88,134.21 238.57,132.63 240.05,130.84 241.29,128.89 242.27,126.79 242.99,124.58 243.42,122.31 243.57,119.99' fill='#3D4D8A' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_ohn &amp;lt;br/&amp;gt; value:  43 &amp;lt;br/&amp;gt; You can add a story here!' data-id='17'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e18' points='206.84,193.29 206.69,190.87 206.24,188.49 205.49,186.19 204.46,184.00 203.16,181.95 201.61,180.08 199.85,178.42 197.89,177.00 195.76,175.83 193.51,174.94 191.16,174.34 188.76,174.03 186.34,174.03 183.93,174.34 181.59,174.94 179.33,175.83 177.21,177.00 175.25,178.42 173.48,180.08 171.94,181.95 170.64,184.00 169.61,186.19 168.86,188.49 168.40,190.87 168.25,193.29 168.40,195.71 168.86,198.09 169.61,200.39 170.64,202.59 171.94,204.63 173.48,206.50 175.25,208.16 177.21,209.58 179.33,210.75 181.59,211.64 183.93,212.24 186.34,212.55 188.76,212.55 191.16,212.24 193.51,211.64 195.76,210.75 197.89,209.58 199.85,208.16 201.61,206.50 203.16,204.63 204.46,202.59 205.49,200.39 206.24,198.09 206.69,195.71 206.84,193.29' fill='#3B518B' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_cqt &amp;lt;br/&amp;gt; value:  47 &amp;lt;br/&amp;gt; You can add a story here!' data-id='18'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e19' points='283.43,98.15 283.25,95.27 282.71,92.42 281.81,89.67 280.58,87.05 279.03,84.61 277.19,82.38 275.08,80.40 272.74,78.70 270.20,77.31 267.51,76.24 264.71,75.52 261.84,75.16 258.95,75.16 256.08,75.52 253.28,76.24 250.59,77.31 248.05,78.70 245.71,80.40 243.60,82.38 241.76,84.61 240.21,87.05 238.97,89.67 238.08,92.42 237.54,95.27 237.36,98.15 237.54,101.04 238.08,103.88 238.97,106.63 240.21,109.25 241.76,111.69 243.60,113.92 245.71,115.90 248.05,117.60 250.59,119.00 253.28,120.06 256.08,120.78 258.95,121.15 261.84,121.15 264.71,120.78 267.51,120.06 270.20,119.00 272.74,117.60 275.08,115.90 277.19,113.92 279.03,111.69 280.58,109.25 281.81,106.63 282.71,103.88 283.25,101.04 283.43,98.15' fill='#39558C' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_tbf &amp;lt;br/&amp;gt; value:  67 &amp;lt;br/&amp;gt; You can add a story here!' data-id='19'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e20' points='273.48,121.88 273.46,121.52 273.39,121.18 273.28,120.84 273.13,120.52 272.94,120.22 272.72,119.95 272.46,119.71 272.17,119.50 271.86,119.33 271.53,119.20 271.19,119.11 270.84,119.07 270.49,119.07 270.14,119.11 269.80,119.20 269.47,119.33 269.16,119.50 268.87,119.71 268.61,119.95 268.39,120.22 268.20,120.52 268.05,120.84 267.94,121.18 267.87,121.52 267.85,121.88 267.87,122.23 267.94,122.58 268.05,122.91 268.20,123.23 268.39,123.53 268.61,123.80 268.87,124.05 269.16,124.25 269.47,124.42 269.80,124.55 270.14,124.64 270.49,124.69 270.84,124.69 271.19,124.64 271.53,124.55 271.86,124.42 272.17,124.25 272.46,124.05 272.72,123.80 272.94,123.53 273.13,123.23 273.28,122.91 273.39,122.58 273.46,122.23 273.48,121.88' fill='#38598C' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_izi &amp;lt;br/&amp;gt; value:  1 &amp;lt;br/&amp;gt; You can add a story here!' data-id='20'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e21' points='321.52,111.50 321.36,108.98 320.88,106.50 320.10,104.10 319.03,101.81 317.68,99.68 316.07,97.74 314.23,96.01 312.19,94.53 309.97,93.31 307.63,92.38 305.18,91.75 302.68,91.44 300.15,91.44 297.65,91.75 295.20,92.38 292.86,93.31 290.65,94.53 288.60,96.01 286.76,97.74 285.16,99.68 283.80,101.81 282.73,104.10 281.95,106.50 281.47,108.98 281.32,111.50 281.47,114.02 281.95,116.50 282.73,118.90 283.80,121.18 285.16,123.31 286.76,125.26 288.60,126.98 290.65,128.47 292.86,129.68 295.20,130.61 297.65,131.24 300.15,131.56 302.68,131.56 305.18,131.24 307.63,130.61 309.97,129.68 312.19,128.47 314.23,126.98 316.07,125.26 317.68,123.31 319.03,121.18 320.10,118.90 320.88,116.50 321.36,114.02 321.52,111.50' fill='#365D8D' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_rjp &amp;lt;br/&amp;gt; value:  51 &amp;lt;br/&amp;gt; You can add a story here!' data-id='21'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e22' points='341.38,137.75 341.25,135.79 340.89,133.86 340.28,131.99 339.44,130.20 338.39,128.54 337.13,127.03 335.70,125.68 334.10,124.52 332.38,123.58 330.55,122.85 328.64,122.36 326.69,122.11 324.72,122.11 322.77,122.36 320.87,122.85 319.04,123.58 317.31,124.52 315.72,125.68 314.28,127.03 313.03,128.54 311.98,130.20 311.14,131.99 310.53,133.86 310.16,135.79 310.04,137.75 310.16,139.72 310.53,141.65 311.14,143.52 311.98,145.30 313.03,146.97 314.28,148.48 315.72,149.83 317.31,150.99 319.04,151.93 320.87,152.66 322.77,153.15 324.72,153.39 326.69,153.39 328.64,153.15 330.55,152.66 332.38,151.93 334.10,150.99 335.70,149.83 337.13,148.48 338.39,146.97 339.44,145.30 340.28,143.52 340.89,141.65 341.25,139.72 341.38,137.75' fill='#34618D' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_low &amp;lt;br/&amp;gt; value:  31 &amp;lt;br/&amp;gt; You can add a story here!' data-id='22'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e23' points='352.20,169.18 352.06,167.03 351.66,164.92 350.99,162.88 350.08,160.93 348.93,159.12 347.56,157.46 345.99,155.99 344.25,154.72 342.37,153.69 340.37,152.90 338.29,152.36 336.15,152.09 334.00,152.09 331.87,152.36 329.79,152.90 327.79,153.69 325.90,154.72 324.16,155.99 322.60,157.46 321.23,159.12 320.07,160.93 319.16,162.88 318.49,164.92 318.09,167.03 317.96,169.18 318.09,171.32 318.49,173.44 319.16,175.48 320.07,177.43 321.23,179.24 322.60,180.90 324.16,182.37 325.90,183.63 327.79,184.67 329.79,185.46 331.87,185.99 334.00,186.26 336.15,186.26 338.29,185.99 340.37,185.46 342.37,184.67 344.25,183.63 345.99,182.37 347.56,180.90 348.93,179.24 350.08,177.43 350.99,175.48 351.66,173.44 352.06,171.32 352.20,169.18' fill='#32648E' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_pay &amp;lt;br/&amp;gt; value:  37 &amp;lt;br/&amp;gt; You can add a story here!' data-id='23'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e24' points='371.98,203.02 371.82,200.45 371.34,197.92 370.54,195.47 369.45,193.15 368.07,190.97 366.43,188.99 364.55,187.23 362.47,185.72 360.22,184.48 357.82,183.53 355.33,182.89 352.78,182.57 350.21,182.57 347.65,182.89 345.16,183.53 342.77,184.48 340.51,185.72 338.43,187.23 336.56,188.99 334.92,190.97 333.54,193.15 332.44,195.47 331.65,197.92 331.16,200.45 331.00,203.02 331.16,205.58 331.65,208.11 332.44,210.56 333.54,212.89 334.92,215.06 336.56,217.04 338.43,218.80 340.51,220.32 342.77,221.56 345.16,222.50 347.65,223.14 350.21,223.47 352.78,223.47 355.33,223.14 357.82,222.50 360.22,221.56 362.47,220.32 364.55,218.80 366.43,217.04 368.07,215.06 369.45,212.89 370.54,210.56 371.34,208.11 371.82,205.58 371.98,203.02' fill='#31688E' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_cfb &amp;lt;br/&amp;gt; value:  53 &amp;lt;br/&amp;gt; You can add a story here!' data-id='24'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e25' points='333.32,242.67 333.14,239.85 332.61,237.07 331.74,234.39 330.53,231.83 329.02,229.44 327.22,227.26 325.15,225.33 322.87,223.66 320.39,222.30 317.76,221.26 315.02,220.56 312.22,220.20 309.39,220.20 306.58,220.56 303.84,221.26 301.22,222.30 298.74,223.66 296.45,225.33 294.39,227.26 292.59,229.44 291.07,231.83 289.87,234.39 288.99,237.07 288.46,239.85 288.29,242.67 288.46,245.50 288.99,248.27 289.87,250.96 291.07,253.52 292.59,255.91 294.39,258.09 296.45,260.02 298.74,261.69 301.22,263.05 303.84,264.09 306.58,264.79 309.39,265.15 312.22,265.15 315.02,264.79 317.76,264.09 320.39,263.05 322.87,261.69 325.15,260.02 327.22,258.09 329.02,255.91 330.53,253.52 331.74,250.96 332.61,248.27 333.14,245.50 333.32,242.67' fill='#2F6C8E' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_noi &amp;lt;br/&amp;gt; value:  64 &amp;lt;br/&amp;gt; You can add a story here!' data-id='25'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e26' points='290.41,255.06 290.30,253.23 289.95,251.42 289.39,249.68 288.60,248.01 287.62,246.46 286.45,245.05 285.11,243.79 283.62,242.71 282.01,241.83 280.31,241.15 278.53,240.69 276.71,240.46 274.87,240.46 273.05,240.69 271.27,241.15 269.56,241.83 267.95,242.71 266.47,243.79 265.13,245.05 263.96,246.46 262.97,248.01 262.19,249.68 261.62,251.42 261.28,253.23 261.16,255.06 261.28,256.89 261.62,258.70 262.19,260.44 262.97,262.11 263.96,263.66 265.13,265.07 266.47,266.33 267.95,267.41 269.56,268.29 271.27,268.97 273.05,269.43 274.87,269.66 276.71,269.66 278.53,269.43 280.31,268.97 282.01,268.29 283.62,267.41 285.11,266.33 286.45,265.07 287.62,263.66 288.60,262.11 289.39,260.44 289.95,258.70 290.30,256.89 290.41,255.06' fill='#2E6F8E' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_riw &amp;lt;br/&amp;gt; value:  27 &amp;lt;br/&amp;gt; You can add a story here!' data-id='26'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e27' points='362.84,238.22 362.72,236.36 362.37,234.52 361.79,232.74 361.00,231.05 359.99,229.47 358.80,228.03 357.44,226.75 355.93,225.65 354.29,224.75 352.55,224.06 350.74,223.59 348.88,223.36 347.01,223.36 345.16,223.59 343.34,224.06 341.60,224.75 339.97,225.65 338.45,226.75 337.09,228.03 335.90,229.47 334.89,231.05 334.10,232.74 333.52,234.52 333.17,236.36 333.05,238.22 333.17,240.09 333.52,241.93 334.10,243.70 334.89,245.40 335.90,246.98 337.09,248.42 338.45,249.70 339.97,250.80 341.60,251.70 343.34,252.39 345.16,252.85 347.01,253.09 348.88,253.09 350.74,252.85 352.55,252.39 354.29,251.70 355.93,250.80 357.44,249.70 358.80,248.42 359.99,246.98 361.00,245.40 361.79,243.70 362.37,241.93 362.72,240.09 362.84,238.22' fill='#2C728E' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_fda &amp;lt;br/&amp;gt; value:  28 &amp;lt;br/&amp;gt; You can add a story here!' data-id='27'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e28' points='263.23,266.28 263.09,264.16 262.70,262.08 262.04,260.06 261.14,258.14 260.00,256.35 258.65,254.72 257.10,253.27 255.39,252.02 253.53,251.00 251.56,250.22 249.50,249.69 247.40,249.42 245.28,249.42 243.18,249.69 241.12,250.22 239.15,251.00 237.29,252.02 235.58,253.27 234.03,254.72 232.68,256.35 231.54,258.14 230.64,260.06 229.98,262.08 229.59,264.16 229.45,266.28 229.59,268.39 229.98,270.48 230.64,272.49 231.54,274.41 232.68,276.20 234.03,277.84 235.58,279.29 237.29,280.54 239.15,281.56 241.12,282.34 243.18,282.87 245.28,283.13 247.40,283.13 249.50,282.87 251.56,282.34 253.53,281.56 255.39,280.54 257.10,279.29 258.65,277.84 260.00,276.20 261.14,274.41 262.04,272.49 262.70,270.48 263.09,268.39 263.23,266.28' fill='#2A768E' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_yiv &amp;lt;br/&amp;gt; value:  36 &amp;lt;br/&amp;gt; You can add a story here!' data-id='28'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e29' points='231.49,256.54 231.43,255.61 231.25,254.69 230.96,253.80 230.56,252.95 230.06,252.16 229.47,251.44 228.79,250.80 228.03,250.25 227.21,249.80 226.34,249.46 225.43,249.23 224.51,249.11 223.57,249.11 222.64,249.23 221.74,249.46 220.87,249.80 220.05,250.25 219.29,250.80 218.61,251.44 218.02,252.16 217.51,252.95 217.12,253.80 216.83,254.69 216.65,255.61 216.59,256.54 216.65,257.47 216.83,258.39 217.12,259.28 217.51,260.13 218.02,260.92 218.61,261.64 219.29,262.28 220.05,262.83 220.87,263.28 221.74,263.62 222.64,263.85 223.57,263.97 224.51,263.97 225.43,263.85 226.34,263.62 227.21,263.28 228.03,262.83 228.79,262.28 229.47,261.64 230.06,260.92 230.56,260.13 230.96,259.28 231.25,258.39 231.43,257.47 231.49,256.54' fill='#29798E' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_nqf &amp;lt;br/&amp;gt; value:  7 &amp;lt;br/&amp;gt; You can add a story here!' data-id='29'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e30' points='186.99,166.14 186.91,164.92 186.68,163.71 186.30,162.55 185.78,161.44 185.13,160.41 184.34,159.46 183.45,158.63 182.46,157.91 181.39,157.32 180.25,156.87 179.06,156.56 177.85,156.41 176.63,156.41 175.41,156.56 174.22,156.87 173.09,157.32 172.01,157.91 171.02,158.63 170.13,159.46 169.35,160.41 168.69,161.44 168.17,162.55 167.79,163.71 167.56,164.92 167.49,166.14 167.56,167.36 167.79,168.56 168.17,169.73 168.69,170.83 169.35,171.87 170.13,172.81 171.02,173.65 172.01,174.37 173.09,174.96 174.22,175.41 175.41,175.71 176.63,175.87 177.85,175.87 179.06,175.71 180.25,175.41 181.39,174.96 182.46,174.37 183.45,173.65 184.34,172.81 185.13,171.87 185.78,170.83 186.30,169.73 186.68,168.56 186.91,167.36 186.99,166.14' fill='#287D8E' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_ana &amp;lt;br/&amp;gt; value:  12 &amp;lt;br/&amp;gt; You can add a story here!' data-id='30'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e31' points='187.84,145.14 187.75,143.73 187.49,142.34 187.05,141.00 186.45,139.72 185.69,138.52 184.79,137.43 183.76,136.47 182.62,135.63 181.38,134.95 180.06,134.43 178.69,134.08 177.29,133.90 175.88,133.90 174.47,134.08 173.10,134.43 171.79,134.95 170.55,135.63 169.41,136.47 168.38,137.43 167.48,138.52 166.72,139.72 166.12,141.00 165.68,142.34 165.41,143.73 165.33,145.14 165.41,146.55 165.68,147.94 166.12,149.28 166.72,150.56 167.48,151.76 168.38,152.85 169.41,153.81 170.55,154.65 171.79,155.33 173.10,155.85 174.47,156.20 175.88,156.38 177.29,156.38 178.69,156.20 180.06,155.85 181.38,155.33 182.62,154.65 183.76,153.81 184.79,152.85 185.69,151.76 186.45,150.56 187.05,149.28 187.49,147.94 187.75,146.55 187.84,145.14' fill='#26818E' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_cvf &amp;lt;br/&amp;gt; value:  16 &amp;lt;br/&amp;gt; You can add a story here!' data-id='31'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e32' points='207.56,111.35 207.38,108.42 206.83,105.53 205.92,102.74 204.67,100.08 203.10,97.60 201.22,95.34 199.08,93.33 196.71,91.61 194.14,90.19 191.41,89.11 188.56,88.38 185.65,88.01 182.71,88.01 179.80,88.38 176.96,89.11 174.23,90.19 171.66,91.61 169.28,93.33 167.14,95.34 165.27,97.60 163.69,100.08 162.44,102.74 161.54,105.53 160.99,108.42 160.80,111.35 160.99,114.28 161.54,117.16 162.44,119.95 163.69,122.61 165.27,125.09 167.14,127.35 169.28,129.36 171.66,131.09 174.23,132.50 176.96,133.58 179.80,134.31 182.71,134.68 185.65,134.68 188.56,134.31 191.41,133.58 194.14,132.50 196.71,131.09 199.08,129.36 201.22,127.35 203.10,125.09 204.67,122.61 205.92,119.95 206.83,117.16 207.38,114.28 207.56,111.35' fill='#25848E' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_aep &amp;lt;br/&amp;gt; value:  69 &amp;lt;br/&amp;gt; You can add a story here!' data-id='32'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e33' points='235.34,83.51 235.19,81.12 234.74,78.76 234.00,76.48 232.98,74.31 231.70,72.29 230.17,70.44 228.42,68.80 226.48,67.39 224.38,66.24 222.15,65.35 219.83,64.76 217.45,64.46 215.06,64.46 212.68,64.76 210.36,65.35 208.13,66.24 206.03,67.39 204.09,68.80 202.34,70.44 200.81,72.29 199.53,74.31 198.51,76.48 197.77,78.76 197.32,81.12 197.17,83.51 197.32,85.90 197.77,88.26 198.51,90.54 199.53,92.71 200.81,94.73 202.34,96.58 204.09,98.22 206.03,99.63 208.13,100.78 210.36,101.66 212.68,102.26 215.06,102.56 217.45,102.56 219.83,102.26 222.15,101.66 224.38,100.78 226.48,99.63 228.42,98.22 230.17,96.58 231.70,94.73 232.98,92.71 234.00,90.54 234.74,88.26 235.19,85.90 235.34,83.51' fill='#24878E' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_nxe &amp;lt;br/&amp;gt; value:  46 &amp;lt;br/&amp;gt; You can add a story here!' data-id='33'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e34' points='265.25,58.08 265.09,55.61 264.63,53.18 263.86,50.82 262.81,48.58 261.48,46.50 259.91,44.59 258.10,42.90 256.10,41.44 253.93,40.25 251.63,39.34 249.24,38.72 246.78,38.41 244.31,38.41 241.85,38.72 239.46,39.34 237.16,40.25 234.99,41.44 232.99,42.90 231.18,44.59 229.61,46.50 228.28,48.58 227.23,50.82 226.46,53.18 226.00,55.61 225.84,58.08 226.00,60.55 226.46,62.98 227.23,65.33 228.28,67.57 229.61,69.66 231.18,71.56 232.99,73.26 234.99,74.71 237.16,75.90 239.46,76.81 241.85,77.43 244.31,77.74 246.78,77.74 249.24,77.43 251.63,76.81 253.93,75.90 256.10,74.71 258.10,73.26 259.91,71.56 261.48,69.66 262.81,67.57 263.86,65.33 264.63,62.98 265.09,60.55 265.25,58.08' fill='#228B8D' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_uvr &amp;lt;br/&amp;gt; value:  49 &amp;lt;br/&amp;gt; You can add a story here!' data-id='34'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e35' points='364.10,145.67 364.01,144.17 363.73,142.70 363.26,141.27 362.62,139.92 361.82,138.65 360.87,137.49 359.77,136.47 358.56,135.59 357.25,134.86 355.85,134.31 354.40,133.94 352.91,133.75 351.41,133.75 349.92,133.94 348.47,134.31 347.08,134.86 345.76,135.59 344.55,136.47 343.46,137.49 342.50,138.65 341.70,139.92 341.06,141.27 340.60,142.70 340.31,144.17 340.22,145.67 340.31,147.17 340.60,148.64 341.06,150.06 341.70,151.42 342.50,152.69 343.46,153.84 344.55,154.87 345.76,155.75 347.08,156.47 348.47,157.03 349.92,157.40 351.41,157.59 352.91,157.59 354.40,157.40 355.85,157.03 357.25,156.47 358.56,155.75 359.77,154.87 360.87,153.84 361.82,152.69 362.62,151.42 363.26,150.06 363.73,148.64 364.01,147.17 364.10,145.67' fill='#218F8D' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_keq &amp;lt;br/&amp;gt; value:  18 &amp;lt;br/&amp;gt; You can add a story here!' data-id='35'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e36' points='398.37,168.96 398.20,166.23 397.69,163.54 396.84,160.94 395.68,158.46 394.21,156.15 392.46,154.04 390.47,152.17 388.25,150.56 385.85,149.24 383.31,148.23 380.66,147.55 377.94,147.21 375.20,147.21 372.49,147.55 369.83,148.23 367.29,149.24 364.89,150.56 362.67,152.17 360.68,154.04 358.93,156.15 357.47,158.46 356.30,160.94 355.45,163.54 354.94,166.23 354.77,168.96 354.94,171.70 355.45,174.39 356.30,176.99 357.47,179.47 358.93,181.78 360.68,183.89 362.67,185.76 364.89,187.37 367.29,188.69 369.83,189.70 372.49,190.38 375.20,190.72 377.94,190.72 380.66,190.38 383.31,189.70 385.85,188.69 388.25,187.37 390.47,185.76 392.46,183.89 394.21,181.78 395.68,179.47 396.84,176.99 397.69,174.39 398.20,171.70 398.37,168.96' fill='#20928C' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_hvo &amp;lt;br/&amp;gt; value:  60 &amp;lt;br/&amp;gt; You can add a story here!' data-id='36'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e37' points='218.38,264.93 218.27,263.28 217.96,261.65 217.45,260.07 216.74,258.57 215.85,257.17 214.80,255.90 213.59,254.76 212.25,253.79 210.80,252.99 209.25,252.38 207.65,251.97 206.00,251.76 204.35,251.76 202.70,251.97 201.10,252.38 199.55,252.99 198.10,253.79 196.76,254.76 195.55,255.90 194.49,257.17 193.61,258.57 192.90,260.07 192.39,261.65 192.08,263.28 191.97,264.93 192.08,266.59 192.39,268.22 192.90,269.79 193.61,271.29 194.49,272.69 195.55,273.97 196.76,275.11 198.10,276.08 199.55,276.88 201.10,277.49 202.70,277.90 204.35,278.11 206.00,278.11 207.65,277.90 209.25,277.49 210.80,276.88 212.25,276.08 213.59,275.11 214.80,273.97 215.85,272.69 216.74,271.29 217.45,269.79 217.96,268.22 218.27,266.59 218.38,264.93' fill='#1F958B' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_dgx &amp;lt;br/&amp;gt; value:  22 &amp;lt;br/&amp;gt; You can add a story here!' data-id='37'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e38' points='194.32,252.52 194.15,249.90 193.66,247.33 192.85,244.83 191.73,242.46 190.33,240.25 188.66,238.23 186.75,236.44 184.63,234.89 182.33,233.63 179.89,232.67 177.35,232.02 174.75,231.69 172.13,231.69 169.53,232.02 166.99,232.67 164.55,233.63 162.26,234.89 160.14,236.44 158.23,238.23 156.56,240.25 155.15,242.46 154.04,244.83 153.23,247.33 152.73,249.90 152.57,252.52 152.73,255.13 153.23,257.71 154.04,260.20 155.15,262.57 156.56,264.79 158.23,266.81 160.14,268.60 162.26,270.14 164.55,271.41 166.99,272.37 169.53,273.02 172.13,273.35 174.75,273.35 177.35,273.02 179.89,272.37 182.33,271.41 184.63,270.14 186.75,268.60 188.66,266.81 190.33,264.79 191.73,262.57 192.85,260.20 193.66,257.71 194.15,255.13 194.32,252.52' fill='#1F998A' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_rqb &amp;lt;br/&amp;gt; value:  55 &amp;lt;br/&amp;gt; You can add a story here!' data-id='38'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e39' points='187.65,225.73 187.60,224.87 187.44,224.02 187.17,223.19 186.80,222.41 186.34,221.68 185.78,221.01 185.15,220.42 184.45,219.91 183.69,219.49 182.89,219.18 182.05,218.96 181.19,218.85 180.33,218.85 179.47,218.96 178.63,219.18 177.82,219.49 177.07,219.91 176.36,220.42 175.73,221.01 175.18,221.68 174.72,222.41 174.35,223.19 174.08,224.02 173.92,224.87 173.86,225.73 173.92,226.60 174.08,227.45 174.35,228.27 174.72,229.05 175.18,229.79 175.73,230.45 176.36,231.04 177.07,231.55 177.82,231.97 178.63,232.29 179.47,232.50 180.33,232.61 181.19,232.61 182.05,232.50 182.89,232.29 183.69,231.97 184.45,231.55 185.15,231.04 185.78,230.45 186.34,229.79 186.80,229.05 187.17,228.27 187.44,227.45 187.60,226.60 187.65,225.73' fill='#1E9C89' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_mko &amp;lt;br/&amp;gt; value:  6 &amp;lt;br/&amp;gt; You can add a story here!' data-id='39'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e40' points='176.33,215.55 176.20,213.61 175.84,211.71 175.24,209.87 174.42,208.12 173.38,206.49 172.15,204.99 170.74,203.67 169.17,202.53 167.47,201.60 165.67,200.89 163.80,200.40 161.88,200.16 159.94,200.16 158.02,200.40 156.15,200.89 154.35,201.60 152.65,202.53 151.08,203.67 149.67,204.99 148.44,206.49 147.40,208.12 146.58,209.87 145.98,211.71 145.62,213.61 145.49,215.55 145.62,217.48 145.98,219.38 146.58,221.22 147.40,222.97 148.44,224.61 149.67,226.10 151.08,227.42 152.65,228.56 154.35,229.50 156.15,230.21 158.02,230.69 159.94,230.93 161.88,230.93 163.80,230.69 165.67,230.21 167.47,229.50 169.17,228.56 170.74,227.42 172.15,226.10 173.38,224.61 174.42,222.97 175.24,221.22 175.84,219.38 176.20,217.48 176.33,215.55' fill='#1FA088' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_jyt &amp;lt;br/&amp;gt; value:  30 &amp;lt;br/&amp;gt; You can add a story here!' data-id='40'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e41' points='349.05,109.89 348.95,108.16 348.62,106.46 348.09,104.81 347.35,103.25 346.42,101.78 345.32,100.45 344.05,99.26 342.65,98.25 341.14,97.41 339.53,96.78 337.85,96.34 336.13,96.13 334.40,96.13 332.68,96.34 331.01,96.78 329.40,97.41 327.88,98.25 326.48,99.26 325.21,100.45 324.11,101.78 323.18,103.25 322.45,104.81 321.91,106.46 321.59,108.16 321.48,109.89 321.59,111.62 321.91,113.32 322.45,114.96 323.18,116.53 324.11,117.99 325.21,119.33 326.48,120.51 327.88,121.53 329.40,122.37 331.01,123.00 332.68,123.43 334.40,123.65 336.13,123.65 337.85,123.43 339.53,123.00 341.14,122.37 342.65,121.53 344.05,120.51 345.32,119.33 346.42,117.99 347.35,116.53 348.09,114.96 348.62,113.32 348.95,111.62 349.05,109.89' fill='#20A386' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_qqb &amp;lt;br/&amp;gt; value:  24 &amp;lt;br/&amp;gt; You can add a story here!' data-id='41'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e42' points='370.48,122.23 370.39,120.69 370.10,119.18 369.62,117.71 368.97,116.32 368.14,115.02 367.16,113.83 366.04,112.78 364.79,111.87 363.44,111.13 362.01,110.56 360.51,110.18 358.99,109.98 357.45,109.98 355.92,110.18 354.42,110.56 352.99,111.13 351.64,111.87 350.40,112.78 349.27,113.83 348.29,115.02 347.46,116.32 346.81,117.71 346.33,119.18 346.04,120.69 345.95,122.23 346.04,123.77 346.33,125.28 346.81,126.74 347.46,128.14 348.29,129.44 349.27,130.63 350.40,131.68 351.64,132.59 352.99,133.33 354.42,133.90 355.92,134.28 357.45,134.47 358.99,134.47 360.51,134.28 362.01,133.90 363.44,133.33 364.79,132.59 366.04,131.68 367.16,130.63 368.14,129.44 368.97,128.14 369.62,126.74 370.10,125.28 370.39,123.77 370.48,122.23' fill='#22A785' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_ndr &amp;lt;br/&amp;gt; value:  19 &amp;lt;br/&amp;gt; You can add a story here!' data-id='42'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e43' points='302.44,81.61 302.35,80.16 302.07,78.73 301.62,77.34 301.00,76.02 300.22,74.79 299.29,73.67 298.23,72.67 297.05,71.81 295.77,71.11 294.42,70.57 293.01,70.21 291.56,70.03 290.10,70.03 288.66,70.21 287.25,70.57 285.89,71.11 284.61,71.81 283.44,72.67 282.37,73.67 281.44,74.79 280.66,76.02 280.04,77.34 279.59,78.73 279.32,80.16 279.23,81.61 279.32,83.07 279.59,84.50 280.04,85.88 280.66,87.20 281.44,88.43 282.37,89.56 283.44,90.55 284.61,91.41 285.89,92.11 287.25,92.65 288.66,93.01 290.10,93.19 291.56,93.19 293.01,93.01 294.42,92.65 295.77,92.11 297.05,91.41 298.23,90.55 299.29,89.56 300.22,88.43 301.00,87.20 301.62,85.88 302.07,84.50 302.35,83.07 302.44,81.61' fill='#24AA83' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_aoy &amp;lt;br/&amp;gt; value:  17 &amp;lt;br/&amp;gt; You can add a story here!' data-id='43'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e44' points='337.87,78.51 337.73,76.28 337.32,74.08 336.62,71.95 335.67,69.93 334.47,68.04 333.05,66.32 331.42,64.79 329.61,63.48 327.65,62.40 325.57,61.58 323.41,61.02 321.19,60.74 318.96,60.74 316.74,61.02 314.57,61.58 312.49,62.40 310.54,63.48 308.73,64.79 307.10,66.32 305.67,68.04 304.47,69.93 303.52,71.95 302.83,74.08 302.41,76.28 302.27,78.51 302.41,80.74 302.83,82.93 303.52,85.06 304.47,87.08 305.67,88.97 307.10,90.69 308.73,92.22 310.54,93.54 312.49,94.61 314.57,95.44 316.74,95.99 318.96,96.27 321.19,96.27 323.41,95.99 325.57,95.44 327.65,94.61 329.61,93.54 331.42,92.22 333.05,90.69 334.47,88.97 335.67,87.08 336.62,85.06 337.32,82.93 337.73,80.74 337.87,78.51' fill='#27AD81' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_zci &amp;lt;br/&amp;gt; value:  40 &amp;lt;br/&amp;gt; You can add a story here!' data-id='44'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e45' points='373.29,85.16 373.15,82.90 372.73,80.68 372.03,78.52 371.07,76.48 369.85,74.57 368.41,72.82 366.76,71.27 364.93,69.94 362.95,68.85 360.84,68.02 358.65,67.46 356.40,67.17 354.14,67.17 351.90,67.46 349.70,68.02 347.60,68.85 345.62,69.94 343.79,71.27 342.14,72.82 340.69,74.57 339.48,76.48 338.52,78.52 337.82,80.68 337.39,82.90 337.25,85.16 337.39,87.42 337.82,89.64 338.52,91.79 339.48,93.84 340.69,95.75 342.14,97.50 343.79,99.04 345.62,100.37 347.60,101.47 349.70,102.30 351.90,102.86 354.14,103.14 356.40,103.14 358.65,102.86 360.84,102.30 362.95,101.47 364.93,100.37 366.76,99.04 368.41,97.50 369.85,95.75 371.07,93.84 372.03,91.79 372.73,89.64 373.15,87.42 373.29,85.16' fill='#2BB17E' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_kgo &amp;lt;br/&amp;gt; value:  41 &amp;lt;br/&amp;gt; You can add a story here!' data-id='45'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e46' points='168.74,187.69 168.64,186.07 168.34,184.48 167.84,182.94 167.15,181.48 166.28,180.11 165.25,178.86 164.07,177.75 162.76,176.80 161.34,176.02 159.83,175.42 158.26,175.02 156.66,174.82 155.04,174.82 153.43,175.02 151.86,175.42 150.35,176.02 148.93,176.80 147.62,177.75 146.44,178.86 145.41,180.11 144.54,181.48 143.85,182.94 143.35,184.48 143.05,186.07 142.95,187.69 143.05,189.31 143.35,190.90 143.85,192.44 144.54,193.90 145.41,195.27 146.44,196.52 147.62,197.63 148.93,198.58 150.35,199.36 151.86,199.96 153.43,200.36 155.04,200.56 156.66,200.56 158.26,200.36 159.83,199.96 161.34,199.36 162.76,198.58 164.07,197.63 165.25,196.52 166.28,195.27 167.15,193.90 167.84,192.44 168.34,190.90 168.64,189.31 168.74,187.69' fill='#30B47C' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_wjm &amp;lt;br/&amp;gt; value:  21 &amp;lt;br/&amp;gt; You can add a story here!' data-id='46'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e47' points='166.71,154.63 166.54,151.87 166.02,149.16 165.16,146.54 163.99,144.04 162.51,141.71 160.75,139.58 158.74,137.69 156.50,136.07 154.09,134.74 151.52,133.72 148.85,133.04 146.11,132.69 143.35,132.69 140.61,133.04 137.93,133.72 135.37,134.74 132.95,136.07 130.71,137.69 128.70,139.58 126.94,141.71 125.46,144.04 124.29,146.54 123.43,149.16 122.92,151.87 122.74,154.63 122.92,157.38 123.43,160.10 124.29,162.72 125.46,165.22 126.94,167.55 128.70,169.68 130.71,171.57 132.95,173.19 135.37,174.52 137.93,175.54 140.61,176.22 143.35,176.57 146.11,176.57 148.85,176.22 151.52,175.54 154.09,174.52 156.50,173.19 158.74,171.57 160.75,169.68 162.51,167.55 163.99,165.22 165.16,162.72 166.02,160.10 166.54,157.38 166.71,154.63' fill='#35B779' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_xus &amp;lt;br/&amp;gt; value:  61 &amp;lt;br/&amp;gt; You can add a story here!' data-id='47'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e48' points='319.93,285.93 319.75,283.06 319.21,280.24 318.32,277.51 317.10,274.91 315.56,272.49 313.73,270.27 311.64,268.31 309.32,266.62 306.80,265.24 304.13,264.18 301.35,263.47 298.50,263.11 295.63,263.11 292.78,263.47 290.00,264.18 287.33,265.24 284.81,266.62 282.49,268.31 280.40,270.27 278.57,272.49 277.03,274.91 275.81,277.51 274.92,280.24 274.38,283.06 274.20,285.93 274.38,288.79 274.92,291.61 275.81,294.34 277.03,296.94 278.57,299.37 280.40,301.58 282.49,303.54 284.81,305.23 287.33,306.62 290.00,307.67 292.78,308.39 295.63,308.75 298.50,308.75 301.35,308.39 304.13,307.67 306.80,306.62 309.32,305.23 311.64,303.54 313.73,301.58 315.56,299.37 317.10,296.94 318.32,294.34 319.21,291.61 319.75,288.79 319.93,285.93' fill='#3BBB75' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_fsf &amp;lt;br/&amp;gt; value:  66 &amp;lt;br/&amp;gt; You can add a story here!' data-id='48'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e49' points='274.24,287.50 274.15,286.18 273.91,284.88 273.50,283.62 272.93,282.42 272.23,281.31 271.38,280.29 270.42,279.38 269.35,278.60 268.19,277.97 266.96,277.48 265.68,277.15 264.37,276.99 263.04,276.99 261.73,277.15 260.45,277.48 259.22,277.97 258.06,278.60 256.99,279.38 256.03,280.29 255.19,281.31 254.48,282.42 253.91,283.62 253.51,284.88 253.26,286.18 253.17,287.50 253.26,288.82 253.51,290.11 253.91,291.37 254.48,292.57 255.19,293.69 256.03,294.70 256.99,295.61 258.06,296.39 259.22,297.02 260.45,297.51 261.73,297.84 263.04,298.01 264.37,298.01 265.68,297.84 266.96,297.51 268.19,297.02 269.35,296.39 270.42,295.61 271.38,294.70 272.23,293.69 272.93,292.57 273.50,291.37 273.91,290.11 274.15,288.82 274.24,287.50' fill='#41BD72' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_phz &amp;lt;br/&amp;gt; value:  14 &amp;lt;br/&amp;gt; You can add a story here!' data-id='49'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e50' points='278.92,69.01 278.85,68.01 278.67,67.03 278.36,66.08 277.93,65.17 277.39,64.33 276.76,63.56 276.03,62.87 275.22,62.29 274.34,61.81 273.41,61.44 272.45,61.19 271.45,61.06 270.45,61.06 269.46,61.19 268.49,61.44 267.57,61.81 266.69,62.29 265.88,62.87 265.15,63.56 264.51,64.33 263.98,65.17 263.55,66.08 263.24,67.03 263.06,68.01 262.99,69.01 263.06,70.01 263.24,70.99 263.55,71.94 263.98,72.84 264.51,73.69 265.15,74.46 265.88,75.14 266.69,75.73 267.57,76.21 268.49,76.58 269.46,76.83 270.45,76.95 271.45,76.95 272.45,76.83 273.41,76.58 274.34,76.21 275.22,75.73 276.03,75.14 276.76,74.46 277.39,73.69 277.93,72.84 278.36,71.94 278.67,70.99 278.85,70.01 278.92,69.01' fill='#48C16E' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_eea &amp;lt;br/&amp;gt; value:  8 &amp;lt;br/&amp;gt; You can add a story here!' data-id='50'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e51' points='303.24,55.73 303.12,53.93 302.78,52.16 302.23,50.45 301.46,48.82 300.49,47.29 299.35,45.90 298.03,44.67 296.57,43.61 294.99,42.74 293.32,42.08 291.57,41.63 289.79,41.41 287.98,41.41 286.20,41.63 284.45,42.08 282.77,42.74 281.19,43.61 279.74,44.67 278.42,45.90 277.27,47.29 276.31,48.82 275.54,50.45 274.98,52.16 274.65,53.93 274.53,55.73 274.65,57.53 274.98,59.30 275.54,61.01 276.31,62.64 277.27,64.16 278.42,65.55 279.74,66.79 281.19,67.85 282.77,68.71 284.45,69.38 286.20,69.83 287.98,70.05 289.79,70.05 291.57,69.83 293.32,69.38 294.99,68.71 296.57,67.85 298.03,66.79 299.35,65.55 300.49,64.16 301.46,62.64 302.23,61.01 302.78,59.30 303.12,57.53 303.24,55.73' fill='#50C46A' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_ihm &amp;lt;br/&amp;gt; value:  26 &amp;lt;br/&amp;gt; You can add a story here!' data-id='51'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e52' points='364.04,274.78 363.86,272.00 363.34,269.26 362.48,266.62 361.30,264.10 359.81,261.75 358.03,259.61 356.00,257.70 353.75,256.06 351.31,254.72 348.72,253.70 346.03,253.01 343.27,252.66 340.48,252.66 337.72,253.01 335.03,253.70 332.44,254.72 330.00,256.06 327.75,257.70 325.72,259.61 323.95,261.75 322.46,264.10 321.27,266.62 320.41,269.26 319.89,272.00 319.71,274.78 319.89,277.55 320.41,280.29 321.27,282.93 322.46,285.45 323.95,287.80 325.72,289.95 327.75,291.85 330.00,293.49 332.44,294.83 335.03,295.85 337.72,296.55 340.48,296.89 343.27,296.89 346.03,296.55 348.72,295.85 351.31,294.83 353.75,293.49 356.00,291.85 358.03,289.95 359.81,287.80 361.30,285.45 362.48,282.93 363.34,280.29 363.86,277.55 364.04,274.78' fill='#57C666' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_pkk &amp;lt;br/&amp;gt; value:  62 &amp;lt;br/&amp;gt; You can add a story here!' data-id='52'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e53' points='350.34,316.26 350.18,313.60 349.68,310.98 348.85,308.44 347.71,306.03 346.28,303.77 344.58,301.72 342.64,299.89 340.48,298.32 338.14,297.04 335.66,296.05 333.08,295.39 330.43,295.06 327.76,295.06 325.11,295.39 322.53,296.05 320.05,297.04 317.71,298.32 315.55,299.89 313.60,301.72 311.90,303.77 310.47,306.03 309.34,308.44 308.51,310.98 308.01,313.60 307.84,316.26 308.01,318.93 308.51,321.55 309.34,324.08 310.47,326.50 311.90,328.75 313.60,330.81 315.55,332.64 317.71,334.20 320.05,335.49 322.53,336.47 325.11,337.14 327.76,337.47 330.43,337.47 333.08,337.14 335.66,336.47 338.14,335.49 340.48,334.20 342.64,332.64 344.58,330.81 346.28,328.75 347.71,326.50 348.85,324.08 349.68,321.55 350.18,318.93 350.34,316.26' fill='#5EC962' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_peh &amp;lt;br/&amp;gt; value:  57 &amp;lt;br/&amp;gt; You can add a story here!' data-id='53'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e54' points='240.73,292.34 240.58,289.98 240.13,287.65 239.40,285.39 238.39,283.25 237.12,281.25 235.61,279.42 233.88,277.80 231.96,276.40 229.89,275.26 227.68,274.39 225.38,273.80 223.03,273.50 220.66,273.50 218.31,273.80 216.01,274.39 213.81,275.26 211.73,276.40 209.81,277.80 208.08,279.42 206.57,281.25 205.30,283.25 204.29,285.39 203.56,287.65 203.12,289.98 202.97,292.34 203.12,294.71 203.56,297.04 204.29,299.29 205.30,301.44 206.57,303.44 208.08,305.27 209.81,306.89 211.73,308.28 213.81,309.43 216.01,310.30 218.31,310.89 220.66,311.19 223.03,311.19 225.38,310.89 227.68,310.30 229.89,309.43 231.96,308.28 233.88,306.89 235.61,305.27 237.12,303.44 238.39,301.44 239.40,299.29 240.13,297.04 240.58,294.71 240.73,292.34' fill='#67CC5C' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_lfq &amp;lt;br/&amp;gt; value:  45 &amp;lt;br/&amp;gt; You can add a story here!' data-id='54'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e55' points='277.45,320.13 277.27,317.18 276.71,314.28 275.80,311.47 274.54,308.79 272.96,306.29 271.07,304.02 268.92,301.99 266.52,300.25 263.93,298.83 261.18,297.74 258.32,297.00 255.38,296.63 252.43,296.63 249.49,297.00 246.63,297.74 243.88,298.83 241.29,300.25 238.90,301.99 236.74,304.02 234.85,306.29 233.27,308.79 232.01,311.47 231.10,314.28 230.54,317.18 230.36,320.13 230.54,323.09 231.10,325.99 232.01,328.80 233.27,331.48 234.85,333.98 236.74,336.25 238.90,338.28 241.29,340.02 243.88,341.44 246.63,342.53 249.49,343.27 252.43,343.64 255.38,343.64 258.32,343.27 261.18,342.53 263.93,341.44 266.52,340.02 268.92,338.28 271.07,336.25 272.96,333.98 274.54,331.48 275.80,328.80 276.71,325.99 277.27,323.09 277.45,320.13' fill='#6FCF57' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_slk &amp;lt;br/&amp;gt; value:  70 &amp;lt;br/&amp;gt; You can add a story here!' data-id='55'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e56' points='390.47,199.76 390.40,198.59 390.18,197.44 389.82,196.33 389.32,195.27 388.69,194.28 387.94,193.37 387.09,192.57 386.14,191.88 385.11,191.32 384.02,190.89 382.89,190.59 381.73,190.45 380.55,190.45 379.39,190.59 378.25,190.89 377.16,191.32 376.14,191.88 375.19,192.57 374.33,193.37 373.59,194.28 372.96,195.27 372.46,196.33 372.10,197.44 371.88,198.59 371.80,199.76 371.88,200.93 372.10,202.08 372.46,203.20 372.96,204.26 373.59,205.25 374.33,206.15 375.19,206.96 376.14,207.64 377.16,208.21 378.25,208.64 379.39,208.93 380.55,209.08 381.73,209.08 382.89,208.93 384.02,208.64 385.11,208.21 386.14,207.64 387.09,206.96 387.94,206.15 388.69,205.25 389.32,204.26 389.82,203.20 390.18,202.08 390.40,200.93 390.47,199.76' fill='#78D152' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_rrp &amp;lt;br/&amp;gt; value:  11 &amp;lt;br/&amp;gt; You can add a story here!' data-id='56'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e57' points='402.93,229.36 402.77,226.81 402.29,224.31 401.50,221.88 400.42,219.58 399.05,217.43 397.43,215.46 395.57,213.72 393.51,212.22 391.27,210.99 388.90,210.05 386.44,209.42 383.91,209.10 381.36,209.10 378.83,209.42 376.36,210.05 373.99,210.99 371.76,212.22 369.70,213.72 367.84,215.46 366.21,217.43 364.85,219.58 363.76,221.88 362.97,224.31 362.50,226.81 362.34,229.36 362.50,231.90 362.97,234.40 363.76,236.83 364.85,239.13 366.21,241.29 367.84,243.25 369.70,244.99 371.76,246.49 373.99,247.72 376.36,248.66 378.83,249.29 381.36,249.61 383.91,249.61 386.44,249.29 388.90,248.66 391.27,247.72 393.51,246.49 395.57,244.99 397.43,243.25 399.05,241.29 400.42,239.13 401.50,236.83 402.29,234.40 402.77,231.90 402.93,229.36' fill='#81D34D' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_buk &amp;lt;br/&amp;gt; value:  52 &amp;lt;br/&amp;gt; You can add a story here!' data-id='57'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e58' points='407.13,271.17 406.96,268.46 406.45,265.80 405.61,263.21 404.45,260.76 403.00,258.46 401.27,256.37 399.29,254.51 397.09,252.92 394.71,251.61 392.19,250.61 389.56,249.94 386.87,249.60 384.15,249.60 381.46,249.94 378.83,250.61 376.30,251.61 373.92,252.92 371.73,254.51 369.75,256.37 368.02,258.46 366.56,260.76 365.41,263.21 364.57,265.80 364.06,268.46 363.89,271.17 364.06,273.88 364.57,276.55 365.41,279.13 366.56,281.59 368.02,283.88 369.75,285.97 371.73,287.83 373.92,289.43 376.30,290.73 378.83,291.73 381.46,292.41 384.15,292.75 386.87,292.75 389.56,292.41 392.19,291.73 394.71,290.73 397.09,289.43 399.29,287.83 401.27,285.97 403.00,283.88 404.45,281.59 405.61,279.13 406.45,276.55 406.96,273.88 407.13,271.17' fill='#8AD647' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_eoe &amp;lt;br/&amp;gt; value:  59 &amp;lt;br/&amp;gt; You can add a story here!' data-id='58'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e59' points='162.67,122.51 162.59,121.14 162.33,119.80 161.91,118.50 161.32,117.26 160.59,116.10 159.72,115.05 158.72,114.11 157.61,113.31 156.41,112.65 155.14,112.14 153.81,111.80 152.46,111.63 151.09,111.63 149.73,111.80 148.40,112.14 147.13,112.65 145.93,113.31 144.82,114.11 143.82,115.05 142.95,116.10 142.22,117.26 141.64,118.50 141.21,119.80 140.96,121.14 140.87,122.51 140.96,123.88 141.21,125.22 141.64,126.52 142.22,127.76 142.95,128.92 143.82,129.97 144.82,130.91 145.93,131.71 147.13,132.37 148.40,132.88 149.73,133.22 151.09,133.39 152.46,133.39 153.81,133.22 155.14,132.88 156.41,132.37 157.61,131.71 158.72,130.91 159.72,129.97 160.59,128.92 161.32,127.76 161.91,126.52 162.33,125.22 162.59,123.88 162.67,122.51' fill='#94D741' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_azm &amp;lt;br/&amp;gt; value:  15 &amp;lt;br/&amp;gt; You can add a story here!' data-id='59'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e60' points='403.83,131.09 403.69,128.91 403.28,126.77 402.61,124.70 401.68,122.73 400.51,120.89 399.13,119.21 397.54,117.72 395.77,116.44 393.87,115.39 391.84,114.59 389.73,114.04 387.57,113.77 385.39,113.77 383.23,114.04 381.12,114.59 379.09,115.39 377.18,116.44 375.42,117.72 373.83,119.21 372.44,120.89 371.27,122.73 370.35,124.70 369.67,126.77 369.26,128.91 369.13,131.09 369.26,133.26 369.67,135.40 370.35,137.47 371.27,139.45 372.44,141.29 373.83,142.96 375.42,144.46 377.18,145.74 379.09,146.79 381.12,147.59 383.23,148.13 385.39,148.40 387.57,148.40 389.73,148.13 391.84,147.59 393.87,146.79 395.77,145.74 397.54,144.46 399.13,142.96 400.51,141.29 401.68,139.45 402.61,137.47 403.28,135.40 403.69,133.26 403.83,131.09' fill='#9DD93B' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_mkb &amp;lt;br/&amp;gt; value:  38 &amp;lt;br/&amp;gt; You can add a story here!' data-id='60'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e61' points='155.25,238.58 155.12,236.50 154.73,234.44 154.08,232.45 153.19,230.56 152.07,228.79 150.74,227.18 149.22,225.75 147.52,224.52 145.69,223.52 143.75,222.75 141.72,222.23 139.65,221.96 137.56,221.96 135.48,222.23 133.46,222.75 131.51,223.52 129.68,224.52 127.99,225.75 126.46,227.18 125.13,228.79 124.01,230.56 123.12,232.45 122.47,234.44 122.08,236.50 121.95,238.58 122.08,240.67 122.47,242.72 123.12,244.71 124.01,246.60 125.13,248.37 126.46,249.98 127.99,251.41 129.68,252.64 131.51,253.65 133.46,254.42 135.48,254.94 137.56,255.20 139.65,255.20 141.72,254.94 143.75,254.42 145.69,253.65 147.52,252.64 149.22,251.41 150.74,249.98 152.07,248.37 153.19,246.60 154.08,244.71 154.73,242.72 155.12,240.67 155.25,238.58' fill='#A7DB35' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_fzy &amp;lt;br/&amp;gt; value:  35 &amp;lt;br/&amp;gt; You can add a story here!' data-id='61'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e62' points='418.09,92.05 417.91,89.21 417.38,86.41 416.50,83.70 415.28,81.12 413.76,78.71 411.94,76.52 409.86,74.57 407.56,72.89 405.06,71.52 402.41,70.47 399.65,69.76 396.82,69.41 393.97,69.41 391.15,69.76 388.39,70.47 385.74,71.52 383.24,72.89 380.93,74.57 378.86,76.52 377.04,78.71 375.51,81.12 374.30,83.70 373.42,86.41 372.89,89.21 372.71,92.05 372.89,94.90 373.42,97.70 374.30,100.41 375.51,102.98 377.04,105.39 378.86,107.59 380.93,109.54 383.24,111.21 385.74,112.58 388.39,113.63 391.15,114.34 393.97,114.70 396.82,114.70 399.65,114.34 402.41,113.63 405.06,112.58 407.56,111.21 409.86,109.54 411.94,107.59 413.76,105.39 415.28,102.98 416.50,100.41 417.38,97.70 417.91,94.90 418.09,92.05' fill='#B1DD2E' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_pvy &amp;lt;br/&amp;gt; value:  65 &amp;lt;br/&amp;gt; You can add a story here!' data-id='62'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e63' points='320.88,53.06 320.81,51.95 320.60,50.85 320.26,49.79 319.78,48.77 319.18,47.83 318.47,46.97 317.66,46.20 316.75,45.55 315.77,45.01 314.73,44.60 313.65,44.32 312.54,44.18 311.42,44.18 310.31,44.32 309.23,44.60 308.19,45.01 307.21,45.55 306.31,46.20 305.49,46.97 304.78,47.83 304.18,48.77 303.71,49.79 303.36,50.85 303.15,51.95 303.08,53.06 303.15,54.18 303.36,55.28 303.71,56.34 304.18,57.35 304.78,58.29 305.49,59.15 306.31,59.92 307.21,60.58 308.19,61.12 309.23,61.53 310.31,61.80 311.42,61.94 312.54,61.94 313.65,61.80 314.73,61.53 315.77,61.12 316.75,60.58 317.66,59.92 318.47,59.15 319.18,58.29 319.78,57.35 320.26,56.34 320.60,55.28 320.81,54.18 320.88,53.06' fill='#BADE28' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_nwb &amp;lt;br/&amp;gt; value:  10 &amp;lt;br/&amp;gt; You can add a story here!' data-id='63'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e64' points='164.65,93.87 164.51,91.58 164.08,89.33 163.37,87.15 162.40,85.08 161.17,83.15 159.71,81.38 158.04,79.81 156.19,78.47 154.18,77.36 152.05,76.52 149.83,75.95 147.56,75.66 145.27,75.66 142.99,75.95 140.77,76.52 138.65,77.36 136.64,78.47 134.78,79.81 133.11,81.38 131.65,83.15 130.43,85.08 129.45,87.15 128.74,89.33 128.32,91.58 128.17,93.87 128.32,96.15 128.74,98.40 129.45,100.58 130.43,102.65 131.65,104.59 133.11,106.35 134.78,107.92 136.64,109.27 138.65,110.37 140.77,111.21 142.99,111.78 145.27,112.07 147.56,112.07 149.83,111.78 152.05,111.21 154.18,110.37 156.19,109.27 158.04,107.92 159.71,106.35 161.17,104.59 162.40,102.65 163.37,100.58 164.08,98.40 164.51,96.15 164.65,93.87' fill='#C4E021' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_vad &amp;lt;br/&amp;gt; value:  42 &amp;lt;br/&amp;gt; You can add a story here!' data-id='64'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e65' points='179.03,82.57 178.96,81.52 178.77,80.47 178.44,79.47 177.99,78.51 177.42,77.61 176.74,76.79 175.97,76.07 175.11,75.44 174.18,74.93 173.20,74.54 172.17,74.28 171.12,74.15 170.06,74.15 169.01,74.28 167.98,74.54 166.99,74.93 166.06,75.44 165.21,76.07 164.43,76.79 163.76,77.61 163.19,78.51 162.74,79.47 162.41,80.47 162.21,81.52 162.14,82.57 162.21,83.63 162.41,84.67 162.74,85.68 163.19,86.64 163.76,87.54 164.43,88.35 165.21,89.08 166.06,89.70 166.99,90.21 167.98,90.60 169.01,90.87 170.06,91.00 171.12,91.00 172.17,90.87 173.20,90.60 174.18,90.21 175.11,89.70 175.97,89.08 176.74,88.35 177.42,87.54 177.99,86.64 178.44,85.68 178.77,84.67 178.96,83.63 179.03,82.57' fill='#CFE11C' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_jvd &amp;lt;br/&amp;gt; value:  9 &amp;lt;br/&amp;gt; You can add a story here!' data-id='65'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e66' points='202.80,64.46 202.68,62.46 202.30,60.50 201.68,58.60 200.83,56.79 199.76,55.10 198.49,53.56 197.03,52.19 195.41,51.02 193.66,50.05 191.80,49.32 189.86,48.82 187.88,48.57 185.88,48.57 183.90,48.82 181.96,49.32 180.10,50.05 178.35,51.02 176.73,52.19 175.28,53.56 174.00,55.10 172.93,56.79 172.08,58.60 171.46,60.50 171.09,62.46 170.96,64.46 171.09,66.45 171.46,68.42 172.08,70.32 172.93,72.13 174.00,73.82 175.28,75.36 176.73,76.73 178.35,77.90 180.10,78.86 181.96,79.60 183.90,80.10 185.88,80.35 187.88,80.35 189.86,80.10 191.80,79.60 193.66,78.86 195.41,77.90 197.03,76.73 198.49,75.36 199.76,73.82 200.83,72.13 201.68,70.32 202.30,68.42 202.68,66.45 202.80,64.46' fill='#D8E219' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_obs &amp;lt;br/&amp;gt; value:  32 &amp;lt;br/&amp;gt; You can add a story here!' data-id='66'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e67' points='202.97,291.63 202.82,289.18 202.36,286.78 201.60,284.45 200.56,282.23 199.25,280.16 197.69,278.28 195.90,276.60 193.92,275.16 191.78,273.98 189.50,273.08 187.13,272.47 184.70,272.16 182.25,272.16 179.82,272.47 177.45,273.08 175.17,273.98 173.02,275.16 171.04,276.60 169.26,278.28 167.70,280.16 166.39,282.23 165.34,284.45 164.59,286.78 164.13,289.18 163.97,291.63 164.13,294.07 164.59,296.47 165.34,298.80 166.39,301.02 167.70,303.09 169.26,304.97 171.04,306.65 173.02,308.09 175.17,309.27 177.45,310.17 179.82,310.78 182.25,311.09 184.70,311.09 187.13,310.78 189.50,310.17 191.78,309.27 193.92,308.09 195.90,306.65 197.69,304.97 199.25,303.09 200.56,301.02 201.60,298.80 202.36,296.47 202.82,294.07 202.97,291.63' fill='#E2E418' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_fmp &amp;lt;br/&amp;gt; value:  48 &amp;lt;br/&amp;gt; You can add a story here!' data-id='67'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e68' points='231.77,37.01 231.61,34.41 231.13,31.86 230.32,29.39 229.22,27.04 227.82,24.85 226.17,22.85 224.28,21.07 222.17,19.54 219.90,18.29 217.48,17.34 214.97,16.69 212.39,16.36 209.79,16.36 207.22,16.69 204.70,17.34 202.29,18.29 200.01,19.54 197.91,21.07 196.02,22.85 194.36,24.85 192.97,27.04 191.86,29.39 191.06,31.86 190.57,34.41 190.41,37.01 190.57,39.60 191.06,42.15 191.86,44.62 192.97,46.97 194.36,49.16 196.02,51.16 197.91,52.94 200.01,54.47 202.29,55.72 204.70,56.68 207.22,57.32 209.79,57.65 212.39,57.65 214.97,57.32 217.48,56.68 219.90,55.72 222.17,54.47 224.28,52.94 226.17,51.16 227.82,49.16 229.22,46.97 230.32,44.62 231.13,42.15 231.61,39.60 231.77,37.01' fill='#EBE51B' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_dsf &amp;lt;br/&amp;gt; value:  54 &amp;lt;br/&amp;gt; You can add a story here!' data-id='68'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e69' points='147.75,203.77 147.62,201.71 147.24,199.69 146.60,197.73 145.72,195.86 144.62,194.12 143.31,192.54 141.80,191.12 140.14,189.91 138.33,188.92 136.41,188.16 134.42,187.65 132.37,187.39 130.31,187.39 128.27,187.65 126.27,188.16 124.35,188.92 122.55,189.91 120.88,191.12 119.38,192.54 118.06,194.12 116.96,195.86 116.08,197.73 115.45,199.69 115.06,201.71 114.93,203.77 115.06,205.83 115.45,207.85 116.08,209.81 116.96,211.68 118.06,213.42 119.38,215.00 120.88,216.42 122.55,217.63 124.35,218.62 126.27,219.38 128.27,219.89 130.31,220.15 132.37,220.15 134.42,219.89 136.41,219.38 138.33,218.62 140.14,217.63 141.80,216.42 143.31,215.00 144.62,213.42 145.72,211.68 146.60,209.81 147.24,207.85 147.62,205.83 147.75,203.77' fill='#F5E61F' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_cbk &amp;lt;br/&amp;gt; value:  34 &amp;lt;br/&amp;gt; You can add a story here!' data-id='69'/>\n   <polygon id='svg_c86f1762_3fcc_4d86_8194_544c2537a8fe_e70' points='128.03,175.30 127.87,172.66 127.37,170.07 126.55,167.55 125.43,165.16 124.01,162.92 122.33,160.89 120.40,159.07 118.26,157.52 115.94,156.25 113.48,155.27 110.92,154.61 108.29,154.28 105.65,154.28 103.03,154.61 100.46,155.27 98.00,156.25 95.69,157.52 93.55,159.07 91.62,160.89 89.93,162.92 88.52,165.16 87.39,167.55 86.57,170.07 86.08,172.66 85.91,175.30 86.08,177.94 86.57,180.54 87.39,183.06 88.52,185.45 89.93,187.68 91.62,189.72 93.55,191.53 95.69,193.09 98.00,194.36 100.46,195.33 103.03,195.99 105.65,196.32 108.29,196.32 110.92,195.99 113.48,195.33 115.94,194.36 118.26,193.09 120.40,191.53 122.33,189.72 124.01,187.68 125.43,185.45 126.55,183.06 127.37,180.54 127.87,177.94 128.03,175.30' fill='#FDE725' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_kqc &amp;lt;br/&amp;gt; value:  56 &amp;lt;br/&amp;gt; You can add a story here!' data-id='70'/>\n   <text x='243.66' y='179.91' font-size='4.27pt' font-family='Helvetica'>nnh<\/text>\n   <text x='276.4' y='179.91' font-size='4.27pt' font-family='Helvetica'>npq<\/text>\n   <text x='258.05' y='203.73' font-size='4.27pt' font-family='Helvetica'>hos<\/text>\n   <text x='240.14' y='200.37' font-size='4.27pt' font-family='Helvetica'>seb<\/text>\n   <text x='221.23' y='197.54' font-size='4.27pt' font-family='Helvetica'>wro<\/text>\n   <text x='223.48' y='179.34' font-size='4.27pt' font-family='Helvetica'>mro<\/text>\n   <text x='227.97' y='171.04' font-size='4.27pt' font-family='Helvetica'>vcl<\/text>\n   <text x='232.53' y='162.08' font-size='4.27pt' font-family='Helvetica'>efq<\/text>\n   <text x='254.21' y='144.6' font-size='4.27pt' font-family='Helvetica'>hql<\/text>\n   <text x='290.73' y='149.29' font-size='4.27pt' font-family='Helvetica'>bbz<\/text>\n   <text x='303.89' y='172.44' font-size='4.27pt' font-family='Helvetica'>vrp<\/text>\n   <text x='305.98' y='202.3' font-size='4.27pt' font-family='Helvetica'>pow<\/text>\n   <text x='280.03' y='221.07' font-size='4.27pt' font-family='Helvetica'>iel<\/text>\n   <text x='248.08' y='233.3' font-size='4.27pt' font-family='Helvetica'>zhv<\/text>\n   <text x='206.27' y='230.98' font-size='4.27pt' font-family='Helvetica'>gxc<\/text>\n   <text x='204.37' y='159.07' font-size='4.27pt' font-family='Helvetica'>jnc<\/text>\n   <text x='220.37' y='122.04' font-size='4.27pt' font-family='Helvetica'>ohn<\/text>\n   <text x='183.76' y='195.33' font-size='4.27pt' font-family='Helvetica'>cqt<\/text>\n   <text x='257.24' y='100.19' font-size='4.27pt' font-family='Helvetica'>tbf<\/text>\n   <text x='267.98' y='123.92' font-size='4.27pt' font-family='Helvetica'>izi<\/text>\n   <text x='298.26' y='113.54' font-size='4.27pt' font-family='Helvetica'>rjp<\/text>\n   <text x='321.44' y='139.8' font-size='4.27pt' font-family='Helvetica'>low<\/text>\n   <text x='330.49' y='171.22' font-size='4.27pt' font-family='Helvetica'>pay<\/text>\n   <text x='347.7' y='205.06' font-size='4.27pt' font-family='Helvetica'>cfb<\/text>\n   <text x='307.01' y='244.72' font-size='4.27pt' font-family='Helvetica'>noi<\/text>\n   <text x='272.16' y='257.1' font-size='4.27pt' font-family='Helvetica'>riw<\/text>\n   <text x='344' y='240.26' font-size='4.27pt' font-family='Helvetica'>fda<\/text>\n   <text x='242.86' y='268.32' font-size='4.27pt' font-family='Helvetica'>yiv<\/text>\n   <text x='220.09' y='258.58' font-size='4.27pt' font-family='Helvetica'>nqf<\/text>\n   <text x='172.5' y='168.18' font-size='4.27pt' font-family='Helvetica'>ana<\/text>\n   <text x='172.95' y='147.18' font-size='4.27pt' font-family='Helvetica'>cvf<\/text>\n   <text x='179.44' y='113.39' font-size='4.27pt' font-family='Helvetica'>aep<\/text>\n   <text x='211.67' y='85.55' font-size='4.27pt' font-family='Helvetica'>nxe<\/text>\n   <text x='241.59' y='60.12' font-size='4.27pt' font-family='Helvetica'>uvr<\/text>\n   <text x='347.58' y='147.71' font-size='4.27pt' font-family='Helvetica'>keq<\/text>\n   <text x='371.99' y='171.01' font-size='4.27pt' font-family='Helvetica'>hvo<\/text>\n   <text x='200.59' y='266.97' font-size='4.27pt' font-family='Helvetica'>dgx<\/text>\n   <text x='169.33' y='254.56' font-size='4.27pt' font-family='Helvetica'>rqb<\/text>\n   <text x='175.39' y='227.77' font-size='4.27pt' font-family='Helvetica'>mko<\/text>\n   <text x='158.07' y='217.59' font-size='4.27pt' font-family='Helvetica'>jyt<\/text>\n   <text x='330.52' y='111.93' font-size='4.27pt' font-family='Helvetica'>qqb<\/text>\n   <text x='354.11' y='124.27' font-size='4.27pt' font-family='Helvetica'>ndr<\/text>\n   <text x='286.25' y='83.65' font-size='4.27pt' font-family='Helvetica'>aoy<\/text>\n   <text x='316.6' y='80.55' font-size='4.27pt' font-family='Helvetica'>zci<\/text>\n   <text x='350.69' y='87.2' font-size='4.27pt' font-family='Helvetica'>kgo<\/text>\n   <text x='150.79' y='189.73' font-size='4.27pt' font-family='Helvetica'>wjm<\/text>\n   <text x='140.3' y='156.67' font-size='4.27pt' font-family='Helvetica'>xus<\/text>\n   <text x='294.07' y='287.97' font-size='4.27pt' font-family='Helvetica'>fsf<\/text>\n   <text x='259.12' y='289.54' font-size='4.27pt' font-family='Helvetica'>phz<\/text>\n   <text x='266.21' y='71.05' font-size='4.27pt' font-family='Helvetica'>eea<\/text>\n   <text x='284.3' y='57.77' font-size='4.27pt' font-family='Helvetica'>ihm<\/text>\n   <text x='337.45' y='276.82' font-size='4.27pt' font-family='Helvetica'>pkk<\/text>\n   <text x='324.35' y='318.3' font-size='4.27pt' font-family='Helvetica'>peh<\/text>\n   <text x='218.84' y='294.38' font-size='4.27pt' font-family='Helvetica'>lfq<\/text>\n   <text x='250.43' y='322.18' font-size='4.27pt' font-family='Helvetica'>slk<\/text>\n   <text x='377.66' y='201.8' font-size='4.27pt' font-family='Helvetica'>rrp<\/text>\n   <text x='378.05' y='231.4' font-size='4.27pt' font-family='Helvetica'>buk<\/text>\n   <text x='380.77' y='273.21' font-size='4.27pt' font-family='Helvetica'>eoe<\/text>\n   <text x='146.4' y='124.55' font-size='4.27pt' font-family='Helvetica'>azm<\/text>\n   <text x='381.11' y='133.13' font-size='4.27pt' font-family='Helvetica'>mkb<\/text>\n   <text x='134.97' y='240.62' font-size='4.27pt' font-family='Helvetica'>fzy<\/text>\n   <text x='390.97' y='94.09' font-size='4.27pt' font-family='Helvetica'>pvy<\/text>\n   <text x='306.77' y='55.1' font-size='4.27pt' font-family='Helvetica'>nwb<\/text>\n   <text x='141.83' y='95.91' font-size='4.27pt' font-family='Helvetica'>vad<\/text>\n   <text x='166.95' y='84.61' font-size='4.27pt' font-family='Helvetica'>jvd<\/text>\n   <text x='182.3' y='66.5' font-size='4.27pt' font-family='Helvetica'>obs<\/text>\n   <text x='178.74' y='293.67' font-size='4.27pt' font-family='Helvetica'>fmp<\/text>\n   <text x='207.3' y='39.05' font-size='4.27pt' font-family='Helvetica'>dsf<\/text>\n   <text x='126.92' y='205.81' font-size='4.27pt' font-family='Helvetica'>cbk<\/text>\n   <text x='102.55' y='177.34' font-size='4.27pt' font-family='Helvetica'>kqc<\/text>\n  <\/g>\n <\/g>\n<\/svg>","js":null,"uid":"svg_c86f1762_3fcc_4d86_8194_544c2537a8fe","ratio":1.4,"settings":{"tooltip":{"css":".tooltip_SVGID_ { padding:5px;background:black;color:white;border-radius:2px;text-align:left; ; position:absolute;pointer-events:none;z-index:999;}","placement":"doc","opacity":0.9,"offx":10,"offy":10,"use_cursor_pos":true,"use_fill":false,"use_stroke":false,"delay_over":200,"delay_out":500},"hover":{"css":".hover_data_SVGID_ { fill:orange;stroke:black;cursor:pointer; }\ntext.hover_data_SVGID_ { stroke:none;fill:orange; }\ncircle.hover_data_SVGID_ { fill:orange;stroke:black; }\nline.hover_data_SVGID_, polyline.hover_data_SVGID_ { fill:none;stroke:orange; }\nrect.hover_data_SVGID_, polygon.hover_data_SVGID_, path.hover_data_SVGID_ { fill:orange;stroke:none; }\nimage.hover_data_SVGID_ { stroke:orange; }","reactive":true,"nearest_distance":null},"hover_inv":{"css":""},"hover_key":{"css":".hover_key_SVGID_ { fill:orange;stroke:black;cursor:pointer; }\ntext.hover_key_SVGID_ { stroke:none;fill:orange; }\ncircle.hover_key_SVGID_ { fill:orange;stroke:black; }\nline.hover_key_SVGID_, polyline.hover_key_SVGID_ { fill:none;stroke:orange; }\nrect.hover_key_SVGID_, polygon.hover_key_SVGID_, path.hover_key_SVGID_ { fill:orange;stroke:none; }\nimage.hover_key_SVGID_ { stroke:orange; }","reactive":true},"hover_theme":{"css":".hover_theme_SVGID_ { fill:orange;stroke:black;cursor:pointer; }\ntext.hover_theme_SVGID_ { stroke:none;fill:orange; }\ncircle.hover_theme_SVGID_ { fill:orange;stroke:black; }\nline.hover_theme_SVGID_, polyline.hover_theme_SVGID_ { fill:none;stroke:orange; }\nrect.hover_theme_SVGID_, polygon.hover_theme_SVGID_, path.hover_theme_SVGID_ { fill:orange;stroke:none; }\nimage.hover_theme_SVGID_ { stroke:orange; }","reactive":true},"select":{"css":".select_data_SVGID_ { fill:red;stroke:black;cursor:pointer; }\ntext.select_data_SVGID_ { stroke:none;fill:red; }\ncircle.select_data_SVGID_ { fill:red;stroke:black; }\nline.select_data_SVGID_, polyline.select_data_SVGID_ { fill:none;stroke:red; }\nrect.select_data_SVGID_, polygon.select_data_SVGID_, path.select_data_SVGID_ { fill:red;stroke:none; }\nimage.select_data_SVGID_ { stroke:red; }","type":"multiple","only_shiny":true,"selected":[]},"select_inv":{"css":""},"select_key":{"css":".select_key_SVGID_ { fill:red;stroke:black;cursor:pointer; }\ntext.select_key_SVGID_ { stroke:none;fill:red; }\ncircle.select_key_SVGID_ { fill:red;stroke:black; }\nline.select_key_SVGID_, polyline.select_key_SVGID_ { fill:none;stroke:red; }\nrect.select_key_SVGID_, polygon.select_key_SVGID_, path.select_key_SVGID_ { fill:red;stroke:none; }\nimage.select_key_SVGID_ { stroke:red; }","type":"single","only_shiny":true,"selected":[]},"select_theme":{"css":".select_theme_SVGID_ { fill:red;stroke:black;cursor:pointer; }\ntext.select_theme_SVGID_ { stroke:none;fill:red; }\ncircle.select_theme_SVGID_ { fill:red;stroke:black; }\nline.select_theme_SVGID_, polyline.select_theme_SVGID_ { fill:none;stroke:red; }\nrect.select_theme_SVGID_, polygon.select_theme_SVGID_, path.select_theme_SVGID_ { fill:red;stroke:none; }\nimage.select_theme_SVGID_ { stroke:red; }","type":"single","only_shiny":true,"selected":[]},"zoom":{"min":1,"max":1,"duration":300},"toolbar":{"position":"topright","pngname":"diagram","tooltips":null,"fixed":false,"hidden":[],"delay_over":200,"delay_out":500},"sizing":{"rescale":true,"width":1}}},"evals":[],"jsHooks":[]}</script>
<p>交互式圆形打包图（circle packing），可悬停显示详细信息</p>
</div>
</div>
</section>
</section>
<section id="several-levels" class="level2" data-number="25.3">
<h2 data-number="25.3" class="anchored" data-anchor-id="several-levels"><span class="header-section-number">25.3</span> Several levels</h2>
<section id="ggraph" class="level3" data-number="25.3.1">
<h3 data-number="25.3.1" class="anchored" data-anchor-id="ggraph"><span class="header-section-number">25.3.1</span> <code>ggraph()</code></h3>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggraph) <span class="co"># 用于图形可视化</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(igraph) <span class="co"># 用于图形操作</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载 edges 和 vertices 数据，flare 数据集内置于 packcircles 包</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>edges <span class="ot">&lt;-</span> flare<span class="sc">$</span>edges  <span class="co"># 边数据，描述节点之间的父子关系</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 通常我们还会有一个节点信息表，包含每个节点的属性</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>vertices <span class="ot">&lt;-</span> flare<span class="sc">$</span>vertices  <span class="co"># 节点数据，包含节点名称、分组等信息</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 igraph 包将边和节点数据转换为图对象</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>mygraph <span class="ot">&lt;-</span> <span class="fu">graph_from_data_frame</span>(edges, <span class="at">vertices =</span> vertices)</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggraph 包绘制多层级圆形打包图</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'circlepack'</span>) <span class="sc">+</span> </span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_circle</span>() <span class="sc">+</span>         <span class="co"># 绘制每个节点的圆</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>()                 <span class="co"># 去除坐标轴和背景</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="576"></p>
<figcaption>多层级圆形打包图（circle packing），展示层级结构数据</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="type" class="level3" data-number="25.3.2">
<h3 data-number="25.3.2" class="anchored" data-anchor-id="type"><span class="header-section-number">25.3.2</span> type</h3>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'dendrogram'</span>, <span class="at">circular =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_edge_diagonal</span>() <span class="sc">+</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="576"></p>
<figcaption>dendrogram, circle packing</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'dendrogram'</span>, <span class="at">circular =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_edge_diagonal</span>() <span class="sc">+</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>dendrogram, not circle packing</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="st">'treemap'</span>, <span class="at">weight =</span> size) <span class="sc">+</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_node_tile</span>(<span class="fu">aes</span>(<span class="at">fill =</span> depth), <span class="at">size =</span> <span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>treemap</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="st">'partition'</span>, <span class="at">circular =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_node_arc_bar</span>(<span class="fu">aes</span>(<span class="at">fill =</span> depth), <span class="at">size =</span> <span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>partition</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggraph 绘制基础网络图，展示节点与边的关系</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph) <span class="sc">+</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制边（连线），表示节点之间的连接关系</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_edge_link</span>() <span class="sc">+</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制节点（点），表示网络中的各个实体</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_point</span>() <span class="sc">+</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 去除坐标轴和背景，使图形更简洁</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 不显示图例</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>基础网络图：节点与连线的可视化</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="color-1" class="level3" data-number="25.3.3">
<h3 data-number="25.3.3" class="anchored" data-anchor-id="color-1"><span class="header-section-number">25.3.3</span> color</h3>
<p>节点颜色根据深度变化:</p>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggraph 绘制圆形打包图，节点颜色根据深度变化</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'circlepack'</span>, <span class="at">weight=</span>size) <span class="sc">+</span> </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_node_circle</span>(<span class="fu">aes</span>(<span class="at">fill =</span> depth)) <span class="sc">+</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span> </span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"FALSE"</span>)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>p</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="576"></p>
<figcaption>圆形打包图：节点颜色根据深度变化</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">scale_fill_viridis</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="576"></p>
<figcaption>viridis 调色板应用于圆形打包图</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">scale_fill_distiller</span>(<span class="at">palette =</span> <span class="st">"RdPu"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="576"></p>
<figcaption>colorBrewer 调色板应用于圆形打包图</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="label" class="level3" data-number="25.3.4">
<h3 data-number="25.3.4" class="anchored" data-anchor-id="label"><span class="header-section-number">25.3.4</span> label</h3>
<p>适用于层级不特别多的情况</p>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 仅保留有下级的边（即 to 在 from 中出现）</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>edges <span class="ot">&lt;-</span> flare<span class="sc">$</span>edges <span class="sc">|&gt;</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(to <span class="sc">%in%</span> from) <span class="sc">|&gt;</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">droplevels</span>()</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 仅保留参与这些边的节点</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>vertices <span class="ot">&lt;-</span> flare<span class="sc">$</span>vertices <span class="sc">|&gt;</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(name <span class="sc">%in%</span> <span class="fu">c</span>(edges<span class="sc">$</span>from, edges<span class="sc">$</span>to)) <span class="sc">|&gt;</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">droplevels</span>()</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 随机生成每个节点的 size 属性（可根据实际数据调整）</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>vertices<span class="sc">$</span>size <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="fu">nrow</span>(vertices))</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a><span class="co"># 重新构建 igraph 图对象</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>mygraph <span class="ot">&lt;-</span> <span class="fu">graph_from_data_frame</span>(edges, <span class="at">vertices =</span> vertices)</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggraph 绘制多层级圆形打包图</span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'circlepack'</span>, <span class="at">weight =</span> size) <span class="sc">+</span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制每个节点的圆，颜色根据深度变化</span></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_circle</span>(<span class="fu">aes</span>(<span class="at">fill =</span> depth)) <span class="sc">+</span></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 仅在叶节点（leaf=TRUE）处添加标签，标签内容为 shortName，字体大小与 size 成比例</span></span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_text</span>(<span class="fu">aes</span>(</span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">label =</span> shortName,    <span class="co"># 标签内容</span></span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">filter =</span> leaf,        <span class="co"># 仅叶节点显示</span></span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill =</span> depth,         <span class="co"># 标签颜色与深度一致</span></span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">size =</span> size           <span class="co"># 字体大小与 size 成比例</span></span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">+</span></span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>                          <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"FALSE"</span>) <span class="sc">+</span>      <span class="co"># 不显示图例</span></span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis</span>()                    <span class="co"># 使用 viridis 调色板</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" width="576"></p>
<figcaption>带标签的多层级圆形打包图（circle packing），仅叶节点显示标签</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggraph 绘制多层级圆形打包图，节点颜色根据深度变化，叶节点显示标签</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'circlepack'</span>, <span class="at">weight =</span> size) <span class="sc">+</span> </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制每个节点的圆，颜色根据深度变化</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_circle</span>(<span class="fu">aes</span>(<span class="at">fill =</span> depth)) <span class="sc">+</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 仅在叶节点（leaf=TRUE）处添加标签，标签内容为 shortName，字体大小与 size 成比例</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_label</span>(</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">label =</span> shortName,  <span class="co"># 标签内容为节点的 shortName</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">filter =</span> leaf,      <span class="co"># 仅叶节点显示标签</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> size         <span class="co"># 字体大小与 size 成比例</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>                          <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"FALSE"</span>) <span class="sc">+</span>      <span class="co"># 不显示图例</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis</span>()                    <span class="co"># 使用 viridis 调色板</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="576"></p>
<figcaption>带标签的多层级圆形打包图（circle packing），仅叶节点显示标签</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="hide" class="level3" data-number="25.3.5">
<h3 data-number="25.3.5" class="anchored" data-anchor-id="hide"><span class="header-section-number">25.3.5</span> Hide</h3>
<p>隐藏1个或多个外层大圈:</p>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 packcircles 包内置的 flare 数据集，包含层级结构的边和节点信息</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>edges <span class="ot">=</span> flare<span class="sc">$</span>edges         <span class="co"># 边数据，描述父子关系</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>vertices <span class="ot">=</span> flare<span class="sc">$</span>vertices   <span class="co"># 节点数据，包含节点属性</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 构建 igraph 图对象</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>mygraph <span class="ot">&lt;-</span> <span class="fu">graph_from_data_frame</span>(edges, <span class="at">vertices =</span> vertices)</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 绘制多层级圆形打包图，隐藏最外层大圈（depth=0 填充为白色）</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'circlepack'</span>, <span class="at">weight =</span> size) <span class="sc">+</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制每个节点的圆，填充和边框颜色根据深度分组</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_circle</span>(<span class="fu">aes</span>(<span class="at">fill =</span> <span class="fu">as.factor</span>(depth), <span class="at">color =</span> <span class="fu">as.factor</span>(depth))) <span class="sc">+</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置不同深度的填充颜色，最外层（depth=0）为白色，其余用 viridis 调色板</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>            <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"white"</span>,           <span class="co"># 最外层隐藏</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>            <span class="st">"1"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">1</span>],     <span class="co"># 第一层</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>            <span class="st">"2"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">2</span>],     <span class="co"># 第二层</span></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>            <span class="st">"3"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">3</span>],     <span class="co"># 第三层</span></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>            <span class="st">"4"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">4</span>]      <span class="co"># 第四层</span></span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置不同深度的边框颜色，最外层为白色，其余为黑色</span></span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_manual</span>(</span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>            <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"white"</span>,           <span class="co"># 最外层隐藏</span></span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>            <span class="st">"1"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>            <span class="st">"2"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a>            <span class="st">"3"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a>            <span class="st">"4"</span> <span class="ot">=</span> <span class="st">"black"</span></span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb19-32"><a href="#cb19-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>                        <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb19-33"><a href="#cb19-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"FALSE"</span>)      <span class="co"># 不显示图例</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" width="576"></p>
<figcaption>隐藏最外层大圈的多层级圆形打包图（circle packing）</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggraph 绘制多层级圆形打包图，隐藏最外层和第二层大圈</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'circlepack'</span>, <span class="at">weight =</span> size) <span class="sc">+</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制每个节点的圆，填充和边框颜色根据深度分组</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_circle</span>(<span class="fu">aes</span>(<span class="at">fill =</span> <span class="fu">as.factor</span>(depth), <span class="at">color =</span> <span class="fu">as.factor</span>(depth))) <span class="sc">+</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置不同深度的填充颜色，前两层（depth=0,1）为白色，其余用 magma 调色板</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>            <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"white"</span>,           <span class="co"># 最外层隐藏</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>            <span class="st">"1"</span> <span class="ot">=</span> <span class="st">"white"</span>,           <span class="co"># 第二层隐藏</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>            <span class="st">"2"</span> <span class="ot">=</span> <span class="fu">magma</span>(<span class="dv">4</span>)[<span class="dv">2</span>],       <span class="co"># 第三层</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>            <span class="st">"3"</span> <span class="ot">=</span> <span class="fu">magma</span>(<span class="dv">4</span>)[<span class="dv">3</span>],       <span class="co"># 第四层</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>            <span class="st">"4"</span> <span class="ot">=</span> <span class="fu">magma</span>(<span class="dv">4</span>)[<span class="dv">4</span>]        <span class="co"># 第五层</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置不同深度的边框颜色，前两层为白色，其余为黑色</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_manual</span>(</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>            <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"white"</span>,           <span class="co"># 最外层隐藏</span></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>            <span class="st">"1"</span> <span class="ot">=</span> <span class="st">"white"</span>,           <span class="co"># 第二层隐藏</span></span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>            <span class="st">"2"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>            <span class="st">"3"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>            <span class="st">"4"</span> <span class="ot">=</span> <span class="st">"black"</span></span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>                        <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"FALSE"</span>)      <span class="co"># 不显示图例</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid figure-img" width="576"></p>
<figcaption>隐藏前两层大圈的多层级圆形打包图（circle packing）</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="特定-label" class="level3" data-number="25.3.6">
<h3 data-number="25.3.6" class="anchored" data-anchor-id="特定-label"><span class="header-section-number">25.3.6</span> 特定 label</h3>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载 data.tree 包，用于树结构操作</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.tree)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 重新加载边和节点数据</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>edges <span class="ot">&lt;-</span> flare<span class="sc">$</span>edges</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>vertices <span class="ot">&lt;-</span> flare<span class="sc">$</span>vertices</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 将边数据转换为树结构，便于获取每个节点的层级信息</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>tree <span class="ot">&lt;-</span> <span class="fu">FromDataFrameNetwork</span>(edges)</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 获取每个节点的名称和层级，并合并到原始节点数据框</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>mylevels <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> tree<span class="sc">$</span><span class="fu">Get</span>(<span class="st">'name'</span>),      <span class="co"># 节点名称</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">level =</span> tree<span class="sc">$</span><span class="fu">Get</span>(<span class="st">"level"</span>)     <span class="co"># 节点层级（根节点为1）</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>vertices <span class="ot">&lt;-</span> vertices <span class="sc">%&gt;%</span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(., mylevels, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"name"</span> <span class="ot">=</span> <span class="st">"name"</span>))</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a><span class="co"># 仅为 level=2 的节点添加标签，其余节点标签为 NA</span></span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>vertices <span class="ot">&lt;-</span> vertices <span class="sc">%&gt;%</span></span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">new_label =</span> <span class="fu">ifelse</span>(level <span class="sc">==</span> <span class="dv">2</span>, shortName, <span class="cn">NA</span>))</span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a><span class="co"># 构建 igraph 图对象</span></span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>mygraph <span class="ot">&lt;-</span> <span class="fu">graph_from_data_frame</span>(edges, <span class="at">vertices =</span> vertices)</span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a><span class="co"># 绘制多层级圆形打包图</span></span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'circlepack'</span>, <span class="at">weight =</span> size) <span class="sc">+</span></span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制每个节点的圆，填充和边框颜色根据深度分组</span></span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_circle</span>(<span class="fu">aes</span>(<span class="at">fill =</span> <span class="fu">as.factor</span>(depth), <span class="at">color =</span> <span class="fu">as.factor</span>(depth))) <span class="sc">+</span></span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置不同深度的填充颜色，最外层为白色，其余用 viridis 调色板</span></span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb21-32"><a href="#cb21-32" aria-hidden="true" tabindex="-1"></a>        <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"white"</span>,</span>
<span id="cb21-33"><a href="#cb21-33" aria-hidden="true" tabindex="-1"></a>        <span class="st">"1"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">1</span>],</span>
<span id="cb21-34"><a href="#cb21-34" aria-hidden="true" tabindex="-1"></a>        <span class="st">"2"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">2</span>],</span>
<span id="cb21-35"><a href="#cb21-35" aria-hidden="true" tabindex="-1"></a>        <span class="st">"3"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">3</span>],</span>
<span id="cb21-36"><a href="#cb21-36" aria-hidden="true" tabindex="-1"></a>        <span class="st">"4"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">4</span>]</span>
<span id="cb21-37"><a href="#cb21-37" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">+</span></span>
<span id="cb21-38"><a href="#cb21-38" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置不同深度的边框颜色，最外层为白色，其余为黑色</span></span>
<span id="cb21-39"><a href="#cb21-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb21-40"><a href="#cb21-40" aria-hidden="true" tabindex="-1"></a>        <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"white"</span>,</span>
<span id="cb21-41"><a href="#cb21-41" aria-hidden="true" tabindex="-1"></a>        <span class="st">"1"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb21-42"><a href="#cb21-42" aria-hidden="true" tabindex="-1"></a>        <span class="st">"2"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb21-43"><a href="#cb21-43" aria-hidden="true" tabindex="-1"></a>        <span class="st">"3"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb21-44"><a href="#cb21-44" aria-hidden="true" tabindex="-1"></a>        <span class="st">"4"</span> <span class="ot">=</span> <span class="st">"black"</span></span>
<span id="cb21-45"><a href="#cb21-45" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">+</span></span>
<span id="cb21-46"><a href="#cb21-46" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 仅为 new_label 非 NA 的节点添加标签（即 level=2 的节点）</span></span>
<span id="cb21-47"><a href="#cb21-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_label</span>(<span class="fu">aes</span>(<span class="at">label =</span> new_label), <span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb21-48"><a href="#cb21-48" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 去除坐标轴和背景，设置无图例和无边距</span></span>
<span id="cb21-49"><a href="#cb21-49" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb21-50"><a href="#cb21-50" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb21-51"><a href="#cb21-51" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">"FALSE"</span>,</span>
<span id="cb21-52"><a href="#cb21-52" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.margin =</span> <span class="fu">unit</span>(<span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">4</span>), <span class="st">"cm"</span>)</span>
<span id="cb21-53"><a href="#cb21-53" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid figure-img" width="576"></p>
<figcaption>仅为特定层级（如 level=2）节点添加标签的多层级圆形打包图</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="可缩放" class="level3" data-number="25.3.7">
<h3 data-number="25.3.7" class="anchored" data-anchor-id="可缩放"><span class="header-section-number">25.3.7</span> 可缩放</h3>
<p><code>circlePacker</code> 包可以用来创建交互式和可缩放圆形堆积图</p>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载 circlepackeR 包，用于创建可缩放的交互式圆形打包图</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(circlepackeR)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 构建一个嵌套数据框，包含多层级结构信息</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">root =</span> <span class="fu">rep</span>(<span class="st">"root"</span>, <span class="dv">15</span>),                                 <span class="co"># 根节点</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">"group A"</span>, <span class="dv">5</span>), <span class="fu">rep</span>(<span class="st">"group B"</span>, <span class="dv">5</span>), <span class="fu">rep</span>(<span class="st">"group C"</span>, <span class="dv">5</span>)), <span class="co"># 一级分组</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">subgroup =</span> <span class="fu">rep</span>(letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>], <span class="at">each =</span> <span class="dv">3</span>),                 <span class="co"># 二级分组</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">subsubgroup =</span> <span class="fu">rep</span>(letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>], <span class="dv">5</span>),                     <span class="co"># 三级分组</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">value =</span> <span class="fu">sample</span>(<span class="fu">seq</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>), <span class="dv">15</span>)                           <span class="co"># 每个叶节点的数值</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 data.tree 包将数据转换为树结构</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.tree)</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a><span class="co"># 构建 pathString 字段，格式为 root/group/subgroup/subsubgroup</span></span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>pathString <span class="ot">&lt;-</span> <span class="fu">paste</span>(</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">"world"</span>,                <span class="co"># 根节点名称</span></span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>    data<span class="sc">$</span>group,             <span class="co"># 一级分组</span></span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>    data<span class="sc">$</span>subgroup,          <span class="co"># 二级分组</span></span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>    data<span class="sc">$</span>subsubgroup,       <span class="co"># 三级分组</span></span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">"/"</span></span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a><span class="co"># 转换为树结构对象</span></span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>population <span class="ot">&lt;-</span> <span class="fu">as.Node</span>(data)</span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a><span class="co"># 绘制可缩放的交互式圆形打包图</span></span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a><span class="co"># color_min 和 color_max 可自定义颜色范围</span></span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a><span class="fu">circlepackeR</span>(</span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a>    population,                 <span class="co"># 层级结构数据</span></span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="st">"value"</span>,             <span class="co"># 用于圆面积的数值字段</span></span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">color_min =</span> <span class="st">"hsl(56,80%,80%)"</span>,   <span class="co"># 最小值对应的颜色</span></span>
<span id="cb22-32"><a href="#cb22-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">color_max =</span> <span class="st">"hsl(341,30%,40%)"</span>   <span class="co"># 最大值对应的颜色</span></span>
<span id="cb22-33"><a href="#cb22-33" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="circlepackeR html-widget html-fill-item" id="htmlwidget-4c779fddf477031793cf" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-4c779fddf477031793cf">{"x":{"data":{"name":"world","children":[{"name":"group A","children":[{"name":"a","children":[{"name":"a","group":"group A","subgroup":"a","subsubgroup":"a","value":2},{"name":"b","group":"group A","subgroup":"a","subsubgroup":"b","value":13},{"name":"c","group":"group A","subgroup":"a","subsubgroup":"c","value":8}]},{"name":"b","children":[{"name":"a","group":"group A","subgroup":"b","subsubgroup":"a","value":3},{"name":"b","group":"group A","subgroup":"b","subsubgroup":"b","value":5}]}]},{"name":"group B","children":[{"name":"b","children":[{"name":"c","group":"group B","subgroup":"b","subsubgroup":"c","value":1}]},{"name":"c","children":[{"name":"a","group":"group B","subgroup":"c","subsubgroup":"a","value":9},{"name":"b","group":"group B","subgroup":"c","subsubgroup":"b","value":7},{"name":"c","group":"group B","subgroup":"c","subsubgroup":"c","value":14}]},{"name":"d","children":[{"name":"a","group":"group B","subgroup":"d","subsubgroup":"a","value":12}]}]},{"name":"group C","children":[{"name":"d","children":[{"name":"b","group":"group C","subgroup":"d","subsubgroup":"b","value":6},{"name":"c","group":"group C","subgroup":"d","subsubgroup":"c","value":15}]},{"name":"e","children":[{"name":"a","group":"group C","subgroup":"e","subsubgroup":"a","value":4},{"name":"b","group":"group C","subgroup":"e","subsubgroup":"b","value":11},{"name":"c","group":"group C","subgroup":"e","subsubgroup":"c","value":10}]}]}]},"options":{"size":"value","color_min":"hsl(56,80%,80%)","color_max":"hsl(341,30%,40%)"}},"evals":[],"jsHooks":[]}</script>
<p>可缩放交互式多层级圆形打包图（circle packing），使用 circlepackeR 包</p>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载 circlepackeR 包，用于绘制交互式圆形打包图</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(circlepackeR)</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载 ggraph 包（本例未直接用到，但常用于网络可视化）</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggraph)</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 packcircles 包内置的 flare 数据集，获取边列表</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>data_edge <span class="ot">&lt;-</span> flare<span class="sc">$</span>edges</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 提取每个节点名称的最后一级（去掉前面的分层前缀），便于后续分层</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>data_edge<span class="sc">$</span>from <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">".*</span><span class="sc">\\</span><span class="st">."</span>, <span class="st">""</span>, data_edge<span class="sc">$</span>from)</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>data_edge<span class="sc">$</span>to <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">".*</span><span class="sc">\\</span><span class="st">."</span>, <span class="st">""</span>, data_edge<span class="sc">$</span>to)</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a><span class="co"># head(data_edge) # 查看处理后的边列表</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载 data.tree 包，用于将边列表转换为树结构</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.tree)</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a><span class="co"># 将边列表转换为树结构对象</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>data_tree <span class="ot">&lt;-</span> <span class="fu">FromDataFrameNetwork</span>(data_edge)</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a><span class="co"># 将树结构转换为嵌套数据框，提取每一层的名称</span></span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>data_nested <span class="ot">&lt;-</span> <span class="fu">ToDataFrameTree</span>(</span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>    data_tree,</span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">level1 =</span> <span class="cf">function</span>(x) x<span class="sc">$</span>path[<span class="dv">2</span>], <span class="co"># 第一层</span></span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">level2 =</span> <span class="cf">function</span>(x) x<span class="sc">$</span>path[<span class="dv">3</span>], <span class="co"># 第二层</span></span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">level3 =</span> <span class="cf">function</span>(x) x<span class="sc">$</span>path[<span class="dv">4</span>], <span class="co"># 第三层</span></span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">level4 =</span> <span class="cf">function</span>(x) x<span class="sc">$</span>path[<span class="dv">5</span>]  <span class="co"># 第四层</span></span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a>)[<span class="sc">-</span><span class="dv">1</span>, <span class="sc">-</span><span class="dv">1</span>] <span class="co"># 去除根节点和第一列（树结构自带的 name）</span></span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a><span class="co"># 去除包含 NA 的行，只保留完整路径</span></span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a>data_nested <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(data_nested)</span>
<span id="cb23-30"><a href="#cb23-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-31"><a href="#cb23-31" aria-hidden="true" tabindex="-1"></a><span class="co"># 构建 pathString 字段，格式为 roots/level1/level2/level3/level4</span></span>
<span id="cb23-32"><a href="#cb23-32" aria-hidden="true" tabindex="-1"></a>data_nested<span class="sc">$</span>pathString <span class="ot">&lt;-</span> <span class="fu">paste</span>(</span>
<span id="cb23-33"><a href="#cb23-33" aria-hidden="true" tabindex="-1"></a>    <span class="st">"roots"</span>,</span>
<span id="cb23-34"><a href="#cb23-34" aria-hidden="true" tabindex="-1"></a>    data_nested<span class="sc">$</span>level1,</span>
<span id="cb23-35"><a href="#cb23-35" aria-hidden="true" tabindex="-1"></a>    data_nested<span class="sc">$</span>level2,</span>
<span id="cb23-36"><a href="#cb23-36" aria-hidden="true" tabindex="-1"></a>    data_nested<span class="sc">$</span>level3,</span>
<span id="cb23-37"><a href="#cb23-37" aria-hidden="true" tabindex="-1"></a>    data_nested<span class="sc">$</span>level4,</span>
<span id="cb23-38"><a href="#cb23-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">"/"</span></span>
<span id="cb23-39"><a href="#cb23-39" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-40"><a href="#cb23-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-41"><a href="#cb23-41" aria-hidden="true" tabindex="-1"></a><span class="co"># 设置每个叶节点的 value（圆面积），此处统一为 1</span></span>
<span id="cb23-42"><a href="#cb23-42" aria-hidden="true" tabindex="-1"></a>data_nested<span class="sc">$</span>value <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb23-43"><a href="#cb23-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-44"><a href="#cb23-44" aria-hidden="true" tabindex="-1"></a><span class="co"># 将嵌套数据框转换为树结构对象</span></span>
<span id="cb23-45"><a href="#cb23-45" aria-hidden="true" tabindex="-1"></a>data_Node <span class="ot">&lt;-</span> <span class="fu">as.Node</span>(data_nested)</span>
<span id="cb23-46"><a href="#cb23-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-47"><a href="#cb23-47" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 circlepackeR 绘制可缩放的多层级圆形打包图</span></span>
<span id="cb23-48"><a href="#cb23-48" aria-hidden="true" tabindex="-1"></a><span class="fu">circlepackeR</span>(data_Node, <span class="at">size =</span> <span class="st">"value"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="circlepackeR html-widget html-fill-item" id="htmlwidget-7f3017b4501a80b21b7f" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-7f3017b4501a80b21b7f">{"x":{"data":{"name":"roots","children":[{"name":"vis","children":[{"name":"data","children":[{"name":"converters","children":[{"name":"Converters","level1":"vis","level2":"data","level3":"converters","level4":"Converters","value":1},{"name":"DelimitedTextConverter","level1":"vis","level2":"data","level3":"converters","level4":"DelimitedTextConverter","value":1},{"name":"GraphMLConverter","level1":"vis","level2":"data","level3":"converters","level4":"GraphMLConverter","value":1},{"name":"IDataConverter","level1":"vis","level2":"data","level3":"converters","level4":"IDataConverter","value":1},{"name":"JSONConverter","level1":"vis","level2":"data","level3":"converters","level4":"JSONConverter","value":1}]},{"name":"render","children":[{"name":"ArrowType","level1":"vis","level2":"data","level3":"render","level4":"ArrowType","value":1},{"name":"EdgeRenderer","level1":"vis","level2":"data","level3":"render","level4":"EdgeRenderer","value":1},{"name":"IRenderer","level1":"vis","level2":"data","level3":"render","level4":"IRenderer","value":1},{"name":"ShapeRenderer","level1":"vis","level2":"data","level3":"render","level4":"ShapeRenderer","value":1}]}]},{"name":"operator","children":[{"name":"distortion","children":[{"name":"BifocalDistortion","level1":"vis","level2":"operator","level3":"distortion","level4":"BifocalDistortion","value":1},{"name":"Distortion","level1":"vis","level2":"operator","level3":"distortion","level4":"Distortion","value":1},{"name":"FisheyeDistortion","level1":"vis","level2":"operator","level3":"distortion","level4":"FisheyeDistortion","value":1}]},{"name":"encoder","children":[{"name":"ColorEncoder","level1":"vis","level2":"operator","level3":"encoder","level4":"ColorEncoder","value":1},{"name":"Encoder","level1":"vis","level2":"operator","level3":"encoder","level4":"Encoder","value":1},{"name":"PropertyEncoder","level1":"vis","level2":"operator","level3":"encoder","level4":"PropertyEncoder","value":1},{"name":"ShapeEncoder","level1":"vis","level2":"operator","level3":"encoder","level4":"ShapeEncoder","value":1},{"name":"SizeEncoder","level1":"vis","level2":"operator","level3":"encoder","level4":"SizeEncoder","value":1}]},{"name":"filter","children":[{"name":"FisheyeTreeFilter","level1":"vis","level2":"operator","level3":"filter","level4":"FisheyeTreeFilter","value":1},{"name":"GraphDistanceFilter","level1":"vis","level2":"operator","level3":"filter","level4":"GraphDistanceFilter","value":1},{"name":"VisibilityFilter","level1":"vis","level2":"operator","level3":"filter","level4":"VisibilityFilter","value":1}]},{"name":"label","children":[{"name":"Labeler","level1":"vis","level2":"operator","level3":"label","level4":"Labeler","value":1},{"name":"RadialLabeler","level1":"vis","level2":"operator","level3":"label","level4":"RadialLabeler","value":1},{"name":"StackedAreaLabeler","level1":"vis","level2":"operator","level3":"label","level4":"StackedAreaLabeler","value":1}]},{"name":"layout","children":[{"name":"AxisLayout","level1":"vis","level2":"operator","level3":"layout","level4":"AxisLayout","value":1},{"name":"BundledEdgeRouter","level1":"vis","level2":"operator","level3":"layout","level4":"BundledEdgeRouter","value":1},{"name":"CircleLayout","level1":"vis","level2":"operator","level3":"layout","level4":"CircleLayout","value":1},{"name":"CirclePackingLayout","level1":"vis","level2":"operator","level3":"layout","level4":"CirclePackingLayout","value":1},{"name":"DendrogramLayout","level1":"vis","level2":"operator","level3":"layout","level4":"DendrogramLayout","value":1},{"name":"ForceDirectedLayout","level1":"vis","level2":"operator","level3":"layout","level4":"ForceDirectedLayout","value":1},{"name":"IcicleTreeLayout","level1":"vis","level2":"operator","level3":"layout","level4":"IcicleTreeLayout","value":1},{"name":"IndentedTreeLayout","level1":"vis","level2":"operator","level3":"layout","level4":"IndentedTreeLayout","value":1},{"name":"Layout","level1":"vis","level2":"operator","level3":"layout","level4":"Layout","value":1},{"name":"NodeLinkTreeLayout","level1":"vis","level2":"operator","level3":"layout","level4":"NodeLinkTreeLayout","value":1},{"name":"PieLayout","level1":"vis","level2":"operator","level3":"layout","level4":"PieLayout","value":1},{"name":"RadialTreeLayout","level1":"vis","level2":"operator","level3":"layout","level4":"RadialTreeLayout","value":1},{"name":"RandomLayout","level1":"vis","level2":"operator","level3":"layout","level4":"RandomLayout","value":1},{"name":"StackedAreaLayout","level1":"vis","level2":"operator","level3":"layout","level4":"StackedAreaLayout","value":1},{"name":"TreeMapLayout","level1":"vis","level2":"operator","level3":"layout","level4":"TreeMapLayout","value":1}]}]}]}]},"options":{"size":"value","color_min":"hsl(152,80%,80%)","color_max":"hsl(228,30%,40%)"}},"evals":[],"jsHooks":[]}</script>
<p>将 edge list 转换为嵌套结构并用 circlepackeR 绘制多层级圆形打包图</p>
</div>
</div>


<!-- -->

</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./dendrogram.html" class="pagination-link" aria-label="Dendrogram">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Dendrogram</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./waffle.html" class="pagination-link" aria-label="Waffle">
        <span class="nav-page-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Waffle</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb24" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># Circular {#sec-circular}</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="fu">## PKG</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(packcircles) <span class="co"># for packing circles</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) <span class="co"># for data manipulation and visualization</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis) <span class="co"># for color palettes</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggiraph) <span class="co"># for interactive plots</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggraph) <span class="co"># for graph visualization</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(igraph) <span class="co"># for graph manipulation</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(circlepackeR) <span class="co"># for interactive circle packing</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a><span class="co"># remotes::install_github("jeromefroe/circlepackeR")</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.tree)</span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a><span class="fu">## One level</span></span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a><span class="fu">### Basic</span></span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Circle packing with packcircles"</span></span>
<span id="cb24-27"><a href="#cb24-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-28"><a href="#cb24-28" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(packcircles)  <span class="co"># 加载 packcircles 包，用于圆形打包</span></span>
<span id="cb24-29"><a href="#cb24-29" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)      <span class="co"># 加载 ggplot2 包，用于绘图</span></span>
<span id="cb24-30"><a href="#cb24-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-31"><a href="#cb24-31" aria-hidden="true" tabindex="-1"></a><span class="co"># 创建数据框，包含分组名称和对应的数值</span></span>
<span id="cb24-32"><a href="#cb24-32" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb24-33"><a href="#cb24-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> <span class="fu">paste</span>(<span class="st">"Group"</span>, letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>]),   <span class="co"># 生成 20 个分组名</span></span>
<span id="cb24-34"><a href="#cb24-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">value =</span> <span class="fu">sample</span>(<span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">100</span>), <span class="dv">20</span>)          <span class="co"># 随机生成 20 个 1~100 之间的数值</span></span>
<span id="cb24-35"><a href="#cb24-35" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-36"><a href="#cb24-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-37"><a href="#cb24-37" aria-hidden="true" tabindex="-1"></a><span class="co"># 生成圆形打包布局，返回每个圆的中心坐标 (x, y) 和半径 (radius)</span></span>
<span id="cb24-38"><a href="#cb24-38" aria-hidden="true" tabindex="-1"></a><span class="co"># sizetype='area' 表示半径根据面积成比例分配</span></span>
<span id="cb24-39"><a href="#cb24-39" aria-hidden="true" tabindex="-1"></a>packing <span class="ot">&lt;-</span> <span class="fu">circleProgressiveLayout</span>(data<span class="sc">$</span>value, <span class="at">sizetype =</span> <span class="st">'area'</span>)</span>
<span id="cb24-40"><a href="#cb24-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-41"><a href="#cb24-41" aria-hidden="true" tabindex="-1"></a><span class="co"># 将打包信息（中心坐标和半径）合并到原始数据框中</span></span>
<span id="cb24-42"><a href="#cb24-42" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">cbind</span>(data, packing)</span>
<span id="cb24-43"><a href="#cb24-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-44"><a href="#cb24-44" aria-hidden="true" tabindex="-1"></a><span class="co"># 检查半径与数值的关系（可选）</span></span>
<span id="cb24-45"><a href="#cb24-45" aria-hidden="true" tabindex="-1"></a><span class="co"># plot(data$radius, data$value)</span></span>
<span id="cb24-46"><a href="#cb24-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-47"><a href="#cb24-47" aria-hidden="true" tabindex="-1"></a><span class="co"># 根据每个圆的中心和半径，生成用于绘制圆形的多边形顶点坐标</span></span>
<span id="cb24-48"><a href="#cb24-48" aria-hidden="true" tabindex="-1"></a><span class="co"># npoints=50 表示每个圆用 50 个点近似</span></span>
<span id="cb24-49"><a href="#cb24-49" aria-hidden="true" tabindex="-1"></a>dat.gg <span class="ot">&lt;-</span> <span class="fu">circleLayoutVertices</span>(packing, <span class="at">npoints =</span> <span class="dv">50</span>)</span>
<span id="cb24-50"><a href="#cb24-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-51"><a href="#cb24-51" aria-hidden="true" tabindex="-1"></a><span class="co"># 绘制圆形打包图</span></span>
<span id="cb24-52"><a href="#cb24-52" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb24-53"><a href="#cb24-53" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制圆形多边形（气泡）</span></span>
<span id="cb24-54"><a href="#cb24-54" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_polygon</span>(</span>
<span id="cb24-55"><a href="#cb24-55" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> dat.gg,</span>
<span id="cb24-56"><a href="#cb24-56" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">group =</span> id, <span class="at">fill =</span> <span class="fu">as.factor</span>(id)),</span>
<span id="cb24-57"><a href="#cb24-57" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">"black"</span>, <span class="at">alpha =</span> <span class="fl">0.6</span></span>
<span id="cb24-58"><a href="#cb24-58" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-59"><a href="#cb24-59" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 在每个圆心添加文本标签，并根据 value 控制字体大小</span></span>
<span id="cb24-60"><a href="#cb24-60" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(</span>
<span id="cb24-61"><a href="#cb24-61" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> data,</span>
<span id="cb24-62"><a href="#cb24-62" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">size =</span> value, <span class="at">label =</span> group)</span>
<span id="cb24-63"><a href="#cb24-63" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-64"><a href="#cb24-64" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>)) <span class="sc">+</span>  <span class="co"># 设置字体大小范围</span></span>
<span id="cb24-65"><a href="#cb24-65" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置主题为无坐标轴、无背景</span></span>
<span id="cb24-66"><a href="#cb24-66" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb24-67"><a href="#cb24-67" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span>         <span class="co"># 不显示图例</span></span>
<span id="cb24-68"><a href="#cb24-68" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_equal</span>()                             <span class="co"># 保持 x、y 轴比例相等</span></span>
<span id="cb24-69"><a href="#cb24-69" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-70"><a href="#cb24-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-71"><a href="#cb24-71" aria-hidden="true" tabindex="-1"></a><span class="fu">### Color </span></span>
<span id="cb24-72"><a href="#cb24-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-73"><a href="#cb24-73" aria-hidden="true" tabindex="-1"></a>使用自定义调色板（magma）进行圆形打包可视化: </span>
<span id="cb24-74"><a href="#cb24-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-77"><a href="#cb24-77" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-78"><a href="#cb24-78" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "使用自定义调色板（magma）进行圆形打包可视化"</span></span>
<span id="cb24-79"><a href="#cb24-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-80"><a href="#cb24-80" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggplot2 绘制圆形打包图，并自定义颜色</span></span>
<span id="cb24-81"><a href="#cb24-81" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb24-82"><a href="#cb24-82" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制圆形多边形（气泡），每个圆用不同颜色填充</span></span>
<span id="cb24-83"><a href="#cb24-83" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_polygon</span>(</span>
<span id="cb24-84"><a href="#cb24-84" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> dat.gg,</span>
<span id="cb24-85"><a href="#cb24-85" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">group =</span> id, <span class="at">fill =</span> <span class="fu">as.factor</span>(id)), <span class="co"># 按 id 分组并填充颜色</span></span>
<span id="cb24-86"><a href="#cb24-86" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">"black"</span>,    <span class="co"># 圆边界为黑色</span></span>
<span id="cb24-87"><a href="#cb24-87" aria-hidden="true" tabindex="-1"></a>        <span class="at">alpha =</span> <span class="fl">0.6</span>          <span class="co"># 设置透明度</span></span>
<span id="cb24-88"><a href="#cb24-88" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-89"><a href="#cb24-89" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 使用 viridis 包中的 magma 调色板为每个圆分配颜色</span></span>
<span id="cb24-90"><a href="#cb24-90" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">magma</span>(<span class="fu">nrow</span>(data))) <span class="sc">+</span></span>
<span id="cb24-91"><a href="#cb24-91" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 在每个圆心添加文本标签，字体大小与 value 成比例</span></span>
<span id="cb24-92"><a href="#cb24-92" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(</span>
<span id="cb24-93"><a href="#cb24-93" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> data,</span>
<span id="cb24-94"><a href="#cb24-94" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">size =</span> value, <span class="at">label =</span> group)</span>
<span id="cb24-95"><a href="#cb24-95" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-96"><a href="#cb24-96" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>)) <span class="sc">+</span>  <span class="co"># 设置字体大小范围</span></span>
<span id="cb24-97"><a href="#cb24-97" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>                            <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb24-98"><a href="#cb24-98" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span>         <span class="co"># 不显示图例</span></span>
<span id="cb24-99"><a href="#cb24-99" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_equal</span>()                             <span class="co"># 保持 x、y 轴比例相等</span></span>
<span id="cb24-100"><a href="#cb24-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-101"><a href="#cb24-101" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-102"><a href="#cb24-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-103"><a href="#cb24-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-104"><a href="#cb24-104" aria-hidden="true" tabindex="-1"></a>使用渐变色（BuPu 调色板）根据 value 显示圆形打包图: </span>
<span id="cb24-105"><a href="#cb24-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-108"><a href="#cb24-108" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-109"><a href="#cb24-109" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "使用渐变色（BuPu 调色板）根据 value 显示圆形打包图"</span></span>
<span id="cb24-110"><a href="#cb24-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-111"><a href="#cb24-111" aria-hidden="true" tabindex="-1"></a><span class="co"># 首先，将每个分组的 value 添加到 dat.gg 数据框中。</span></span>
<span id="cb24-112"><a href="#cb24-112" aria-hidden="true" tabindex="-1"></a><span class="co"># 由于每个圆形多边形由 51 个点近似（npoints=50，首尾闭合），所以每个 value 需要重复 51 次。</span></span>
<span id="cb24-113"><a href="#cb24-113" aria-hidden="true" tabindex="-1"></a>dat.gg<span class="sc">$</span>value <span class="ot">&lt;-</span> <span class="fu">rep</span>(data<span class="sc">$</span>value, <span class="at">each =</span> <span class="dv">51</span>)</span>
<span id="cb24-114"><a href="#cb24-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-115"><a href="#cb24-115" aria-hidden="true" tabindex="-1"></a><span class="co"># 绘制圆形打包图</span></span>
<span id="cb24-116"><a href="#cb24-116" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb24-117"><a href="#cb24-117" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制圆形多边形（气泡），根据 value 使用渐变色填充</span></span>
<span id="cb24-118"><a href="#cb24-118" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_polygon</span>(</span>
<span id="cb24-119"><a href="#cb24-119" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> dat.gg,</span>
<span id="cb24-120"><a href="#cb24-120" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">group =</span> id, <span class="at">fill =</span> value),   <span class="co"># 按 value 渐变填充</span></span>
<span id="cb24-121"><a href="#cb24-121" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">"black"</span>,                      <span class="co"># 边界为黑色</span></span>
<span id="cb24-122"><a href="#cb24-122" aria-hidden="true" tabindex="-1"></a>        <span class="at">alpha =</span> <span class="fl">0.6</span>                            <span class="co"># 设置透明度</span></span>
<span id="cb24-123"><a href="#cb24-123" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-124"><a href="#cb24-124" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_distiller</span>(<span class="at">palette =</span> <span class="st">"BuPu"</span>, <span class="at">direction =</span> <span class="dv">1</span>) <span class="sc">+</span>  <span class="co"># 使用 BuPu 调色板</span></span>
<span id="cb24-125"><a href="#cb24-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-126"><a href="#cb24-126" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 在每个圆心添加文本标签，字体大小与 value 成比例</span></span>
<span id="cb24-127"><a href="#cb24-127" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(</span>
<span id="cb24-128"><a href="#cb24-128" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> data,</span>
<span id="cb24-129"><a href="#cb24-129" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">size =</span> value, <span class="at">label =</span> group)</span>
<span id="cb24-130"><a href="#cb24-130" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-131"><a href="#cb24-131" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>)) <span class="sc">+</span>  <span class="co"># 设置字体大小范围</span></span>
<span id="cb24-132"><a href="#cb24-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-133"><a href="#cb24-133" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置主题为无坐标轴、无背景</span></span>
<span id="cb24-134"><a href="#cb24-134" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb24-135"><a href="#cb24-135" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span>         <span class="co"># 不显示图例</span></span>
<span id="cb24-136"><a href="#cb24-136" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_equal</span>()                             <span class="co"># 保持 x、y 轴比例相等</span></span>
<span id="cb24-137"><a href="#cb24-137" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-138"><a href="#cb24-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-139"><a href="#cb24-139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-140"><a href="#cb24-140" aria-hidden="true" tabindex="-1"></a>通过 theme() 函数及其 plot.background() 参数更改背景: </span>
<span id="cb24-141"><a href="#cb24-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-144"><a href="#cb24-144" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-145"><a href="#cb24-145" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "自定义黑色背景的圆形打包图，使用Spectral调色板和标签"</span></span>
<span id="cb24-146"><a href="#cb24-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-147"><a href="#cb24-147" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggplot2 绘制圆形打包图，并设置黑色背景和自定义标题</span></span>
<span id="cb24-148"><a href="#cb24-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-149"><a href="#cb24-149" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb24-150"><a href="#cb24-150" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-151"><a href="#cb24-151" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 绘制圆形多边形（气泡），根据 value 使用渐变色填充</span></span>
<span id="cb24-152"><a href="#cb24-152" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(</span>
<span id="cb24-153"><a href="#cb24-153" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> dat.gg, </span>
<span id="cb24-154"><a href="#cb24-154" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(x, y, <span class="at">group =</span> id, <span class="at">fill =</span> value),   <span class="co"># 按 value 渐变填充</span></span>
<span id="cb24-155"><a href="#cb24-155" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"grey"</span>,                       <span class="co"># 边界为灰色</span></span>
<span id="cb24-156"><a href="#cb24-156" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="fl">0.6</span>,                           <span class="co"># 设置透明度</span></span>
<span id="cb24-157"><a href="#cb24-157" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> .<span class="dv">5</span>                              <span class="co"># 边界线宽</span></span>
<span id="cb24-158"><a href="#cb24-158" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb24-159"><a href="#cb24-159" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_distiller</span>(<span class="at">palette =</span> <span class="st">"Spectral"</span>, <span class="at">direction =</span> <span class="dv">1</span> ) <span class="sc">+</span>  <span class="co"># 使用 Spectral 调色板</span></span>
<span id="cb24-160"><a href="#cb24-160" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-161"><a href="#cb24-161" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 在每个圆心添加标签，字体大小与 value 成比例</span></span>
<span id="cb24-162"><a href="#cb24-162" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label</span>(</span>
<span id="cb24-163"><a href="#cb24-163" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> data, </span>
<span id="cb24-164"><a href="#cb24-164" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(x, y, <span class="at">size =</span> value, <span class="at">label =</span> group) <span class="co"># 标签内容为分组名</span></span>
<span id="cb24-165"><a href="#cb24-165" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb24-166"><a href="#cb24-166" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>)) <span class="sc">+</span> <span class="co"># 设置字体大小范围</span></span>
<span id="cb24-167"><a href="#cb24-167" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-168"><a href="#cb24-168" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 设置主题为无坐标轴、无背景，并自定义背景和标题颜色</span></span>
<span id="cb24-169"><a href="#cb24-169" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>()  <span class="sc">+</span> </span>
<span id="cb24-170"><a href="#cb24-170" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb24-171"><a href="#cb24-171" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span>,                        <span class="co"># 不显示图例</span></span>
<span id="cb24-172"><a href="#cb24-172" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"black"</span>),  <span class="co"># 设置背景为黑色</span></span>
<span id="cb24-173"><a href="#cb24-173" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"white"</span>)       <span class="co"># 标题字体为白色</span></span>
<span id="cb24-174"><a href="#cb24-174" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb24-175"><a href="#cb24-175" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_equal</span>() <span class="sc">+</span>                                    <span class="co"># 保持 x、y 轴比例相等</span></span>
<span id="cb24-176"><a href="#cb24-176" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"A custom circle packing with</span><span class="sc">\n</span><span class="st">black background"</span>) <span class="co"># 添加标题</span></span>
<span id="cb24-177"><a href="#cb24-177" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-178"><a href="#cb24-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-179"><a href="#cb24-179" aria-hidden="true" tabindex="-1"></a><span class="fu">### Space</span></span>
<span id="cb24-180"><a href="#cb24-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-181"><a href="#cb24-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-184"><a href="#cb24-184" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-185"><a href="#cb24-185" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: 使用 viridis 调色板展示圆形打包图</span></span>
<span id="cb24-186"><a href="#cb24-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-187"><a href="#cb24-187" aria-hidden="true" tabindex="-1"></a><span class="co"># 创建数据框，包含分组名称和对应的数值</span></span>
<span id="cb24-188"><a href="#cb24-188" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb24-189"><a href="#cb24-189" aria-hidden="true" tabindex="-1"></a>  <span class="at">group =</span> <span class="fu">paste</span>(<span class="st">"Group"</span>, letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>]),</span>
<span id="cb24-190"><a href="#cb24-190" aria-hidden="true" tabindex="-1"></a>  <span class="at">value =</span> <span class="fu">sample</span>(<span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">100</span>), <span class="dv">20</span>)</span>
<span id="cb24-191"><a href="#cb24-191" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-192"><a href="#cb24-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-193"><a href="#cb24-193" aria-hidden="true" tabindex="-1"></a><span class="co"># 生成布局</span></span>
<span id="cb24-194"><a href="#cb24-194" aria-hidden="true" tabindex="-1"></a>packing <span class="ot">&lt;-</span> <span class="fu">circleProgressiveLayout</span>(data<span class="sc">$</span>value, <span class="at">sizetype =</span> <span class="st">'area'</span>)</span>
<span id="cb24-195"><a href="#cb24-195" aria-hidden="true" tabindex="-1"></a>packing<span class="sc">$</span>radius <span class="ot">&lt;-</span> <span class="fl">0.95</span> <span class="sc">*</span> packing<span class="sc">$</span>radius <span class="co"># 让直径小于 1, 留有空隙</span></span>
<span id="cb24-196"><a href="#cb24-196" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">cbind</span>(data, packing)</span>
<span id="cb24-197"><a href="#cb24-197" aria-hidden="true" tabindex="-1"></a>dat.gg <span class="ot">&lt;-</span> <span class="fu">circleLayoutVertices</span>(packing, <span class="at">npoints =</span> <span class="dv">50</span>)</span>
<span id="cb24-198"><a href="#cb24-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-199"><a href="#cb24-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-200"><a href="#cb24-200" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggplot2 绘制圆形打包图，采用 viridis 调色板</span></span>
<span id="cb24-201"><a href="#cb24-201" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb24-202"><a href="#cb24-202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-203"><a href="#cb24-203" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制圆形多边形（气泡），每个圆用不同颜色填充</span></span>
<span id="cb24-204"><a href="#cb24-204" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_polygon</span>(</span>
<span id="cb24-205"><a href="#cb24-205" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> dat.gg,                           <span class="co"># 多边形顶点数据</span></span>
<span id="cb24-206"><a href="#cb24-206" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">group =</span> id, <span class="at">fill =</span> id),        <span class="co"># 按 id 分组并填充颜色</span></span>
<span id="cb24-207"><a href="#cb24-207" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">"black"</span>,                        <span class="co"># 边界为黑色</span></span>
<span id="cb24-208"><a href="#cb24-208" aria-hidden="true" tabindex="-1"></a>        <span class="at">alpha =</span> <span class="fl">0.6</span>                              <span class="co"># 设置透明度</span></span>
<span id="cb24-209"><a href="#cb24-209" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-210"><a href="#cb24-210" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis</span>() <span class="sc">+</span>                     <span class="co"># 使用 viridis 调色板</span></span>
<span id="cb24-211"><a href="#cb24-211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-212"><a href="#cb24-212" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 在每个圆心添加文本标签，字体大小与 value 成比例</span></span>
<span id="cb24-213"><a href="#cb24-213" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(</span>
<span id="cb24-214"><a href="#cb24-214" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> data,                             <span class="co"># 圆心及标签数据</span></span>
<span id="cb24-215"><a href="#cb24-215" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">size =</span> value, <span class="at">label =</span> group),  <span class="co"># 设置圆心坐标、字体大小和标签内容</span></span>
<span id="cb24-216"><a href="#cb24-216" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="st">"black"</span>                          <span class="co"># 标签字体颜色为黑色</span></span>
<span id="cb24-217"><a href="#cb24-217" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-218"><a href="#cb24-218" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>                             <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb24-219"><a href="#cb24-219" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span>          <span class="co"># 不显示图例</span></span>
<span id="cb24-220"><a href="#cb24-220" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_equal</span>()                              <span class="co"># 保持 x、y 轴比例相等</span></span>
<span id="cb24-221"><a href="#cb24-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-222"><a href="#cb24-222" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-223"><a href="#cb24-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-224"><a href="#cb24-224" aria-hidden="true" tabindex="-1"></a><span class="fu">### Interactive</span></span>
<span id="cb24-225"><a href="#cb24-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-226"><a href="#cb24-226" aria-hidden="true" tabindex="-1"></a>使用 <span class="in">`ggiraph::girafe()`</span> 函数生成交互式圆形打包图，悬停查看详细信息:</span>
<span id="cb24-227"><a href="#cb24-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-230"><a href="#cb24-230" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-231"><a href="#cb24-231" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "交互式圆形打包图（circle packing），可悬停显示详细信息"</span></span>
<span id="cb24-232"><a href="#cb24-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-233"><a href="#cb24-233" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载所需包</span></span>
<span id="cb24-234"><a href="#cb24-234" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(packcircles)   <span class="co"># 用于圆形打包布局</span></span>
<span id="cb24-235"><a href="#cb24-235" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)       <span class="co"># 用于绘图</span></span>
<span id="cb24-236"><a href="#cb24-236" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis)       <span class="co"># 用于配色</span></span>
<span id="cb24-237"><a href="#cb24-237" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggiraph)       <span class="co"># 用于交互式图形</span></span>
<span id="cb24-238"><a href="#cb24-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-239"><a href="#cb24-239" aria-hidden="true" tabindex="-1"></a><span class="co"># 创建数据框，包含分组名称和对应的数值</span></span>
<span id="cb24-240"><a href="#cb24-240" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb24-241"><a href="#cb24-241" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> <span class="fu">paste</span>(</span>
<span id="cb24-242"><a href="#cb24-242" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Group_"</span>,</span>
<span id="cb24-243"><a href="#cb24-243" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sample</span>(letters, <span class="dv">70</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>),  <span class="co"># 随机生成 70 个字母</span></span>
<span id="cb24-244"><a href="#cb24-244" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sample</span>(letters, <span class="dv">70</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>),</span>
<span id="cb24-245"><a href="#cb24-245" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sample</span>(letters, <span class="dv">70</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>),</span>
<span id="cb24-246"><a href="#cb24-246" aria-hidden="true" tabindex="-1"></a>        <span class="at">sep =</span> <span class="st">""</span></span>
<span id="cb24-247"><a href="#cb24-247" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb24-248"><a href="#cb24-248" aria-hidden="true" tabindex="-1"></a>    <span class="at">value =</span> <span class="fu">sample</span>(<span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">70</span>), <span class="dv">70</span>)          <span class="co"># 随机生成 70 个 1~70 之间的数值</span></span>
<span id="cb24-249"><a href="#cb24-249" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-250"><a href="#cb24-250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-251"><a href="#cb24-251" aria-hidden="true" tabindex="-1"></a><span class="co"># 添加文本列，用于气泡悬停时显示详细信息</span></span>
<span id="cb24-252"><a href="#cb24-252" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>text <span class="ot">&lt;-</span> <span class="fu">paste</span>(</span>
<span id="cb24-253"><a href="#cb24-253" aria-hidden="true" tabindex="-1"></a>    <span class="st">"name: "</span>, data<span class="sc">$</span>group, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb24-254"><a href="#cb24-254" aria-hidden="true" tabindex="-1"></a>    <span class="st">"value: "</span>, data<span class="sc">$</span>value, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb24-255"><a href="#cb24-255" aria-hidden="true" tabindex="-1"></a>    <span class="st">"You can add a story here!"</span></span>
<span id="cb24-256"><a href="#cb24-256" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-257"><a href="#cb24-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-258"><a href="#cb24-258" aria-hidden="true" tabindex="-1"></a><span class="co"># 生成圆形打包布局，返回每个圆的中心坐标 (x, y) 和半径 (radius)</span></span>
<span id="cb24-259"><a href="#cb24-259" aria-hidden="true" tabindex="-1"></a>packing <span class="ot">&lt;-</span> <span class="fu">circleProgressiveLayout</span>(data<span class="sc">$</span>value, <span class="at">sizetype =</span> <span class="st">'area'</span>)</span>
<span id="cb24-260"><a href="#cb24-260" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">cbind</span>(data, packing)</span>
<span id="cb24-261"><a href="#cb24-261" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-262"><a href="#cb24-262" aria-hidden="true" tabindex="-1"></a><span class="co"># 根据每个圆的中心和半径，生成用于绘制圆形的多边形顶点坐标</span></span>
<span id="cb24-263"><a href="#cb24-263" aria-hidden="true" tabindex="-1"></a>dat.gg <span class="ot">&lt;-</span> <span class="fu">circleLayoutVertices</span>(packing, <span class="at">npoints =</span> <span class="dv">50</span>)</span>
<span id="cb24-264"><a href="#cb24-264" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-265"><a href="#cb24-265" aria-hidden="true" tabindex="-1"></a><span class="co"># 绘制交互式圆形打包图</span></span>
<span id="cb24-266"><a href="#cb24-266" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb24-267"><a href="#cb24-267" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制交互式圆形多边形（气泡），可悬停显示 tooltip</span></span>
<span id="cb24-268"><a href="#cb24-268" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_polygon_interactive</span>(</span>
<span id="cb24-269"><a href="#cb24-269" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> dat.gg,</span>
<span id="cb24-270"><a href="#cb24-270" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(</span>
<span id="cb24-271"><a href="#cb24-271" aria-hidden="true" tabindex="-1"></a>            x, y, <span class="at">group =</span> id, <span class="at">fill =</span> id,</span>
<span id="cb24-272"><a href="#cb24-272" aria-hidden="true" tabindex="-1"></a>            <span class="at">tooltip =</span> data<span class="sc">$</span>text[id],   <span class="co"># 悬停显示的文本</span></span>
<span id="cb24-273"><a href="#cb24-273" aria-hidden="true" tabindex="-1"></a>            <span class="at">data_id =</span> id               <span class="co"># 交互用的唯一标识</span></span>
<span id="cb24-274"><a href="#cb24-274" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb24-275"><a href="#cb24-275" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">"black"</span>,            <span class="co"># 边界为黑色</span></span>
<span id="cb24-276"><a href="#cb24-276" aria-hidden="true" tabindex="-1"></a>        <span class="at">alpha =</span> <span class="fl">0.6</span>                  <span class="co"># 设置透明度</span></span>
<span id="cb24-277"><a href="#cb24-277" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-278"><a href="#cb24-278" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis</span>() <span class="sc">+</span>         <span class="co"># 使用 viridis 调色板</span></span>
<span id="cb24-279"><a href="#cb24-279" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 在每个圆心添加文本标签，去掉 "Group_" 前缀</span></span>
<span id="cb24-280"><a href="#cb24-280" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(</span>
<span id="cb24-281"><a href="#cb24-281" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> data,</span>
<span id="cb24-282"><a href="#cb24-282" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">label =</span> <span class="fu">gsub</span>(<span class="st">"Group_"</span>, <span class="st">""</span>, group)),</span>
<span id="cb24-283"><a href="#cb24-283" aria-hidden="true" tabindex="-1"></a>        <span class="at">size =</span> <span class="dv">2</span>,</span>
<span id="cb24-284"><a href="#cb24-284" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="st">"black"</span></span>
<span id="cb24-285"><a href="#cb24-285" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-286"><a href="#cb24-286" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>                 <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb24-287"><a href="#cb24-287" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb24-288"><a href="#cb24-288" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">"none"</span>, </span>
<span id="cb24-289"><a href="#cb24-289" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.margin =</span> <span class="fu">unit</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>), <span class="st">"cm"</span>)  <span class="co"># 去除边距</span></span>
<span id="cb24-290"><a href="#cb24-290" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-291"><a href="#cb24-291" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_equal</span>()                  <span class="co"># 保持 x、y 轴比例相等</span></span>
<span id="cb24-292"><a href="#cb24-292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-293"><a href="#cb24-293" aria-hidden="true" tabindex="-1"></a><span class="co"># 生成交互式图形</span></span>
<span id="cb24-294"><a href="#cb24-294" aria-hidden="true" tabindex="-1"></a><span class="fu">girafe</span>(<span class="at">ggobj =</span> p) <span class="co"># 旧版本用 ggiraph()</span></span>
<span id="cb24-295"><a href="#cb24-295" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-296"><a href="#cb24-296" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-297"><a href="#cb24-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-298"><a href="#cb24-298" aria-hidden="true" tabindex="-1"></a><span class="fu">## Several levels</span></span>
<span id="cb24-299"><a href="#cb24-299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-300"><a href="#cb24-300" aria-hidden="true" tabindex="-1"></a><span class="fu">### `ggraph()`</span></span>
<span id="cb24-301"><a href="#cb24-301" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-304"><a href="#cb24-304" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-305"><a href="#cb24-305" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "多层级圆形打包图（circle packing），展示层级结构数据"</span></span>
<span id="cb24-306"><a href="#cb24-306" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb24-307"><a href="#cb24-307" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 6</span></span>
<span id="cb24-308"><a href="#cb24-308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-309"><a href="#cb24-309" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggraph) <span class="co"># 用于图形可视化</span></span>
<span id="cb24-310"><a href="#cb24-310" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(igraph) <span class="co"># 用于图形操作</span></span>
<span id="cb24-311"><a href="#cb24-311" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb24-312"><a href="#cb24-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-313"><a href="#cb24-313" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载 edges 和 vertices 数据，flare 数据集内置于 packcircles 包</span></span>
<span id="cb24-314"><a href="#cb24-314" aria-hidden="true" tabindex="-1"></a>edges <span class="ot">&lt;-</span> flare<span class="sc">$</span>edges  <span class="co"># 边数据，描述节点之间的父子关系</span></span>
<span id="cb24-315"><a href="#cb24-315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-316"><a href="#cb24-316" aria-hidden="true" tabindex="-1"></a><span class="co"># 通常我们还会有一个节点信息表，包含每个节点的属性</span></span>
<span id="cb24-317"><a href="#cb24-317" aria-hidden="true" tabindex="-1"></a>vertices <span class="ot">&lt;-</span> flare<span class="sc">$</span>vertices  <span class="co"># 节点数据，包含节点名称、分组等信息</span></span>
<span id="cb24-318"><a href="#cb24-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-319"><a href="#cb24-319" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 igraph 包将边和节点数据转换为图对象</span></span>
<span id="cb24-320"><a href="#cb24-320" aria-hidden="true" tabindex="-1"></a>mygraph <span class="ot">&lt;-</span> <span class="fu">graph_from_data_frame</span>(edges, <span class="at">vertices =</span> vertices)</span>
<span id="cb24-321"><a href="#cb24-321" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-322"><a href="#cb24-322" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggraph 包绘制多层级圆形打包图</span></span>
<span id="cb24-323"><a href="#cb24-323" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'circlepack'</span>) <span class="sc">+</span> </span>
<span id="cb24-324"><a href="#cb24-324" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_circle</span>() <span class="sc">+</span>         <span class="co"># 绘制每个节点的圆</span></span>
<span id="cb24-325"><a href="#cb24-325" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>()                 <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb24-326"><a href="#cb24-326" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-327"><a href="#cb24-327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-328"><a href="#cb24-328" aria-hidden="true" tabindex="-1"></a><span class="fu">### type</span></span>
<span id="cb24-329"><a href="#cb24-329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-332"><a href="#cb24-332" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-333"><a href="#cb24-333" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: dendrogram, circle packing</span></span>
<span id="cb24-334"><a href="#cb24-334" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb24-335"><a href="#cb24-335" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 6</span></span>
<span id="cb24-336"><a href="#cb24-336" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-337"><a href="#cb24-337" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'dendrogram'</span>, <span class="at">circular =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb24-338"><a href="#cb24-338" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_edge_diagonal</span>() <span class="sc">+</span></span>
<span id="cb24-339"><a href="#cb24-339" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb24-340"><a href="#cb24-340" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb24-341"><a href="#cb24-341" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-342"><a href="#cb24-342" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-345"><a href="#cb24-345" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-346"><a href="#cb24-346" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: dendrogram, not circle packing</span></span>
<span id="cb24-347"><a href="#cb24-347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-348"><a href="#cb24-348" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'dendrogram'</span>, <span class="at">circular =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb24-349"><a href="#cb24-349" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_edge_diagonal</span>() <span class="sc">+</span></span>
<span id="cb24-350"><a href="#cb24-350" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb24-351"><a href="#cb24-351" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb24-352"><a href="#cb24-352" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-353"><a href="#cb24-353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-356"><a href="#cb24-356" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-357"><a href="#cb24-357" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: treemap</span></span>
<span id="cb24-358"><a href="#cb24-358" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-359"><a href="#cb24-359" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="st">'treemap'</span>, <span class="at">weight =</span> size) <span class="sc">+</span></span>
<span id="cb24-360"><a href="#cb24-360" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_node_tile</span>(<span class="fu">aes</span>(<span class="at">fill =</span> depth), <span class="at">size =</span> <span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb24-361"><a href="#cb24-361" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb24-362"><a href="#cb24-362" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb24-363"><a href="#cb24-363" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-364"><a href="#cb24-364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-367"><a href="#cb24-367" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-368"><a href="#cb24-368" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: partition</span></span>
<span id="cb24-369"><a href="#cb24-369" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-370"><a href="#cb24-370" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="st">'partition'</span>, <span class="at">circular =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb24-371"><a href="#cb24-371" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_node_arc_bar</span>(<span class="fu">aes</span>(<span class="at">fill =</span> depth), <span class="at">size =</span> <span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb24-372"><a href="#cb24-372" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb24-373"><a href="#cb24-373" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb24-374"><a href="#cb24-374" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-375"><a href="#cb24-375" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-378"><a href="#cb24-378" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-379"><a href="#cb24-379" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "基础网络图：节点与连线的可视化"</span></span>
<span id="cb24-380"><a href="#cb24-380" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-381"><a href="#cb24-381" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggraph 绘制基础网络图，展示节点与边的关系</span></span>
<span id="cb24-382"><a href="#cb24-382" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph) <span class="sc">+</span></span>
<span id="cb24-383"><a href="#cb24-383" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制边（连线），表示节点之间的连接关系</span></span>
<span id="cb24-384"><a href="#cb24-384" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_edge_link</span>() <span class="sc">+</span></span>
<span id="cb24-385"><a href="#cb24-385" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制节点（点），表示网络中的各个实体</span></span>
<span id="cb24-386"><a href="#cb24-386" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_point</span>() <span class="sc">+</span></span>
<span id="cb24-387"><a href="#cb24-387" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 去除坐标轴和背景，使图形更简洁</span></span>
<span id="cb24-388"><a href="#cb24-388" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb24-389"><a href="#cb24-389" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 不显示图例</span></span>
<span id="cb24-390"><a href="#cb24-390" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb24-391"><a href="#cb24-391" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-392"><a href="#cb24-392" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-393"><a href="#cb24-393" aria-hidden="true" tabindex="-1"></a><span class="fu">### color</span></span>
<span id="cb24-394"><a href="#cb24-394" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-395"><a href="#cb24-395" aria-hidden="true" tabindex="-1"></a>节点颜色根据深度变化: </span>
<span id="cb24-396"><a href="#cb24-396" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-399"><a href="#cb24-399" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-400"><a href="#cb24-400" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: 圆形打包图：节点颜色根据深度变化</span></span>
<span id="cb24-401"><a href="#cb24-401" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb24-402"><a href="#cb24-402" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 6</span></span>
<span id="cb24-403"><a href="#cb24-403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-404"><a href="#cb24-404" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggraph 绘制圆形打包图，节点颜色根据深度变化</span></span>
<span id="cb24-405"><a href="#cb24-405" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'circlepack'</span>, <span class="at">weight=</span>size) <span class="sc">+</span> </span>
<span id="cb24-406"><a href="#cb24-406" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_node_circle</span>(<span class="fu">aes</span>(<span class="at">fill =</span> depth)) <span class="sc">+</span></span>
<span id="cb24-407"><a href="#cb24-407" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span> </span>
<span id="cb24-408"><a href="#cb24-408" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"FALSE"</span>)</span>
<span id="cb24-409"><a href="#cb24-409" aria-hidden="true" tabindex="-1"></a>p</span>
<span id="cb24-410"><a href="#cb24-410" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-411"><a href="#cb24-411" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-414"><a href="#cb24-414" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-415"><a href="#cb24-415" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: viridis 调色板应用于圆形打包图</span></span>
<span id="cb24-416"><a href="#cb24-416" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb24-417"><a href="#cb24-417" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 6</span></span>
<span id="cb24-418"><a href="#cb24-418" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-419"><a href="#cb24-419" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">scale_fill_viridis</span>()</span>
<span id="cb24-420"><a href="#cb24-420" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-421"><a href="#cb24-421" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-424"><a href="#cb24-424" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-425"><a href="#cb24-425" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: colorBrewer 调色板应用于圆形打包图</span></span>
<span id="cb24-426"><a href="#cb24-426" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb24-427"><a href="#cb24-427" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 6</span></span>
<span id="cb24-428"><a href="#cb24-428" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-429"><a href="#cb24-429" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">scale_fill_distiller</span>(<span class="at">palette =</span> <span class="st">"RdPu"</span>) </span>
<span id="cb24-430"><a href="#cb24-430" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-431"><a href="#cb24-431" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-432"><a href="#cb24-432" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-433"><a href="#cb24-433" aria-hidden="true" tabindex="-1"></a><span class="fu">### label</span></span>
<span id="cb24-434"><a href="#cb24-434" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-435"><a href="#cb24-435" aria-hidden="true" tabindex="-1"></a>适用于层级不特别多的情况</span>
<span id="cb24-436"><a href="#cb24-436" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-439"><a href="#cb24-439" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-440"><a href="#cb24-440" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "带标签的多层级圆形打包图（circle packing），仅叶节点显示标签"</span></span>
<span id="cb24-441"><a href="#cb24-441" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb24-442"><a href="#cb24-442" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 6</span></span>
<span id="cb24-443"><a href="#cb24-443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-444"><a href="#cb24-444" aria-hidden="true" tabindex="-1"></a><span class="co"># 仅保留有下级的边（即 to 在 from 中出现）</span></span>
<span id="cb24-445"><a href="#cb24-445" aria-hidden="true" tabindex="-1"></a>edges <span class="ot">&lt;-</span> flare<span class="sc">$</span>edges <span class="sc">|&gt;</span></span>
<span id="cb24-446"><a href="#cb24-446" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(to <span class="sc">%in%</span> from) <span class="sc">|&gt;</span></span>
<span id="cb24-447"><a href="#cb24-447" aria-hidden="true" tabindex="-1"></a>    <span class="fu">droplevels</span>()</span>
<span id="cb24-448"><a href="#cb24-448" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-449"><a href="#cb24-449" aria-hidden="true" tabindex="-1"></a><span class="co"># 仅保留参与这些边的节点</span></span>
<span id="cb24-450"><a href="#cb24-450" aria-hidden="true" tabindex="-1"></a>vertices <span class="ot">&lt;-</span> flare<span class="sc">$</span>vertices <span class="sc">|&gt;</span></span>
<span id="cb24-451"><a href="#cb24-451" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(name <span class="sc">%in%</span> <span class="fu">c</span>(edges<span class="sc">$</span>from, edges<span class="sc">$</span>to)) <span class="sc">|&gt;</span></span>
<span id="cb24-452"><a href="#cb24-452" aria-hidden="true" tabindex="-1"></a>    <span class="fu">droplevels</span>()</span>
<span id="cb24-453"><a href="#cb24-453" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-454"><a href="#cb24-454" aria-hidden="true" tabindex="-1"></a><span class="co"># 随机生成每个节点的 size 属性（可根据实际数据调整）</span></span>
<span id="cb24-455"><a href="#cb24-455" aria-hidden="true" tabindex="-1"></a>vertices<span class="sc">$</span>size <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="fu">nrow</span>(vertices))</span>
<span id="cb24-456"><a href="#cb24-456" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-457"><a href="#cb24-457" aria-hidden="true" tabindex="-1"></a><span class="co"># 重新构建 igraph 图对象</span></span>
<span id="cb24-458"><a href="#cb24-458" aria-hidden="true" tabindex="-1"></a>mygraph <span class="ot">&lt;-</span> <span class="fu">graph_from_data_frame</span>(edges, <span class="at">vertices =</span> vertices)</span>
<span id="cb24-459"><a href="#cb24-459" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-460"><a href="#cb24-460" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggraph 绘制多层级圆形打包图</span></span>
<span id="cb24-461"><a href="#cb24-461" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'circlepack'</span>, <span class="at">weight =</span> size) <span class="sc">+</span></span>
<span id="cb24-462"><a href="#cb24-462" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制每个节点的圆，颜色根据深度变化</span></span>
<span id="cb24-463"><a href="#cb24-463" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_circle</span>(<span class="fu">aes</span>(<span class="at">fill =</span> depth)) <span class="sc">+</span></span>
<span id="cb24-464"><a href="#cb24-464" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 仅在叶节点（leaf=TRUE）处添加标签，标签内容为 shortName，字体大小与 size 成比例</span></span>
<span id="cb24-465"><a href="#cb24-465" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_text</span>(<span class="fu">aes</span>(</span>
<span id="cb24-466"><a href="#cb24-466" aria-hidden="true" tabindex="-1"></a>        <span class="at">label =</span> shortName,    <span class="co"># 标签内容</span></span>
<span id="cb24-467"><a href="#cb24-467" aria-hidden="true" tabindex="-1"></a>        <span class="at">filter =</span> leaf,        <span class="co"># 仅叶节点显示</span></span>
<span id="cb24-468"><a href="#cb24-468" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill =</span> depth,         <span class="co"># 标签颜色与深度一致</span></span>
<span id="cb24-469"><a href="#cb24-469" aria-hidden="true" tabindex="-1"></a>        <span class="at">size =</span> size           <span class="co"># 字体大小与 size 成比例</span></span>
<span id="cb24-470"><a href="#cb24-470" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">+</span></span>
<span id="cb24-471"><a href="#cb24-471" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>                          <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb24-472"><a href="#cb24-472" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"FALSE"</span>) <span class="sc">+</span>      <span class="co"># 不显示图例</span></span>
<span id="cb24-473"><a href="#cb24-473" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis</span>()                    <span class="co"># 使用 viridis 调色板</span></span>
<span id="cb24-474"><a href="#cb24-474" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-475"><a href="#cb24-475" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-476"><a href="#cb24-476" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-479"><a href="#cb24-479" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-480"><a href="#cb24-480" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "带标签的多层级圆形打包图（circle packing），仅叶节点显示标签"</span></span>
<span id="cb24-481"><a href="#cb24-481" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb24-482"><a href="#cb24-482" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 6</span></span>
<span id="cb24-483"><a href="#cb24-483" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-484"><a href="#cb24-484" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggraph 绘制多层级圆形打包图，节点颜色根据深度变化，叶节点显示标签</span></span>
<span id="cb24-485"><a href="#cb24-485" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'circlepack'</span>, <span class="at">weight =</span> size) <span class="sc">+</span> </span>
<span id="cb24-486"><a href="#cb24-486" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制每个节点的圆，颜色根据深度变化</span></span>
<span id="cb24-487"><a href="#cb24-487" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_circle</span>(<span class="fu">aes</span>(<span class="at">fill =</span> depth)) <span class="sc">+</span></span>
<span id="cb24-488"><a href="#cb24-488" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 仅在叶节点（leaf=TRUE）处添加标签，标签内容为 shortName，字体大小与 size 成比例</span></span>
<span id="cb24-489"><a href="#cb24-489" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_label</span>(</span>
<span id="cb24-490"><a href="#cb24-490" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(</span>
<span id="cb24-491"><a href="#cb24-491" aria-hidden="true" tabindex="-1"></a>            <span class="at">label =</span> shortName,  <span class="co"># 标签内容为节点的 shortName</span></span>
<span id="cb24-492"><a href="#cb24-492" aria-hidden="true" tabindex="-1"></a>            <span class="at">filter =</span> leaf,      <span class="co"># 仅叶节点显示标签</span></span>
<span id="cb24-493"><a href="#cb24-493" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> size         <span class="co"># 字体大小与 size 成比例</span></span>
<span id="cb24-494"><a href="#cb24-494" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb24-495"><a href="#cb24-495" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-496"><a href="#cb24-496" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>                          <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb24-497"><a href="#cb24-497" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"FALSE"</span>) <span class="sc">+</span>      <span class="co"># 不显示图例</span></span>
<span id="cb24-498"><a href="#cb24-498" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis</span>()                    <span class="co"># 使用 viridis 调色板</span></span>
<span id="cb24-499"><a href="#cb24-499" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-500"><a href="#cb24-500" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-501"><a href="#cb24-501" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-502"><a href="#cb24-502" aria-hidden="true" tabindex="-1"></a><span class="fu">### Hide</span></span>
<span id="cb24-503"><a href="#cb24-503" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-504"><a href="#cb24-504" aria-hidden="true" tabindex="-1"></a>隐藏1个或多个外层大圈:</span>
<span id="cb24-505"><a href="#cb24-505" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-508"><a href="#cb24-508" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-509"><a href="#cb24-509" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "隐藏最外层大圈的多层级圆形打包图（circle packing）"</span></span>
<span id="cb24-510"><a href="#cb24-510" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb24-511"><a href="#cb24-511" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 6</span></span>
<span id="cb24-512"><a href="#cb24-512" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-513"><a href="#cb24-513" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 packcircles 包内置的 flare 数据集，包含层级结构的边和节点信息</span></span>
<span id="cb24-514"><a href="#cb24-514" aria-hidden="true" tabindex="-1"></a>edges <span class="ot">=</span> flare<span class="sc">$</span>edges         <span class="co"># 边数据，描述父子关系</span></span>
<span id="cb24-515"><a href="#cb24-515" aria-hidden="true" tabindex="-1"></a>vertices <span class="ot">=</span> flare<span class="sc">$</span>vertices   <span class="co"># 节点数据，包含节点属性</span></span>
<span id="cb24-516"><a href="#cb24-516" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-517"><a href="#cb24-517" aria-hidden="true" tabindex="-1"></a><span class="co"># 构建 igraph 图对象</span></span>
<span id="cb24-518"><a href="#cb24-518" aria-hidden="true" tabindex="-1"></a>mygraph <span class="ot">&lt;-</span> <span class="fu">graph_from_data_frame</span>(edges, <span class="at">vertices =</span> vertices)</span>
<span id="cb24-519"><a href="#cb24-519" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-520"><a href="#cb24-520" aria-hidden="true" tabindex="-1"></a><span class="co"># 绘制多层级圆形打包图，隐藏最外层大圈（depth=0 填充为白色）</span></span>
<span id="cb24-521"><a href="#cb24-521" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'circlepack'</span>, <span class="at">weight =</span> size) <span class="sc">+</span></span>
<span id="cb24-522"><a href="#cb24-522" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制每个节点的圆，填充和边框颜色根据深度分组</span></span>
<span id="cb24-523"><a href="#cb24-523" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_circle</span>(<span class="fu">aes</span>(<span class="at">fill =</span> <span class="fu">as.factor</span>(depth), <span class="at">color =</span> <span class="fu">as.factor</span>(depth))) <span class="sc">+</span></span>
<span id="cb24-524"><a href="#cb24-524" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置不同深度的填充颜色，最外层（depth=0）为白色，其余用 viridis 调色板</span></span>
<span id="cb24-525"><a href="#cb24-525" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(</span>
<span id="cb24-526"><a href="#cb24-526" aria-hidden="true" tabindex="-1"></a>        <span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb24-527"><a href="#cb24-527" aria-hidden="true" tabindex="-1"></a>            <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"white"</span>,           <span class="co"># 最外层隐藏</span></span>
<span id="cb24-528"><a href="#cb24-528" aria-hidden="true" tabindex="-1"></a>            <span class="st">"1"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">1</span>],     <span class="co"># 第一层</span></span>
<span id="cb24-529"><a href="#cb24-529" aria-hidden="true" tabindex="-1"></a>            <span class="st">"2"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">2</span>],     <span class="co"># 第二层</span></span>
<span id="cb24-530"><a href="#cb24-530" aria-hidden="true" tabindex="-1"></a>            <span class="st">"3"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">3</span>],     <span class="co"># 第三层</span></span>
<span id="cb24-531"><a href="#cb24-531" aria-hidden="true" tabindex="-1"></a>            <span class="st">"4"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">4</span>]      <span class="co"># 第四层</span></span>
<span id="cb24-532"><a href="#cb24-532" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb24-533"><a href="#cb24-533" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-534"><a href="#cb24-534" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置不同深度的边框颜色，最外层为白色，其余为黑色</span></span>
<span id="cb24-535"><a href="#cb24-535" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_manual</span>(</span>
<span id="cb24-536"><a href="#cb24-536" aria-hidden="true" tabindex="-1"></a>        <span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb24-537"><a href="#cb24-537" aria-hidden="true" tabindex="-1"></a>            <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"white"</span>,           <span class="co"># 最外层隐藏</span></span>
<span id="cb24-538"><a href="#cb24-538" aria-hidden="true" tabindex="-1"></a>            <span class="st">"1"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb24-539"><a href="#cb24-539" aria-hidden="true" tabindex="-1"></a>            <span class="st">"2"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb24-540"><a href="#cb24-540" aria-hidden="true" tabindex="-1"></a>            <span class="st">"3"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb24-541"><a href="#cb24-541" aria-hidden="true" tabindex="-1"></a>            <span class="st">"4"</span> <span class="ot">=</span> <span class="st">"black"</span></span>
<span id="cb24-542"><a href="#cb24-542" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb24-543"><a href="#cb24-543" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-544"><a href="#cb24-544" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>                        <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb24-545"><a href="#cb24-545" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"FALSE"</span>)      <span class="co"># 不显示图例</span></span>
<span id="cb24-546"><a href="#cb24-546" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-547"><a href="#cb24-547" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-550"><a href="#cb24-550" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-551"><a href="#cb24-551" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "隐藏前两层大圈的多层级圆形打包图（circle packing）"</span></span>
<span id="cb24-552"><a href="#cb24-552" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb24-553"><a href="#cb24-553" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 6</span></span>
<span id="cb24-554"><a href="#cb24-554" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-555"><a href="#cb24-555" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggraph 绘制多层级圆形打包图，隐藏最外层和第二层大圈</span></span>
<span id="cb24-556"><a href="#cb24-556" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'circlepack'</span>, <span class="at">weight =</span> size) <span class="sc">+</span></span>
<span id="cb24-557"><a href="#cb24-557" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制每个节点的圆，填充和边框颜色根据深度分组</span></span>
<span id="cb24-558"><a href="#cb24-558" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_circle</span>(<span class="fu">aes</span>(<span class="at">fill =</span> <span class="fu">as.factor</span>(depth), <span class="at">color =</span> <span class="fu">as.factor</span>(depth))) <span class="sc">+</span></span>
<span id="cb24-559"><a href="#cb24-559" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置不同深度的填充颜色，前两层（depth=0,1）为白色，其余用 magma 调色板</span></span>
<span id="cb24-560"><a href="#cb24-560" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(</span>
<span id="cb24-561"><a href="#cb24-561" aria-hidden="true" tabindex="-1"></a>        <span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb24-562"><a href="#cb24-562" aria-hidden="true" tabindex="-1"></a>            <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"white"</span>,           <span class="co"># 最外层隐藏</span></span>
<span id="cb24-563"><a href="#cb24-563" aria-hidden="true" tabindex="-1"></a>            <span class="st">"1"</span> <span class="ot">=</span> <span class="st">"white"</span>,           <span class="co"># 第二层隐藏</span></span>
<span id="cb24-564"><a href="#cb24-564" aria-hidden="true" tabindex="-1"></a>            <span class="st">"2"</span> <span class="ot">=</span> <span class="fu">magma</span>(<span class="dv">4</span>)[<span class="dv">2</span>],       <span class="co"># 第三层</span></span>
<span id="cb24-565"><a href="#cb24-565" aria-hidden="true" tabindex="-1"></a>            <span class="st">"3"</span> <span class="ot">=</span> <span class="fu">magma</span>(<span class="dv">4</span>)[<span class="dv">3</span>],       <span class="co"># 第四层</span></span>
<span id="cb24-566"><a href="#cb24-566" aria-hidden="true" tabindex="-1"></a>            <span class="st">"4"</span> <span class="ot">=</span> <span class="fu">magma</span>(<span class="dv">4</span>)[<span class="dv">4</span>]        <span class="co"># 第五层</span></span>
<span id="cb24-567"><a href="#cb24-567" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb24-568"><a href="#cb24-568" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-569"><a href="#cb24-569" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置不同深度的边框颜色，前两层为白色，其余为黑色</span></span>
<span id="cb24-570"><a href="#cb24-570" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_manual</span>(</span>
<span id="cb24-571"><a href="#cb24-571" aria-hidden="true" tabindex="-1"></a>        <span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb24-572"><a href="#cb24-572" aria-hidden="true" tabindex="-1"></a>            <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"white"</span>,           <span class="co"># 最外层隐藏</span></span>
<span id="cb24-573"><a href="#cb24-573" aria-hidden="true" tabindex="-1"></a>            <span class="st">"1"</span> <span class="ot">=</span> <span class="st">"white"</span>,           <span class="co"># 第二层隐藏</span></span>
<span id="cb24-574"><a href="#cb24-574" aria-hidden="true" tabindex="-1"></a>            <span class="st">"2"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb24-575"><a href="#cb24-575" aria-hidden="true" tabindex="-1"></a>            <span class="st">"3"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb24-576"><a href="#cb24-576" aria-hidden="true" tabindex="-1"></a>            <span class="st">"4"</span> <span class="ot">=</span> <span class="st">"black"</span></span>
<span id="cb24-577"><a href="#cb24-577" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb24-578"><a href="#cb24-578" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-579"><a href="#cb24-579" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>                        <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb24-580"><a href="#cb24-580" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"FALSE"</span>)      <span class="co"># 不显示图例</span></span>
<span id="cb24-581"><a href="#cb24-581" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-582"><a href="#cb24-582" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-583"><a href="#cb24-583" aria-hidden="true" tabindex="-1"></a><span class="fu">### 特定 label</span></span>
<span id="cb24-584"><a href="#cb24-584" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-587"><a href="#cb24-587" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-588"><a href="#cb24-588" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "仅为特定层级（如 level=2）节点添加标签的多层级圆形打包图"</span></span>
<span id="cb24-589"><a href="#cb24-589" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb24-590"><a href="#cb24-590" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 6</span></span>
<span id="cb24-591"><a href="#cb24-591" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-592"><a href="#cb24-592" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载 data.tree 包，用于树结构操作</span></span>
<span id="cb24-593"><a href="#cb24-593" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.tree)</span>
<span id="cb24-594"><a href="#cb24-594" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-595"><a href="#cb24-595" aria-hidden="true" tabindex="-1"></a><span class="co"># 重新加载边和节点数据</span></span>
<span id="cb24-596"><a href="#cb24-596" aria-hidden="true" tabindex="-1"></a>edges <span class="ot">&lt;-</span> flare<span class="sc">$</span>edges</span>
<span id="cb24-597"><a href="#cb24-597" aria-hidden="true" tabindex="-1"></a>vertices <span class="ot">&lt;-</span> flare<span class="sc">$</span>vertices</span>
<span id="cb24-598"><a href="#cb24-598" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-599"><a href="#cb24-599" aria-hidden="true" tabindex="-1"></a><span class="co"># 将边数据转换为树结构，便于获取每个节点的层级信息</span></span>
<span id="cb24-600"><a href="#cb24-600" aria-hidden="true" tabindex="-1"></a>tree <span class="ot">&lt;-</span> <span class="fu">FromDataFrameNetwork</span>(edges)</span>
<span id="cb24-601"><a href="#cb24-601" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-602"><a href="#cb24-602" aria-hidden="true" tabindex="-1"></a><span class="co"># 获取每个节点的名称和层级，并合并到原始节点数据框</span></span>
<span id="cb24-603"><a href="#cb24-603" aria-hidden="true" tabindex="-1"></a>mylevels <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb24-604"><a href="#cb24-604" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> tree<span class="sc">$</span><span class="fu">Get</span>(<span class="st">'name'</span>),      <span class="co"># 节点名称</span></span>
<span id="cb24-605"><a href="#cb24-605" aria-hidden="true" tabindex="-1"></a>    <span class="at">level =</span> tree<span class="sc">$</span><span class="fu">Get</span>(<span class="st">"level"</span>)     <span class="co"># 节点层级（根节点为1）</span></span>
<span id="cb24-606"><a href="#cb24-606" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-607"><a href="#cb24-607" aria-hidden="true" tabindex="-1"></a>vertices <span class="ot">&lt;-</span> vertices <span class="sc">%&gt;%</span></span>
<span id="cb24-608"><a href="#cb24-608" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(., mylevels, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"name"</span> <span class="ot">=</span> <span class="st">"name"</span>))</span>
<span id="cb24-609"><a href="#cb24-609" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-610"><a href="#cb24-610" aria-hidden="true" tabindex="-1"></a><span class="co"># 仅为 level=2 的节点添加标签，其余节点标签为 NA</span></span>
<span id="cb24-611"><a href="#cb24-611" aria-hidden="true" tabindex="-1"></a>vertices <span class="ot">&lt;-</span> vertices <span class="sc">%&gt;%</span></span>
<span id="cb24-612"><a href="#cb24-612" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">new_label =</span> <span class="fu">ifelse</span>(level <span class="sc">==</span> <span class="dv">2</span>, shortName, <span class="cn">NA</span>))</span>
<span id="cb24-613"><a href="#cb24-613" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-614"><a href="#cb24-614" aria-hidden="true" tabindex="-1"></a><span class="co"># 构建 igraph 图对象</span></span>
<span id="cb24-615"><a href="#cb24-615" aria-hidden="true" tabindex="-1"></a>mygraph <span class="ot">&lt;-</span> <span class="fu">graph_from_data_frame</span>(edges, <span class="at">vertices =</span> vertices)</span>
<span id="cb24-616"><a href="#cb24-616" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-617"><a href="#cb24-617" aria-hidden="true" tabindex="-1"></a><span class="co"># 绘制多层级圆形打包图</span></span>
<span id="cb24-618"><a href="#cb24-618" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'circlepack'</span>, <span class="at">weight =</span> size) <span class="sc">+</span></span>
<span id="cb24-619"><a href="#cb24-619" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制每个节点的圆，填充和边框颜色根据深度分组</span></span>
<span id="cb24-620"><a href="#cb24-620" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_circle</span>(<span class="fu">aes</span>(<span class="at">fill =</span> <span class="fu">as.factor</span>(depth), <span class="at">color =</span> <span class="fu">as.factor</span>(depth))) <span class="sc">+</span></span>
<span id="cb24-621"><a href="#cb24-621" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置不同深度的填充颜色，最外层为白色，其余用 viridis 调色板</span></span>
<span id="cb24-622"><a href="#cb24-622" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb24-623"><a href="#cb24-623" aria-hidden="true" tabindex="-1"></a>        <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"white"</span>,</span>
<span id="cb24-624"><a href="#cb24-624" aria-hidden="true" tabindex="-1"></a>        <span class="st">"1"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">1</span>],</span>
<span id="cb24-625"><a href="#cb24-625" aria-hidden="true" tabindex="-1"></a>        <span class="st">"2"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">2</span>],</span>
<span id="cb24-626"><a href="#cb24-626" aria-hidden="true" tabindex="-1"></a>        <span class="st">"3"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">3</span>],</span>
<span id="cb24-627"><a href="#cb24-627" aria-hidden="true" tabindex="-1"></a>        <span class="st">"4"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">4</span>]</span>
<span id="cb24-628"><a href="#cb24-628" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">+</span></span>
<span id="cb24-629"><a href="#cb24-629" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置不同深度的边框颜色，最外层为白色，其余为黑色</span></span>
<span id="cb24-630"><a href="#cb24-630" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb24-631"><a href="#cb24-631" aria-hidden="true" tabindex="-1"></a>        <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"white"</span>,</span>
<span id="cb24-632"><a href="#cb24-632" aria-hidden="true" tabindex="-1"></a>        <span class="st">"1"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb24-633"><a href="#cb24-633" aria-hidden="true" tabindex="-1"></a>        <span class="st">"2"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb24-634"><a href="#cb24-634" aria-hidden="true" tabindex="-1"></a>        <span class="st">"3"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb24-635"><a href="#cb24-635" aria-hidden="true" tabindex="-1"></a>        <span class="st">"4"</span> <span class="ot">=</span> <span class="st">"black"</span></span>
<span id="cb24-636"><a href="#cb24-636" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">+</span></span>
<span id="cb24-637"><a href="#cb24-637" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 仅为 new_label 非 NA 的节点添加标签（即 level=2 的节点）</span></span>
<span id="cb24-638"><a href="#cb24-638" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_label</span>(<span class="fu">aes</span>(<span class="at">label =</span> new_label), <span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb24-639"><a href="#cb24-639" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 去除坐标轴和背景，设置无图例和无边距</span></span>
<span id="cb24-640"><a href="#cb24-640" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb24-641"><a href="#cb24-641" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb24-642"><a href="#cb24-642" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">"FALSE"</span>,</span>
<span id="cb24-643"><a href="#cb24-643" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.margin =</span> <span class="fu">unit</span>(<span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">4</span>), <span class="st">"cm"</span>)</span>
<span id="cb24-644"><a href="#cb24-644" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb24-645"><a href="#cb24-645" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-646"><a href="#cb24-646" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-647"><a href="#cb24-647" aria-hidden="true" tabindex="-1"></a><span class="fu">### 可缩放</span></span>
<span id="cb24-648"><a href="#cb24-648" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-649"><a href="#cb24-649" aria-hidden="true" tabindex="-1"></a><span class="in">`circlePacker`</span> 包可以用来创建交互式和可缩放圆形堆积图</span>
<span id="cb24-650"><a href="#cb24-650" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-653"><a href="#cb24-653" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-654"><a href="#cb24-654" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "可缩放交互式多层级圆形打包图（circle packing），使用 circlepackeR 包"</span></span>
<span id="cb24-655"><a href="#cb24-655" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-656"><a href="#cb24-656" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载 circlepackeR 包，用于创建可缩放的交互式圆形打包图</span></span>
<span id="cb24-657"><a href="#cb24-657" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(circlepackeR)</span>
<span id="cb24-658"><a href="#cb24-658" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-659"><a href="#cb24-659" aria-hidden="true" tabindex="-1"></a><span class="co"># 构建一个嵌套数据框，包含多层级结构信息</span></span>
<span id="cb24-660"><a href="#cb24-660" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb24-661"><a href="#cb24-661" aria-hidden="true" tabindex="-1"></a>    <span class="at">root =</span> <span class="fu">rep</span>(<span class="st">"root"</span>, <span class="dv">15</span>),                                 <span class="co"># 根节点</span></span>
<span id="cb24-662"><a href="#cb24-662" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">"group A"</span>, <span class="dv">5</span>), <span class="fu">rep</span>(<span class="st">"group B"</span>, <span class="dv">5</span>), <span class="fu">rep</span>(<span class="st">"group C"</span>, <span class="dv">5</span>)), <span class="co"># 一级分组</span></span>
<span id="cb24-663"><a href="#cb24-663" aria-hidden="true" tabindex="-1"></a>    <span class="at">subgroup =</span> <span class="fu">rep</span>(letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>], <span class="at">each =</span> <span class="dv">3</span>),                 <span class="co"># 二级分组</span></span>
<span id="cb24-664"><a href="#cb24-664" aria-hidden="true" tabindex="-1"></a>    <span class="at">subsubgroup =</span> <span class="fu">rep</span>(letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>], <span class="dv">5</span>),                     <span class="co"># 三级分组</span></span>
<span id="cb24-665"><a href="#cb24-665" aria-hidden="true" tabindex="-1"></a>    <span class="at">value =</span> <span class="fu">sample</span>(<span class="fu">seq</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>), <span class="dv">15</span>)                           <span class="co"># 每个叶节点的数值</span></span>
<span id="cb24-666"><a href="#cb24-666" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-667"><a href="#cb24-667" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-668"><a href="#cb24-668" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 data.tree 包将数据转换为树结构</span></span>
<span id="cb24-669"><a href="#cb24-669" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.tree)</span>
<span id="cb24-670"><a href="#cb24-670" aria-hidden="true" tabindex="-1"></a><span class="co"># 构建 pathString 字段，格式为 root/group/subgroup/subsubgroup</span></span>
<span id="cb24-671"><a href="#cb24-671" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>pathString <span class="ot">&lt;-</span> <span class="fu">paste</span>(</span>
<span id="cb24-672"><a href="#cb24-672" aria-hidden="true" tabindex="-1"></a>    <span class="st">"world"</span>,                <span class="co"># 根节点名称</span></span>
<span id="cb24-673"><a href="#cb24-673" aria-hidden="true" tabindex="-1"></a>    data<span class="sc">$</span>group,             <span class="co"># 一级分组</span></span>
<span id="cb24-674"><a href="#cb24-674" aria-hidden="true" tabindex="-1"></a>    data<span class="sc">$</span>subgroup,          <span class="co"># 二级分组</span></span>
<span id="cb24-675"><a href="#cb24-675" aria-hidden="true" tabindex="-1"></a>    data<span class="sc">$</span>subsubgroup,       <span class="co"># 三级分组</span></span>
<span id="cb24-676"><a href="#cb24-676" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">"/"</span></span>
<span id="cb24-677"><a href="#cb24-677" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-678"><a href="#cb24-678" aria-hidden="true" tabindex="-1"></a><span class="co"># 转换为树结构对象</span></span>
<span id="cb24-679"><a href="#cb24-679" aria-hidden="true" tabindex="-1"></a>population <span class="ot">&lt;-</span> <span class="fu">as.Node</span>(data)</span>
<span id="cb24-680"><a href="#cb24-680" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-681"><a href="#cb24-681" aria-hidden="true" tabindex="-1"></a><span class="co"># 绘制可缩放的交互式圆形打包图</span></span>
<span id="cb24-682"><a href="#cb24-682" aria-hidden="true" tabindex="-1"></a><span class="co"># color_min 和 color_max 可自定义颜色范围</span></span>
<span id="cb24-683"><a href="#cb24-683" aria-hidden="true" tabindex="-1"></a><span class="fu">circlepackeR</span>(</span>
<span id="cb24-684"><a href="#cb24-684" aria-hidden="true" tabindex="-1"></a>    population,                 <span class="co"># 层级结构数据</span></span>
<span id="cb24-685"><a href="#cb24-685" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="st">"value"</span>,             <span class="co"># 用于圆面积的数值字段</span></span>
<span id="cb24-686"><a href="#cb24-686" aria-hidden="true" tabindex="-1"></a>    <span class="at">color_min =</span> <span class="st">"hsl(56,80%,80%)"</span>,   <span class="co"># 最小值对应的颜色</span></span>
<span id="cb24-687"><a href="#cb24-687" aria-hidden="true" tabindex="-1"></a>    <span class="at">color_max =</span> <span class="st">"hsl(341,30%,40%)"</span>   <span class="co"># 最大值对应的颜色</span></span>
<span id="cb24-688"><a href="#cb24-688" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-689"><a href="#cb24-689" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-690"><a href="#cb24-690" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-691"><a href="#cb24-691" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-692"><a href="#cb24-692" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-695"><a href="#cb24-695" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-696"><a href="#cb24-696" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "将 edge list 转换为嵌套结构并用 circlepackeR 绘制多层级圆形打包图"</span></span>
<span id="cb24-697"><a href="#cb24-697" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-698"><a href="#cb24-698" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载 circlepackeR 包，用于绘制交互式圆形打包图</span></span>
<span id="cb24-699"><a href="#cb24-699" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(circlepackeR)</span>
<span id="cb24-700"><a href="#cb24-700" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载 ggraph 包（本例未直接用到，但常用于网络可视化）</span></span>
<span id="cb24-701"><a href="#cb24-701" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggraph)</span>
<span id="cb24-702"><a href="#cb24-702" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-703"><a href="#cb24-703" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 packcircles 包内置的 flare 数据集，获取边列表</span></span>
<span id="cb24-704"><a href="#cb24-704" aria-hidden="true" tabindex="-1"></a>data_edge <span class="ot">&lt;-</span> flare<span class="sc">$</span>edges</span>
<span id="cb24-705"><a href="#cb24-705" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-706"><a href="#cb24-706" aria-hidden="true" tabindex="-1"></a><span class="co"># 提取每个节点名称的最后一级（去掉前面的分层前缀），便于后续分层</span></span>
<span id="cb24-707"><a href="#cb24-707" aria-hidden="true" tabindex="-1"></a>data_edge<span class="sc">$</span>from <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">".*</span><span class="sc">\\</span><span class="st">."</span>, <span class="st">""</span>, data_edge<span class="sc">$</span>from)</span>
<span id="cb24-708"><a href="#cb24-708" aria-hidden="true" tabindex="-1"></a>data_edge<span class="sc">$</span>to <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">".*</span><span class="sc">\\</span><span class="st">."</span>, <span class="st">""</span>, data_edge<span class="sc">$</span>to)</span>
<span id="cb24-709"><a href="#cb24-709" aria-hidden="true" tabindex="-1"></a><span class="co"># head(data_edge) # 查看处理后的边列表</span></span>
<span id="cb24-710"><a href="#cb24-710" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-711"><a href="#cb24-711" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载 data.tree 包，用于将边列表转换为树结构</span></span>
<span id="cb24-712"><a href="#cb24-712" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.tree)</span>
<span id="cb24-713"><a href="#cb24-713" aria-hidden="true" tabindex="-1"></a><span class="co"># 将边列表转换为树结构对象</span></span>
<span id="cb24-714"><a href="#cb24-714" aria-hidden="true" tabindex="-1"></a>data_tree <span class="ot">&lt;-</span> <span class="fu">FromDataFrameNetwork</span>(data_edge)</span>
<span id="cb24-715"><a href="#cb24-715" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-716"><a href="#cb24-716" aria-hidden="true" tabindex="-1"></a><span class="co"># 将树结构转换为嵌套数据框，提取每一层的名称</span></span>
<span id="cb24-717"><a href="#cb24-717" aria-hidden="true" tabindex="-1"></a>data_nested <span class="ot">&lt;-</span> <span class="fu">ToDataFrameTree</span>(</span>
<span id="cb24-718"><a href="#cb24-718" aria-hidden="true" tabindex="-1"></a>    data_tree,</span>
<span id="cb24-719"><a href="#cb24-719" aria-hidden="true" tabindex="-1"></a>    <span class="at">level1 =</span> <span class="cf">function</span>(x) x<span class="sc">$</span>path[<span class="dv">2</span>], <span class="co"># 第一层</span></span>
<span id="cb24-720"><a href="#cb24-720" aria-hidden="true" tabindex="-1"></a>    <span class="at">level2 =</span> <span class="cf">function</span>(x) x<span class="sc">$</span>path[<span class="dv">3</span>], <span class="co"># 第二层</span></span>
<span id="cb24-721"><a href="#cb24-721" aria-hidden="true" tabindex="-1"></a>    <span class="at">level3 =</span> <span class="cf">function</span>(x) x<span class="sc">$</span>path[<span class="dv">4</span>], <span class="co"># 第三层</span></span>
<span id="cb24-722"><a href="#cb24-722" aria-hidden="true" tabindex="-1"></a>    <span class="at">level4 =</span> <span class="cf">function</span>(x) x<span class="sc">$</span>path[<span class="dv">5</span>]  <span class="co"># 第四层</span></span>
<span id="cb24-723"><a href="#cb24-723" aria-hidden="true" tabindex="-1"></a>)[<span class="sc">-</span><span class="dv">1</span>, <span class="sc">-</span><span class="dv">1</span>] <span class="co"># 去除根节点和第一列（树结构自带的 name）</span></span>
<span id="cb24-724"><a href="#cb24-724" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-725"><a href="#cb24-725" aria-hidden="true" tabindex="-1"></a><span class="co"># 去除包含 NA 的行，只保留完整路径</span></span>
<span id="cb24-726"><a href="#cb24-726" aria-hidden="true" tabindex="-1"></a>data_nested <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(data_nested)</span>
<span id="cb24-727"><a href="#cb24-727" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-728"><a href="#cb24-728" aria-hidden="true" tabindex="-1"></a><span class="co"># 构建 pathString 字段，格式为 roots/level1/level2/level3/level4</span></span>
<span id="cb24-729"><a href="#cb24-729" aria-hidden="true" tabindex="-1"></a>data_nested<span class="sc">$</span>pathString <span class="ot">&lt;-</span> <span class="fu">paste</span>(</span>
<span id="cb24-730"><a href="#cb24-730" aria-hidden="true" tabindex="-1"></a>    <span class="st">"roots"</span>,</span>
<span id="cb24-731"><a href="#cb24-731" aria-hidden="true" tabindex="-1"></a>    data_nested<span class="sc">$</span>level1,</span>
<span id="cb24-732"><a href="#cb24-732" aria-hidden="true" tabindex="-1"></a>    data_nested<span class="sc">$</span>level2,</span>
<span id="cb24-733"><a href="#cb24-733" aria-hidden="true" tabindex="-1"></a>    data_nested<span class="sc">$</span>level3,</span>
<span id="cb24-734"><a href="#cb24-734" aria-hidden="true" tabindex="-1"></a>    data_nested<span class="sc">$</span>level4,</span>
<span id="cb24-735"><a href="#cb24-735" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">"/"</span></span>
<span id="cb24-736"><a href="#cb24-736" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-737"><a href="#cb24-737" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-738"><a href="#cb24-738" aria-hidden="true" tabindex="-1"></a><span class="co"># 设置每个叶节点的 value（圆面积），此处统一为 1</span></span>
<span id="cb24-739"><a href="#cb24-739" aria-hidden="true" tabindex="-1"></a>data_nested<span class="sc">$</span>value <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb24-740"><a href="#cb24-740" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-741"><a href="#cb24-741" aria-hidden="true" tabindex="-1"></a><span class="co"># 将嵌套数据框转换为树结构对象</span></span>
<span id="cb24-742"><a href="#cb24-742" aria-hidden="true" tabindex="-1"></a>data_Node <span class="ot">&lt;-</span> <span class="fu">as.Node</span>(data_nested)</span>
<span id="cb24-743"><a href="#cb24-743" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-744"><a href="#cb24-744" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 circlepackeR 绘制可缩放的多层级圆形打包图</span></span>
<span id="cb24-745"><a href="#cb24-745" aria-hidden="true" tabindex="-1"></a><span class="fu">circlepackeR</span>(data_Node, <span class="at">size =</span> <span class="st">"value"</span>)</span>
<span id="cb24-746"><a href="#cb24-746" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-747"><a href="#cb24-747" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>