<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>25&nbsp; Circular – 数据可视化探索(从入门到放弃)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./waffle.html" rel="next">
<link href="./dendrogram.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-485d01fc63b59abcd3ee1bf1e8e2748d.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="site_libs/d3-bundle-5.16.0/d3-bundle.min.js"></script>
<script src="site_libs/d3-lasso-0.0.5/d3-lasso.min.js"></script>
<script src="site_libs/save-svg-as-png-1.4.17/save-svg-as-png.min.js"></script>
<script src="site_libs/flatbush-4.4.0/flatbush.min.js"></script>
<link href="site_libs/ggiraphjs-0.8.10/ggiraphjs.min.css" rel="stylesheet">
<script src="site_libs/ggiraphjs-0.8.10/ggiraphjs.min.js"></script>
<script src="site_libs/girafe-binding-0.8.13/girafe.js"></script>
<script src="site_libs/d3-3.5.6/./d3.min.js"></script>
<link href="site_libs/circlepackeR-0.1/./style.css" rel="stylesheet">
<script src="site_libs/circlepackeR-binding-0.0.0.9000/circlepackeR.js"></script>


</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./part-of-a-whole.html">Part of a Whole</a></li><li class="breadcrumb-item"><a href="./circular.html"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Circular</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">数据可视化探索(从入门到放弃)</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quick_start.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">0 Quick start</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./distribution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Distribution</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./beeswarm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Beeswarm</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./histogram.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Histogram</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./boxplot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Boxplot</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./density.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Density</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ridgeline.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Ridgeline</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./violin.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Violin</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./correlation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Correlation</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./scatter.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Scatter</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./heatmap.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Heatmap</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./correlogram.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Correlogram</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./bubble.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Bubble</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./connected-scatter.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Conn-Scatter</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./density2d.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Density 2D</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Ranking</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./bar.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Bar</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./spider.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Spider</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wordcloud.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Wordcloud</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./parallel.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Parallel</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lollipop.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Lollipop</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cir-bar.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Cir-bar</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./table.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Table</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./part-of-a-whole.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Part of a Whole</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./group-bar.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Group bar</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./treemap.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Treemap</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./pie.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Pie</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./donut.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Donut</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dendrogram.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Dendrogram</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./circular.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Circular</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./waffle.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Waffle</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./summary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Summary</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#pkg" id="toc-pkg" class="nav-link active" data-scroll-target="#pkg"><span class="header-section-number">25.1</span> PKG</a></li>
  <li><a href="#one-level" id="toc-one-level" class="nav-link" data-scroll-target="#one-level"><span class="header-section-number">25.2</span> One level</a>
  <ul class="collapse">
  <li><a href="#basic" id="toc-basic" class="nav-link" data-scroll-target="#basic"><span class="header-section-number">25.2.1</span> Basic</a></li>
  <li><a href="#color" id="toc-color" class="nav-link" data-scroll-target="#color"><span class="header-section-number">25.2.2</span> Color</a></li>
  <li><a href="#space" id="toc-space" class="nav-link" data-scroll-target="#space"><span class="header-section-number">25.2.3</span> Space</a></li>
  <li><a href="#interactive" id="toc-interactive" class="nav-link" data-scroll-target="#interactive"><span class="header-section-number">25.2.4</span> Interactive</a></li>
  </ul></li>
  <li><a href="#several-levels" id="toc-several-levels" class="nav-link" data-scroll-target="#several-levels"><span class="header-section-number">25.3</span> Several levels</a>
  <ul class="collapse">
  <li><a href="#ggraph" id="toc-ggraph" class="nav-link" data-scroll-target="#ggraph"><span class="header-section-number">25.3.1</span> <code>ggraph()</code></a></li>
  <li><a href="#type" id="toc-type" class="nav-link" data-scroll-target="#type"><span class="header-section-number">25.3.2</span> type</a></li>
  <li><a href="#color-1" id="toc-color-1" class="nav-link" data-scroll-target="#color-1"><span class="header-section-number">25.3.3</span> color</a></li>
  <li><a href="#label" id="toc-label" class="nav-link" data-scroll-target="#label"><span class="header-section-number">25.3.4</span> label</a></li>
  <li><a href="#hide" id="toc-hide" class="nav-link" data-scroll-target="#hide"><span class="header-section-number">25.3.5</span> Hide</a></li>
  <li><a href="#特定-label" id="toc-特定-label" class="nav-link" data-scroll-target="#特定-label"><span class="header-section-number">25.3.6</span> 特定 label</a></li>
  <li><a href="#可缩放" id="toc-可缩放" class="nav-link" data-scroll-target="#可缩放"><span class="header-section-number">25.3.7</span> 可缩放</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./part-of-a-whole.html">Part of a Whole</a></li><li class="breadcrumb-item"><a href="./circular.html"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Circular</span></a></li></ol></nav>
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span id="sec-circular" class="quarto-section-identifier"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Circular</span></span></h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="pkg" class="level2" data-number="25.1">
<h2 data-number="25.1" class="anchored" data-anchor-id="pkg"><span class="header-section-number">25.1</span> PKG</h2>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(packcircles) <span class="co"># for packing circles</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) <span class="co"># for data manipulation and visualization</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis) <span class="co"># for color palettes</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggiraph) <span class="co"># for interactive plots</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggraph) <span class="co"># for graph visualization</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(igraph) <span class="co"># for graph manipulation</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(circlepackeR) <span class="co"># for interactive circle packing</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># remotes::install_github("jeromefroe/circlepackeR")</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.tree)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="one-level" class="level2" data-number="25.2">
<h2 data-number="25.2" class="anchored" data-anchor-id="one-level"><span class="header-section-number">25.2</span> One level</h2>
<section id="basic" class="level3" data-number="25.2.1">
<h3 data-number="25.2.1" class="anchored" data-anchor-id="basic"><span class="header-section-number">25.2.1</span> Basic</h3>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(packcircles)  <span class="co"># 加载 packcircles 包，用于圆形打包</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)      <span class="co"># 加载 ggplot2 包，用于绘图</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 创建数据框，包含分组名称和对应的数值</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> <span class="fu">paste</span>(<span class="st">"Group"</span>, letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>]),   <span class="co"># 生成 20 个分组名</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">value =</span> <span class="fu">sample</span>(<span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">100</span>), <span class="dv">20</span>)          <span class="co"># 随机生成 20 个 1~100 之间的数值</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 生成圆形打包布局，返回每个圆的中心坐标 (x, y) 和半径 (radius)</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="co"># sizetype='area' 表示半径根据面积成比例分配</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>packing <span class="ot">&lt;-</span> <span class="fu">circleProgressiveLayout</span>(data<span class="sc">$</span>value, <span class="at">sizetype =</span> <span class="st">'area'</span>)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="co"># 将打包信息（中心坐标和半径）合并到原始数据框中</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">cbind</span>(data, packing)</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="co"># 检查半径与数值的关系（可选）</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="co"># plot(data$radius, data$value)</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="co"># 根据每个圆的中心和半径，生成用于绘制圆形的多边形顶点坐标</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a><span class="co"># npoints=50 表示每个圆用 50 个点近似</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>dat.gg <span class="ot">&lt;-</span> <span class="fu">circleLayoutVertices</span>(packing, <span class="at">npoints =</span> <span class="dv">50</span>)</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a><span class="co"># 绘制圆形打包图</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制圆形多边形（气泡）</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_polygon</span>(</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> dat.gg,</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">group =</span> id, <span class="at">fill =</span> <span class="fu">as.factor</span>(id)),</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">"black"</span>, <span class="at">alpha =</span> <span class="fl">0.6</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 在每个圆心添加文本标签，并根据 value 控制字体大小</span></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> data,</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">size =</span> value, <span class="at">label =</span> group)</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>)) <span class="sc">+</span>  <span class="co"># 设置字体大小范围</span></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置主题为无坐标轴、无背景</span></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span>         <span class="co"># 不显示图例</span></span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_equal</span>()                             <span class="co"># 保持 x、y 轴比例相等</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>Circle packing with packcircles</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="color" class="level3" data-number="25.2.2">
<h3 data-number="25.2.2" class="anchored" data-anchor-id="color"><span class="header-section-number">25.2.2</span> Color</h3>
<p>使用自定义调色板（magma）进行圆形打包可视化:</p>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggplot2 绘制圆形打包图，并自定义颜色</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制圆形多边形（气泡），每个圆用不同颜色填充</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_polygon</span>(</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> dat.gg,</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">group =</span> id, <span class="at">fill =</span> <span class="fu">as.factor</span>(id)), <span class="co"># 按 id 分组并填充颜色</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">"black"</span>,    <span class="co"># 圆边界为黑色</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">alpha =</span> <span class="fl">0.6</span>          <span class="co"># 设置透明度</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 使用 viridis 包中的 magma 调色板为每个圆分配颜色</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">magma</span>(<span class="fu">nrow</span>(data))) <span class="sc">+</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 在每个圆心添加文本标签，字体大小与 value 成比例</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> data,</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">size =</span> value, <span class="at">label =</span> group)</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>)) <span class="sc">+</span>  <span class="co"># 设置字体大小范围</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>                            <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span>         <span class="co"># 不显示图例</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_equal</span>()                             <span class="co"># 保持 x、y 轴比例相等</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>使用自定义调色板（magma）进行圆形打包可视化</figcaption>
</figure>
</div>
</div>
</div>
<p>使用渐变色（BuPu 调色板）根据 value 显示圆形打包图:</p>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 首先，将每个分组的 value 添加到 dat.gg 数据框中。</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 由于每个圆形多边形由 51 个点近似（npoints=50，首尾闭合），所以每个 value 需要重复 51 次。</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>dat.gg<span class="sc">$</span>value <span class="ot">&lt;-</span> <span class="fu">rep</span>(data<span class="sc">$</span>value, <span class="at">each =</span> <span class="dv">51</span>)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 绘制圆形打包图</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制圆形多边形（气泡），根据 value 使用渐变色填充</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_polygon</span>(</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> dat.gg,</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">group =</span> id, <span class="at">fill =</span> value),   <span class="co"># 按 value 渐变填充</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">"black"</span>,                      <span class="co"># 边界为黑色</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">alpha =</span> <span class="fl">0.6</span>                            <span class="co"># 设置透明度</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_distiller</span>(<span class="at">palette =</span> <span class="st">"BuPu"</span>, <span class="at">direction =</span> <span class="dv">1</span>) <span class="sc">+</span>  <span class="co"># 使用 BuPu 调色板</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 在每个圆心添加文本标签，字体大小与 value 成比例</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> data,</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">size =</span> value, <span class="at">label =</span> group)</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>)) <span class="sc">+</span>  <span class="co"># 设置字体大小范围</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置主题为无坐标轴、无背景</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span>         <span class="co"># 不显示图例</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_equal</span>()                             <span class="co"># 保持 x、y 轴比例相等</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>使用渐变色（BuPu 调色板）根据 value 显示圆形打包图</figcaption>
</figure>
</div>
</div>
</div>
<p>通过 theme() 函数及其 plot.background() 参数更改背景:</p>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggplot2 绘制圆形打包图，并设置黑色背景和自定义标题</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 绘制圆形多边形（气泡），根据 value 使用渐变色填充</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> dat.gg, </span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(x, y, <span class="at">group =</span> id, <span class="at">fill =</span> value),   <span class="co"># 按 value 渐变填充</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"grey"</span>,                       <span class="co"># 边界为灰色</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="fl">0.6</span>,                           <span class="co"># 设置透明度</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> .<span class="dv">5</span>                              <span class="co"># 边界线宽</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_distiller</span>(<span class="at">palette =</span> <span class="st">"Spectral"</span>, <span class="at">direction =</span> <span class="dv">1</span> ) <span class="sc">+</span>  <span class="co"># 使用 Spectral 调色板</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 在每个圆心添加标签，字体大小与 value 成比例</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label</span>(</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> data, </span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(x, y, <span class="at">size =</span> value, <span class="at">label =</span> group) <span class="co"># 标签内容为分组名</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>)) <span class="sc">+</span> <span class="co"># 设置字体大小范围</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 设置主题为无坐标轴、无背景，并自定义背景和标题颜色</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>()  <span class="sc">+</span> </span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span>,                        <span class="co"># 不显示图例</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"black"</span>),  <span class="co"># 设置背景为黑色</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"white"</span>)       <span class="co"># 标题字体为白色</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_equal</span>() <span class="sc">+</span>                                    <span class="co"># 保持 x、y 轴比例相等</span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"A custom circle packing with</span><span class="sc">\n</span><span class="st">black background"</span>) <span class="co"># 添加标题</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>自定义黑色背景的圆形打包图，使用Spectral调色板和标签</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="space" class="level3" data-number="25.2.3">
<h3 data-number="25.2.3" class="anchored" data-anchor-id="space"><span class="header-section-number">25.2.3</span> Space</h3>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 创建数据框，包含分组名称和对应的数值</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">group =</span> <span class="fu">paste</span>(<span class="st">"Group"</span>, letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>]),</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">value =</span> <span class="fu">sample</span>(<span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">100</span>), <span class="dv">20</span>)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 生成布局</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>packing <span class="ot">&lt;-</span> <span class="fu">circleProgressiveLayout</span>(data<span class="sc">$</span>value, <span class="at">sizetype =</span> <span class="st">'area'</span>)</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>packing<span class="sc">$</span>radius <span class="ot">&lt;-</span> <span class="fl">0.95</span> <span class="sc">*</span> packing<span class="sc">$</span>radius <span class="co"># 让直径小于 1, 留有空隙</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">cbind</span>(data, packing)</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>dat.gg <span class="ot">&lt;-</span> <span class="fu">circleLayoutVertices</span>(packing, <span class="at">npoints =</span> <span class="dv">50</span>)</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggplot2 绘制圆形打包图，采用 viridis 调色板</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制圆形多边形（气泡），每个圆用不同颜色填充</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_polygon</span>(</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> dat.gg,                           <span class="co"># 多边形顶点数据</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">group =</span> id, <span class="at">fill =</span> id),        <span class="co"># 按 id 分组并填充颜色</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">"black"</span>,                        <span class="co"># 边界为黑色</span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">alpha =</span> <span class="fl">0.6</span>                              <span class="co"># 设置透明度</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis</span>() <span class="sc">+</span>                     <span class="co"># 使用 viridis 调色板</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 在每个圆心添加文本标签，字体大小与 value 成比例</span></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> data,                             <span class="co"># 圆心及标签数据</span></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">size =</span> value, <span class="at">label =</span> group),  <span class="co"># 设置圆心坐标、字体大小和标签内容</span></span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="st">"black"</span>                          <span class="co"># 标签字体颜色为黑色</span></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>                             <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span>          <span class="co"># 不显示图例</span></span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_equal</span>()                              <span class="co"># 保持 x、y 轴比例相等</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>使用 viridis 调色板展示圆形打包图</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="interactive" class="level3" data-number="25.2.4">
<h3 data-number="25.2.4" class="anchored" data-anchor-id="interactive"><span class="header-section-number">25.2.4</span> Interactive</h3>
<p>使用 <code>ggiraph::girafe()</code> 函数生成交互式圆形打包图，悬停查看详细信息:</p>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载所需包</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(packcircles)   <span class="co"># 用于圆形打包布局</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)       <span class="co"># 用于绘图</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis)       <span class="co"># 用于配色</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggiraph)       <span class="co"># 用于交互式图形</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 创建数据框，包含分组名称和对应的数值</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> <span class="fu">paste</span>(</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Group_"</span>,</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sample</span>(letters, <span class="dv">70</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>),  <span class="co"># 随机生成 70 个字母</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sample</span>(letters, <span class="dv">70</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>),</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sample</span>(letters, <span class="dv">70</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>),</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">sep =</span> <span class="st">""</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">value =</span> <span class="fu">sample</span>(<span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">70</span>), <span class="dv">70</span>)          <span class="co"># 随机生成 70 个 1~70 之间的数值</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a><span class="co"># 添加文本列，用于气泡悬停时显示详细信息</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>text <span class="ot">&lt;-</span> <span class="fu">paste</span>(</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>    <span class="st">"name: "</span>, data<span class="sc">$</span>group, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>    <span class="st">"value: "</span>, data<span class="sc">$</span>value, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>    <span class="st">"You can add a story here!"</span></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a><span class="co"># 生成圆形打包布局，返回每个圆的中心坐标 (x, y) 和半径 (radius)</span></span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>packing <span class="ot">&lt;-</span> <span class="fu">circleProgressiveLayout</span>(data<span class="sc">$</span>value, <span class="at">sizetype =</span> <span class="st">'area'</span>)</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">cbind</span>(data, packing)</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a><span class="co"># 根据每个圆的中心和半径，生成用于绘制圆形的多边形顶点坐标</span></span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>dat.gg <span class="ot">&lt;-</span> <span class="fu">circleLayoutVertices</span>(packing, <span class="at">npoints =</span> <span class="dv">50</span>)</span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a><span class="co"># 绘制交互式圆形打包图</span></span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制交互式圆形多边形（气泡），可悬停显示 tooltip</span></span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_polygon_interactive</span>(</span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> dat.gg,</span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(</span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a>            x, y, <span class="at">group =</span> id, <span class="at">fill =</span> id,</span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a>            <span class="at">tooltip =</span> data<span class="sc">$</span>text[id],   <span class="co"># 悬停显示的文本</span></span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a>            <span class="at">data_id =</span> id               <span class="co"># 交互用的唯一标识</span></span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">"black"</span>,            <span class="co"># 边界为黑色</span></span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a>        <span class="at">alpha =</span> <span class="fl">0.6</span>                  <span class="co"># 设置透明度</span></span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis</span>() <span class="sc">+</span>         <span class="co"># 使用 viridis 调色板</span></span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 在每个圆心添加文本标签，去掉 "Group_" 前缀</span></span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(</span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> data,</span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">label =</span> <span class="fu">gsub</span>(<span class="st">"Group_"</span>, <span class="st">""</span>, group)),</span>
<span id="cb7-51"><a href="#cb7-51" aria-hidden="true" tabindex="-1"></a>        <span class="at">size =</span> <span class="dv">2</span>,</span>
<span id="cb7-52"><a href="#cb7-52" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="st">"black"</span></span>
<span id="cb7-53"><a href="#cb7-53" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb7-54"><a href="#cb7-54" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>                 <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb7-55"><a href="#cb7-55" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb7-56"><a href="#cb7-56" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">"none"</span>, </span>
<span id="cb7-57"><a href="#cb7-57" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.margin =</span> <span class="fu">unit</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>), <span class="st">"cm"</span>)  <span class="co"># 去除边距</span></span>
<span id="cb7-58"><a href="#cb7-58" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb7-59"><a href="#cb7-59" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_equal</span>()                  <span class="co"># 保持 x、y 轴比例相等</span></span>
<span id="cb7-60"><a href="#cb7-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-61"><a href="#cb7-61" aria-hidden="true" tabindex="-1"></a><span class="co"># 生成交互式图形</span></span>
<span id="cb7-62"><a href="#cb7-62" aria-hidden="true" tabindex="-1"></a><span class="fu">girafe</span>(<span class="at">ggobj =</span> p) <span class="co"># 旧版本用 ggiraph()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="girafe html-widget html-fill-item" id="htmlwidget-c51c59d0bd9ddae8580f" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-c51c59d0bd9ddae8580f">{"x":{"html":"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' class='ggiraph-svg' role='graphics-document' id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461' viewBox='0 0 504 360'>\n <defs id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_defs'>\n  <clipPath id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_c1'>\n   <rect x='0' y='0' width='504' height='360'/>\n  <\/clipPath>\n  <clipPath id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_c2'>\n   <rect x='59.4' y='0' width='385.21' height='360'/>\n  <\/clipPath>\n <\/defs>\n <g id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_rootg' class='ggiraph-svg-rootg'>\n  <g clip-path='url(#svg_91c324b9_2edb_4db9_b32e_3a4e44967461_c1)'>\n   <rect x='0' y='0' width='504' height='360' fill='#FFFFFF' fill-opacity='1' stroke='#FFFFFF' stroke-opacity='1' stroke-width='0.75' stroke-linejoin='round' stroke-linecap='round' class='ggiraph-svg-bg'/>\n  <\/g>\n  <g clip-path='url(#svg_91c324b9_2edb_4db9_b32e_3a4e44967461_c2)'>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e1' points='254.80,183.44 254.69,181.68 254.36,179.94 253.81,178.26 253.06,176.66 252.11,175.16 250.99,173.80 249.70,172.59 248.27,171.55 246.72,170.70 245.07,170.05 243.36,169.61 241.60,169.39 239.84,169.39 238.08,169.61 236.37,170.05 234.72,170.70 233.17,171.55 231.74,172.59 230.45,173.80 229.33,175.16 228.38,176.66 227.63,178.26 227.08,179.94 226.75,181.68 226.64,183.44 226.75,185.21 227.08,186.94 227.63,188.63 228.38,190.23 229.33,191.72 230.45,193.08 231.74,194.29 233.17,195.33 234.72,196.18 236.37,196.84 238.08,197.28 239.84,197.50 241.60,197.50 243.36,197.28 245.07,196.84 246.72,196.18 248.27,195.33 249.70,194.29 250.99,193.08 252.11,191.72 253.06,190.23 253.81,188.63 254.36,186.94 254.69,185.21 254.80,183.44' fill='#440154' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_qgl &amp;lt;br/&amp;gt; value:  23 &amp;lt;br/&amp;gt; You can add a story here!' data-id='1'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e2' points='301.42,183.44 301.23,180.52 300.68,177.65 299.78,174.86 298.53,172.21 296.97,169.74 295.10,167.49 292.97,165.48 290.60,163.76 288.03,162.35 285.31,161.28 282.48,160.55 279.57,160.18 276.65,160.18 273.74,160.55 270.91,161.28 268.19,162.35 265.62,163.76 263.25,165.48 261.12,167.49 259.25,169.74 257.69,172.21 256.44,174.86 255.53,177.65 254.99,180.52 254.80,183.44 254.99,186.36 255.53,189.24 256.44,192.02 257.69,194.67 259.25,197.14 261.12,199.40 263.25,201.40 265.62,203.12 268.19,204.53 270.91,205.61 273.74,206.34 276.65,206.70 279.57,206.70 282.48,206.34 285.31,205.61 288.03,204.53 290.60,203.12 292.97,201.40 295.10,199.40 296.97,197.14 298.53,194.67 299.78,192.02 300.68,189.24 301.23,186.36 301.42,183.44' fill='#46065A' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_txg &amp;lt;br/&amp;gt; value:  63 &amp;lt;br/&amp;gt; You can add a story here!' data-id='2'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e3' points='265.18,209.17 265.07,207.44 264.74,205.74 264.21,204.10 263.47,202.53 262.55,201.07 261.44,199.74 260.18,198.56 258.78,197.54 257.27,196.71 255.66,196.07 253.99,195.64 252.27,195.42 250.54,195.42 248.82,195.64 247.15,196.07 245.54,196.71 244.02,197.54 242.62,198.56 241.36,199.74 240.26,201.07 239.33,202.53 238.60,204.10 238.06,205.74 237.74,207.44 237.63,209.17 237.74,210.89 238.06,212.59 238.60,214.24 239.33,215.80 240.26,217.26 241.36,218.60 242.62,219.78 244.02,220.80 245.54,221.63 247.15,222.27 248.82,222.70 250.54,222.91 252.27,222.91 253.99,222.70 255.66,222.27 257.27,221.63 258.78,220.80 260.18,219.78 261.44,218.60 262.55,217.26 263.47,215.80 264.21,214.24 264.74,212.59 265.07,210.89 265.18,209.17' fill='#460C5F' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_acu &amp;lt;br/&amp;gt; value:  22 &amp;lt;br/&amp;gt; You can add a story here!' data-id='3'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e4' points='237.70,207.16 237.56,205.04 237.17,202.96 236.51,200.95 235.61,199.03 234.48,197.24 233.13,195.61 231.58,194.16 229.87,192.91 228.01,191.89 226.04,191.11 223.99,190.59 221.89,190.32 219.77,190.32 217.67,190.59 215.62,191.11 213.65,191.89 211.79,192.91 210.08,194.16 208.53,195.61 207.18,197.24 206.05,199.03 205.14,200.95 204.49,202.96 204.09,205.04 203.96,207.16 204.09,209.27 204.49,211.35 205.14,213.37 206.05,215.28 207.18,217.07 208.53,218.70 210.08,220.15 211.79,221.40 213.65,222.42 215.62,223.20 217.67,223.73 219.77,223.99 221.89,223.99 223.99,223.73 226.04,223.20 228.01,222.42 229.87,221.40 231.58,220.15 233.13,218.70 234.48,217.07 235.61,215.28 236.51,213.37 237.17,211.35 237.56,209.27 237.70,207.16' fill='#471164' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_tdu &amp;lt;br/&amp;gt; value:  33 &amp;lt;br/&amp;gt; You can add a story here!' data-id='4'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e5' points='227.16,187.64 227.14,187.28 227.07,186.91 226.96,186.56 226.80,186.23 226.60,185.92 226.37,185.63 226.10,185.38 225.80,185.17 225.48,184.99 225.13,184.85 224.78,184.76 224.41,184.71 224.04,184.71 223.68,184.76 223.32,184.85 222.98,184.99 222.65,185.17 222.36,185.38 222.09,185.63 221.85,185.92 221.65,186.23 221.50,186.56 221.38,186.91 221.31,187.28 221.29,187.64 221.31,188.01 221.38,188.38 221.50,188.73 221.65,189.06 221.85,189.37 222.09,189.65 222.36,189.91 222.65,190.12 222.98,190.30 223.32,190.44 223.68,190.53 224.04,190.58 224.41,190.58 224.78,190.53 225.13,190.44 225.48,190.30 225.80,190.12 226.10,189.91 226.37,189.65 226.60,189.37 226.80,189.06 226.96,188.73 227.07,188.38 227.14,188.01 227.16,187.64' fill='#481769' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_cmf &amp;lt;br/&amp;gt; value:  1 &amp;lt;br/&amp;gt; You can add a story here!' data-id='5'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e6' points='229.64,169.04 229.47,166.28 228.95,163.57 228.10,160.95 226.92,158.45 225.44,156.12 223.68,153.99 221.67,152.11 219.44,150.48 217.02,149.15 214.46,148.14 211.78,147.45 209.04,147.11 206.29,147.11 203.55,147.45 200.87,148.14 198.31,149.15 195.89,150.48 193.66,152.11 191.65,153.99 189.89,156.12 188.41,158.45 187.23,160.95 186.38,163.57 185.86,166.28 185.69,169.04 185.86,171.79 186.38,174.50 187.23,177.13 188.41,179.62 189.89,181.95 191.65,184.08 193.66,185.97 195.89,187.59 198.31,188.92 200.87,189.94 203.55,190.62 206.29,190.97 209.04,190.97 211.78,190.62 214.46,189.94 217.02,188.92 219.44,187.59 221.67,185.97 223.68,184.08 225.44,181.95 226.92,179.62 228.10,177.13 228.95,174.50 229.47,171.79 229.64,169.04' fill='#481B6D' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_vbu &amp;lt;br/&amp;gt; value:  56 &amp;lt;br/&amp;gt; You can add a story here!' data-id='6'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e7' points='264.38,149.89 264.22,147.43 263.76,145.00 263.00,142.64 261.94,140.40 260.62,138.32 259.04,136.41 257.24,134.72 255.24,133.26 253.07,132.07 250.77,131.16 248.37,130.55 245.92,130.24 243.44,130.24 240.99,130.55 238.59,131.16 236.29,132.07 234.13,133.26 232.12,134.72 230.32,136.41 228.74,138.32 227.42,140.40 226.37,142.64 225.60,145.00 225.14,147.43 224.98,149.89 225.14,152.36 225.60,154.79 226.37,157.15 227.42,159.38 228.74,161.47 230.32,163.38 232.12,165.07 234.13,166.53 236.29,167.72 238.59,168.63 240.99,169.24 243.44,169.55 245.92,169.55 248.37,169.24 250.77,168.63 253.07,167.72 255.24,166.53 257.24,165.07 259.04,163.38 260.62,161.47 261.94,159.38 263.00,157.15 263.76,154.79 264.22,152.36 264.38,149.89' fill='#482071' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_pop &amp;lt;br/&amp;gt; value:  45 &amp;lt;br/&amp;gt; You can add a story here!' data-id='7'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e8' points='280.89,152.32 280.82,151.28 280.62,150.25 280.30,149.26 279.86,148.32 279.30,147.44 278.63,146.63 277.87,145.92 277.03,145.30 276.12,144.80 275.15,144.42 274.14,144.16 273.10,144.03 272.06,144.03 271.02,144.16 270.01,144.42 269.04,144.80 268.13,145.30 267.29,145.92 266.53,146.63 265.86,147.44 265.30,148.32 264.86,149.26 264.53,150.25 264.34,151.28 264.27,152.32 264.34,153.36 264.53,154.38 264.86,155.37 265.30,156.32 265.86,157.20 266.53,158.00 267.29,158.72 268.13,159.33 269.04,159.83 270.01,160.22 271.02,160.48 272.06,160.61 273.10,160.61 274.14,160.48 275.15,160.22 276.12,159.83 277.03,159.33 277.87,158.72 278.63,158.00 279.30,157.20 279.86,156.32 280.30,155.37 280.62,154.38 280.82,153.36 280.89,152.32' fill='#482576' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_dqz &amp;lt;br/&amp;gt; value:  8 &amp;lt;br/&amp;gt; You can add a story here!' data-id='8'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e9' points='314.77,148.05 314.63,145.90 314.23,143.79 313.57,141.74 312.65,139.80 311.50,137.98 310.13,136.33 308.56,134.85 306.82,133.59 304.94,132.55 302.94,131.76 300.85,131.23 298.72,130.96 296.57,130.96 294.44,131.23 292.36,131.76 290.36,132.55 288.47,133.59 286.73,134.85 285.16,136.33 283.79,137.98 282.64,139.80 281.73,141.74 281.06,143.79 280.66,145.90 280.52,148.05 280.66,150.19 281.06,152.30 281.73,154.35 282.64,156.30 283.79,158.11 285.16,159.77 286.73,161.24 288.47,162.50 290.36,163.54 292.36,164.33 294.44,164.87 296.57,165.13 298.72,165.13 300.85,164.87 302.94,164.33 304.94,163.54 306.82,162.50 308.56,161.24 310.13,159.77 311.50,158.11 312.65,156.30 313.57,154.35 314.23,152.30 314.63,150.19 314.77,148.05' fill='#472A7A' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_ikz &amp;lt;br/&amp;gt; value:  34 &amp;lt;br/&amp;gt; You can add a story here!' data-id='9'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e10' points='313.11,170.91 313.05,170.01 312.88,169.12 312.60,168.26 312.22,167.45 311.74,166.68 311.16,165.99 310.50,165.37 309.77,164.84 308.98,164.40 308.14,164.07 307.26,163.85 306.37,163.73 305.47,163.73 304.57,163.85 303.69,164.07 302.85,164.40 302.06,164.84 301.33,165.37 300.67,165.99 300.10,166.68 299.61,167.45 299.23,168.26 298.95,169.12 298.78,170.01 298.72,170.91 298.78,171.81 298.95,172.70 299.23,173.56 299.61,174.38 300.10,175.14 300.67,175.84 301.33,176.45 302.06,176.98 302.85,177.42 303.69,177.75 304.57,177.98 305.47,178.09 306.37,178.09 307.26,177.98 308.14,177.75 308.98,177.42 309.77,176.98 310.50,176.45 311.16,175.84 311.74,175.14 312.22,174.38 312.60,173.56 312.88,172.70 313.05,171.81 313.11,170.91' fill='#472E7C' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_qml &amp;lt;br/&amp;gt; value:  6 &amp;lt;br/&amp;gt; You can add a story here!' data-id='10'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e11' points='325.22,188.82 325.13,187.30 324.84,185.81 324.37,184.36 323.72,182.99 322.91,181.70 321.94,180.53 320.83,179.49 319.60,178.60 318.27,177.86 316.85,177.31 315.38,176.93 313.87,176.74 312.35,176.74 310.84,176.93 309.37,177.31 307.96,177.86 306.63,178.60 305.40,179.49 304.29,180.53 303.32,181.70 302.50,182.99 301.86,184.36 301.39,185.81 301.10,187.30 301.01,188.82 301.10,190.34 301.39,191.83 301.86,193.28 302.50,194.65 303.32,195.94 304.29,197.11 305.40,198.15 306.63,199.04 307.96,199.77 309.37,200.33 310.84,200.71 312.35,200.90 313.87,200.90 315.38,200.71 316.85,200.33 318.27,199.77 319.60,199.04 320.83,198.15 321.94,197.11 322.91,195.94 323.72,194.65 324.37,193.28 324.84,191.83 325.13,190.34 325.22,188.82' fill='#46337F' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_syx &amp;lt;br/&amp;gt; value:  17 &amp;lt;br/&amp;gt; You can add a story here!' data-id='11'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e12' points='307.37,202.86 307.32,202.04 307.17,201.23 306.91,200.45 306.56,199.70 306.12,199.01 305.59,198.37 304.99,197.81 304.33,197.32 303.60,196.92 302.84,196.62 302.04,196.41 301.22,196.31 300.40,196.31 299.58,196.41 298.78,196.62 298.01,196.92 297.29,197.32 296.62,197.81 296.02,198.37 295.50,199.01 295.05,199.70 294.70,200.45 294.45,201.23 294.29,202.04 294.24,202.86 294.29,203.69 294.45,204.50 294.70,205.28 295.05,206.03 295.50,206.72 296.02,207.36 296.62,207.92 297.29,208.41 298.01,208.81 298.78,209.11 299.58,209.31 300.40,209.42 301.22,209.42 302.04,209.31 302.84,209.11 303.60,208.81 304.33,208.41 304.99,207.92 305.59,207.36 306.12,206.72 306.56,206.03 306.91,205.28 307.17,204.50 307.32,203.69 307.37,202.86' fill='#453882' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_gwc &amp;lt;br/&amp;gt; value:  5 &amp;lt;br/&amp;gt; You can add a story here!' data-id='12'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e13' points='306.15,224.24 306.00,221.91 305.56,219.62 304.84,217.40 303.85,215.29 302.60,213.32 301.11,211.52 299.41,209.93 297.53,208.56 295.48,207.43 293.31,206.58 291.06,206.00 288.74,205.70 286.41,205.70 284.10,206.00 281.84,206.58 279.67,207.43 277.62,208.56 275.74,209.93 274.04,211.52 272.55,213.32 271.30,215.29 270.31,217.40 269.59,219.62 269.15,221.91 269.00,224.24 269.15,226.57 269.59,228.86 270.31,231.07 271.30,233.18 272.55,235.15 274.04,236.95 275.74,238.55 277.62,239.92 279.67,241.04 281.84,241.90 284.10,242.48 286.41,242.77 288.74,242.77 291.06,242.48 293.31,241.90 295.48,241.04 297.53,239.92 299.41,238.55 301.11,236.95 302.60,235.15 303.85,233.18 304.84,231.07 305.56,228.86 306.00,226.57 306.15,224.24' fill='#443C84' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_lyy &amp;lt;br/&amp;gt; value:  40 &amp;lt;br/&amp;gt; You can add a story here!' data-id='13'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e14' points='269.83,231.02 269.75,229.80 269.52,228.60 269.14,227.43 268.62,226.33 267.97,225.29 267.19,224.35 266.30,223.51 265.31,222.79 264.23,222.21 263.10,221.76 261.91,221.45 260.70,221.30 259.48,221.30 258.26,221.45 257.08,221.76 255.94,222.21 254.87,222.79 253.88,223.51 252.99,224.35 252.21,225.29 251.55,226.33 251.03,227.43 250.66,228.60 250.43,229.80 250.35,231.02 250.43,232.24 250.66,233.44 251.03,234.60 251.55,235.71 252.21,236.74 252.99,237.68 253.88,238.52 254.87,239.24 255.94,239.83 257.08,240.28 258.26,240.58 259.48,240.74 260.70,240.74 261.91,240.58 263.10,240.28 264.23,239.83 265.31,239.24 266.30,238.52 267.19,237.68 267.97,236.74 268.62,235.71 269.14,234.60 269.52,233.44 269.75,232.24 269.83,231.02' fill='#424086' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_sfi &amp;lt;br/&amp;gt; value:  11 &amp;lt;br/&amp;gt; You can add a story here!' data-id='14'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e15' points='252.47,242.02 252.31,239.53 251.84,237.07 251.07,234.69 250.00,232.43 248.66,230.32 247.07,228.39 245.25,226.68 243.22,225.21 241.03,224.00 238.71,223.08 236.28,222.46 233.80,222.15 231.30,222.15 228.82,222.46 226.40,223.08 224.07,224.00 221.88,225.21 219.86,226.68 218.03,228.39 216.44,230.32 215.10,232.43 214.03,234.69 213.26,237.07 212.79,239.53 212.63,242.02 212.79,244.52 213.26,246.98 214.03,249.35 215.10,251.62 216.44,253.73 218.03,255.66 219.86,257.37 221.88,258.84 224.07,260.04 226.40,260.96 228.82,261.59 231.30,261.90 233.80,261.90 236.28,261.59 238.71,260.96 241.03,260.04 243.22,258.84 245.25,257.37 247.07,255.66 248.66,253.73 250.00,251.62 251.07,249.35 251.84,246.98 252.31,244.52 252.47,242.02' fill='#404588' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_ynp &amp;lt;br/&amp;gt; value:  46 &amp;lt;br/&amp;gt; You can add a story here!' data-id='15'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e16' points='203.98,205.76 203.79,202.75 203.23,199.78 202.30,196.91 201.01,194.18 199.39,191.63 197.47,189.31 195.27,187.24 192.83,185.47 190.18,184.01 187.38,182.90 184.45,182.15 181.46,181.77 178.44,181.77 175.44,182.15 172.52,182.90 169.71,184.01 167.07,185.47 164.63,187.24 162.43,189.31 160.50,191.63 158.89,194.18 157.60,196.91 156.67,199.78 156.10,202.75 155.91,205.76 156.10,208.77 156.67,211.74 157.60,214.61 158.89,217.34 160.50,219.89 162.43,222.22 164.63,224.28 167.07,226.06 169.71,227.51 172.52,228.62 175.44,229.37 178.44,229.75 181.46,229.75 184.45,229.37 187.38,228.62 190.18,227.51 192.83,226.06 195.27,224.28 197.47,222.22 199.39,219.89 201.01,217.34 202.30,214.61 203.23,211.74 203.79,208.77 203.98,205.76' fill='#3F4889' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_kfi &amp;lt;br/&amp;gt; value:  67 &amp;lt;br/&amp;gt; You can add a story here!' data-id='16'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e17' points='225.44,145.14 225.40,144.50 225.28,143.87 225.09,143.27 224.81,142.69 224.47,142.15 224.06,141.66 223.60,141.22 223.08,140.84 222.52,140.54 221.93,140.30 221.31,140.14 220.68,140.06 220.04,140.06 219.40,140.14 218.79,140.30 218.19,140.54 217.63,140.84 217.12,141.22 216.65,141.66 216.24,142.15 215.90,142.69 215.63,143.27 215.43,143.87 215.31,144.50 215.27,145.14 215.31,145.78 215.43,146.40 215.63,147.01 215.90,147.59 216.24,148.13 216.65,148.62 217.12,149.06 217.63,149.43 218.19,149.74 218.79,149.98 219.40,150.13 220.04,150.21 220.68,150.21 221.31,150.13 221.93,149.98 222.52,149.74 223.08,149.43 223.60,149.06 224.06,148.62 224.47,148.13 224.81,147.59 225.09,147.01 225.28,146.40 225.40,145.78 225.44,145.14' fill='#3D4D8A' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_mtp &amp;lt;br/&amp;gt; value:  3 &amp;lt;br/&amp;gt; You can add a story here!' data-id='17'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e18' points='235.61,124.79 235.49,122.88 235.13,121.00 234.54,119.18 233.72,117.44 232.70,115.83 231.47,114.35 230.08,113.04 228.53,111.91 226.85,110.99 225.07,110.28 223.21,109.81 221.31,109.57 219.39,109.57 217.49,109.81 215.64,110.28 213.85,110.99 212.18,111.91 210.63,113.04 209.23,114.35 208.01,115.83 206.98,117.44 206.16,119.18 205.57,121.00 205.21,122.88 205.09,124.79 205.21,126.71 205.57,128.59 206.16,130.41 206.98,132.14 208.01,133.76 209.23,135.24 210.63,136.55 212.18,137.68 213.85,138.60 215.64,139.31 217.49,139.78 219.39,140.02 221.31,140.02 223.21,139.78 225.07,139.31 226.85,138.60 228.53,137.68 230.08,136.55 231.47,135.24 232.70,133.76 233.72,132.14 234.54,130.41 235.13,128.59 235.49,126.71 235.61,124.79' fill='#3B518B' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_qiy &amp;lt;br/&amp;gt; value:  27 &amp;lt;br/&amp;gt; You can add a story here!' data-id='18'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e19' points='252.99,121.39 252.92,120.29 252.71,119.20 252.37,118.15 251.90,117.15 251.30,116.21 250.60,115.36 249.79,114.60 248.90,113.95 247.93,113.42 246.90,113.01 245.83,112.74 244.73,112.60 243.62,112.60 242.53,112.74 241.46,113.01 240.43,113.42 239.46,113.95 238.56,114.60 237.76,115.36 237.05,116.21 236.46,117.15 235.99,118.15 235.64,119.20 235.44,120.29 235.37,121.39 235.44,122.50 235.64,123.58 235.99,124.63 236.46,125.64 237.05,126.57 237.76,127.42 238.56,128.18 239.46,128.83 240.43,129.36 241.46,129.77 242.53,130.04 243.62,130.18 244.73,130.18 245.83,130.04 246.90,129.77 247.93,129.36 248.90,128.83 249.79,128.18 250.60,127.42 251.30,126.57 251.90,125.64 252.37,124.63 252.71,123.58 252.92,122.50 252.99,121.39' fill='#39558C' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_vha &amp;lt;br/&amp;gt; value:  9 &amp;lt;br/&amp;gt; You can add a story here!' data-id='19'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e20' points='291.03,122.44 290.88,120.06 290.43,117.71 289.69,115.44 288.67,113.27 287.39,111.26 285.87,109.41 284.13,107.78 282.19,106.37 280.10,105.22 277.88,104.34 275.56,103.75 273.19,103.45 270.80,103.45 268.43,103.75 266.12,104.34 263.89,105.22 261.80,106.37 259.87,107.78 258.12,109.41 256.60,111.26 255.32,113.27 254.30,115.44 253.56,117.71 253.12,120.06 252.97,122.44 253.12,124.83 253.56,127.17 254.30,129.45 255.32,131.61 256.60,133.63 258.12,135.47 259.87,137.10 261.80,138.51 263.89,139.66 266.12,140.54 268.43,141.13 270.80,141.43 273.19,141.43 275.56,141.13 277.88,140.54 280.10,139.66 282.19,138.51 284.13,137.10 285.87,135.47 287.39,133.63 288.67,131.61 289.69,129.45 290.43,127.17 290.88,124.83 291.03,122.44' fill='#38598C' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_ksi &amp;lt;br/&amp;gt; value:  42 &amp;lt;br/&amp;gt; You can add a story here!' data-id='20'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e21' points='332.02,112.10 331.86,109.44 331.36,106.83 330.54,104.30 329.41,101.90 327.98,99.65 326.29,97.60 324.35,95.78 322.20,94.22 319.87,92.94 317.39,91.96 314.82,91.30 312.18,90.96 309.52,90.96 306.88,91.30 304.31,91.96 301.83,92.94 299.50,94.22 297.35,95.78 295.41,97.60 293.72,99.65 292.29,101.90 291.16,104.30 290.34,106.83 289.84,109.44 289.67,112.10 289.84,114.75 290.34,117.36 291.16,119.89 292.29,122.30 293.72,124.54 295.41,126.59 297.35,128.41 299.50,129.98 301.83,131.26 304.31,132.24 306.88,132.90 309.52,133.23 312.18,133.23 314.82,132.90 317.39,132.24 319.87,131.26 322.20,129.98 324.35,128.41 326.29,126.59 327.98,124.54 329.41,122.30 330.54,119.89 331.36,117.36 331.86,114.75 332.02,112.10' fill='#365D8D' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_isp &amp;lt;br/&amp;gt; value:  52 &amp;lt;br/&amp;gt; You can add a story here!' data-id='21'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e22' points='212.64,241.86 212.51,239.88 212.14,237.93 211.52,236.04 210.68,234.24 209.62,232.57 208.35,231.04 206.90,229.68 205.30,228.51 203.56,227.55 201.71,226.82 199.79,226.33 197.81,226.08 195.83,226.08 193.86,226.33 191.94,226.82 190.09,227.55 188.35,228.51 186.74,229.68 185.29,231.04 184.03,232.57 182.96,234.24 182.12,236.04 181.51,237.93 181.13,239.88 181.01,241.86 181.13,243.84 181.51,245.79 182.12,247.68 182.96,249.48 184.03,251.16 185.29,252.69 186.74,254.05 188.35,255.21 190.09,256.17 191.94,256.90 193.86,257.40 195.83,257.64 197.81,257.64 199.79,257.40 201.71,256.90 203.56,256.17 205.30,255.21 206.90,254.05 208.35,252.69 209.62,251.16 210.68,249.48 211.52,247.68 212.14,245.79 212.51,243.84 212.64,241.86' fill='#34618D' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_eui &amp;lt;br/&amp;gt; value:  29 &amp;lt;br/&amp;gt; You can add a story here!' data-id='22'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e23' points='292.97,261.62 292.80,258.79 292.26,256.01 291.39,253.31 290.18,250.75 288.67,248.36 286.86,246.17 284.80,244.24 282.50,242.57 280.02,241.21 277.39,240.16 274.64,239.46 271.83,239.10 269.00,239.10 266.19,239.46 263.45,240.16 260.81,241.21 258.33,242.57 256.04,244.24 253.98,246.17 252.17,248.36 250.65,250.75 249.45,253.31 248.57,256.01 248.04,258.79 247.86,261.62 248.04,264.44 248.57,267.22 249.45,269.92 250.65,272.48 252.17,274.87 253.98,277.06 256.04,278.99 258.33,280.66 260.81,282.02 263.45,283.07 266.19,283.77 269.00,284.13 271.83,284.13 274.64,283.77 277.39,283.07 280.02,282.02 282.50,280.66 284.80,278.99 286.86,277.06 288.67,274.87 290.18,272.48 291.39,269.92 292.26,267.22 292.80,264.44 292.97,261.62' fill='#32648E' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_nvx &amp;lt;br/&amp;gt; value:  59 &amp;lt;br/&amp;gt; You can add a story here!' data-id='23'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e24' points='254.94,286.45 254.75,283.37 254.17,280.34 253.22,277.41 251.90,274.62 250.25,272.01 248.28,269.64 246.03,267.52 243.54,265.71 240.83,264.22 237.96,263.09 234.98,262.32 231.92,261.93 228.83,261.93 225.77,262.32 222.78,263.09 219.91,264.22 217.21,265.71 214.71,267.52 212.46,269.64 210.50,272.01 208.84,274.62 207.53,277.41 206.58,280.34 206.00,283.37 205.80,286.45 206.00,289.53 206.58,292.56 207.53,295.50 208.84,298.29 210.50,300.89 212.46,303.27 214.71,305.38 217.21,307.20 219.91,308.68 222.78,309.82 225.77,310.59 228.83,310.97 231.92,310.97 234.98,310.59 237.96,309.82 240.83,308.68 243.54,307.20 246.03,305.38 248.28,303.27 250.25,300.89 251.90,298.29 253.22,295.50 254.17,292.56 254.75,289.53 254.94,286.45' fill='#31688E' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_tui &amp;lt;br/&amp;gt; value:  70 &amp;lt;br/&amp;gt; You can add a story here!' data-id='24'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e25' points='185.94,164.55 185.78,162.14 185.33,159.77 184.58,157.47 183.55,155.28 182.26,153.24 180.72,151.37 178.95,149.72 177.00,148.30 174.88,147.13 172.63,146.24 170.29,145.64 167.89,145.34 165.47,145.34 163.07,145.64 160.73,146.24 158.48,147.13 156.36,148.30 154.41,149.72 152.64,151.37 151.10,153.24 149.81,155.28 148.78,157.47 148.03,159.77 147.58,162.14 147.42,164.55 147.58,166.97 148.03,169.34 148.78,171.64 149.81,173.83 151.10,175.87 152.64,177.74 154.41,179.39 156.36,180.81 158.48,181.98 160.73,182.87 163.07,183.47 165.47,183.77 167.89,183.77 170.29,183.47 172.63,182.87 174.88,181.98 177.00,180.81 178.95,179.39 180.72,177.74 182.26,175.87 183.55,173.83 184.58,171.64 185.33,169.34 185.78,166.97 185.94,164.55' fill='#2F6C8E' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_uro &amp;lt;br/&amp;gt; value:  43 &amp;lt;br/&amp;gt; You can add a story here!' data-id='25'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e26' points='205.10,124.24 204.91,121.27 204.35,118.35 203.43,115.52 202.17,112.83 200.58,110.32 198.68,108.03 196.51,105.99 194.11,104.25 191.50,102.81 188.74,101.72 185.86,100.98 182.91,100.61 179.94,100.61 176.99,100.98 174.11,101.72 171.34,102.81 168.74,104.25 166.33,105.99 164.17,108.03 162.27,110.32 160.68,112.83 159.41,115.52 158.49,118.35 157.94,121.27 157.75,124.24 157.94,127.20 158.49,130.12 159.41,132.95 160.68,135.64 162.27,138.15 164.17,140.44 166.33,142.48 168.74,144.22 171.34,145.66 174.11,146.75 176.99,147.49 179.94,147.86 182.91,147.86 185.86,147.49 188.74,146.75 191.50,145.66 194.11,144.22 196.51,142.48 198.68,140.44 200.58,138.15 202.17,135.64 203.43,132.95 204.35,130.12 204.91,127.20 205.10,124.24' fill='#2E6F8E' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_uxp &amp;lt;br/&amp;gt; value:  65 &amp;lt;br/&amp;gt; You can add a story here!' data-id='26'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e27' points='347.30,218.83 347.14,216.22 346.65,213.66 345.84,211.18 344.73,208.82 343.33,206.62 341.67,204.61 339.77,202.83 337.66,201.29 335.38,200.04 332.95,199.08 330.43,198.43 327.84,198.10 325.23,198.10 322.65,198.43 320.12,199.08 317.70,200.04 315.41,201.29 313.30,202.83 311.40,204.61 309.74,206.62 308.34,208.82 307.23,211.18 306.43,213.66 305.94,216.22 305.77,218.83 305.94,221.43 306.43,223.99 307.23,226.47 308.34,228.83 309.74,231.03 311.40,233.04 313.30,234.82 315.41,236.36 317.70,237.61 320.12,238.57 322.65,239.22 325.23,239.55 327.84,239.55 330.43,239.22 332.95,238.57 335.38,237.61 337.66,236.36 339.77,234.82 341.67,233.04 343.33,231.03 344.73,228.83 345.84,226.47 346.65,223.99 347.14,221.43 347.30,218.83' fill='#2C728E' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_prj &amp;lt;br/&amp;gt; value:  50 &amp;lt;br/&amp;gt; You can add a story here!' data-id='27'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e28' points='337.29,260.21 337.12,257.43 336.59,254.70 335.73,252.05 334.55,249.53 333.06,247.18 331.28,245.04 329.25,243.13 327.00,241.49 324.56,240.15 321.97,239.13 319.28,238.44 316.51,238.09 313.73,238.09 310.97,238.44 308.27,239.13 305.68,240.15 303.24,241.49 300.99,243.13 298.96,245.04 297.19,247.18 295.69,249.53 294.51,252.05 293.65,254.70 293.13,257.43 292.95,260.21 293.13,262.99 293.65,265.73 294.51,268.37 295.69,270.89 297.19,273.24 298.96,275.39 300.99,277.30 303.24,278.93 305.68,280.27 308.27,281.30 310.97,281.99 313.73,282.34 316.51,282.34 319.28,281.99 321.97,281.30 324.56,280.27 327.00,278.93 329.25,277.30 331.28,275.39 333.06,273.24 334.55,270.89 335.73,268.37 336.59,265.73 337.12,262.99 337.29,260.21' fill='#2A768E' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_hcp &amp;lt;br/&amp;gt; value:  57 &amp;lt;br/&amp;gt; You can add a story here!' data-id='28'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e29' points='356.99,161.89 356.81,159.08 356.29,156.32 355.42,153.65 354.22,151.11 352.72,148.74 350.93,146.58 348.88,144.66 346.61,143.00 344.15,141.65 341.54,140.62 338.82,139.92 336.03,139.57 333.22,139.57 330.44,139.92 327.72,140.62 325.10,141.65 322.64,143.00 320.37,144.66 318.32,146.58 316.53,148.74 315.03,151.11 313.83,153.65 312.97,156.32 312.44,159.08 312.26,161.89 312.44,164.69 312.97,167.45 313.83,170.12 315.03,172.66 316.53,175.03 318.32,177.20 320.37,179.12 322.64,180.77 325.10,182.12 327.72,183.16 330.44,183.85 333.22,184.21 336.03,184.21 338.82,183.85 341.54,183.16 344.15,182.12 346.61,180.77 348.88,179.12 350.93,177.20 352.72,175.03 354.22,172.66 355.42,170.12 356.29,167.45 356.81,164.69 356.99,161.89' fill='#29798E' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_gqy &amp;lt;br/&amp;gt; value:  58 &amp;lt;br/&amp;gt; You can add a story here!' data-id='29'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e30' points='371.40,122.46 371.24,119.91 370.76,117.40 369.97,114.98 368.88,112.66 367.51,110.51 365.88,108.54 364.02,106.79 361.95,105.29 359.72,104.06 357.34,103.12 354.87,102.48 352.33,102.16 349.78,102.16 347.24,102.48 344.77,103.12 342.39,104.06 340.15,105.29 338.09,106.79 336.22,108.54 334.59,110.51 333.23,112.66 332.14,114.98 331.35,117.40 330.87,119.91 330.71,122.46 330.87,125.01 331.35,127.52 332.14,129.95 333.23,132.27 334.59,134.42 336.22,136.39 338.09,138.14 340.15,139.64 342.39,140.87 344.77,141.81 347.24,142.45 349.78,142.77 352.33,142.77 354.87,142.45 357.34,141.81 359.72,140.87 361.95,139.64 364.02,138.14 365.88,136.39 367.51,134.42 368.88,132.27 369.97,129.95 370.76,127.52 371.24,125.01 371.40,122.46' fill='#287D8E' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_avo &amp;lt;br/&amp;gt; value:  48 &amp;lt;br/&amp;gt; You can add a story here!' data-id='30'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e31' points='383.82,196.07 383.65,193.36 383.14,190.70 382.31,188.12 381.15,185.67 379.70,183.38 377.97,181.29 376.00,179.44 373.80,177.85 371.43,176.54 368.91,175.54 366.29,174.87 363.60,174.53 360.89,174.53 358.20,174.87 355.57,175.54 353.05,176.54 350.68,177.85 348.49,179.44 346.51,181.29 344.78,183.38 343.33,185.67 342.18,188.12 341.34,190.70 340.83,193.36 340.66,196.07 340.83,198.77 341.34,201.43 342.18,204.01 343.33,206.46 344.78,208.75 346.51,210.84 348.49,212.69 350.68,214.29 353.05,215.59 355.57,216.59 358.20,217.26 360.89,217.60 363.60,217.60 366.29,217.26 368.91,216.59 371.43,215.59 373.80,214.29 376.00,212.69 377.97,210.84 379.70,208.75 381.15,206.46 382.31,204.01 383.14,201.43 383.65,198.77 383.82,196.07' fill='#26818E' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_noa &amp;lt;br/&amp;gt; value:  54 &amp;lt;br/&amp;gt; You can add a story here!' data-id='31'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e32' points='209.04,271.11 208.93,269.42 208.62,267.76 208.09,266.15 207.37,264.62 206.47,263.20 205.39,261.89 204.16,260.74 202.79,259.74 201.31,258.93 199.74,258.31 198.10,257.89 196.43,257.68 194.74,257.68 193.06,257.89 191.42,258.31 189.85,258.93 188.37,259.74 187.01,260.74 185.77,261.89 184.70,263.20 183.79,264.62 183.07,266.15 182.55,267.76 182.23,269.42 182.13,271.11 182.23,272.79 182.55,274.45 183.07,276.06 183.79,277.59 184.70,279.02 185.77,280.32 187.01,281.47 188.37,282.47 189.85,283.28 191.42,283.90 193.06,284.32 194.74,284.54 196.43,284.54 198.10,284.32 199.74,283.90 201.31,283.28 202.79,282.47 204.16,281.47 205.39,280.32 206.47,279.02 207.37,277.59 208.09,276.06 208.62,274.45 208.93,272.79 209.04,271.11' fill='#25848E' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_uop &amp;lt;br/&amp;gt; value:  21 &amp;lt;br/&amp;gt; You can add a story here!' data-id='32'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e33' points='248.69,101.43 248.59,99.83 248.29,98.25 247.79,96.72 247.11,95.27 246.25,93.91 245.22,92.67 244.05,91.57 242.75,90.63 241.34,89.85 239.85,89.26 238.29,88.86 236.70,88.66 235.09,88.66 233.49,88.86 231.94,89.26 230.44,89.85 229.03,90.63 227.73,91.57 226.56,92.67 225.54,93.91 224.68,95.27 223.99,96.72 223.50,98.25 223.19,99.83 223.09,101.43 223.19,103.04 223.50,104.62 223.99,106.15 224.68,107.60 225.54,108.96 226.56,110.20 227.73,111.30 229.03,112.24 230.44,113.01 231.94,113.61 233.49,114.01 235.09,114.21 236.70,114.21 238.29,114.01 239.85,113.61 241.34,113.01 242.75,112.24 244.05,111.30 245.22,110.20 246.25,108.96 247.11,107.60 247.79,106.15 248.29,104.62 248.59,103.04 248.69,101.43' fill='#24878E' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_erb &amp;lt;br/&amp;gt; value:  19 &amp;lt;br/&amp;gt; You can add a story here!' data-id='33'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e34' points='288.16,81.03 287.98,78.15 287.44,75.32 286.55,72.58 285.32,69.98 283.78,67.55 281.94,65.33 279.85,63.35 277.52,61.66 274.99,60.27 272.31,59.21 269.52,58.50 266.67,58.14 263.79,58.14 260.93,58.50 258.14,59.21 255.46,60.27 252.94,61.66 250.61,63.35 248.51,65.33 246.67,67.55 245.13,69.98 243.90,72.58 243.01,75.32 242.47,78.15 242.29,81.03 242.47,83.90 243.01,86.73 243.90,89.47 245.13,92.07 246.67,94.51 248.51,96.73 250.61,98.70 252.94,100.39 255.46,101.78 258.14,102.84 260.93,103.55 263.79,103.92 266.67,103.92 269.52,103.55 272.31,102.84 274.99,101.78 277.52,100.39 279.85,98.70 281.94,96.73 283.78,94.51 285.32,92.07 286.55,89.47 287.44,86.73 287.98,83.90 288.16,81.03' fill='#228B8D' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_mue &amp;lt;br/&amp;gt; value:  61 &amp;lt;br/&amp;gt; You can add a story here!' data-id='34'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e35' points='316.77,77.56 316.66,75.76 316.32,73.98 315.76,72.26 314.99,70.63 314.02,69.10 312.87,67.71 311.55,66.47 310.09,65.41 308.51,64.54 306.83,63.88 305.08,63.43 303.29,63.20 301.48,63.20 299.69,63.43 297.94,63.88 296.26,64.54 294.68,65.41 293.22,66.47 291.90,67.71 290.75,69.10 289.78,70.63 289.01,72.26 288.45,73.98 288.11,75.76 288.00,77.56 288.11,79.36 288.45,81.14 289.01,82.85 289.78,84.49 290.75,86.01 291.90,87.41 293.22,88.64 294.68,89.70 296.26,90.58 297.94,91.24 299.69,91.69 301.48,91.92 303.29,91.92 305.08,91.69 306.83,91.24 308.51,90.58 310.09,89.70 311.55,88.64 312.87,87.41 314.02,86.01 314.99,84.49 315.76,82.85 316.32,81.14 316.66,79.36 316.77,77.56' fill='#218F8D' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_ixj &amp;lt;br/&amp;gt; value:  24 &amp;lt;br/&amp;gt; You can add a story here!' data-id='35'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e36' points='223.34,97.23 223.23,95.39 222.88,93.58 222.31,91.82 221.53,90.16 220.54,88.60 219.36,87.18 218.02,85.92 216.53,84.83 214.91,83.94 213.20,83.27 211.41,82.81 209.58,82.58 207.74,82.58 205.91,82.81 204.12,83.27 202.41,83.94 200.79,84.83 199.30,85.92 197.96,87.18 196.78,88.60 195.80,90.16 195.01,91.82 194.44,93.58 194.10,95.39 193.98,97.23 194.10,99.07 194.44,100.88 195.01,102.63 195.80,104.30 196.78,105.86 197.96,107.28 199.30,108.54 200.79,109.63 202.41,110.51 204.12,111.19 205.91,111.65 207.74,111.88 209.58,111.88 211.41,111.65 213.20,111.19 214.91,110.51 216.53,109.63 218.02,108.54 219.36,107.28 220.54,105.86 221.53,104.30 222.31,102.63 222.88,100.88 223.23,99.07 223.34,97.23' fill='#20928C' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_nvh &amp;lt;br/&amp;gt; value:  25 &amp;lt;br/&amp;gt; You can add a story here!' data-id='36'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e37' points='244.87,66.35 244.71,63.83 244.24,61.34 243.46,58.94 242.38,56.65 241.02,54.52 239.41,52.57 237.57,50.84 235.53,49.35 233.31,48.14 230.96,47.20 228.51,46.58 226.00,46.26 223.47,46.26 220.97,46.58 218.52,47.20 216.17,48.14 213.95,49.35 211.91,50.84 210.06,52.57 208.45,54.52 207.10,56.65 206.02,58.94 205.24,61.34 204.77,63.83 204.61,66.35 204.77,68.87 205.24,71.36 206.02,73.76 207.10,76.05 208.45,78.18 210.06,80.13 211.91,81.86 213.95,83.35 216.17,84.57 218.52,85.50 220.97,86.13 223.47,86.44 226.00,86.44 228.51,86.13 230.96,85.50 233.31,84.57 235.53,83.35 237.57,81.86 239.41,80.13 241.02,78.18 242.38,76.05 243.46,73.76 244.24,71.36 244.71,68.87 244.87,66.35' fill='#1F958B' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_imx &amp;lt;br/&amp;gt; value:  47 &amp;lt;br/&amp;gt; You can add a story here!' data-id='37'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e38' points='181.51,248.15 181.32,245.16 180.76,242.22 179.83,239.37 178.56,236.66 176.95,234.13 175.04,231.82 172.86,229.77 170.44,228.01 167.81,226.56 165.03,225.46 162.12,224.72 159.15,224.34 156.16,224.34 153.18,224.72 150.28,225.46 147.50,226.56 144.87,228.01 142.45,229.77 140.26,231.82 138.35,234.13 136.75,236.66 135.47,239.37 134.55,242.22 133.99,245.16 133.80,248.15 133.99,251.14 134.55,254.08 135.47,256.93 136.75,259.64 138.35,262.17 140.26,264.48 142.45,266.53 144.87,268.29 147.50,269.73 150.28,270.84 153.18,271.58 156.16,271.96 159.15,271.96 162.12,271.58 165.03,270.84 167.81,269.73 170.44,268.29 172.86,266.53 175.04,264.48 176.95,262.17 178.56,259.64 179.83,256.93 180.76,254.08 181.32,251.14 181.51,248.15' fill='#1F998A' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_rcp &amp;lt;br/&amp;gt; value:  66 &amp;lt;br/&amp;gt; You can add a story here!' data-id='38'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e39' points='157.31,215.49 157.22,214.16 156.97,212.85 156.56,211.59 156.00,210.39 155.28,209.26 154.44,208.24 153.47,207.33 152.39,206.55 151.23,205.91 149.99,205.42 148.70,205.09 147.38,204.92 146.05,204.92 144.73,205.09 143.45,205.42 142.21,205.91 141.05,206.55 139.97,207.33 139.00,208.24 138.15,209.26 137.44,210.39 136.87,211.59 136.46,212.85 136.21,214.16 136.13,215.49 136.21,216.81 136.46,218.12 136.87,219.38 137.44,220.59 138.15,221.71 139.00,222.73 139.97,223.65 141.05,224.43 142.21,225.07 143.45,225.56 144.73,225.89 146.05,226.05 147.38,226.05 148.70,225.89 149.99,225.56 151.23,225.07 152.39,224.43 153.47,223.65 154.44,222.73 155.28,221.71 156.00,220.59 156.56,219.38 156.97,218.12 157.22,216.81 157.31,215.49' fill='#1E9C89' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_wzw &amp;lt;br/&amp;gt; value:  13 &amp;lt;br/&amp;gt; You can add a story here!' data-id='39'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e40' points='158.43,192.45 158.33,190.89 158.03,189.36 157.55,187.87 156.88,186.45 156.05,185.13 155.05,183.93 153.91,182.85 152.64,181.93 151.27,181.18 149.82,180.61 148.30,180.22 146.75,180.02 145.18,180.02 143.63,180.22 142.12,180.61 140.66,181.18 139.29,181.93 138.03,182.85 136.89,183.93 135.89,185.13 135.05,186.45 134.38,187.87 133.90,189.36 133.61,190.89 133.51,192.45 133.61,194.02 133.90,195.55 134.38,197.04 135.05,198.46 135.89,199.78 136.89,200.98 138.03,202.05 139.29,202.97 140.66,203.73 142.12,204.30 143.63,204.69 145.18,204.89 146.75,204.89 148.30,204.69 149.82,204.30 151.27,203.73 152.64,202.97 153.91,202.05 155.05,200.98 156.05,199.78 156.88,198.46 157.55,197.04 158.03,195.55 158.33,194.02 158.43,192.45' fill='#1FA088' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_dft &amp;lt;br/&amp;gt; value:  18 &amp;lt;br/&amp;gt; You can add a story here!' data-id='40'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e41' points='147.48,166.66 147.34,164.36 146.91,162.10 146.20,159.91 145.21,157.82 143.98,155.88 142.51,154.10 140.83,152.53 138.97,151.17 136.95,150.06 134.81,149.22 132.58,148.64 130.30,148.36 127.99,148.36 125.71,148.64 123.48,149.22 121.34,150.06 119.32,151.17 117.46,152.53 115.78,154.10 114.31,155.88 113.08,157.82 112.09,159.91 111.38,162.10 110.95,164.36 110.81,166.66 110.95,168.96 111.38,171.22 112.09,173.41 113.08,175.49 114.31,177.44 115.78,179.21 117.46,180.79 119.32,182.14 121.34,183.25 123.48,184.10 125.71,184.67 127.99,184.96 130.30,184.96 132.58,184.67 134.81,184.10 136.95,183.25 138.97,182.14 140.83,180.79 142.51,179.21 143.98,177.44 145.21,175.49 146.20,173.41 146.91,171.22 147.34,168.96 147.48,166.66' fill='#20A386' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_elr &amp;lt;br/&amp;gt; value:  39 &amp;lt;br/&amp;gt; You can add a story here!' data-id='41'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e42' points='318.67,301.74 318.48,298.70 317.91,295.72 316.97,292.82 315.67,290.07 314.04,287.50 312.10,285.16 309.89,283.08 307.43,281.29 304.76,279.83 301.93,278.71 298.99,277.95 295.97,277.57 292.93,277.57 289.91,277.95 286.97,278.71 284.14,279.83 281.48,281.29 279.02,283.08 276.80,285.16 274.86,287.50 273.23,290.07 271.94,292.82 271.00,295.72 270.43,298.70 270.24,301.74 270.43,304.77 271.00,307.76 271.94,310.65 273.23,313.40 274.86,315.97 276.80,318.31 279.02,320.40 281.48,322.18 284.14,323.65 286.97,324.77 289.91,325.52 292.93,325.90 295.97,325.90 298.99,325.52 301.93,324.77 304.76,323.65 307.43,322.18 309.89,320.40 312.10,318.31 314.04,315.97 315.67,313.40 316.97,310.65 317.91,307.76 318.48,304.77 318.67,301.74' fill='#22A785' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_zsx &amp;lt;br/&amp;gt; value:  68 &amp;lt;br/&amp;gt; You can add a story here!' data-id='42'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e43' points='274.96,321.33 274.81,318.97 274.37,316.65 273.64,314.41 272.63,312.27 271.37,310.28 269.86,308.46 268.14,306.84 266.23,305.45 264.16,304.32 261.96,303.45 259.68,302.86 257.34,302.56 254.97,302.56 252.63,302.86 250.34,303.45 248.15,304.32 246.08,305.45 244.17,306.84 242.45,308.46 240.94,310.28 239.68,312.27 238.67,314.41 237.94,316.65 237.50,318.97 237.35,321.33 237.50,323.69 237.94,326.00 238.67,328.25 239.68,330.39 240.94,332.38 242.45,334.20 244.17,335.82 246.08,337.20 248.15,338.34 250.34,339.21 252.63,339.80 254.97,340.09 257.34,340.09 259.68,339.80 261.96,339.21 264.16,338.34 266.23,337.20 268.14,335.82 269.86,334.20 271.37,332.38 272.63,330.39 273.64,328.25 274.37,326.00 274.81,323.69 274.96,321.33' fill='#24AA83' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_gvm &amp;lt;br/&amp;gt; value:  41 &amp;lt;br/&amp;gt; You can add a story here!' data-id='43'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e44' points='374.52,232.52 374.40,230.64 374.05,228.79 373.47,227.01 372.67,225.30 371.66,223.72 370.46,222.27 369.09,220.98 367.57,219.88 365.92,218.97 364.17,218.28 362.35,217.81 360.49,217.57 358.61,217.57 356.74,217.81 354.92,218.28 353.17,218.97 351.52,219.88 350.00,220.98 348.63,222.27 347.43,223.72 346.43,225.30 345.62,227.01 345.04,228.79 344.69,230.64 344.57,232.52 344.69,234.39 345.04,236.24 345.62,238.03 346.43,239.73 347.43,241.32 348.63,242.77 350.00,244.05 351.52,245.16 353.17,246.07 354.92,246.76 356.74,247.23 358.61,247.46 360.49,247.46 362.35,247.23 364.17,246.76 365.92,246.07 367.57,245.16 369.09,244.05 370.46,242.77 371.66,241.32 372.67,239.73 373.47,238.03 374.05,236.24 374.40,234.39 374.52,232.52' fill='#27AD81' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_fdp &amp;lt;br/&amp;gt; value:  26 &amp;lt;br/&amp;gt; You can add a story here!' data-id='44'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e45' points='370.37,263.57 370.24,261.48 369.85,259.44 369.20,257.45 368.31,255.56 367.20,253.80 365.87,252.20 364.34,250.77 362.66,249.54 360.83,248.54 358.89,247.77 356.87,247.25 354.80,246.99 352.71,246.99 350.64,247.25 348.62,247.77 346.68,248.54 344.86,249.54 343.17,250.77 341.65,252.20 340.32,253.80 339.20,255.56 338.31,257.45 337.67,259.44 337.28,261.48 337.15,263.57 337.28,265.65 337.67,267.70 338.31,269.68 339.20,271.57 340.32,273.33 341.65,274.94 343.17,276.37 344.86,277.59 346.68,278.60 348.62,279.36 350.64,279.88 352.71,280.15 354.80,280.15 356.87,279.88 358.89,279.36 360.83,278.60 362.66,277.59 364.34,276.37 365.87,274.94 367.20,273.33 368.31,271.57 369.20,269.68 369.85,267.70 370.24,265.65 370.37,263.57' fill='#2BB17E' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_zld &amp;lt;br/&amp;gt; value:  32 &amp;lt;br/&amp;gt; You can add a story here!' data-id='45'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e46' points='186.36,286.41 186.23,284.36 185.84,282.34 185.21,280.39 184.33,278.53 183.23,276.80 181.92,275.22 180.43,273.81 178.77,272.61 176.97,271.62 175.06,270.86 173.07,270.35 171.03,270.09 168.98,270.09 166.94,270.35 164.95,270.86 163.04,271.62 161.25,272.61 159.58,273.81 158.09,275.22 156.78,276.80 155.68,278.53 154.80,280.39 154.17,282.34 153.79,284.36 153.66,286.41 153.79,288.46 154.17,290.48 154.80,292.43 155.68,294.29 156.78,296.02 158.09,297.60 159.58,299.01 161.25,300.21 163.04,301.20 164.95,301.96 166.94,302.47 168.98,302.73 171.03,302.73 173.07,302.47 175.06,301.96 176.97,301.20 178.77,300.21 180.43,299.01 181.92,297.60 183.23,296.02 184.33,294.29 185.21,292.43 185.84,290.48 186.23,288.46 186.36,286.41' fill='#30B47C' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_raf &amp;lt;br/&amp;gt; value:  31 &amp;lt;br/&amp;gt; You can add a story here!' data-id='46'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e47' points='401.96,155.08 401.78,152.22 401.25,149.42 400.37,146.70 399.15,144.12 397.62,141.71 395.80,139.50 393.72,137.55 391.41,135.87 388.90,134.49 386.25,133.44 383.48,132.73 380.65,132.37 377.79,132.37 374.96,132.73 372.19,133.44 369.53,134.49 367.03,135.87 364.72,137.55 362.64,139.50 360.82,141.71 359.29,144.12 358.07,146.70 357.19,149.42 356.65,152.22 356.47,155.08 356.65,157.93 357.19,160.73 358.07,163.45 359.29,166.03 360.82,168.44 362.64,170.65 364.72,172.60 367.03,174.28 369.53,175.66 372.19,176.71 374.96,177.42 377.79,177.78 380.65,177.78 383.48,177.42 386.25,176.71 388.90,175.66 391.41,174.28 393.72,172.60 395.80,170.65 397.62,168.44 399.15,166.03 400.37,163.45 401.25,160.73 401.78,157.93 401.96,155.08' fill='#35B779' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_xjq &amp;lt;br/&amp;gt; value:  60 &amp;lt;br/&amp;gt; You can add a story here!' data-id='47'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e48' points='427.09,191.15 426.92,188.42 426.41,185.73 425.57,183.13 424.40,180.65 422.94,178.35 421.19,176.24 419.20,174.37 416.99,172.76 414.59,171.44 412.05,170.43 409.40,169.75 406.69,169.41 403.95,169.41 401.24,169.75 398.59,170.43 396.05,171.44 393.65,172.76 391.44,174.37 389.44,176.24 387.70,178.35 386.23,180.65 385.07,183.13 384.22,185.73 383.71,188.42 383.54,191.15 383.71,193.88 384.22,196.56 385.07,199.16 386.23,201.64 387.70,203.95 389.44,206.05 391.44,207.93 393.65,209.53 396.05,210.85 398.59,211.86 401.24,212.54 403.95,212.88 406.69,212.88 409.40,212.54 412.05,211.86 414.59,210.85 416.99,209.53 419.20,207.93 421.19,206.05 422.94,203.95 424.40,201.64 425.57,199.16 426.41,196.56 426.92,193.88 427.09,191.15' fill='#3BBB75' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_iyr &amp;lt;br/&amp;gt; value:  55 &amp;lt;br/&amp;gt; You can add a story here!' data-id='48'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e49' points='158.72,133.10 158.58,130.92 158.17,128.78 157.50,126.70 156.57,124.73 155.40,122.88 154.01,121.20 152.42,119.71 150.65,118.43 148.74,117.38 146.71,116.57 144.60,116.03 142.43,115.76 140.25,115.76 138.09,116.03 135.98,116.57 133.95,117.38 132.04,118.43 130.27,119.71 128.68,121.20 127.29,122.88 126.12,124.73 125.19,126.70 124.52,128.78 124.11,130.92 123.97,133.10 124.11,135.27 124.52,137.42 125.19,139.49 126.12,141.46 127.29,143.31 128.68,144.99 130.27,146.48 132.04,147.76 133.95,148.81 135.98,149.62 138.09,150.16 140.25,150.43 142.43,150.43 144.60,150.16 146.71,149.62 148.74,148.81 150.65,147.76 152.42,146.48 154.01,144.99 155.40,143.31 156.57,141.46 157.50,139.49 158.17,137.42 158.58,135.27 158.72,133.10' fill='#41BD72' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_tpf &amp;lt;br/&amp;gt; value:  35 &amp;lt;br/&amp;gt; You can add a story here!' data-id='49'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e50' points='357.81,79.78 357.65,77.21 357.16,74.67 356.37,72.22 355.27,69.88 353.88,67.70 352.24,65.71 350.36,63.95 348.27,62.43 346.01,61.19 343.61,60.23 341.11,59.59 338.55,59.27 335.96,59.27 333.40,59.59 330.90,60.23 328.50,61.19 326.24,62.43 324.15,63.95 322.27,65.71 320.63,67.70 319.24,69.88 318.14,72.22 317.35,74.67 316.86,77.21 316.70,79.78 316.86,82.36 317.35,84.90 318.14,87.35 319.24,89.69 320.63,91.87 322.27,93.85 324.15,95.62 326.24,97.14 328.50,98.38 330.90,99.33 333.40,99.97 335.96,100.30 338.55,100.30 341.11,99.97 343.61,99.33 346.01,98.38 348.27,97.14 350.36,95.62 352.24,93.85 353.88,91.87 355.27,89.69 356.37,87.35 357.16,84.90 357.65,82.36 357.81,79.78' fill='#48C16E' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_fta &amp;lt;br/&amp;gt; value:  49 &amp;lt;br/&amp;gt; You can add a story here!' data-id='50'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e51' points='391.10,91.83 390.96,89.62 390.54,87.45 389.86,85.35 388.92,83.34 387.73,81.48 386.32,79.77 384.71,78.26 382.92,76.96 380.98,75.89 378.92,75.08 376.78,74.53 374.58,74.25 372.37,74.25 370.18,74.53 368.03,75.08 365.98,75.89 364.04,76.96 362.25,78.26 360.63,79.77 359.22,81.48 358.04,83.34 357.10,85.35 356.41,87.45 356.00,89.62 355.86,91.83 356.00,94.04 356.41,96.21 357.10,98.32 358.04,100.32 359.22,102.19 360.63,103.89 362.25,105.41 364.04,106.71 365.98,107.77 368.03,108.59 370.18,109.14 372.37,109.42 374.58,109.42 376.78,109.14 378.92,108.59 380.98,107.77 382.92,106.71 384.71,105.41 386.32,103.89 387.73,102.19 388.92,100.32 389.86,98.32 390.54,96.21 390.96,94.04 391.10,91.83' fill='#50C46A' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_hah &amp;lt;br/&amp;gt; value:  36 &amp;lt;br/&amp;gt; You can add a story here!' data-id='51'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e52' points='159.76,113.52 159.71,112.79 159.57,112.06 159.35,111.36 159.03,110.69 158.64,110.07 158.17,109.50 157.63,109.00 157.03,108.57 156.39,108.21 155.70,107.94 154.99,107.76 154.25,107.66 153.52,107.66 152.79,107.76 152.07,107.94 151.38,108.21 150.74,108.57 150.14,109.00 149.60,109.50 149.13,110.07 148.74,110.69 148.43,111.36 148.20,112.06 148.06,112.79 148.01,113.52 148.06,114.26 148.20,114.98 148.43,115.69 148.74,116.35 149.13,116.98 149.60,117.54 150.14,118.05 150.74,118.48 151.38,118.84 152.07,119.11 152.79,119.29 153.52,119.39 154.25,119.39 154.99,119.29 155.70,119.11 156.39,118.84 157.03,118.48 157.63,118.05 158.17,117.54 158.64,116.98 159.03,116.35 159.35,115.69 159.57,114.98 159.71,114.26 159.76,113.52' fill='#57C666' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_wbo &amp;lt;br/&amp;gt; value:  4 &amp;lt;br/&amp;gt; You can add a story here!' data-id='52'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e53' points='164.60,105.95 164.57,105.43 164.47,104.91 164.31,104.42 164.09,103.95 163.81,103.51 163.48,103.10 163.10,102.75 162.68,102.44 162.22,102.19 161.73,102.00 161.23,101.87 160.71,101.80 160.19,101.80 159.67,101.87 159.17,102.00 158.68,102.19 158.22,102.44 157.80,102.75 157.42,103.10 157.09,103.51 156.81,103.95 156.59,104.42 156.43,104.91 156.33,105.43 156.30,105.95 156.33,106.47 156.43,106.98 156.59,107.48 156.81,107.95 157.09,108.39 157.42,108.79 157.80,109.15 158.22,109.45 158.68,109.70 159.17,109.90 159.67,110.03 160.19,110.09 160.71,110.09 161.23,110.03 161.73,109.90 162.22,109.70 162.68,109.45 163.10,109.15 163.48,108.79 163.81,108.39 164.09,107.95 164.31,107.48 164.47,106.98 164.57,106.47 164.60,105.95' fill='#5EC962' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_wtd &amp;lt;br/&amp;gt; value:  2 &amp;lt;br/&amp;gt; You can add a story here!' data-id='53'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e54' points='180.63,90.16 180.53,88.52 180.22,86.90 179.71,85.33 179.01,83.84 178.12,82.45 177.07,81.17 175.87,80.05 174.54,79.08 173.09,78.28 171.56,77.67 169.96,77.26 168.32,77.06 166.67,77.06 165.04,77.26 163.44,77.67 161.91,78.28 160.46,79.08 159.13,80.05 157.93,81.17 156.87,82.45 155.99,83.84 155.29,85.33 154.78,86.90 154.47,88.52 154.37,90.16 154.47,91.81 154.78,93.43 155.29,95.00 155.99,96.49 156.87,97.88 157.93,99.15 159.13,100.28 160.46,101.25 161.91,102.05 163.44,102.65 165.04,103.06 166.67,103.27 168.32,103.27 169.96,103.06 171.56,102.65 173.09,102.05 174.54,101.25 175.87,100.28 177.07,99.15 178.12,97.88 179.01,96.49 179.71,95.00 180.22,93.43 180.53,91.81 180.63,90.16' fill='#67CC5C' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_sdz &amp;lt;br/&amp;gt; value:  20 &amp;lt;br/&amp;gt; You can add a story here!' data-id='54'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e55' points='200.94,79.51 200.85,78.08 200.58,76.68 200.14,75.32 199.53,74.03 198.77,72.82 197.85,71.72 196.81,70.74 195.66,69.90 194.41,69.21 193.08,68.69 191.70,68.33 190.28,68.15 188.85,68.15 187.43,68.33 186.05,68.69 184.72,69.21 183.47,69.90 182.32,70.74 181.27,71.72 180.36,72.82 179.60,74.03 178.99,75.32 178.55,76.68 178.28,78.08 178.19,79.51 178.28,80.93 178.55,82.33 178.99,83.69 179.60,84.98 180.36,86.19 181.27,87.29 182.32,88.27 183.47,89.11 184.72,89.80 186.05,90.32 187.43,90.68 188.85,90.86 190.28,90.86 191.70,90.68 193.08,90.32 194.41,89.80 195.66,89.11 196.81,88.27 197.85,87.29 198.77,86.19 199.53,84.98 200.14,83.69 200.58,82.33 200.85,80.93 200.94,79.51' fill='#6FCF57' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_pvu &amp;lt;br/&amp;gt; value:  15 &amp;lt;br/&amp;gt; You can add a story here!' data-id='55'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e56' points='355.15,293.99 355.01,291.72 354.58,289.49 353.88,287.33 352.91,285.27 351.69,283.35 350.24,281.60 348.58,280.05 346.75,278.71 344.75,277.61 342.64,276.78 340.44,276.21 338.18,275.93 335.91,275.93 333.65,276.21 331.45,276.78 329.34,277.61 327.35,278.71 325.51,280.05 323.85,281.60 322.40,283.35 321.18,285.27 320.22,287.33 319.51,289.49 319.09,291.72 318.95,293.99 319.09,296.26 319.51,298.49 320.22,300.66 321.18,302.71 322.40,304.63 323.85,306.38 325.51,307.94 327.35,309.28 329.34,310.37 331.45,311.21 333.65,311.77 335.91,312.06 338.18,312.06 340.44,311.77 342.64,311.21 344.75,310.37 346.75,309.28 348.58,307.94 350.24,306.38 351.69,304.63 352.91,302.71 353.88,300.66 354.58,298.49 355.01,296.26 355.15,293.99' fill='#78D152' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_nxj &amp;lt;br/&amp;gt; value:  38 &amp;lt;br/&amp;gt; You can add a story here!' data-id='56'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e57' points='341.63,325.80 341.51,323.85 341.14,321.94 340.54,320.08 339.71,318.31 338.67,316.67 337.42,315.16 336.00,313.83 334.42,312.68 332.71,311.74 330.90,311.02 329.01,310.54 327.07,310.29 325.12,310.29 323.18,310.54 321.29,311.02 319.48,311.74 317.77,312.68 316.19,313.83 314.77,315.16 313.52,316.67 312.48,318.31 311.65,320.08 311.04,321.94 310.68,323.85 310.56,325.80 310.68,327.75 311.04,329.66 311.65,331.52 312.48,333.29 313.52,334.93 314.77,336.44 316.19,337.77 317.77,338.92 319.48,339.86 321.29,340.58 323.18,341.06 325.12,341.31 327.07,341.31 329.01,341.06 330.90,340.58 332.71,339.86 334.42,338.92 336.00,337.77 337.42,336.44 338.67,334.93 339.71,333.29 340.54,331.52 341.14,329.66 341.51,327.75 341.63,325.80' fill='#81D34D' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_unz &amp;lt;br/&amp;gt; value:  28 &amp;lt;br/&amp;gt; You can add a story here!' data-id='57'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e58' points='206.05,56.88 205.95,55.41 205.68,53.96 205.22,52.55 204.59,51.22 203.80,49.97 202.86,48.84 201.79,47.83 200.60,46.96 199.30,46.25 197.93,45.71 196.50,45.34 195.04,45.15 193.56,45.15 192.10,45.34 190.67,45.71 189.30,46.25 188.01,46.96 186.81,47.83 185.74,48.84 184.80,49.97 184.01,51.22 183.38,52.55 182.92,53.96 182.65,55.41 182.56,56.88 182.65,58.35 182.92,59.80 183.38,61.20 184.01,62.54 184.80,63.78 185.74,64.92 186.81,65.93 188.01,66.79 189.30,67.51 190.67,68.05 192.10,68.41 193.56,68.60 195.04,68.60 196.50,68.41 197.93,68.05 199.30,67.51 200.60,66.79 201.79,65.93 202.86,64.92 203.80,63.78 204.59,62.54 205.22,61.20 205.68,59.80 205.95,58.35 206.05,56.88' fill='#8AD647' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_xgi &amp;lt;br/&amp;gt; value:  16 &amp;lt;br/&amp;gt; You can add a story here!' data-id='58'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e59' points='275.81,38.37 275.65,35.74 275.15,33.15 274.34,30.65 273.22,28.26 271.81,26.04 270.13,24.01 268.21,22.21 266.08,20.66 263.77,19.39 261.32,18.42 258.77,17.77 256.16,17.44 253.53,17.44 250.91,17.77 248.36,18.42 245.91,19.39 243.61,20.66 241.48,22.21 239.56,24.01 237.88,26.04 236.47,28.26 235.34,30.65 234.53,33.15 234.04,35.74 233.87,38.37 234.04,41.00 234.53,43.58 235.34,46.09 236.47,48.47 237.88,50.69 239.56,52.72 241.48,54.52 243.61,56.07 245.91,57.34 248.36,58.31 250.91,58.97 253.53,59.30 256.16,59.30 258.77,58.97 261.32,58.31 263.77,57.34 266.08,56.07 268.21,54.52 270.13,52.72 271.81,50.69 273.22,48.47 274.34,46.09 275.15,43.58 275.65,41.00 275.81,38.37' fill='#94D741' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_pko &amp;lt;br/&amp;gt; value:  51 &amp;lt;br/&amp;gt; You can add a story here!' data-id='59'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e60' points='322.77,39.81 322.59,36.86 322.03,33.97 321.12,31.16 319.87,28.49 318.29,26.00 316.41,23.73 314.25,21.71 311.87,19.97 309.28,18.55 306.54,17.47 303.68,16.73 300.76,16.36 297.81,16.36 294.88,16.73 292.02,17.47 289.28,18.55 286.69,19.97 284.31,21.71 282.16,23.73 280.28,26.00 278.69,28.49 277.44,31.16 276.53,33.97 275.97,36.86 275.79,39.81 275.97,42.75 276.53,45.65 277.44,48.46 278.69,51.13 280.28,53.62 282.16,55.89 284.31,57.91 286.69,59.64 289.28,61.06 292.02,62.15 294.88,62.88 297.81,63.25 300.76,63.25 303.68,62.88 306.54,62.15 309.28,61.06 311.87,59.64 314.25,57.91 316.41,55.89 318.29,53.62 319.87,51.13 321.12,48.46 322.03,45.65 322.59,42.75 322.77,39.81' fill='#9DD93B' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_tww &amp;lt;br/&amp;gt; value:  64 &amp;lt;br/&amp;gt; You can add a story here!' data-id='60'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e61' points='218.45,319.29 218.26,316.24 217.68,313.23 216.74,310.31 215.43,307.54 213.79,304.96 211.84,302.60 209.61,300.50 207.13,298.70 204.44,297.22 201.60,296.09 198.63,295.33 195.59,294.95 192.53,294.95 189.49,295.33 186.52,296.09 183.67,297.22 180.99,298.70 178.51,300.50 176.28,302.60 174.33,304.96 172.68,307.54 171.38,310.31 170.43,313.23 169.86,316.24 169.67,319.29 169.86,322.35 170.43,325.36 171.38,328.27 172.68,331.04 174.33,333.63 176.28,335.99 178.51,338.09 180.99,339.89 183.67,341.36 186.52,342.49 189.49,343.25 192.53,343.64 195.59,343.64 198.63,343.25 201.60,342.49 204.44,341.36 207.13,339.89 209.61,338.09 211.84,335.99 213.79,333.63 215.43,331.04 216.74,328.27 217.68,325.36 218.26,322.35 218.45,319.29' fill='#A7DB35' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_auf &amp;lt;br/&amp;gt; value:  69 &amp;lt;br/&amp;gt; You can add a story here!' data-id='61'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e62' points='237.92,327.03 237.84,325.75 237.60,324.50 237.20,323.28 236.66,322.13 235.98,321.05 235.16,320.06 234.23,319.19 233.20,318.44 232.08,317.82 230.89,317.35 229.65,317.04 228.38,316.88 227.11,316.88 225.84,317.04 224.60,317.35 223.42,317.82 222.30,318.44 221.26,319.19 220.33,320.06 219.52,321.05 218.83,322.13 218.29,323.28 217.89,324.50 217.65,325.75 217.57,327.03 217.65,328.30 217.89,329.56 218.29,330.77 218.83,331.93 219.52,333.01 220.33,333.99 221.26,334.87 222.30,335.62 223.42,336.23 224.60,336.70 225.84,337.02 227.11,337.18 228.38,337.18 229.65,337.02 230.89,336.70 232.08,336.23 233.20,335.62 234.23,334.87 235.16,333.99 235.98,333.01 236.66,331.93 237.20,330.77 237.60,329.56 237.84,328.30 237.92,327.03' fill='#B1DD2E' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_jhu &amp;lt;br/&amp;gt; value:  12 &amp;lt;br/&amp;gt; You can add a story here!' data-id='62'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e63' points='397.39,217.90 397.30,216.52 397.05,215.17 396.62,213.86 396.03,212.61 395.29,211.44 394.41,210.38 393.41,209.43 392.29,208.62 391.08,207.96 389.80,207.45 388.46,207.11 387.09,206.93 385.71,206.93 384.35,207.11 383.01,207.45 381.73,207.96 380.52,208.62 379.40,209.43 378.39,210.38 377.52,211.44 376.78,212.61 376.19,213.86 375.76,215.17 375.50,216.52 375.42,217.90 375.50,219.28 375.76,220.63 376.19,221.94 376.78,223.19 377.52,224.36 378.39,225.42 379.40,226.37 380.52,227.18 381.73,227.84 383.01,228.35 384.35,228.69 385.71,228.87 387.09,228.87 388.46,228.69 389.80,228.35 391.08,227.84 392.29,227.18 393.41,226.37 394.41,225.42 395.29,224.36 396.03,223.19 396.62,221.94 397.05,220.63 397.30,219.28 397.39,217.90' fill='#BADE28' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_ivk &amp;lt;br/&amp;gt; value:  14 &amp;lt;br/&amp;gt; You can add a story here!' data-id='63'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e64' points='415.73,251.44 415.55,248.54 415.00,245.69 414.11,242.93 412.87,240.30 411.31,237.85 409.46,235.61 407.35,233.62 405.00,231.92 402.45,230.52 399.75,229.45 396.94,228.73 394.06,228.36 391.16,228.36 388.28,228.73 385.46,229.45 382.76,230.52 380.22,231.92 377.87,233.62 375.75,235.61 373.90,237.85 372.35,240.30 371.11,242.93 370.21,245.69 369.67,248.54 369.49,251.44 369.67,254.34 370.21,257.19 371.11,259.95 372.35,262.58 373.90,265.03 375.75,267.27 377.87,269.26 380.22,270.96 382.76,272.36 385.46,273.43 388.28,274.15 391.16,274.52 394.06,274.52 396.94,274.15 399.75,273.43 402.45,272.36 405.00,270.96 407.35,269.26 409.46,267.27 411.31,265.03 412.87,262.58 414.11,259.95 415.00,257.19 415.55,254.34 415.73,251.44' fill='#C4E021' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_flg &amp;lt;br/&amp;gt; value:  62 &amp;lt;br/&amp;gt; You can add a story here!' data-id='64'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e65' points='137.23,207.42 137.08,204.98 136.62,202.58 135.87,200.25 134.82,198.04 133.51,195.97 131.95,194.09 130.17,192.41 128.19,190.98 126.05,189.80 123.77,188.90 121.40,188.29 118.98,187.98 116.53,187.98 114.11,188.29 111.74,188.90 109.46,189.80 107.32,190.98 105.34,192.41 103.56,194.09 102.00,195.97 100.69,198.04 99.64,200.25 98.89,202.58 98.43,204.98 98.28,207.42 98.43,209.86 98.89,212.27 99.64,214.59 100.69,216.80 102.00,218.87 103.56,220.75 105.34,222.43 107.32,223.87 109.46,225.05 111.74,225.95 114.11,226.55 116.53,226.86 118.98,226.86 121.40,226.55 123.77,225.95 126.05,225.05 128.19,223.87 130.17,222.43 131.95,220.75 133.51,218.87 134.82,216.80 135.87,214.59 136.62,212.27 137.08,209.86 137.23,207.42' fill='#CFE11C' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_qqu &amp;lt;br/&amp;gt; value:  44 &amp;lt;br/&amp;gt; You can add a story here!' data-id='65'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e66' points='112.63,178.00 112.49,175.76 112.07,173.55 111.37,171.42 110.42,169.39 109.22,167.50 107.79,165.77 106.15,164.23 104.34,162.92 102.37,161.83 100.29,161.01 98.11,160.45 95.89,160.17 93.65,160.17 91.42,160.45 89.25,161.01 87.16,161.83 85.20,162.92 83.38,164.23 81.75,165.77 80.32,167.50 79.11,169.39 78.16,171.42 77.47,173.55 77.05,175.76 76.91,178.00 77.05,180.24 77.47,182.44 78.16,184.57 79.11,186.60 80.32,188.50 81.75,190.22 83.38,191.76 85.20,193.08 87.16,194.16 89.25,194.98 91.42,195.54 93.65,195.82 95.89,195.82 98.11,195.54 100.29,194.98 102.37,194.16 104.34,193.08 106.15,191.76 107.79,190.22 109.22,188.50 110.42,186.60 111.37,184.57 112.07,182.44 112.49,180.24 112.63,178.00' fill='#D8E219' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_qpl &amp;lt;br/&amp;gt; value:  37 &amp;lt;br/&amp;gt; You can add a story here!' data-id='66'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e67' points='133.80,247.93 133.63,245.25 133.13,242.61 132.30,240.06 131.15,237.63 129.72,235.36 128.01,233.29 126.05,231.46 123.88,229.88 121.52,228.58 119.03,227.60 116.43,226.93 113.76,226.59 111.08,226.59 108.42,226.93 105.82,227.60 103.32,228.58 100.97,229.88 98.79,231.46 96.84,233.29 95.13,235.36 93.69,237.63 92.54,240.06 91.72,242.61 91.21,245.25 91.04,247.93 91.21,250.61 91.72,253.24 92.54,255.80 93.69,258.23 95.13,260.49 96.84,262.56 98.79,264.40 100.97,265.98 103.32,267.27 105.82,268.26 108.42,268.93 111.08,269.26 113.76,269.26 116.43,268.93 119.03,268.26 121.52,267.27 123.88,265.98 126.05,264.40 128.01,262.56 129.72,260.49 131.15,258.23 132.30,255.80 133.13,253.24 133.63,250.61 133.80,247.93' fill='#E2E418' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_tqr &amp;lt;br/&amp;gt; value:  53 &amp;lt;br/&amp;gt; You can add a story here!' data-id='67'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e68' points='389.61,117.85 389.53,116.69 389.32,115.54 388.96,114.43 388.46,113.38 387.83,112.39 387.09,111.49 386.24,110.70 385.30,110.01 384.28,109.45 383.19,109.02 382.06,108.73 380.91,108.58 379.74,108.58 378.58,108.73 377.45,109.02 376.37,109.45 375.35,110.01 374.40,110.70 373.55,111.49 372.81,112.39 372.18,113.38 371.69,114.43 371.33,115.54 371.11,116.69 371.04,117.85 371.11,119.01 371.33,120.16 371.69,121.27 372.18,122.32 372.81,123.31 373.55,124.21 374.40,125.01 375.35,125.69 376.37,126.25 377.45,126.68 378.58,126.97 379.74,127.12 380.91,127.12 382.06,126.97 383.19,126.68 384.28,126.25 385.30,125.69 386.24,125.01 387.09,124.21 387.83,123.31 388.46,122.32 388.96,121.27 389.32,120.16 389.53,119.01 389.61,117.85' fill='#EBE51B' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_kvn &amp;lt;br/&amp;gt; value:  10 &amp;lt;br/&amp;gt; You can add a story here!' data-id='68'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e69' points='420.57,125.59 420.44,123.57 420.06,121.59 419.44,119.67 418.58,117.84 417.49,116.14 416.21,114.58 414.73,113.20 413.10,112.01 411.33,111.04 409.45,110.29 407.50,109.79 405.49,109.54 403.47,109.54 401.47,109.79 399.51,110.29 397.63,111.04 395.86,112.01 394.23,113.20 392.76,114.58 391.47,116.14 390.39,117.84 389.53,119.67 388.90,121.59 388.53,123.57 388.40,125.59 388.53,127.61 388.90,129.59 389.53,131.51 390.39,133.34 391.47,135.04 392.76,136.60 394.23,137.98 395.86,139.17 397.63,140.14 399.51,140.89 401.47,141.39 403.47,141.64 405.49,141.64 407.50,141.39 409.45,140.89 411.33,140.14 413.10,139.17 414.73,137.98 416.21,136.60 417.49,135.04 418.58,133.34 419.44,131.51 420.06,129.59 420.44,127.61 420.57,125.59' fill='#F5E61F' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_pqi &amp;lt;br/&amp;gt; value:  30 &amp;lt;br/&amp;gt; You can add a story here!' data-id='69'/>\n   <polygon id='svg_91c324b9_2edb_4db9_b32e_3a4e44967461_e70' points='382.23,276.44 382.17,275.46 381.99,274.51 381.69,273.58 381.27,272.70 380.75,271.87 380.13,271.12 379.41,270.45 378.63,269.88 377.77,269.41 376.86,269.05 375.92,268.81 374.95,268.68 373.97,268.68 373.01,268.81 372.06,269.05 371.15,269.41 370.30,269.88 369.51,270.45 368.80,271.12 368.18,271.87 367.65,272.70 367.24,273.58 366.94,274.51 366.75,275.46 366.69,276.44 366.75,277.41 366.94,278.37 367.24,279.30 367.65,280.18 368.18,281.00 368.80,281.76 369.51,282.42 370.30,283.00 371.15,283.47 372.06,283.83 373.01,284.07 373.97,284.19 374.95,284.19 375.92,284.07 376.86,283.83 377.77,283.47 378.63,283.00 379.41,282.42 380.13,281.76 380.75,281.00 381.27,280.18 381.69,279.30 381.99,278.37 382.17,277.41 382.23,276.44' fill='#FDE725' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_qbb &amp;lt;br/&amp;gt; value:  7 &amp;lt;br/&amp;gt; You can add a story here!' data-id='70'/>\n   <text x='236.93' y='185.48' font-size='4.27pt' font-family='Helvetica'>qgl<\/text>\n   <text x='274.32' y='185.48' font-size='4.27pt' font-family='Helvetica'>txg<\/text>\n   <text x='246.82' y='211.21' font-size='4.27pt' font-family='Helvetica'>acu<\/text>\n   <text x='216.88' y='209.2' font-size='4.27pt' font-family='Helvetica'>tdu<\/text>\n   <text x='219.65' y='189.69' font-size='4.27pt' font-family='Helvetica'>cmf<\/text>\n   <text x='203.08' y='171.08' font-size='4.27pt' font-family='Helvetica'>vbu<\/text>\n   <text x='239.94' y='151.94' font-size='4.27pt' font-family='Helvetica'>pop<\/text>\n   <text x='268' y='154.36' font-size='4.27pt' font-family='Helvetica'>dqz<\/text>\n   <text x='294.17' y='150.09' font-size='4.27pt' font-family='Helvetica'>ikz<\/text>\n   <text x='301.33' y='172.95' font-size='4.27pt' font-family='Helvetica'>qml<\/text>\n   <text x='308.85' y='190.86' font-size='4.27pt' font-family='Helvetica'>syx<\/text>\n   <text x='295.75' y='204.91' font-size='4.27pt' font-family='Helvetica'>gwc<\/text>\n   <text x='284.1' y='226.28' font-size='4.27pt' font-family='Helvetica'>lyy<\/text>\n   <text x='257.24' y='233.06' font-size='4.27pt' font-family='Helvetica'>sfi<\/text>\n   <text x='227.97' y='244.06' font-size='4.27pt' font-family='Helvetica'>ynp<\/text>\n   <text x='177.1' y='207.8' font-size='4.27pt' font-family='Helvetica'>kfi<\/text>\n   <text x='215.62' y='147.18' font-size='4.27pt' font-family='Helvetica'>mtp<\/text>\n   <text x='216.72' y='126.83' font-size='4.27pt' font-family='Helvetica'>qiy<\/text>\n   <text x='239.59' y='123.43' font-size='4.27pt' font-family='Helvetica'>vha<\/text>\n   <text x='268.52' y='124.48' font-size='4.27pt' font-family='Helvetica'>ksi<\/text>\n   <text x='307.21' y='114.14' font-size='4.27pt' font-family='Helvetica'>isp<\/text>\n   <text x='193.03' y='243.9' font-size='4.27pt' font-family='Helvetica'>eui<\/text>\n   <text x='265.99' y='263.66' font-size='4.27pt' font-family='Helvetica'>nvx<\/text>\n   <text x='227.37' y='288.49' font-size='4.27pt' font-family='Helvetica'>tui<\/text>\n   <text x='162.57' y='166.6' font-size='4.27pt' font-family='Helvetica'>uro<\/text>\n   <text x='176.84' y='126.28' font-size='4.27pt' font-family='Helvetica'>uxp<\/text>\n   <text x='323.38' y='220.87' font-size='4.27pt' font-family='Helvetica'>prj<\/text>\n   <text x='310.54' y='262.25' font-size='4.27pt' font-family='Helvetica'>hcp<\/text>\n   <text x='330.04' y='163.93' font-size='4.27pt' font-family='Helvetica'>gqy<\/text>\n   <text x='346.47' y='124.51' font-size='4.27pt' font-family='Helvetica'>avo<\/text>\n   <text x='357.5' y='198.11' font-size='4.27pt' font-family='Helvetica'>noa<\/text>\n   <text x='190.84' y='273.15' font-size='4.27pt' font-family='Helvetica'>uop<\/text>\n   <text x='231.79' y='103.47' font-size='4.27pt' font-family='Helvetica'>erb<\/text>\n   <text x='259.7' y='83.07' font-size='4.27pt' font-family='Helvetica'>mue<\/text>\n   <text x='299.7' y='79.6' font-size='4.27pt' font-family='Helvetica'>ixj<\/text>\n   <text x='204.08' y='99.27' font-size='4.27pt' font-family='Helvetica'>nvh<\/text>\n   <text x='220.31' y='68.39' font-size='4.27pt' font-family='Helvetica'>imx<\/text>\n   <text x='153.71' y='250.19' font-size='4.27pt' font-family='Helvetica'>rcp<\/text>\n   <text x='141.19' y='217.53' font-size='4.27pt' font-family='Helvetica'>wzw<\/text>\n   <text x='142.81' y='194.49' font-size='4.27pt' font-family='Helvetica'>dft<\/text>\n   <text x='125.98' y='168.7' font-size='4.27pt' font-family='Helvetica'>elr<\/text>\n   <text x='290.19' y='303.78' font-size='4.27pt' font-family='Helvetica'>zsx<\/text>\n   <text x='250.78' y='323.37' font-size='4.27pt' font-family='Helvetica'>gvm<\/text>\n   <text x='355.6' y='234.56' font-size='4.27pt' font-family='Helvetica'>fdp<\/text>\n   <text x='350.12' y='265.61' font-size='4.27pt' font-family='Helvetica'>zld<\/text>\n   <text x='166.69' y='288.45' font-size='4.27pt' font-family='Helvetica'>raf<\/text>\n   <text x='375.58' y='157.12' font-size='4.27pt' font-family='Helvetica'>xjq<\/text>\n   <text x='402.32' y='193.19' font-size='4.27pt' font-family='Helvetica'>iyr<\/text>\n   <text x='138.19' y='135.14' font-size='4.27pt' font-family='Helvetica'>tpf<\/text>\n   <text x='334.1' y='81.83' font-size='4.27pt' font-family='Helvetica'>fta<\/text>\n   <text x='368.74' y='93.87' font-size='4.27pt' font-family='Helvetica'>hah<\/text>\n   <text x='148.67' y='115.57' font-size='4.27pt' font-family='Helvetica'>wbo<\/text>\n   <text x='156.03' y='107.99' font-size='4.27pt' font-family='Helvetica'>wtd<\/text>\n   <text x='163.07' y='92.21' font-size='4.27pt' font-family='Helvetica'>sdz<\/text>\n   <text x='184.98' y='81.55' font-size='4.27pt' font-family='Helvetica'>pvu<\/text>\n   <text x='333.41' y='296.03' font-size='4.27pt' font-family='Helvetica'>nxj<\/text>\n   <text x='321.51' y='327.84' font-size='4.27pt' font-family='Helvetica'>unz<\/text>\n   <text x='190.67' y='58.92' font-size='4.27pt' font-family='Helvetica'>xgi<\/text>\n   <text x='250.26' y='40.41' font-size='4.27pt' font-family='Helvetica'>pko<\/text>\n   <text x='294.39' y='41.85' font-size='4.27pt' font-family='Helvetica'>tww<\/text>\n   <text x='190.11' y='321.33' font-size='4.27pt' font-family='Helvetica'>auf<\/text>\n   <text x='223.95' y='329.07' font-size='4.27pt' font-family='Helvetica'>jhu<\/text>\n   <text x='382.93' y='219.94' font-size='4.27pt' font-family='Helvetica'>ivk<\/text>\n   <text x='389.61' y='253.48' font-size='4.27pt' font-family='Helvetica'>flg<\/text>\n   <text x='113.01' y='209.46' font-size='4.27pt' font-family='Helvetica'>qqu<\/text>\n   <text x='90.97' y='180.04' font-size='4.27pt' font-family='Helvetica'>qpl<\/text>\n   <text x='109.11' y='249.97' font-size='4.27pt' font-family='Helvetica'>tqr<\/text>\n   <text x='375.9' y='119.89' font-size='4.27pt' font-family='Helvetica'>kvn<\/text>\n   <text x='400.69' y='127.63' font-size='4.27pt' font-family='Helvetica'>pqi<\/text>\n   <text x='369.72' y='278.48' font-size='4.27pt' font-family='Helvetica'>qbb<\/text>\n  <\/g>\n <\/g>\n<\/svg>","js":null,"uid":"svg_91c324b9_2edb_4db9_b32e_3a4e44967461","ratio":1.4,"settings":{"tooltip":{"css":".tooltip_SVGID_ { padding:5px;background:black;color:white;border-radius:2px;text-align:left; ; position:absolute;pointer-events:none;z-index:999;}","placement":"doc","opacity":0.9,"offx":10,"offy":10,"use_cursor_pos":true,"use_fill":false,"use_stroke":false,"delay_over":200,"delay_out":500},"hover":{"css":".hover_data_SVGID_ { fill:orange;stroke:black;cursor:pointer; }\ntext.hover_data_SVGID_ { stroke:none;fill:orange; }\ncircle.hover_data_SVGID_ { fill:orange;stroke:black; }\nline.hover_data_SVGID_, polyline.hover_data_SVGID_ { fill:none;stroke:orange; }\nrect.hover_data_SVGID_, polygon.hover_data_SVGID_, path.hover_data_SVGID_ { fill:orange;stroke:none; }\nimage.hover_data_SVGID_ { stroke:orange; }","reactive":true,"nearest_distance":null},"hover_inv":{"css":""},"hover_key":{"css":".hover_key_SVGID_ { fill:orange;stroke:black;cursor:pointer; }\ntext.hover_key_SVGID_ { stroke:none;fill:orange; }\ncircle.hover_key_SVGID_ { fill:orange;stroke:black; }\nline.hover_key_SVGID_, polyline.hover_key_SVGID_ { fill:none;stroke:orange; }\nrect.hover_key_SVGID_, polygon.hover_key_SVGID_, path.hover_key_SVGID_ { fill:orange;stroke:none; }\nimage.hover_key_SVGID_ { stroke:orange; }","reactive":true},"hover_theme":{"css":".hover_theme_SVGID_ { fill:orange;stroke:black;cursor:pointer; }\ntext.hover_theme_SVGID_ { stroke:none;fill:orange; }\ncircle.hover_theme_SVGID_ { fill:orange;stroke:black; }\nline.hover_theme_SVGID_, polyline.hover_theme_SVGID_ { fill:none;stroke:orange; }\nrect.hover_theme_SVGID_, polygon.hover_theme_SVGID_, path.hover_theme_SVGID_ { fill:orange;stroke:none; }\nimage.hover_theme_SVGID_ { stroke:orange; }","reactive":true},"select":{"css":".select_data_SVGID_ { fill:red;stroke:black;cursor:pointer; }\ntext.select_data_SVGID_ { stroke:none;fill:red; }\ncircle.select_data_SVGID_ { fill:red;stroke:black; }\nline.select_data_SVGID_, polyline.select_data_SVGID_ { fill:none;stroke:red; }\nrect.select_data_SVGID_, polygon.select_data_SVGID_, path.select_data_SVGID_ { fill:red;stroke:none; }\nimage.select_data_SVGID_ { stroke:red; }","type":"multiple","only_shiny":true,"selected":[]},"select_inv":{"css":""},"select_key":{"css":".select_key_SVGID_ { fill:red;stroke:black;cursor:pointer; }\ntext.select_key_SVGID_ { stroke:none;fill:red; }\ncircle.select_key_SVGID_ { fill:red;stroke:black; }\nline.select_key_SVGID_, polyline.select_key_SVGID_ { fill:none;stroke:red; }\nrect.select_key_SVGID_, polygon.select_key_SVGID_, path.select_key_SVGID_ { fill:red;stroke:none; }\nimage.select_key_SVGID_ { stroke:red; }","type":"single","only_shiny":true,"selected":[]},"select_theme":{"css":".select_theme_SVGID_ { fill:red;stroke:black;cursor:pointer; }\ntext.select_theme_SVGID_ { stroke:none;fill:red; }\ncircle.select_theme_SVGID_ { fill:red;stroke:black; }\nline.select_theme_SVGID_, polyline.select_theme_SVGID_ { fill:none;stroke:red; }\nrect.select_theme_SVGID_, polygon.select_theme_SVGID_, path.select_theme_SVGID_ { fill:red;stroke:none; }\nimage.select_theme_SVGID_ { stroke:red; }","type":"single","only_shiny":true,"selected":[]},"zoom":{"min":1,"max":1,"duration":300},"toolbar":{"position":"topright","pngname":"diagram","tooltips":null,"fixed":false,"hidden":[],"delay_over":200,"delay_out":500},"sizing":{"rescale":true,"width":1}}},"evals":[],"jsHooks":[]}</script>
<p>交互式圆形打包图（circle packing），可悬停显示详细信息</p>
</div>
</div>
</section>
</section>
<section id="several-levels" class="level2" data-number="25.3">
<h2 data-number="25.3" class="anchored" data-anchor-id="several-levels"><span class="header-section-number">25.3</span> Several levels</h2>
<section id="ggraph" class="level3" data-number="25.3.1">
<h3 data-number="25.3.1" class="anchored" data-anchor-id="ggraph"><span class="header-section-number">25.3.1</span> <code>ggraph()</code></h3>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggraph) <span class="co"># 用于图形可视化</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(igraph) <span class="co"># 用于图形操作</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载 edges 和 vertices 数据，flare 数据集内置于 packcircles 包</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>edges <span class="ot">&lt;-</span> flare<span class="sc">$</span>edges  <span class="co"># 边数据，描述节点之间的父子关系</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 通常我们还会有一个节点信息表，包含每个节点的属性</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>vertices <span class="ot">&lt;-</span> flare<span class="sc">$</span>vertices  <span class="co"># 节点数据，包含节点名称、分组等信息</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 igraph 包将边和节点数据转换为图对象</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>mygraph <span class="ot">&lt;-</span> <span class="fu">graph_from_data_frame</span>(edges, <span class="at">vertices =</span> vertices)</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggraph 包绘制多层级圆形打包图</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'circlepack'</span>) <span class="sc">+</span> </span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_circle</span>() <span class="sc">+</span>         <span class="co"># 绘制每个节点的圆</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>()                 <span class="co"># 去除坐标轴和背景</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="768"></p>
<figcaption>多层级圆形打包图（circle packing），展示层级结构数据</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="type" class="level3" data-number="25.3.2">
<h3 data-number="25.3.2" class="anchored" data-anchor-id="type"><span class="header-section-number">25.3.2</span> type</h3>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'dendrogram'</span>, <span class="at">circular =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_edge_diagonal</span>() <span class="sc">+</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="768"></p>
<figcaption>dendrogram, circle packing</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'dendrogram'</span>, <span class="at">circular =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_edge_diagonal</span>() <span class="sc">+</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>dendrogram, not circle packing</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="st">'treemap'</span>, <span class="at">weight =</span> size) <span class="sc">+</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_node_tile</span>(<span class="fu">aes</span>(<span class="at">fill =</span> depth), <span class="at">size =</span> <span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>treemap</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="st">'partition'</span>, <span class="at">circular =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_node_arc_bar</span>(<span class="fu">aes</span>(<span class="at">fill =</span> depth), <span class="at">size =</span> <span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>partition</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggraph 绘制基础网络图，展示节点与边的关系</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph) <span class="sc">+</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制边（连线），表示节点之间的连接关系</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_edge_link</span>() <span class="sc">+</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制节点（点），表示网络中的各个实体</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_point</span>() <span class="sc">+</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 去除坐标轴和背景，使图形更简洁</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 不显示图例</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>基础网络图：节点与连线的可视化</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="color-1" class="level3" data-number="25.3.3">
<h3 data-number="25.3.3" class="anchored" data-anchor-id="color-1"><span class="header-section-number">25.3.3</span> color</h3>
<p>节点颜色根据深度变化:</p>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggraph 绘制圆形打包图，节点颜色根据深度变化</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'circlepack'</span>, <span class="at">weight=</span>size) <span class="sc">+</span> </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_node_circle</span>(<span class="fu">aes</span>(<span class="at">fill =</span> depth)) <span class="sc">+</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span> </span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"FALSE"</span>)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>p</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="768"></p>
<figcaption>圆形打包图：节点颜色根据深度变化</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">scale_fill_viridis</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="768"></p>
<figcaption>viridis 调色板应用于圆形打包图</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">scale_fill_distiller</span>(<span class="at">palette =</span> <span class="st">"RdPu"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="768"></p>
<figcaption>colorBrewer 调色板应用于圆形打包图</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="label" class="level3" data-number="25.3.4">
<h3 data-number="25.3.4" class="anchored" data-anchor-id="label"><span class="header-section-number">25.3.4</span> label</h3>
<p>适用于层级不特别多的情况</p>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 仅保留有下级的边（即 to 在 from 中出现）</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>edges <span class="ot">&lt;-</span> flare<span class="sc">$</span>edges <span class="sc">|&gt;</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(to <span class="sc">%in%</span> from) <span class="sc">|&gt;</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">droplevels</span>()</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 仅保留参与这些边的节点</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>vertices <span class="ot">&lt;-</span> flare<span class="sc">$</span>vertices <span class="sc">|&gt;</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(name <span class="sc">%in%</span> <span class="fu">c</span>(edges<span class="sc">$</span>from, edges<span class="sc">$</span>to)) <span class="sc">|&gt;</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">droplevels</span>()</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 随机生成每个节点的 size 属性（可根据实际数据调整）</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>vertices<span class="sc">$</span>size <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="fu">nrow</span>(vertices))</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a><span class="co"># 重新构建 igraph 图对象</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>mygraph <span class="ot">&lt;-</span> <span class="fu">graph_from_data_frame</span>(edges, <span class="at">vertices =</span> vertices)</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggraph 绘制多层级圆形打包图</span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'circlepack'</span>, <span class="at">weight =</span> size) <span class="sc">+</span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制每个节点的圆，颜色根据深度变化</span></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_circle</span>(<span class="fu">aes</span>(<span class="at">fill =</span> depth)) <span class="sc">+</span></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 仅在叶节点（leaf=TRUE）处添加标签，标签内容为 shortName，字体大小与 size 成比例</span></span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_text</span>(<span class="fu">aes</span>(</span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">label =</span> shortName,    <span class="co"># 标签内容</span></span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">filter =</span> leaf,        <span class="co"># 仅叶节点显示</span></span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill =</span> depth,         <span class="co"># 标签颜色与深度一致</span></span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">size =</span> size           <span class="co"># 字体大小与 size 成比例</span></span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">+</span></span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>                          <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"FALSE"</span>) <span class="sc">+</span>      <span class="co"># 不显示图例</span></span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis</span>()                    <span class="co"># 使用 viridis 调色板</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" width="768"></p>
<figcaption>带标签的多层级圆形打包图（circle packing），仅叶节点显示标签</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggraph 绘制多层级圆形打包图，节点颜色根据深度变化，叶节点显示标签</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'circlepack'</span>, <span class="at">weight =</span> size) <span class="sc">+</span> </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制每个节点的圆，颜色根据深度变化</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_circle</span>(<span class="fu">aes</span>(<span class="at">fill =</span> depth)) <span class="sc">+</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 仅在叶节点（leaf=TRUE）处添加标签，标签内容为 shortName，字体大小与 size 成比例</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_label</span>(</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">label =</span> shortName,  <span class="co"># 标签内容为节点的 shortName</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">filter =</span> leaf,      <span class="co"># 仅叶节点显示标签</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> size         <span class="co"># 字体大小与 size 成比例</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>                          <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"FALSE"</span>) <span class="sc">+</span>      <span class="co"># 不显示图例</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis</span>()                    <span class="co"># 使用 viridis 调色板</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="768"></p>
<figcaption>带标签的多层级圆形打包图（circle packing），仅叶节点显示标签</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="hide" class="level3" data-number="25.3.5">
<h3 data-number="25.3.5" class="anchored" data-anchor-id="hide"><span class="header-section-number">25.3.5</span> Hide</h3>
<p>隐藏1个或多个外层大圈:</p>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 packcircles 包内置的 flare 数据集，包含层级结构的边和节点信息</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>edges <span class="ot">=</span> flare<span class="sc">$</span>edges         <span class="co"># 边数据，描述父子关系</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>vertices <span class="ot">=</span> flare<span class="sc">$</span>vertices   <span class="co"># 节点数据，包含节点属性</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 构建 igraph 图对象</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>mygraph <span class="ot">&lt;-</span> <span class="fu">graph_from_data_frame</span>(edges, <span class="at">vertices =</span> vertices)</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 绘制多层级圆形打包图，隐藏最外层大圈（depth=0 填充为白色）</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'circlepack'</span>, <span class="at">weight =</span> size) <span class="sc">+</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制每个节点的圆，填充和边框颜色根据深度分组</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_circle</span>(<span class="fu">aes</span>(<span class="at">fill =</span> <span class="fu">as.factor</span>(depth), <span class="at">color =</span> <span class="fu">as.factor</span>(depth))) <span class="sc">+</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置不同深度的填充颜色，最外层（depth=0）为白色，其余用 viridis 调色板</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>            <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"white"</span>,           <span class="co"># 最外层隐藏</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>            <span class="st">"1"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">1</span>],     <span class="co"># 第一层</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>            <span class="st">"2"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">2</span>],     <span class="co"># 第二层</span></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>            <span class="st">"3"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">3</span>],     <span class="co"># 第三层</span></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>            <span class="st">"4"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">4</span>]      <span class="co"># 第四层</span></span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置不同深度的边框颜色，最外层为白色，其余为黑色</span></span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_manual</span>(</span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>            <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"white"</span>,           <span class="co"># 最外层隐藏</span></span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>            <span class="st">"1"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>            <span class="st">"2"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a>            <span class="st">"3"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a>            <span class="st">"4"</span> <span class="ot">=</span> <span class="st">"black"</span></span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb19-32"><a href="#cb19-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>                        <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb19-33"><a href="#cb19-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"FALSE"</span>)      <span class="co"># 不显示图例</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" width="768"></p>
<figcaption>隐藏最外层大圈的多层级圆形打包图（circle packing）</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggraph 绘制多层级圆形打包图，隐藏最外层和第二层大圈</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'circlepack'</span>, <span class="at">weight =</span> size) <span class="sc">+</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制每个节点的圆，填充和边框颜色根据深度分组</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_circle</span>(<span class="fu">aes</span>(<span class="at">fill =</span> <span class="fu">as.factor</span>(depth), <span class="at">color =</span> <span class="fu">as.factor</span>(depth))) <span class="sc">+</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置不同深度的填充颜色，前两层（depth=0,1）为白色，其余用 magma 调色板</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>            <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"white"</span>,           <span class="co"># 最外层隐藏</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>            <span class="st">"1"</span> <span class="ot">=</span> <span class="st">"white"</span>,           <span class="co"># 第二层隐藏</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>            <span class="st">"2"</span> <span class="ot">=</span> <span class="fu">magma</span>(<span class="dv">4</span>)[<span class="dv">2</span>],       <span class="co"># 第三层</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>            <span class="st">"3"</span> <span class="ot">=</span> <span class="fu">magma</span>(<span class="dv">4</span>)[<span class="dv">3</span>],       <span class="co"># 第四层</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>            <span class="st">"4"</span> <span class="ot">=</span> <span class="fu">magma</span>(<span class="dv">4</span>)[<span class="dv">4</span>]        <span class="co"># 第五层</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置不同深度的边框颜色，前两层为白色，其余为黑色</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_manual</span>(</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>            <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"white"</span>,           <span class="co"># 最外层隐藏</span></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>            <span class="st">"1"</span> <span class="ot">=</span> <span class="st">"white"</span>,           <span class="co"># 第二层隐藏</span></span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>            <span class="st">"2"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>            <span class="st">"3"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>            <span class="st">"4"</span> <span class="ot">=</span> <span class="st">"black"</span></span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>                        <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"FALSE"</span>)      <span class="co"># 不显示图例</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid figure-img" width="768"></p>
<figcaption>隐藏前两层大圈的多层级圆形打包图（circle packing）</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="特定-label" class="level3" data-number="25.3.6">
<h3 data-number="25.3.6" class="anchored" data-anchor-id="特定-label"><span class="header-section-number">25.3.6</span> 特定 label</h3>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载 data.tree 包，用于树结构操作</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.tree)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 重新加载边和节点数据</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>edges <span class="ot">&lt;-</span> flare<span class="sc">$</span>edges</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>vertices <span class="ot">&lt;-</span> flare<span class="sc">$</span>vertices</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 将边数据转换为树结构，便于获取每个节点的层级信息</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>tree <span class="ot">&lt;-</span> <span class="fu">FromDataFrameNetwork</span>(edges)</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 获取每个节点的名称和层级，并合并到原始节点数据框</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>mylevels <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> tree<span class="sc">$</span><span class="fu">Get</span>(<span class="st">'name'</span>),      <span class="co"># 节点名称</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">level =</span> tree<span class="sc">$</span><span class="fu">Get</span>(<span class="st">"level"</span>)     <span class="co"># 节点层级（根节点为1）</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>vertices <span class="ot">&lt;-</span> vertices <span class="sc">%&gt;%</span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(., mylevels, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"name"</span> <span class="ot">=</span> <span class="st">"name"</span>))</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a><span class="co"># 仅为 level=2 的节点添加标签，其余节点标签为 NA</span></span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>vertices <span class="ot">&lt;-</span> vertices <span class="sc">%&gt;%</span></span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">new_label =</span> <span class="fu">ifelse</span>(level <span class="sc">==</span> <span class="dv">2</span>, shortName, <span class="cn">NA</span>))</span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a><span class="co"># 构建 igraph 图对象</span></span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>mygraph <span class="ot">&lt;-</span> <span class="fu">graph_from_data_frame</span>(edges, <span class="at">vertices =</span> vertices)</span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a><span class="co"># 绘制多层级圆形打包图</span></span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'circlepack'</span>, <span class="at">weight =</span> size) <span class="sc">+</span></span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制每个节点的圆，填充和边框颜色根据深度分组</span></span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_circle</span>(<span class="fu">aes</span>(<span class="at">fill =</span> <span class="fu">as.factor</span>(depth), <span class="at">color =</span> <span class="fu">as.factor</span>(depth))) <span class="sc">+</span></span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置不同深度的填充颜色，最外层为白色，其余用 viridis 调色板</span></span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb21-32"><a href="#cb21-32" aria-hidden="true" tabindex="-1"></a>        <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"white"</span>,</span>
<span id="cb21-33"><a href="#cb21-33" aria-hidden="true" tabindex="-1"></a>        <span class="st">"1"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">1</span>],</span>
<span id="cb21-34"><a href="#cb21-34" aria-hidden="true" tabindex="-1"></a>        <span class="st">"2"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">2</span>],</span>
<span id="cb21-35"><a href="#cb21-35" aria-hidden="true" tabindex="-1"></a>        <span class="st">"3"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">3</span>],</span>
<span id="cb21-36"><a href="#cb21-36" aria-hidden="true" tabindex="-1"></a>        <span class="st">"4"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">4</span>]</span>
<span id="cb21-37"><a href="#cb21-37" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">+</span></span>
<span id="cb21-38"><a href="#cb21-38" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置不同深度的边框颜色，最外层为白色，其余为黑色</span></span>
<span id="cb21-39"><a href="#cb21-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb21-40"><a href="#cb21-40" aria-hidden="true" tabindex="-1"></a>        <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"white"</span>,</span>
<span id="cb21-41"><a href="#cb21-41" aria-hidden="true" tabindex="-1"></a>        <span class="st">"1"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb21-42"><a href="#cb21-42" aria-hidden="true" tabindex="-1"></a>        <span class="st">"2"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb21-43"><a href="#cb21-43" aria-hidden="true" tabindex="-1"></a>        <span class="st">"3"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb21-44"><a href="#cb21-44" aria-hidden="true" tabindex="-1"></a>        <span class="st">"4"</span> <span class="ot">=</span> <span class="st">"black"</span></span>
<span id="cb21-45"><a href="#cb21-45" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">+</span></span>
<span id="cb21-46"><a href="#cb21-46" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 仅为 new_label 非 NA 的节点添加标签（即 level=2 的节点）</span></span>
<span id="cb21-47"><a href="#cb21-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_label</span>(<span class="fu">aes</span>(<span class="at">label =</span> new_label), <span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb21-48"><a href="#cb21-48" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 去除坐标轴和背景，设置无图例和无边距</span></span>
<span id="cb21-49"><a href="#cb21-49" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb21-50"><a href="#cb21-50" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb21-51"><a href="#cb21-51" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">"FALSE"</span>,</span>
<span id="cb21-52"><a href="#cb21-52" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.margin =</span> <span class="fu">unit</span>(<span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">4</span>), <span class="st">"cm"</span>)</span>
<span id="cb21-53"><a href="#cb21-53" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid figure-img" width="768"></p>
<figcaption>仅为特定层级（如 level=2）节点添加标签的多层级圆形打包图</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="可缩放" class="level3" data-number="25.3.7">
<h3 data-number="25.3.7" class="anchored" data-anchor-id="可缩放"><span class="header-section-number">25.3.7</span> 可缩放</h3>
<p><code>circlePacker</code> 包可以用来创建交互式和可缩放圆形堆积图</p>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载 circlepackeR 包，用于创建可缩放的交互式圆形打包图</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(circlepackeR)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 构建一个嵌套数据框，包含多层级结构信息</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">root =</span> <span class="fu">rep</span>(<span class="st">"root"</span>, <span class="dv">15</span>),                                 <span class="co"># 根节点</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">"group A"</span>, <span class="dv">5</span>), <span class="fu">rep</span>(<span class="st">"group B"</span>, <span class="dv">5</span>), <span class="fu">rep</span>(<span class="st">"group C"</span>, <span class="dv">5</span>)), <span class="co"># 一级分组</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">subgroup =</span> <span class="fu">rep</span>(letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>], <span class="at">each =</span> <span class="dv">3</span>),                 <span class="co"># 二级分组</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">subsubgroup =</span> <span class="fu">rep</span>(letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>], <span class="dv">5</span>),                     <span class="co"># 三级分组</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">value =</span> <span class="fu">sample</span>(<span class="fu">seq</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>), <span class="dv">15</span>)                           <span class="co"># 每个叶节点的数值</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 data.tree 包将数据转换为树结构</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.tree)</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a><span class="co"># 构建 pathString 字段，格式为 root/group/subgroup/subsubgroup</span></span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>pathString <span class="ot">&lt;-</span> <span class="fu">paste</span>(</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">"world"</span>,                <span class="co"># 根节点名称</span></span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>    data<span class="sc">$</span>group,             <span class="co"># 一级分组</span></span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>    data<span class="sc">$</span>subgroup,          <span class="co"># 二级分组</span></span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>    data<span class="sc">$</span>subsubgroup,       <span class="co"># 三级分组</span></span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">"/"</span></span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a><span class="co"># 转换为树结构对象</span></span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>population <span class="ot">&lt;-</span> <span class="fu">as.Node</span>(data)</span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a><span class="co"># 绘制可缩放的交互式圆形打包图</span></span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a><span class="co"># color_min 和 color_max 可自定义颜色范围</span></span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a><span class="fu">circlepackeR</span>(</span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a>    population,                 <span class="co"># 层级结构数据</span></span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="st">"value"</span>,             <span class="co"># 用于圆面积的数值字段</span></span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">color_min =</span> <span class="st">"hsl(56,80%,80%)"</span>,   <span class="co"># 最小值对应的颜色</span></span>
<span id="cb22-32"><a href="#cb22-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">color_max =</span> <span class="st">"hsl(341,30%,40%)"</span>   <span class="co"># 最大值对应的颜色</span></span>
<span id="cb22-33"><a href="#cb22-33" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="circlepackeR html-widget html-fill-item" id="htmlwidget-272037c4189ba83c0317" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-272037c4189ba83c0317">{"x":{"data":{"name":"world","children":[{"name":"group A","children":[{"name":"a","children":[{"name":"a","group":"group A","subgroup":"a","subsubgroup":"a","value":9},{"name":"b","group":"group A","subgroup":"a","subsubgroup":"b","value":1},{"name":"c","group":"group A","subgroup":"a","subsubgroup":"c","value":14}]},{"name":"b","children":[{"name":"a","group":"group A","subgroup":"b","subsubgroup":"a","value":6},{"name":"b","group":"group A","subgroup":"b","subsubgroup":"b","value":4}]}]},{"name":"group B","children":[{"name":"b","children":[{"name":"c","group":"group B","subgroup":"b","subsubgroup":"c","value":8}]},{"name":"c","children":[{"name":"a","group":"group B","subgroup":"c","subsubgroup":"a","value":5},{"name":"b","group":"group B","subgroup":"c","subsubgroup":"b","value":12},{"name":"c","group":"group B","subgroup":"c","subsubgroup":"c","value":7}]},{"name":"d","children":[{"name":"a","group":"group B","subgroup":"d","subsubgroup":"a","value":13}]}]},{"name":"group C","children":[{"name":"d","children":[{"name":"b","group":"group C","subgroup":"d","subsubgroup":"b","value":2},{"name":"c","group":"group C","subgroup":"d","subsubgroup":"c","value":15}]},{"name":"e","children":[{"name":"a","group":"group C","subgroup":"e","subsubgroup":"a","value":3},{"name":"b","group":"group C","subgroup":"e","subsubgroup":"b","value":10},{"name":"c","group":"group C","subgroup":"e","subsubgroup":"c","value":11}]}]}]},"options":{"size":"value","color_min":"hsl(56,80%,80%)","color_max":"hsl(341,30%,40%)"}},"evals":[],"jsHooks":[]}</script>
<p>可缩放交互式多层级圆形打包图（circle packing），使用 circlepackeR 包</p>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载 circlepackeR 包，用于绘制交互式圆形打包图</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(circlepackeR)</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载 ggraph 包（本例未直接用到，但常用于网络可视化）</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggraph)</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 packcircles 包内置的 flare 数据集，获取边列表</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>data_edge <span class="ot">&lt;-</span> flare<span class="sc">$</span>edges</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 提取每个节点名称的最后一级（去掉前面的分层前缀），便于后续分层</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>data_edge<span class="sc">$</span>from <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">".*</span><span class="sc">\\</span><span class="st">."</span>, <span class="st">""</span>, data_edge<span class="sc">$</span>from)</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>data_edge<span class="sc">$</span>to <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">".*</span><span class="sc">\\</span><span class="st">."</span>, <span class="st">""</span>, data_edge<span class="sc">$</span>to)</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a><span class="co"># head(data_edge) # 查看处理后的边列表</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载 data.tree 包，用于将边列表转换为树结构</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.tree)</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a><span class="co"># 将边列表转换为树结构对象</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>data_tree <span class="ot">&lt;-</span> <span class="fu">FromDataFrameNetwork</span>(data_edge)</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a><span class="co"># 将树结构转换为嵌套数据框，提取每一层的名称</span></span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>data_nested <span class="ot">&lt;-</span> <span class="fu">ToDataFrameTree</span>(</span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>    data_tree,</span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">level1 =</span> <span class="cf">function</span>(x) x<span class="sc">$</span>path[<span class="dv">2</span>], <span class="co"># 第一层</span></span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">level2 =</span> <span class="cf">function</span>(x) x<span class="sc">$</span>path[<span class="dv">3</span>], <span class="co"># 第二层</span></span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">level3 =</span> <span class="cf">function</span>(x) x<span class="sc">$</span>path[<span class="dv">4</span>], <span class="co"># 第三层</span></span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">level4 =</span> <span class="cf">function</span>(x) x<span class="sc">$</span>path[<span class="dv">5</span>]  <span class="co"># 第四层</span></span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a>)[<span class="sc">-</span><span class="dv">1</span>, <span class="sc">-</span><span class="dv">1</span>] <span class="co"># 去除根节点和第一列（树结构自带的 name）</span></span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a><span class="co"># 去除包含 NA 的行，只保留完整路径</span></span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a>data_nested <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(data_nested)</span>
<span id="cb23-30"><a href="#cb23-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-31"><a href="#cb23-31" aria-hidden="true" tabindex="-1"></a><span class="co"># 构建 pathString 字段，格式为 roots/level1/level2/level3/level4</span></span>
<span id="cb23-32"><a href="#cb23-32" aria-hidden="true" tabindex="-1"></a>data_nested<span class="sc">$</span>pathString <span class="ot">&lt;-</span> <span class="fu">paste</span>(</span>
<span id="cb23-33"><a href="#cb23-33" aria-hidden="true" tabindex="-1"></a>    <span class="st">"roots"</span>,</span>
<span id="cb23-34"><a href="#cb23-34" aria-hidden="true" tabindex="-1"></a>    data_nested<span class="sc">$</span>level1,</span>
<span id="cb23-35"><a href="#cb23-35" aria-hidden="true" tabindex="-1"></a>    data_nested<span class="sc">$</span>level2,</span>
<span id="cb23-36"><a href="#cb23-36" aria-hidden="true" tabindex="-1"></a>    data_nested<span class="sc">$</span>level3,</span>
<span id="cb23-37"><a href="#cb23-37" aria-hidden="true" tabindex="-1"></a>    data_nested<span class="sc">$</span>level4,</span>
<span id="cb23-38"><a href="#cb23-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">"/"</span></span>
<span id="cb23-39"><a href="#cb23-39" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-40"><a href="#cb23-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-41"><a href="#cb23-41" aria-hidden="true" tabindex="-1"></a><span class="co"># 设置每个叶节点的 value（圆面积），此处统一为 1</span></span>
<span id="cb23-42"><a href="#cb23-42" aria-hidden="true" tabindex="-1"></a>data_nested<span class="sc">$</span>value <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb23-43"><a href="#cb23-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-44"><a href="#cb23-44" aria-hidden="true" tabindex="-1"></a><span class="co"># 将嵌套数据框转换为树结构对象</span></span>
<span id="cb23-45"><a href="#cb23-45" aria-hidden="true" tabindex="-1"></a>data_Node <span class="ot">&lt;-</span> <span class="fu">as.Node</span>(data_nested)</span>
<span id="cb23-46"><a href="#cb23-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-47"><a href="#cb23-47" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 circlepackeR 绘制可缩放的多层级圆形打包图</span></span>
<span id="cb23-48"><a href="#cb23-48" aria-hidden="true" tabindex="-1"></a><span class="fu">circlepackeR</span>(data_Node, <span class="at">size =</span> <span class="st">"value"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="circlepackeR html-widget html-fill-item" id="htmlwidget-6f65cb8f146e31229c45" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-6f65cb8f146e31229c45">{"x":{"data":{"name":"roots","children":[{"name":"vis","children":[{"name":"data","children":[{"name":"converters","children":[{"name":"Converters","level1":"vis","level2":"data","level3":"converters","level4":"Converters","value":1},{"name":"DelimitedTextConverter","level1":"vis","level2":"data","level3":"converters","level4":"DelimitedTextConverter","value":1},{"name":"GraphMLConverter","level1":"vis","level2":"data","level3":"converters","level4":"GraphMLConverter","value":1},{"name":"IDataConverter","level1":"vis","level2":"data","level3":"converters","level4":"IDataConverter","value":1},{"name":"JSONConverter","level1":"vis","level2":"data","level3":"converters","level4":"JSONConverter","value":1}]},{"name":"render","children":[{"name":"ArrowType","level1":"vis","level2":"data","level3":"render","level4":"ArrowType","value":1},{"name":"EdgeRenderer","level1":"vis","level2":"data","level3":"render","level4":"EdgeRenderer","value":1},{"name":"IRenderer","level1":"vis","level2":"data","level3":"render","level4":"IRenderer","value":1},{"name":"ShapeRenderer","level1":"vis","level2":"data","level3":"render","level4":"ShapeRenderer","value":1}]}]},{"name":"operator","children":[{"name":"distortion","children":[{"name":"BifocalDistortion","level1":"vis","level2":"operator","level3":"distortion","level4":"BifocalDistortion","value":1},{"name":"Distortion","level1":"vis","level2":"operator","level3":"distortion","level4":"Distortion","value":1},{"name":"FisheyeDistortion","level1":"vis","level2":"operator","level3":"distortion","level4":"FisheyeDistortion","value":1}]},{"name":"encoder","children":[{"name":"ColorEncoder","level1":"vis","level2":"operator","level3":"encoder","level4":"ColorEncoder","value":1},{"name":"Encoder","level1":"vis","level2":"operator","level3":"encoder","level4":"Encoder","value":1},{"name":"PropertyEncoder","level1":"vis","level2":"operator","level3":"encoder","level4":"PropertyEncoder","value":1},{"name":"ShapeEncoder","level1":"vis","level2":"operator","level3":"encoder","level4":"ShapeEncoder","value":1},{"name":"SizeEncoder","level1":"vis","level2":"operator","level3":"encoder","level4":"SizeEncoder","value":1}]},{"name":"filter","children":[{"name":"FisheyeTreeFilter","level1":"vis","level2":"operator","level3":"filter","level4":"FisheyeTreeFilter","value":1},{"name":"GraphDistanceFilter","level1":"vis","level2":"operator","level3":"filter","level4":"GraphDistanceFilter","value":1},{"name":"VisibilityFilter","level1":"vis","level2":"operator","level3":"filter","level4":"VisibilityFilter","value":1}]},{"name":"label","children":[{"name":"Labeler","level1":"vis","level2":"operator","level3":"label","level4":"Labeler","value":1},{"name":"RadialLabeler","level1":"vis","level2":"operator","level3":"label","level4":"RadialLabeler","value":1},{"name":"StackedAreaLabeler","level1":"vis","level2":"operator","level3":"label","level4":"StackedAreaLabeler","value":1}]},{"name":"layout","children":[{"name":"AxisLayout","level1":"vis","level2":"operator","level3":"layout","level4":"AxisLayout","value":1},{"name":"BundledEdgeRouter","level1":"vis","level2":"operator","level3":"layout","level4":"BundledEdgeRouter","value":1},{"name":"CircleLayout","level1":"vis","level2":"operator","level3":"layout","level4":"CircleLayout","value":1},{"name":"CirclePackingLayout","level1":"vis","level2":"operator","level3":"layout","level4":"CirclePackingLayout","value":1},{"name":"DendrogramLayout","level1":"vis","level2":"operator","level3":"layout","level4":"DendrogramLayout","value":1},{"name":"ForceDirectedLayout","level1":"vis","level2":"operator","level3":"layout","level4":"ForceDirectedLayout","value":1},{"name":"IcicleTreeLayout","level1":"vis","level2":"operator","level3":"layout","level4":"IcicleTreeLayout","value":1},{"name":"IndentedTreeLayout","level1":"vis","level2":"operator","level3":"layout","level4":"IndentedTreeLayout","value":1},{"name":"Layout","level1":"vis","level2":"operator","level3":"layout","level4":"Layout","value":1},{"name":"NodeLinkTreeLayout","level1":"vis","level2":"operator","level3":"layout","level4":"NodeLinkTreeLayout","value":1},{"name":"PieLayout","level1":"vis","level2":"operator","level3":"layout","level4":"PieLayout","value":1},{"name":"RadialTreeLayout","level1":"vis","level2":"operator","level3":"layout","level4":"RadialTreeLayout","value":1},{"name":"RandomLayout","level1":"vis","level2":"operator","level3":"layout","level4":"RandomLayout","value":1},{"name":"StackedAreaLayout","level1":"vis","level2":"operator","level3":"layout","level4":"StackedAreaLayout","value":1},{"name":"TreeMapLayout","level1":"vis","level2":"operator","level3":"layout","level4":"TreeMapLayout","value":1}]}]}]}]},"options":{"size":"value","color_min":"hsl(152,80%,80%)","color_max":"hsl(228,30%,40%)"}},"evals":[],"jsHooks":[]}</script>
<p>将 edge list 转换为嵌套结构并用 circlepackeR 绘制多层级圆形打包图</p>
</div>
</div>


<!-- -->

</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./dendrogram.html" class="pagination-link" aria-label="Dendrogram">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Dendrogram</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./waffle.html" class="pagination-link" aria-label="Waffle">
        <span class="nav-page-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Waffle</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb24" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># Circular {#sec-circular}</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="fu">## PKG</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(packcircles) <span class="co"># for packing circles</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) <span class="co"># for data manipulation and visualization</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis) <span class="co"># for color palettes</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggiraph) <span class="co"># for interactive plots</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggraph) <span class="co"># for graph visualization</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(igraph) <span class="co"># for graph manipulation</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(circlepackeR) <span class="co"># for interactive circle packing</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a><span class="co"># remotes::install_github("jeromefroe/circlepackeR")</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.tree)</span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a><span class="fu">## One level</span></span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a><span class="fu">### Basic</span></span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Circle packing with packcircles"</span></span>
<span id="cb24-27"><a href="#cb24-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-28"><a href="#cb24-28" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(packcircles)  <span class="co"># 加载 packcircles 包，用于圆形打包</span></span>
<span id="cb24-29"><a href="#cb24-29" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)      <span class="co"># 加载 ggplot2 包，用于绘图</span></span>
<span id="cb24-30"><a href="#cb24-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-31"><a href="#cb24-31" aria-hidden="true" tabindex="-1"></a><span class="co"># 创建数据框，包含分组名称和对应的数值</span></span>
<span id="cb24-32"><a href="#cb24-32" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb24-33"><a href="#cb24-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> <span class="fu">paste</span>(<span class="st">"Group"</span>, letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>]),   <span class="co"># 生成 20 个分组名</span></span>
<span id="cb24-34"><a href="#cb24-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">value =</span> <span class="fu">sample</span>(<span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">100</span>), <span class="dv">20</span>)          <span class="co"># 随机生成 20 个 1~100 之间的数值</span></span>
<span id="cb24-35"><a href="#cb24-35" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-36"><a href="#cb24-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-37"><a href="#cb24-37" aria-hidden="true" tabindex="-1"></a><span class="co"># 生成圆形打包布局，返回每个圆的中心坐标 (x, y) 和半径 (radius)</span></span>
<span id="cb24-38"><a href="#cb24-38" aria-hidden="true" tabindex="-1"></a><span class="co"># sizetype='area' 表示半径根据面积成比例分配</span></span>
<span id="cb24-39"><a href="#cb24-39" aria-hidden="true" tabindex="-1"></a>packing <span class="ot">&lt;-</span> <span class="fu">circleProgressiveLayout</span>(data<span class="sc">$</span>value, <span class="at">sizetype =</span> <span class="st">'area'</span>)</span>
<span id="cb24-40"><a href="#cb24-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-41"><a href="#cb24-41" aria-hidden="true" tabindex="-1"></a><span class="co"># 将打包信息（中心坐标和半径）合并到原始数据框中</span></span>
<span id="cb24-42"><a href="#cb24-42" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">cbind</span>(data, packing)</span>
<span id="cb24-43"><a href="#cb24-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-44"><a href="#cb24-44" aria-hidden="true" tabindex="-1"></a><span class="co"># 检查半径与数值的关系（可选）</span></span>
<span id="cb24-45"><a href="#cb24-45" aria-hidden="true" tabindex="-1"></a><span class="co"># plot(data$radius, data$value)</span></span>
<span id="cb24-46"><a href="#cb24-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-47"><a href="#cb24-47" aria-hidden="true" tabindex="-1"></a><span class="co"># 根据每个圆的中心和半径，生成用于绘制圆形的多边形顶点坐标</span></span>
<span id="cb24-48"><a href="#cb24-48" aria-hidden="true" tabindex="-1"></a><span class="co"># npoints=50 表示每个圆用 50 个点近似</span></span>
<span id="cb24-49"><a href="#cb24-49" aria-hidden="true" tabindex="-1"></a>dat.gg <span class="ot">&lt;-</span> <span class="fu">circleLayoutVertices</span>(packing, <span class="at">npoints =</span> <span class="dv">50</span>)</span>
<span id="cb24-50"><a href="#cb24-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-51"><a href="#cb24-51" aria-hidden="true" tabindex="-1"></a><span class="co"># 绘制圆形打包图</span></span>
<span id="cb24-52"><a href="#cb24-52" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb24-53"><a href="#cb24-53" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制圆形多边形（气泡）</span></span>
<span id="cb24-54"><a href="#cb24-54" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_polygon</span>(</span>
<span id="cb24-55"><a href="#cb24-55" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> dat.gg,</span>
<span id="cb24-56"><a href="#cb24-56" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">group =</span> id, <span class="at">fill =</span> <span class="fu">as.factor</span>(id)),</span>
<span id="cb24-57"><a href="#cb24-57" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">"black"</span>, <span class="at">alpha =</span> <span class="fl">0.6</span></span>
<span id="cb24-58"><a href="#cb24-58" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-59"><a href="#cb24-59" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 在每个圆心添加文本标签，并根据 value 控制字体大小</span></span>
<span id="cb24-60"><a href="#cb24-60" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(</span>
<span id="cb24-61"><a href="#cb24-61" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> data,</span>
<span id="cb24-62"><a href="#cb24-62" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">size =</span> value, <span class="at">label =</span> group)</span>
<span id="cb24-63"><a href="#cb24-63" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-64"><a href="#cb24-64" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>)) <span class="sc">+</span>  <span class="co"># 设置字体大小范围</span></span>
<span id="cb24-65"><a href="#cb24-65" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置主题为无坐标轴、无背景</span></span>
<span id="cb24-66"><a href="#cb24-66" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb24-67"><a href="#cb24-67" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span>         <span class="co"># 不显示图例</span></span>
<span id="cb24-68"><a href="#cb24-68" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_equal</span>()                             <span class="co"># 保持 x、y 轴比例相等</span></span>
<span id="cb24-69"><a href="#cb24-69" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-70"><a href="#cb24-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-71"><a href="#cb24-71" aria-hidden="true" tabindex="-1"></a><span class="fu">### Color </span></span>
<span id="cb24-72"><a href="#cb24-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-73"><a href="#cb24-73" aria-hidden="true" tabindex="-1"></a>使用自定义调色板（magma）进行圆形打包可视化: </span>
<span id="cb24-74"><a href="#cb24-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-77"><a href="#cb24-77" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-78"><a href="#cb24-78" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "使用自定义调色板（magma）进行圆形打包可视化"</span></span>
<span id="cb24-79"><a href="#cb24-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-80"><a href="#cb24-80" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggplot2 绘制圆形打包图，并自定义颜色</span></span>
<span id="cb24-81"><a href="#cb24-81" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb24-82"><a href="#cb24-82" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制圆形多边形（气泡），每个圆用不同颜色填充</span></span>
<span id="cb24-83"><a href="#cb24-83" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_polygon</span>(</span>
<span id="cb24-84"><a href="#cb24-84" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> dat.gg,</span>
<span id="cb24-85"><a href="#cb24-85" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">group =</span> id, <span class="at">fill =</span> <span class="fu">as.factor</span>(id)), <span class="co"># 按 id 分组并填充颜色</span></span>
<span id="cb24-86"><a href="#cb24-86" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">"black"</span>,    <span class="co"># 圆边界为黑色</span></span>
<span id="cb24-87"><a href="#cb24-87" aria-hidden="true" tabindex="-1"></a>        <span class="at">alpha =</span> <span class="fl">0.6</span>          <span class="co"># 设置透明度</span></span>
<span id="cb24-88"><a href="#cb24-88" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-89"><a href="#cb24-89" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 使用 viridis 包中的 magma 调色板为每个圆分配颜色</span></span>
<span id="cb24-90"><a href="#cb24-90" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">magma</span>(<span class="fu">nrow</span>(data))) <span class="sc">+</span></span>
<span id="cb24-91"><a href="#cb24-91" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 在每个圆心添加文本标签，字体大小与 value 成比例</span></span>
<span id="cb24-92"><a href="#cb24-92" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(</span>
<span id="cb24-93"><a href="#cb24-93" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> data,</span>
<span id="cb24-94"><a href="#cb24-94" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">size =</span> value, <span class="at">label =</span> group)</span>
<span id="cb24-95"><a href="#cb24-95" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-96"><a href="#cb24-96" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>)) <span class="sc">+</span>  <span class="co"># 设置字体大小范围</span></span>
<span id="cb24-97"><a href="#cb24-97" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>                            <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb24-98"><a href="#cb24-98" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span>         <span class="co"># 不显示图例</span></span>
<span id="cb24-99"><a href="#cb24-99" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_equal</span>()                             <span class="co"># 保持 x、y 轴比例相等</span></span>
<span id="cb24-100"><a href="#cb24-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-101"><a href="#cb24-101" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-102"><a href="#cb24-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-103"><a href="#cb24-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-104"><a href="#cb24-104" aria-hidden="true" tabindex="-1"></a>使用渐变色（BuPu 调色板）根据 value 显示圆形打包图: </span>
<span id="cb24-105"><a href="#cb24-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-108"><a href="#cb24-108" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-109"><a href="#cb24-109" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "使用渐变色（BuPu 调色板）根据 value 显示圆形打包图"</span></span>
<span id="cb24-110"><a href="#cb24-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-111"><a href="#cb24-111" aria-hidden="true" tabindex="-1"></a><span class="co"># 首先，将每个分组的 value 添加到 dat.gg 数据框中。</span></span>
<span id="cb24-112"><a href="#cb24-112" aria-hidden="true" tabindex="-1"></a><span class="co"># 由于每个圆形多边形由 51 个点近似（npoints=50，首尾闭合），所以每个 value 需要重复 51 次。</span></span>
<span id="cb24-113"><a href="#cb24-113" aria-hidden="true" tabindex="-1"></a>dat.gg<span class="sc">$</span>value <span class="ot">&lt;-</span> <span class="fu">rep</span>(data<span class="sc">$</span>value, <span class="at">each =</span> <span class="dv">51</span>)</span>
<span id="cb24-114"><a href="#cb24-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-115"><a href="#cb24-115" aria-hidden="true" tabindex="-1"></a><span class="co"># 绘制圆形打包图</span></span>
<span id="cb24-116"><a href="#cb24-116" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb24-117"><a href="#cb24-117" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制圆形多边形（气泡），根据 value 使用渐变色填充</span></span>
<span id="cb24-118"><a href="#cb24-118" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_polygon</span>(</span>
<span id="cb24-119"><a href="#cb24-119" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> dat.gg,</span>
<span id="cb24-120"><a href="#cb24-120" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">group =</span> id, <span class="at">fill =</span> value),   <span class="co"># 按 value 渐变填充</span></span>
<span id="cb24-121"><a href="#cb24-121" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">"black"</span>,                      <span class="co"># 边界为黑色</span></span>
<span id="cb24-122"><a href="#cb24-122" aria-hidden="true" tabindex="-1"></a>        <span class="at">alpha =</span> <span class="fl">0.6</span>                            <span class="co"># 设置透明度</span></span>
<span id="cb24-123"><a href="#cb24-123" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-124"><a href="#cb24-124" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_distiller</span>(<span class="at">palette =</span> <span class="st">"BuPu"</span>, <span class="at">direction =</span> <span class="dv">1</span>) <span class="sc">+</span>  <span class="co"># 使用 BuPu 调色板</span></span>
<span id="cb24-125"><a href="#cb24-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-126"><a href="#cb24-126" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 在每个圆心添加文本标签，字体大小与 value 成比例</span></span>
<span id="cb24-127"><a href="#cb24-127" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(</span>
<span id="cb24-128"><a href="#cb24-128" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> data,</span>
<span id="cb24-129"><a href="#cb24-129" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">size =</span> value, <span class="at">label =</span> group)</span>
<span id="cb24-130"><a href="#cb24-130" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-131"><a href="#cb24-131" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>)) <span class="sc">+</span>  <span class="co"># 设置字体大小范围</span></span>
<span id="cb24-132"><a href="#cb24-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-133"><a href="#cb24-133" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置主题为无坐标轴、无背景</span></span>
<span id="cb24-134"><a href="#cb24-134" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb24-135"><a href="#cb24-135" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span>         <span class="co"># 不显示图例</span></span>
<span id="cb24-136"><a href="#cb24-136" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_equal</span>()                             <span class="co"># 保持 x、y 轴比例相等</span></span>
<span id="cb24-137"><a href="#cb24-137" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-138"><a href="#cb24-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-139"><a href="#cb24-139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-140"><a href="#cb24-140" aria-hidden="true" tabindex="-1"></a>通过 theme() 函数及其 plot.background() 参数更改背景: </span>
<span id="cb24-141"><a href="#cb24-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-144"><a href="#cb24-144" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-145"><a href="#cb24-145" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "自定义黑色背景的圆形打包图，使用Spectral调色板和标签"</span></span>
<span id="cb24-146"><a href="#cb24-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-147"><a href="#cb24-147" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggplot2 绘制圆形打包图，并设置黑色背景和自定义标题</span></span>
<span id="cb24-148"><a href="#cb24-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-149"><a href="#cb24-149" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb24-150"><a href="#cb24-150" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-151"><a href="#cb24-151" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 绘制圆形多边形（气泡），根据 value 使用渐变色填充</span></span>
<span id="cb24-152"><a href="#cb24-152" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(</span>
<span id="cb24-153"><a href="#cb24-153" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> dat.gg, </span>
<span id="cb24-154"><a href="#cb24-154" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(x, y, <span class="at">group =</span> id, <span class="at">fill =</span> value),   <span class="co"># 按 value 渐变填充</span></span>
<span id="cb24-155"><a href="#cb24-155" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"grey"</span>,                       <span class="co"># 边界为灰色</span></span>
<span id="cb24-156"><a href="#cb24-156" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="fl">0.6</span>,                           <span class="co"># 设置透明度</span></span>
<span id="cb24-157"><a href="#cb24-157" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> .<span class="dv">5</span>                              <span class="co"># 边界线宽</span></span>
<span id="cb24-158"><a href="#cb24-158" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb24-159"><a href="#cb24-159" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_distiller</span>(<span class="at">palette =</span> <span class="st">"Spectral"</span>, <span class="at">direction =</span> <span class="dv">1</span> ) <span class="sc">+</span>  <span class="co"># 使用 Spectral 调色板</span></span>
<span id="cb24-160"><a href="#cb24-160" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-161"><a href="#cb24-161" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 在每个圆心添加标签，字体大小与 value 成比例</span></span>
<span id="cb24-162"><a href="#cb24-162" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label</span>(</span>
<span id="cb24-163"><a href="#cb24-163" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> data, </span>
<span id="cb24-164"><a href="#cb24-164" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(x, y, <span class="at">size =</span> value, <span class="at">label =</span> group) <span class="co"># 标签内容为分组名</span></span>
<span id="cb24-165"><a href="#cb24-165" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb24-166"><a href="#cb24-166" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>)) <span class="sc">+</span> <span class="co"># 设置字体大小范围</span></span>
<span id="cb24-167"><a href="#cb24-167" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-168"><a href="#cb24-168" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 设置主题为无坐标轴、无背景，并自定义背景和标题颜色</span></span>
<span id="cb24-169"><a href="#cb24-169" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>()  <span class="sc">+</span> </span>
<span id="cb24-170"><a href="#cb24-170" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb24-171"><a href="#cb24-171" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span>,                        <span class="co"># 不显示图例</span></span>
<span id="cb24-172"><a href="#cb24-172" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"black"</span>),  <span class="co"># 设置背景为黑色</span></span>
<span id="cb24-173"><a href="#cb24-173" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"white"</span>)       <span class="co"># 标题字体为白色</span></span>
<span id="cb24-174"><a href="#cb24-174" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb24-175"><a href="#cb24-175" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_equal</span>() <span class="sc">+</span>                                    <span class="co"># 保持 x、y 轴比例相等</span></span>
<span id="cb24-176"><a href="#cb24-176" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"A custom circle packing with</span><span class="sc">\n</span><span class="st">black background"</span>) <span class="co"># 添加标题</span></span>
<span id="cb24-177"><a href="#cb24-177" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-178"><a href="#cb24-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-179"><a href="#cb24-179" aria-hidden="true" tabindex="-1"></a><span class="fu">### Space</span></span>
<span id="cb24-180"><a href="#cb24-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-181"><a href="#cb24-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-184"><a href="#cb24-184" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-185"><a href="#cb24-185" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: 使用 viridis 调色板展示圆形打包图</span></span>
<span id="cb24-186"><a href="#cb24-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-187"><a href="#cb24-187" aria-hidden="true" tabindex="-1"></a><span class="co"># 创建数据框，包含分组名称和对应的数值</span></span>
<span id="cb24-188"><a href="#cb24-188" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb24-189"><a href="#cb24-189" aria-hidden="true" tabindex="-1"></a>  <span class="at">group =</span> <span class="fu">paste</span>(<span class="st">"Group"</span>, letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>]),</span>
<span id="cb24-190"><a href="#cb24-190" aria-hidden="true" tabindex="-1"></a>  <span class="at">value =</span> <span class="fu">sample</span>(<span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">100</span>), <span class="dv">20</span>)</span>
<span id="cb24-191"><a href="#cb24-191" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-192"><a href="#cb24-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-193"><a href="#cb24-193" aria-hidden="true" tabindex="-1"></a><span class="co"># 生成布局</span></span>
<span id="cb24-194"><a href="#cb24-194" aria-hidden="true" tabindex="-1"></a>packing <span class="ot">&lt;-</span> <span class="fu">circleProgressiveLayout</span>(data<span class="sc">$</span>value, <span class="at">sizetype =</span> <span class="st">'area'</span>)</span>
<span id="cb24-195"><a href="#cb24-195" aria-hidden="true" tabindex="-1"></a>packing<span class="sc">$</span>radius <span class="ot">&lt;-</span> <span class="fl">0.95</span> <span class="sc">*</span> packing<span class="sc">$</span>radius <span class="co"># 让直径小于 1, 留有空隙</span></span>
<span id="cb24-196"><a href="#cb24-196" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">cbind</span>(data, packing)</span>
<span id="cb24-197"><a href="#cb24-197" aria-hidden="true" tabindex="-1"></a>dat.gg <span class="ot">&lt;-</span> <span class="fu">circleLayoutVertices</span>(packing, <span class="at">npoints =</span> <span class="dv">50</span>)</span>
<span id="cb24-198"><a href="#cb24-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-199"><a href="#cb24-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-200"><a href="#cb24-200" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggplot2 绘制圆形打包图，采用 viridis 调色板</span></span>
<span id="cb24-201"><a href="#cb24-201" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb24-202"><a href="#cb24-202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-203"><a href="#cb24-203" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制圆形多边形（气泡），每个圆用不同颜色填充</span></span>
<span id="cb24-204"><a href="#cb24-204" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_polygon</span>(</span>
<span id="cb24-205"><a href="#cb24-205" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> dat.gg,                           <span class="co"># 多边形顶点数据</span></span>
<span id="cb24-206"><a href="#cb24-206" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">group =</span> id, <span class="at">fill =</span> id),        <span class="co"># 按 id 分组并填充颜色</span></span>
<span id="cb24-207"><a href="#cb24-207" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">"black"</span>,                        <span class="co"># 边界为黑色</span></span>
<span id="cb24-208"><a href="#cb24-208" aria-hidden="true" tabindex="-1"></a>        <span class="at">alpha =</span> <span class="fl">0.6</span>                              <span class="co"># 设置透明度</span></span>
<span id="cb24-209"><a href="#cb24-209" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-210"><a href="#cb24-210" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis</span>() <span class="sc">+</span>                     <span class="co"># 使用 viridis 调色板</span></span>
<span id="cb24-211"><a href="#cb24-211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-212"><a href="#cb24-212" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 在每个圆心添加文本标签，字体大小与 value 成比例</span></span>
<span id="cb24-213"><a href="#cb24-213" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(</span>
<span id="cb24-214"><a href="#cb24-214" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> data,                             <span class="co"># 圆心及标签数据</span></span>
<span id="cb24-215"><a href="#cb24-215" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">size =</span> value, <span class="at">label =</span> group),  <span class="co"># 设置圆心坐标、字体大小和标签内容</span></span>
<span id="cb24-216"><a href="#cb24-216" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="st">"black"</span>                          <span class="co"># 标签字体颜色为黑色</span></span>
<span id="cb24-217"><a href="#cb24-217" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-218"><a href="#cb24-218" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>                             <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb24-219"><a href="#cb24-219" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span>          <span class="co"># 不显示图例</span></span>
<span id="cb24-220"><a href="#cb24-220" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_equal</span>()                              <span class="co"># 保持 x、y 轴比例相等</span></span>
<span id="cb24-221"><a href="#cb24-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-222"><a href="#cb24-222" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-223"><a href="#cb24-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-224"><a href="#cb24-224" aria-hidden="true" tabindex="-1"></a><span class="fu">### Interactive</span></span>
<span id="cb24-225"><a href="#cb24-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-226"><a href="#cb24-226" aria-hidden="true" tabindex="-1"></a>使用 <span class="in">`ggiraph::girafe()`</span> 函数生成交互式圆形打包图，悬停查看详细信息:</span>
<span id="cb24-227"><a href="#cb24-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-230"><a href="#cb24-230" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-231"><a href="#cb24-231" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "交互式圆形打包图（circle packing），可悬停显示详细信息"</span></span>
<span id="cb24-232"><a href="#cb24-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-233"><a href="#cb24-233" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载所需包</span></span>
<span id="cb24-234"><a href="#cb24-234" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(packcircles)   <span class="co"># 用于圆形打包布局</span></span>
<span id="cb24-235"><a href="#cb24-235" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)       <span class="co"># 用于绘图</span></span>
<span id="cb24-236"><a href="#cb24-236" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis)       <span class="co"># 用于配色</span></span>
<span id="cb24-237"><a href="#cb24-237" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggiraph)       <span class="co"># 用于交互式图形</span></span>
<span id="cb24-238"><a href="#cb24-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-239"><a href="#cb24-239" aria-hidden="true" tabindex="-1"></a><span class="co"># 创建数据框，包含分组名称和对应的数值</span></span>
<span id="cb24-240"><a href="#cb24-240" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb24-241"><a href="#cb24-241" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> <span class="fu">paste</span>(</span>
<span id="cb24-242"><a href="#cb24-242" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Group_"</span>,</span>
<span id="cb24-243"><a href="#cb24-243" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sample</span>(letters, <span class="dv">70</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>),  <span class="co"># 随机生成 70 个字母</span></span>
<span id="cb24-244"><a href="#cb24-244" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sample</span>(letters, <span class="dv">70</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>),</span>
<span id="cb24-245"><a href="#cb24-245" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sample</span>(letters, <span class="dv">70</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>),</span>
<span id="cb24-246"><a href="#cb24-246" aria-hidden="true" tabindex="-1"></a>        <span class="at">sep =</span> <span class="st">""</span></span>
<span id="cb24-247"><a href="#cb24-247" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb24-248"><a href="#cb24-248" aria-hidden="true" tabindex="-1"></a>    <span class="at">value =</span> <span class="fu">sample</span>(<span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">70</span>), <span class="dv">70</span>)          <span class="co"># 随机生成 70 个 1~70 之间的数值</span></span>
<span id="cb24-249"><a href="#cb24-249" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-250"><a href="#cb24-250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-251"><a href="#cb24-251" aria-hidden="true" tabindex="-1"></a><span class="co"># 添加文本列，用于气泡悬停时显示详细信息</span></span>
<span id="cb24-252"><a href="#cb24-252" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>text <span class="ot">&lt;-</span> <span class="fu">paste</span>(</span>
<span id="cb24-253"><a href="#cb24-253" aria-hidden="true" tabindex="-1"></a>    <span class="st">"name: "</span>, data<span class="sc">$</span>group, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb24-254"><a href="#cb24-254" aria-hidden="true" tabindex="-1"></a>    <span class="st">"value: "</span>, data<span class="sc">$</span>value, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb24-255"><a href="#cb24-255" aria-hidden="true" tabindex="-1"></a>    <span class="st">"You can add a story here!"</span></span>
<span id="cb24-256"><a href="#cb24-256" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-257"><a href="#cb24-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-258"><a href="#cb24-258" aria-hidden="true" tabindex="-1"></a><span class="co"># 生成圆形打包布局，返回每个圆的中心坐标 (x, y) 和半径 (radius)</span></span>
<span id="cb24-259"><a href="#cb24-259" aria-hidden="true" tabindex="-1"></a>packing <span class="ot">&lt;-</span> <span class="fu">circleProgressiveLayout</span>(data<span class="sc">$</span>value, <span class="at">sizetype =</span> <span class="st">'area'</span>)</span>
<span id="cb24-260"><a href="#cb24-260" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">cbind</span>(data, packing)</span>
<span id="cb24-261"><a href="#cb24-261" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-262"><a href="#cb24-262" aria-hidden="true" tabindex="-1"></a><span class="co"># 根据每个圆的中心和半径，生成用于绘制圆形的多边形顶点坐标</span></span>
<span id="cb24-263"><a href="#cb24-263" aria-hidden="true" tabindex="-1"></a>dat.gg <span class="ot">&lt;-</span> <span class="fu">circleLayoutVertices</span>(packing, <span class="at">npoints =</span> <span class="dv">50</span>)</span>
<span id="cb24-264"><a href="#cb24-264" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-265"><a href="#cb24-265" aria-hidden="true" tabindex="-1"></a><span class="co"># 绘制交互式圆形打包图</span></span>
<span id="cb24-266"><a href="#cb24-266" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb24-267"><a href="#cb24-267" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制交互式圆形多边形（气泡），可悬停显示 tooltip</span></span>
<span id="cb24-268"><a href="#cb24-268" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_polygon_interactive</span>(</span>
<span id="cb24-269"><a href="#cb24-269" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> dat.gg,</span>
<span id="cb24-270"><a href="#cb24-270" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(</span>
<span id="cb24-271"><a href="#cb24-271" aria-hidden="true" tabindex="-1"></a>            x, y, <span class="at">group =</span> id, <span class="at">fill =</span> id,</span>
<span id="cb24-272"><a href="#cb24-272" aria-hidden="true" tabindex="-1"></a>            <span class="at">tooltip =</span> data<span class="sc">$</span>text[id],   <span class="co"># 悬停显示的文本</span></span>
<span id="cb24-273"><a href="#cb24-273" aria-hidden="true" tabindex="-1"></a>            <span class="at">data_id =</span> id               <span class="co"># 交互用的唯一标识</span></span>
<span id="cb24-274"><a href="#cb24-274" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb24-275"><a href="#cb24-275" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">"black"</span>,            <span class="co"># 边界为黑色</span></span>
<span id="cb24-276"><a href="#cb24-276" aria-hidden="true" tabindex="-1"></a>        <span class="at">alpha =</span> <span class="fl">0.6</span>                  <span class="co"># 设置透明度</span></span>
<span id="cb24-277"><a href="#cb24-277" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-278"><a href="#cb24-278" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis</span>() <span class="sc">+</span>         <span class="co"># 使用 viridis 调色板</span></span>
<span id="cb24-279"><a href="#cb24-279" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 在每个圆心添加文本标签，去掉 "Group_" 前缀</span></span>
<span id="cb24-280"><a href="#cb24-280" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(</span>
<span id="cb24-281"><a href="#cb24-281" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> data,</span>
<span id="cb24-282"><a href="#cb24-282" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">label =</span> <span class="fu">gsub</span>(<span class="st">"Group_"</span>, <span class="st">""</span>, group)),</span>
<span id="cb24-283"><a href="#cb24-283" aria-hidden="true" tabindex="-1"></a>        <span class="at">size =</span> <span class="dv">2</span>,</span>
<span id="cb24-284"><a href="#cb24-284" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="st">"black"</span></span>
<span id="cb24-285"><a href="#cb24-285" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-286"><a href="#cb24-286" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>                 <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb24-287"><a href="#cb24-287" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb24-288"><a href="#cb24-288" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">"none"</span>, </span>
<span id="cb24-289"><a href="#cb24-289" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.margin =</span> <span class="fu">unit</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>), <span class="st">"cm"</span>)  <span class="co"># 去除边距</span></span>
<span id="cb24-290"><a href="#cb24-290" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-291"><a href="#cb24-291" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_equal</span>()                  <span class="co"># 保持 x、y 轴比例相等</span></span>
<span id="cb24-292"><a href="#cb24-292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-293"><a href="#cb24-293" aria-hidden="true" tabindex="-1"></a><span class="co"># 生成交互式图形</span></span>
<span id="cb24-294"><a href="#cb24-294" aria-hidden="true" tabindex="-1"></a><span class="fu">girafe</span>(<span class="at">ggobj =</span> p) <span class="co"># 旧版本用 ggiraph()</span></span>
<span id="cb24-295"><a href="#cb24-295" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-296"><a href="#cb24-296" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-297"><a href="#cb24-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-298"><a href="#cb24-298" aria-hidden="true" tabindex="-1"></a><span class="fu">## Several levels</span></span>
<span id="cb24-299"><a href="#cb24-299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-300"><a href="#cb24-300" aria-hidden="true" tabindex="-1"></a><span class="fu">### `ggraph()`</span></span>
<span id="cb24-301"><a href="#cb24-301" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-304"><a href="#cb24-304" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-305"><a href="#cb24-305" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "多层级圆形打包图（circle packing），展示层级结构数据"</span></span>
<span id="cb24-306"><a href="#cb24-306" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 8</span></span>
<span id="cb24-307"><a href="#cb24-307" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 8</span></span>
<span id="cb24-308"><a href="#cb24-308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-309"><a href="#cb24-309" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggraph) <span class="co"># 用于图形可视化</span></span>
<span id="cb24-310"><a href="#cb24-310" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(igraph) <span class="co"># 用于图形操作</span></span>
<span id="cb24-311"><a href="#cb24-311" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb24-312"><a href="#cb24-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-313"><a href="#cb24-313" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载 edges 和 vertices 数据，flare 数据集内置于 packcircles 包</span></span>
<span id="cb24-314"><a href="#cb24-314" aria-hidden="true" tabindex="-1"></a>edges <span class="ot">&lt;-</span> flare<span class="sc">$</span>edges  <span class="co"># 边数据，描述节点之间的父子关系</span></span>
<span id="cb24-315"><a href="#cb24-315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-316"><a href="#cb24-316" aria-hidden="true" tabindex="-1"></a><span class="co"># 通常我们还会有一个节点信息表，包含每个节点的属性</span></span>
<span id="cb24-317"><a href="#cb24-317" aria-hidden="true" tabindex="-1"></a>vertices <span class="ot">&lt;-</span> flare<span class="sc">$</span>vertices  <span class="co"># 节点数据，包含节点名称、分组等信息</span></span>
<span id="cb24-318"><a href="#cb24-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-319"><a href="#cb24-319" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 igraph 包将边和节点数据转换为图对象</span></span>
<span id="cb24-320"><a href="#cb24-320" aria-hidden="true" tabindex="-1"></a>mygraph <span class="ot">&lt;-</span> <span class="fu">graph_from_data_frame</span>(edges, <span class="at">vertices =</span> vertices)</span>
<span id="cb24-321"><a href="#cb24-321" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-322"><a href="#cb24-322" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggraph 包绘制多层级圆形打包图</span></span>
<span id="cb24-323"><a href="#cb24-323" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'circlepack'</span>) <span class="sc">+</span> </span>
<span id="cb24-324"><a href="#cb24-324" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_circle</span>() <span class="sc">+</span>         <span class="co"># 绘制每个节点的圆</span></span>
<span id="cb24-325"><a href="#cb24-325" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>()                 <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb24-326"><a href="#cb24-326" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-327"><a href="#cb24-327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-328"><a href="#cb24-328" aria-hidden="true" tabindex="-1"></a><span class="fu">### type</span></span>
<span id="cb24-329"><a href="#cb24-329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-332"><a href="#cb24-332" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-333"><a href="#cb24-333" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: dendrogram, circle packing</span></span>
<span id="cb24-334"><a href="#cb24-334" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 8</span></span>
<span id="cb24-335"><a href="#cb24-335" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 8</span></span>
<span id="cb24-336"><a href="#cb24-336" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-337"><a href="#cb24-337" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'dendrogram'</span>, <span class="at">circular =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb24-338"><a href="#cb24-338" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_edge_diagonal</span>() <span class="sc">+</span></span>
<span id="cb24-339"><a href="#cb24-339" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb24-340"><a href="#cb24-340" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb24-341"><a href="#cb24-341" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-342"><a href="#cb24-342" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-345"><a href="#cb24-345" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-346"><a href="#cb24-346" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: dendrogram, not circle packing</span></span>
<span id="cb24-347"><a href="#cb24-347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-348"><a href="#cb24-348" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'dendrogram'</span>, <span class="at">circular =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb24-349"><a href="#cb24-349" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_edge_diagonal</span>() <span class="sc">+</span></span>
<span id="cb24-350"><a href="#cb24-350" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb24-351"><a href="#cb24-351" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb24-352"><a href="#cb24-352" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-353"><a href="#cb24-353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-356"><a href="#cb24-356" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-357"><a href="#cb24-357" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: treemap</span></span>
<span id="cb24-358"><a href="#cb24-358" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-359"><a href="#cb24-359" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="st">'treemap'</span>, <span class="at">weight =</span> size) <span class="sc">+</span></span>
<span id="cb24-360"><a href="#cb24-360" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_node_tile</span>(<span class="fu">aes</span>(<span class="at">fill =</span> depth), <span class="at">size =</span> <span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb24-361"><a href="#cb24-361" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb24-362"><a href="#cb24-362" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb24-363"><a href="#cb24-363" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-364"><a href="#cb24-364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-367"><a href="#cb24-367" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-368"><a href="#cb24-368" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: partition</span></span>
<span id="cb24-369"><a href="#cb24-369" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-370"><a href="#cb24-370" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="st">'partition'</span>, <span class="at">circular =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb24-371"><a href="#cb24-371" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_node_arc_bar</span>(<span class="fu">aes</span>(<span class="at">fill =</span> depth), <span class="at">size =</span> <span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb24-372"><a href="#cb24-372" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb24-373"><a href="#cb24-373" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb24-374"><a href="#cb24-374" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-375"><a href="#cb24-375" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-378"><a href="#cb24-378" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-379"><a href="#cb24-379" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "基础网络图：节点与连线的可视化"</span></span>
<span id="cb24-380"><a href="#cb24-380" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-381"><a href="#cb24-381" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggraph 绘制基础网络图，展示节点与边的关系</span></span>
<span id="cb24-382"><a href="#cb24-382" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph) <span class="sc">+</span></span>
<span id="cb24-383"><a href="#cb24-383" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制边（连线），表示节点之间的连接关系</span></span>
<span id="cb24-384"><a href="#cb24-384" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_edge_link</span>() <span class="sc">+</span></span>
<span id="cb24-385"><a href="#cb24-385" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制节点（点），表示网络中的各个实体</span></span>
<span id="cb24-386"><a href="#cb24-386" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_point</span>() <span class="sc">+</span></span>
<span id="cb24-387"><a href="#cb24-387" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 去除坐标轴和背景，使图形更简洁</span></span>
<span id="cb24-388"><a href="#cb24-388" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb24-389"><a href="#cb24-389" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 不显示图例</span></span>
<span id="cb24-390"><a href="#cb24-390" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb24-391"><a href="#cb24-391" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-392"><a href="#cb24-392" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-393"><a href="#cb24-393" aria-hidden="true" tabindex="-1"></a><span class="fu">### color</span></span>
<span id="cb24-394"><a href="#cb24-394" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-395"><a href="#cb24-395" aria-hidden="true" tabindex="-1"></a>节点颜色根据深度变化: </span>
<span id="cb24-396"><a href="#cb24-396" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-399"><a href="#cb24-399" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-400"><a href="#cb24-400" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: 圆形打包图：节点颜色根据深度变化</span></span>
<span id="cb24-401"><a href="#cb24-401" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 8</span></span>
<span id="cb24-402"><a href="#cb24-402" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 8</span></span>
<span id="cb24-403"><a href="#cb24-403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-404"><a href="#cb24-404" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggraph 绘制圆形打包图，节点颜色根据深度变化</span></span>
<span id="cb24-405"><a href="#cb24-405" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'circlepack'</span>, <span class="at">weight=</span>size) <span class="sc">+</span> </span>
<span id="cb24-406"><a href="#cb24-406" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_node_circle</span>(<span class="fu">aes</span>(<span class="at">fill =</span> depth)) <span class="sc">+</span></span>
<span id="cb24-407"><a href="#cb24-407" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span> </span>
<span id="cb24-408"><a href="#cb24-408" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"FALSE"</span>)</span>
<span id="cb24-409"><a href="#cb24-409" aria-hidden="true" tabindex="-1"></a>p</span>
<span id="cb24-410"><a href="#cb24-410" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-411"><a href="#cb24-411" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-414"><a href="#cb24-414" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-415"><a href="#cb24-415" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: viridis 调色板应用于圆形打包图</span></span>
<span id="cb24-416"><a href="#cb24-416" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 8</span></span>
<span id="cb24-417"><a href="#cb24-417" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 8</span></span>
<span id="cb24-418"><a href="#cb24-418" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-419"><a href="#cb24-419" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">scale_fill_viridis</span>()</span>
<span id="cb24-420"><a href="#cb24-420" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-421"><a href="#cb24-421" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-424"><a href="#cb24-424" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-425"><a href="#cb24-425" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: colorBrewer 调色板应用于圆形打包图</span></span>
<span id="cb24-426"><a href="#cb24-426" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 8</span></span>
<span id="cb24-427"><a href="#cb24-427" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 8</span></span>
<span id="cb24-428"><a href="#cb24-428" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-429"><a href="#cb24-429" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">scale_fill_distiller</span>(<span class="at">palette =</span> <span class="st">"RdPu"</span>) </span>
<span id="cb24-430"><a href="#cb24-430" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-431"><a href="#cb24-431" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-432"><a href="#cb24-432" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-433"><a href="#cb24-433" aria-hidden="true" tabindex="-1"></a><span class="fu">### label</span></span>
<span id="cb24-434"><a href="#cb24-434" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-435"><a href="#cb24-435" aria-hidden="true" tabindex="-1"></a>适用于层级不特别多的情况</span>
<span id="cb24-436"><a href="#cb24-436" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-439"><a href="#cb24-439" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-440"><a href="#cb24-440" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "带标签的多层级圆形打包图（circle packing），仅叶节点显示标签"</span></span>
<span id="cb24-441"><a href="#cb24-441" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 8</span></span>
<span id="cb24-442"><a href="#cb24-442" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 8</span></span>
<span id="cb24-443"><a href="#cb24-443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-444"><a href="#cb24-444" aria-hidden="true" tabindex="-1"></a><span class="co"># 仅保留有下级的边（即 to 在 from 中出现）</span></span>
<span id="cb24-445"><a href="#cb24-445" aria-hidden="true" tabindex="-1"></a>edges <span class="ot">&lt;-</span> flare<span class="sc">$</span>edges <span class="sc">|&gt;</span></span>
<span id="cb24-446"><a href="#cb24-446" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(to <span class="sc">%in%</span> from) <span class="sc">|&gt;</span></span>
<span id="cb24-447"><a href="#cb24-447" aria-hidden="true" tabindex="-1"></a>    <span class="fu">droplevels</span>()</span>
<span id="cb24-448"><a href="#cb24-448" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-449"><a href="#cb24-449" aria-hidden="true" tabindex="-1"></a><span class="co"># 仅保留参与这些边的节点</span></span>
<span id="cb24-450"><a href="#cb24-450" aria-hidden="true" tabindex="-1"></a>vertices <span class="ot">&lt;-</span> flare<span class="sc">$</span>vertices <span class="sc">|&gt;</span></span>
<span id="cb24-451"><a href="#cb24-451" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(name <span class="sc">%in%</span> <span class="fu">c</span>(edges<span class="sc">$</span>from, edges<span class="sc">$</span>to)) <span class="sc">|&gt;</span></span>
<span id="cb24-452"><a href="#cb24-452" aria-hidden="true" tabindex="-1"></a>    <span class="fu">droplevels</span>()</span>
<span id="cb24-453"><a href="#cb24-453" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-454"><a href="#cb24-454" aria-hidden="true" tabindex="-1"></a><span class="co"># 随机生成每个节点的 size 属性（可根据实际数据调整）</span></span>
<span id="cb24-455"><a href="#cb24-455" aria-hidden="true" tabindex="-1"></a>vertices<span class="sc">$</span>size <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="fu">nrow</span>(vertices))</span>
<span id="cb24-456"><a href="#cb24-456" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-457"><a href="#cb24-457" aria-hidden="true" tabindex="-1"></a><span class="co"># 重新构建 igraph 图对象</span></span>
<span id="cb24-458"><a href="#cb24-458" aria-hidden="true" tabindex="-1"></a>mygraph <span class="ot">&lt;-</span> <span class="fu">graph_from_data_frame</span>(edges, <span class="at">vertices =</span> vertices)</span>
<span id="cb24-459"><a href="#cb24-459" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-460"><a href="#cb24-460" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggraph 绘制多层级圆形打包图</span></span>
<span id="cb24-461"><a href="#cb24-461" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'circlepack'</span>, <span class="at">weight =</span> size) <span class="sc">+</span></span>
<span id="cb24-462"><a href="#cb24-462" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制每个节点的圆，颜色根据深度变化</span></span>
<span id="cb24-463"><a href="#cb24-463" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_circle</span>(<span class="fu">aes</span>(<span class="at">fill =</span> depth)) <span class="sc">+</span></span>
<span id="cb24-464"><a href="#cb24-464" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 仅在叶节点（leaf=TRUE）处添加标签，标签内容为 shortName，字体大小与 size 成比例</span></span>
<span id="cb24-465"><a href="#cb24-465" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_text</span>(<span class="fu">aes</span>(</span>
<span id="cb24-466"><a href="#cb24-466" aria-hidden="true" tabindex="-1"></a>        <span class="at">label =</span> shortName,    <span class="co"># 标签内容</span></span>
<span id="cb24-467"><a href="#cb24-467" aria-hidden="true" tabindex="-1"></a>        <span class="at">filter =</span> leaf,        <span class="co"># 仅叶节点显示</span></span>
<span id="cb24-468"><a href="#cb24-468" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill =</span> depth,         <span class="co"># 标签颜色与深度一致</span></span>
<span id="cb24-469"><a href="#cb24-469" aria-hidden="true" tabindex="-1"></a>        <span class="at">size =</span> size           <span class="co"># 字体大小与 size 成比例</span></span>
<span id="cb24-470"><a href="#cb24-470" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">+</span></span>
<span id="cb24-471"><a href="#cb24-471" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>                          <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb24-472"><a href="#cb24-472" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"FALSE"</span>) <span class="sc">+</span>      <span class="co"># 不显示图例</span></span>
<span id="cb24-473"><a href="#cb24-473" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis</span>()                    <span class="co"># 使用 viridis 调色板</span></span>
<span id="cb24-474"><a href="#cb24-474" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-475"><a href="#cb24-475" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-476"><a href="#cb24-476" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-479"><a href="#cb24-479" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-480"><a href="#cb24-480" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "带标签的多层级圆形打包图（circle packing），仅叶节点显示标签"</span></span>
<span id="cb24-481"><a href="#cb24-481" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 8</span></span>
<span id="cb24-482"><a href="#cb24-482" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 8</span></span>
<span id="cb24-483"><a href="#cb24-483" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-484"><a href="#cb24-484" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggraph 绘制多层级圆形打包图，节点颜色根据深度变化，叶节点显示标签</span></span>
<span id="cb24-485"><a href="#cb24-485" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'circlepack'</span>, <span class="at">weight =</span> size) <span class="sc">+</span> </span>
<span id="cb24-486"><a href="#cb24-486" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制每个节点的圆，颜色根据深度变化</span></span>
<span id="cb24-487"><a href="#cb24-487" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_circle</span>(<span class="fu">aes</span>(<span class="at">fill =</span> depth)) <span class="sc">+</span></span>
<span id="cb24-488"><a href="#cb24-488" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 仅在叶节点（leaf=TRUE）处添加标签，标签内容为 shortName，字体大小与 size 成比例</span></span>
<span id="cb24-489"><a href="#cb24-489" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_label</span>(</span>
<span id="cb24-490"><a href="#cb24-490" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(</span>
<span id="cb24-491"><a href="#cb24-491" aria-hidden="true" tabindex="-1"></a>            <span class="at">label =</span> shortName,  <span class="co"># 标签内容为节点的 shortName</span></span>
<span id="cb24-492"><a href="#cb24-492" aria-hidden="true" tabindex="-1"></a>            <span class="at">filter =</span> leaf,      <span class="co"># 仅叶节点显示标签</span></span>
<span id="cb24-493"><a href="#cb24-493" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> size         <span class="co"># 字体大小与 size 成比例</span></span>
<span id="cb24-494"><a href="#cb24-494" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb24-495"><a href="#cb24-495" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-496"><a href="#cb24-496" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>                          <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb24-497"><a href="#cb24-497" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"FALSE"</span>) <span class="sc">+</span>      <span class="co"># 不显示图例</span></span>
<span id="cb24-498"><a href="#cb24-498" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis</span>()                    <span class="co"># 使用 viridis 调色板</span></span>
<span id="cb24-499"><a href="#cb24-499" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-500"><a href="#cb24-500" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-501"><a href="#cb24-501" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-502"><a href="#cb24-502" aria-hidden="true" tabindex="-1"></a><span class="fu">### Hide</span></span>
<span id="cb24-503"><a href="#cb24-503" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-504"><a href="#cb24-504" aria-hidden="true" tabindex="-1"></a>隐藏1个或多个外层大圈:</span>
<span id="cb24-505"><a href="#cb24-505" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-508"><a href="#cb24-508" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-509"><a href="#cb24-509" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "隐藏最外层大圈的多层级圆形打包图（circle packing）"</span></span>
<span id="cb24-510"><a href="#cb24-510" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 8</span></span>
<span id="cb24-511"><a href="#cb24-511" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 8</span></span>
<span id="cb24-512"><a href="#cb24-512" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-513"><a href="#cb24-513" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 packcircles 包内置的 flare 数据集，包含层级结构的边和节点信息</span></span>
<span id="cb24-514"><a href="#cb24-514" aria-hidden="true" tabindex="-1"></a>edges <span class="ot">=</span> flare<span class="sc">$</span>edges         <span class="co"># 边数据，描述父子关系</span></span>
<span id="cb24-515"><a href="#cb24-515" aria-hidden="true" tabindex="-1"></a>vertices <span class="ot">=</span> flare<span class="sc">$</span>vertices   <span class="co"># 节点数据，包含节点属性</span></span>
<span id="cb24-516"><a href="#cb24-516" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-517"><a href="#cb24-517" aria-hidden="true" tabindex="-1"></a><span class="co"># 构建 igraph 图对象</span></span>
<span id="cb24-518"><a href="#cb24-518" aria-hidden="true" tabindex="-1"></a>mygraph <span class="ot">&lt;-</span> <span class="fu">graph_from_data_frame</span>(edges, <span class="at">vertices =</span> vertices)</span>
<span id="cb24-519"><a href="#cb24-519" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-520"><a href="#cb24-520" aria-hidden="true" tabindex="-1"></a><span class="co"># 绘制多层级圆形打包图，隐藏最外层大圈（depth=0 填充为白色）</span></span>
<span id="cb24-521"><a href="#cb24-521" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'circlepack'</span>, <span class="at">weight =</span> size) <span class="sc">+</span></span>
<span id="cb24-522"><a href="#cb24-522" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制每个节点的圆，填充和边框颜色根据深度分组</span></span>
<span id="cb24-523"><a href="#cb24-523" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_circle</span>(<span class="fu">aes</span>(<span class="at">fill =</span> <span class="fu">as.factor</span>(depth), <span class="at">color =</span> <span class="fu">as.factor</span>(depth))) <span class="sc">+</span></span>
<span id="cb24-524"><a href="#cb24-524" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置不同深度的填充颜色，最外层（depth=0）为白色，其余用 viridis 调色板</span></span>
<span id="cb24-525"><a href="#cb24-525" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(</span>
<span id="cb24-526"><a href="#cb24-526" aria-hidden="true" tabindex="-1"></a>        <span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb24-527"><a href="#cb24-527" aria-hidden="true" tabindex="-1"></a>            <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"white"</span>,           <span class="co"># 最外层隐藏</span></span>
<span id="cb24-528"><a href="#cb24-528" aria-hidden="true" tabindex="-1"></a>            <span class="st">"1"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">1</span>],     <span class="co"># 第一层</span></span>
<span id="cb24-529"><a href="#cb24-529" aria-hidden="true" tabindex="-1"></a>            <span class="st">"2"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">2</span>],     <span class="co"># 第二层</span></span>
<span id="cb24-530"><a href="#cb24-530" aria-hidden="true" tabindex="-1"></a>            <span class="st">"3"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">3</span>],     <span class="co"># 第三层</span></span>
<span id="cb24-531"><a href="#cb24-531" aria-hidden="true" tabindex="-1"></a>            <span class="st">"4"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">4</span>]      <span class="co"># 第四层</span></span>
<span id="cb24-532"><a href="#cb24-532" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb24-533"><a href="#cb24-533" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-534"><a href="#cb24-534" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置不同深度的边框颜色，最外层为白色，其余为黑色</span></span>
<span id="cb24-535"><a href="#cb24-535" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_manual</span>(</span>
<span id="cb24-536"><a href="#cb24-536" aria-hidden="true" tabindex="-1"></a>        <span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb24-537"><a href="#cb24-537" aria-hidden="true" tabindex="-1"></a>            <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"white"</span>,           <span class="co"># 最外层隐藏</span></span>
<span id="cb24-538"><a href="#cb24-538" aria-hidden="true" tabindex="-1"></a>            <span class="st">"1"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb24-539"><a href="#cb24-539" aria-hidden="true" tabindex="-1"></a>            <span class="st">"2"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb24-540"><a href="#cb24-540" aria-hidden="true" tabindex="-1"></a>            <span class="st">"3"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb24-541"><a href="#cb24-541" aria-hidden="true" tabindex="-1"></a>            <span class="st">"4"</span> <span class="ot">=</span> <span class="st">"black"</span></span>
<span id="cb24-542"><a href="#cb24-542" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb24-543"><a href="#cb24-543" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-544"><a href="#cb24-544" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>                        <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb24-545"><a href="#cb24-545" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"FALSE"</span>)      <span class="co"># 不显示图例</span></span>
<span id="cb24-546"><a href="#cb24-546" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-547"><a href="#cb24-547" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-550"><a href="#cb24-550" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-551"><a href="#cb24-551" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "隐藏前两层大圈的多层级圆形打包图（circle packing）"</span></span>
<span id="cb24-552"><a href="#cb24-552" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 8</span></span>
<span id="cb24-553"><a href="#cb24-553" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 8</span></span>
<span id="cb24-554"><a href="#cb24-554" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-555"><a href="#cb24-555" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggraph 绘制多层级圆形打包图，隐藏最外层和第二层大圈</span></span>
<span id="cb24-556"><a href="#cb24-556" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'circlepack'</span>, <span class="at">weight =</span> size) <span class="sc">+</span></span>
<span id="cb24-557"><a href="#cb24-557" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制每个节点的圆，填充和边框颜色根据深度分组</span></span>
<span id="cb24-558"><a href="#cb24-558" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_circle</span>(<span class="fu">aes</span>(<span class="at">fill =</span> <span class="fu">as.factor</span>(depth), <span class="at">color =</span> <span class="fu">as.factor</span>(depth))) <span class="sc">+</span></span>
<span id="cb24-559"><a href="#cb24-559" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置不同深度的填充颜色，前两层（depth=0,1）为白色，其余用 magma 调色板</span></span>
<span id="cb24-560"><a href="#cb24-560" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(</span>
<span id="cb24-561"><a href="#cb24-561" aria-hidden="true" tabindex="-1"></a>        <span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb24-562"><a href="#cb24-562" aria-hidden="true" tabindex="-1"></a>            <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"white"</span>,           <span class="co"># 最外层隐藏</span></span>
<span id="cb24-563"><a href="#cb24-563" aria-hidden="true" tabindex="-1"></a>            <span class="st">"1"</span> <span class="ot">=</span> <span class="st">"white"</span>,           <span class="co"># 第二层隐藏</span></span>
<span id="cb24-564"><a href="#cb24-564" aria-hidden="true" tabindex="-1"></a>            <span class="st">"2"</span> <span class="ot">=</span> <span class="fu">magma</span>(<span class="dv">4</span>)[<span class="dv">2</span>],       <span class="co"># 第三层</span></span>
<span id="cb24-565"><a href="#cb24-565" aria-hidden="true" tabindex="-1"></a>            <span class="st">"3"</span> <span class="ot">=</span> <span class="fu">magma</span>(<span class="dv">4</span>)[<span class="dv">3</span>],       <span class="co"># 第四层</span></span>
<span id="cb24-566"><a href="#cb24-566" aria-hidden="true" tabindex="-1"></a>            <span class="st">"4"</span> <span class="ot">=</span> <span class="fu">magma</span>(<span class="dv">4</span>)[<span class="dv">4</span>]        <span class="co"># 第五层</span></span>
<span id="cb24-567"><a href="#cb24-567" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb24-568"><a href="#cb24-568" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-569"><a href="#cb24-569" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置不同深度的边框颜色，前两层为白色，其余为黑色</span></span>
<span id="cb24-570"><a href="#cb24-570" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_manual</span>(</span>
<span id="cb24-571"><a href="#cb24-571" aria-hidden="true" tabindex="-1"></a>        <span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb24-572"><a href="#cb24-572" aria-hidden="true" tabindex="-1"></a>            <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"white"</span>,           <span class="co"># 最外层隐藏</span></span>
<span id="cb24-573"><a href="#cb24-573" aria-hidden="true" tabindex="-1"></a>            <span class="st">"1"</span> <span class="ot">=</span> <span class="st">"white"</span>,           <span class="co"># 第二层隐藏</span></span>
<span id="cb24-574"><a href="#cb24-574" aria-hidden="true" tabindex="-1"></a>            <span class="st">"2"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb24-575"><a href="#cb24-575" aria-hidden="true" tabindex="-1"></a>            <span class="st">"3"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb24-576"><a href="#cb24-576" aria-hidden="true" tabindex="-1"></a>            <span class="st">"4"</span> <span class="ot">=</span> <span class="st">"black"</span></span>
<span id="cb24-577"><a href="#cb24-577" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb24-578"><a href="#cb24-578" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-579"><a href="#cb24-579" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>                        <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb24-580"><a href="#cb24-580" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"FALSE"</span>)      <span class="co"># 不显示图例</span></span>
<span id="cb24-581"><a href="#cb24-581" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-582"><a href="#cb24-582" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-583"><a href="#cb24-583" aria-hidden="true" tabindex="-1"></a><span class="fu">### 特定 label</span></span>
<span id="cb24-584"><a href="#cb24-584" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-587"><a href="#cb24-587" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-588"><a href="#cb24-588" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "仅为特定层级（如 level=2）节点添加标签的多层级圆形打包图"</span></span>
<span id="cb24-589"><a href="#cb24-589" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 8</span></span>
<span id="cb24-590"><a href="#cb24-590" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 8</span></span>
<span id="cb24-591"><a href="#cb24-591" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-592"><a href="#cb24-592" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载 data.tree 包，用于树结构操作</span></span>
<span id="cb24-593"><a href="#cb24-593" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.tree)</span>
<span id="cb24-594"><a href="#cb24-594" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-595"><a href="#cb24-595" aria-hidden="true" tabindex="-1"></a><span class="co"># 重新加载边和节点数据</span></span>
<span id="cb24-596"><a href="#cb24-596" aria-hidden="true" tabindex="-1"></a>edges <span class="ot">&lt;-</span> flare<span class="sc">$</span>edges</span>
<span id="cb24-597"><a href="#cb24-597" aria-hidden="true" tabindex="-1"></a>vertices <span class="ot">&lt;-</span> flare<span class="sc">$</span>vertices</span>
<span id="cb24-598"><a href="#cb24-598" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-599"><a href="#cb24-599" aria-hidden="true" tabindex="-1"></a><span class="co"># 将边数据转换为树结构，便于获取每个节点的层级信息</span></span>
<span id="cb24-600"><a href="#cb24-600" aria-hidden="true" tabindex="-1"></a>tree <span class="ot">&lt;-</span> <span class="fu">FromDataFrameNetwork</span>(edges)</span>
<span id="cb24-601"><a href="#cb24-601" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-602"><a href="#cb24-602" aria-hidden="true" tabindex="-1"></a><span class="co"># 获取每个节点的名称和层级，并合并到原始节点数据框</span></span>
<span id="cb24-603"><a href="#cb24-603" aria-hidden="true" tabindex="-1"></a>mylevels <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb24-604"><a href="#cb24-604" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> tree<span class="sc">$</span><span class="fu">Get</span>(<span class="st">'name'</span>),      <span class="co"># 节点名称</span></span>
<span id="cb24-605"><a href="#cb24-605" aria-hidden="true" tabindex="-1"></a>    <span class="at">level =</span> tree<span class="sc">$</span><span class="fu">Get</span>(<span class="st">"level"</span>)     <span class="co"># 节点层级（根节点为1）</span></span>
<span id="cb24-606"><a href="#cb24-606" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-607"><a href="#cb24-607" aria-hidden="true" tabindex="-1"></a>vertices <span class="ot">&lt;-</span> vertices <span class="sc">%&gt;%</span></span>
<span id="cb24-608"><a href="#cb24-608" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(., mylevels, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"name"</span> <span class="ot">=</span> <span class="st">"name"</span>))</span>
<span id="cb24-609"><a href="#cb24-609" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-610"><a href="#cb24-610" aria-hidden="true" tabindex="-1"></a><span class="co"># 仅为 level=2 的节点添加标签，其余节点标签为 NA</span></span>
<span id="cb24-611"><a href="#cb24-611" aria-hidden="true" tabindex="-1"></a>vertices <span class="ot">&lt;-</span> vertices <span class="sc">%&gt;%</span></span>
<span id="cb24-612"><a href="#cb24-612" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">new_label =</span> <span class="fu">ifelse</span>(level <span class="sc">==</span> <span class="dv">2</span>, shortName, <span class="cn">NA</span>))</span>
<span id="cb24-613"><a href="#cb24-613" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-614"><a href="#cb24-614" aria-hidden="true" tabindex="-1"></a><span class="co"># 构建 igraph 图对象</span></span>
<span id="cb24-615"><a href="#cb24-615" aria-hidden="true" tabindex="-1"></a>mygraph <span class="ot">&lt;-</span> <span class="fu">graph_from_data_frame</span>(edges, <span class="at">vertices =</span> vertices)</span>
<span id="cb24-616"><a href="#cb24-616" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-617"><a href="#cb24-617" aria-hidden="true" tabindex="-1"></a><span class="co"># 绘制多层级圆形打包图</span></span>
<span id="cb24-618"><a href="#cb24-618" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'circlepack'</span>, <span class="at">weight =</span> size) <span class="sc">+</span></span>
<span id="cb24-619"><a href="#cb24-619" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制每个节点的圆，填充和边框颜色根据深度分组</span></span>
<span id="cb24-620"><a href="#cb24-620" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_circle</span>(<span class="fu">aes</span>(<span class="at">fill =</span> <span class="fu">as.factor</span>(depth), <span class="at">color =</span> <span class="fu">as.factor</span>(depth))) <span class="sc">+</span></span>
<span id="cb24-621"><a href="#cb24-621" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置不同深度的填充颜色，最外层为白色，其余用 viridis 调色板</span></span>
<span id="cb24-622"><a href="#cb24-622" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb24-623"><a href="#cb24-623" aria-hidden="true" tabindex="-1"></a>        <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"white"</span>,</span>
<span id="cb24-624"><a href="#cb24-624" aria-hidden="true" tabindex="-1"></a>        <span class="st">"1"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">1</span>],</span>
<span id="cb24-625"><a href="#cb24-625" aria-hidden="true" tabindex="-1"></a>        <span class="st">"2"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">2</span>],</span>
<span id="cb24-626"><a href="#cb24-626" aria-hidden="true" tabindex="-1"></a>        <span class="st">"3"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">3</span>],</span>
<span id="cb24-627"><a href="#cb24-627" aria-hidden="true" tabindex="-1"></a>        <span class="st">"4"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">4</span>]</span>
<span id="cb24-628"><a href="#cb24-628" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">+</span></span>
<span id="cb24-629"><a href="#cb24-629" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置不同深度的边框颜色，最外层为白色，其余为黑色</span></span>
<span id="cb24-630"><a href="#cb24-630" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb24-631"><a href="#cb24-631" aria-hidden="true" tabindex="-1"></a>        <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"white"</span>,</span>
<span id="cb24-632"><a href="#cb24-632" aria-hidden="true" tabindex="-1"></a>        <span class="st">"1"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb24-633"><a href="#cb24-633" aria-hidden="true" tabindex="-1"></a>        <span class="st">"2"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb24-634"><a href="#cb24-634" aria-hidden="true" tabindex="-1"></a>        <span class="st">"3"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb24-635"><a href="#cb24-635" aria-hidden="true" tabindex="-1"></a>        <span class="st">"4"</span> <span class="ot">=</span> <span class="st">"black"</span></span>
<span id="cb24-636"><a href="#cb24-636" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">+</span></span>
<span id="cb24-637"><a href="#cb24-637" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 仅为 new_label 非 NA 的节点添加标签（即 level=2 的节点）</span></span>
<span id="cb24-638"><a href="#cb24-638" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_label</span>(<span class="fu">aes</span>(<span class="at">label =</span> new_label), <span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb24-639"><a href="#cb24-639" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 去除坐标轴和背景，设置无图例和无边距</span></span>
<span id="cb24-640"><a href="#cb24-640" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb24-641"><a href="#cb24-641" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb24-642"><a href="#cb24-642" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">"FALSE"</span>,</span>
<span id="cb24-643"><a href="#cb24-643" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.margin =</span> <span class="fu">unit</span>(<span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">4</span>), <span class="st">"cm"</span>)</span>
<span id="cb24-644"><a href="#cb24-644" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb24-645"><a href="#cb24-645" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-646"><a href="#cb24-646" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-647"><a href="#cb24-647" aria-hidden="true" tabindex="-1"></a><span class="fu">### 可缩放</span></span>
<span id="cb24-648"><a href="#cb24-648" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-649"><a href="#cb24-649" aria-hidden="true" tabindex="-1"></a><span class="in">`circlePacker`</span> 包可以用来创建交互式和可缩放圆形堆积图</span>
<span id="cb24-650"><a href="#cb24-650" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-653"><a href="#cb24-653" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-654"><a href="#cb24-654" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "可缩放交互式多层级圆形打包图（circle packing），使用 circlepackeR 包"</span></span>
<span id="cb24-655"><a href="#cb24-655" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-656"><a href="#cb24-656" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载 circlepackeR 包，用于创建可缩放的交互式圆形打包图</span></span>
<span id="cb24-657"><a href="#cb24-657" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(circlepackeR)</span>
<span id="cb24-658"><a href="#cb24-658" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-659"><a href="#cb24-659" aria-hidden="true" tabindex="-1"></a><span class="co"># 构建一个嵌套数据框，包含多层级结构信息</span></span>
<span id="cb24-660"><a href="#cb24-660" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb24-661"><a href="#cb24-661" aria-hidden="true" tabindex="-1"></a>    <span class="at">root =</span> <span class="fu">rep</span>(<span class="st">"root"</span>, <span class="dv">15</span>),                                 <span class="co"># 根节点</span></span>
<span id="cb24-662"><a href="#cb24-662" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">"group A"</span>, <span class="dv">5</span>), <span class="fu">rep</span>(<span class="st">"group B"</span>, <span class="dv">5</span>), <span class="fu">rep</span>(<span class="st">"group C"</span>, <span class="dv">5</span>)), <span class="co"># 一级分组</span></span>
<span id="cb24-663"><a href="#cb24-663" aria-hidden="true" tabindex="-1"></a>    <span class="at">subgroup =</span> <span class="fu">rep</span>(letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>], <span class="at">each =</span> <span class="dv">3</span>),                 <span class="co"># 二级分组</span></span>
<span id="cb24-664"><a href="#cb24-664" aria-hidden="true" tabindex="-1"></a>    <span class="at">subsubgroup =</span> <span class="fu">rep</span>(letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>], <span class="dv">5</span>),                     <span class="co"># 三级分组</span></span>
<span id="cb24-665"><a href="#cb24-665" aria-hidden="true" tabindex="-1"></a>    <span class="at">value =</span> <span class="fu">sample</span>(<span class="fu">seq</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>), <span class="dv">15</span>)                           <span class="co"># 每个叶节点的数值</span></span>
<span id="cb24-666"><a href="#cb24-666" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-667"><a href="#cb24-667" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-668"><a href="#cb24-668" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 data.tree 包将数据转换为树结构</span></span>
<span id="cb24-669"><a href="#cb24-669" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.tree)</span>
<span id="cb24-670"><a href="#cb24-670" aria-hidden="true" tabindex="-1"></a><span class="co"># 构建 pathString 字段，格式为 root/group/subgroup/subsubgroup</span></span>
<span id="cb24-671"><a href="#cb24-671" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>pathString <span class="ot">&lt;-</span> <span class="fu">paste</span>(</span>
<span id="cb24-672"><a href="#cb24-672" aria-hidden="true" tabindex="-1"></a>    <span class="st">"world"</span>,                <span class="co"># 根节点名称</span></span>
<span id="cb24-673"><a href="#cb24-673" aria-hidden="true" tabindex="-1"></a>    data<span class="sc">$</span>group,             <span class="co"># 一级分组</span></span>
<span id="cb24-674"><a href="#cb24-674" aria-hidden="true" tabindex="-1"></a>    data<span class="sc">$</span>subgroup,          <span class="co"># 二级分组</span></span>
<span id="cb24-675"><a href="#cb24-675" aria-hidden="true" tabindex="-1"></a>    data<span class="sc">$</span>subsubgroup,       <span class="co"># 三级分组</span></span>
<span id="cb24-676"><a href="#cb24-676" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">"/"</span></span>
<span id="cb24-677"><a href="#cb24-677" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-678"><a href="#cb24-678" aria-hidden="true" tabindex="-1"></a><span class="co"># 转换为树结构对象</span></span>
<span id="cb24-679"><a href="#cb24-679" aria-hidden="true" tabindex="-1"></a>population <span class="ot">&lt;-</span> <span class="fu">as.Node</span>(data)</span>
<span id="cb24-680"><a href="#cb24-680" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-681"><a href="#cb24-681" aria-hidden="true" tabindex="-1"></a><span class="co"># 绘制可缩放的交互式圆形打包图</span></span>
<span id="cb24-682"><a href="#cb24-682" aria-hidden="true" tabindex="-1"></a><span class="co"># color_min 和 color_max 可自定义颜色范围</span></span>
<span id="cb24-683"><a href="#cb24-683" aria-hidden="true" tabindex="-1"></a><span class="fu">circlepackeR</span>(</span>
<span id="cb24-684"><a href="#cb24-684" aria-hidden="true" tabindex="-1"></a>    population,                 <span class="co"># 层级结构数据</span></span>
<span id="cb24-685"><a href="#cb24-685" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="st">"value"</span>,             <span class="co"># 用于圆面积的数值字段</span></span>
<span id="cb24-686"><a href="#cb24-686" aria-hidden="true" tabindex="-1"></a>    <span class="at">color_min =</span> <span class="st">"hsl(56,80%,80%)"</span>,   <span class="co"># 最小值对应的颜色</span></span>
<span id="cb24-687"><a href="#cb24-687" aria-hidden="true" tabindex="-1"></a>    <span class="at">color_max =</span> <span class="st">"hsl(341,30%,40%)"</span>   <span class="co"># 最大值对应的颜色</span></span>
<span id="cb24-688"><a href="#cb24-688" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-689"><a href="#cb24-689" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-690"><a href="#cb24-690" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-691"><a href="#cb24-691" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-692"><a href="#cb24-692" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-695"><a href="#cb24-695" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-696"><a href="#cb24-696" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "将 edge list 转换为嵌套结构并用 circlepackeR 绘制多层级圆形打包图"</span></span>
<span id="cb24-697"><a href="#cb24-697" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-698"><a href="#cb24-698" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载 circlepackeR 包，用于绘制交互式圆形打包图</span></span>
<span id="cb24-699"><a href="#cb24-699" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(circlepackeR)</span>
<span id="cb24-700"><a href="#cb24-700" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载 ggraph 包（本例未直接用到，但常用于网络可视化）</span></span>
<span id="cb24-701"><a href="#cb24-701" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggraph)</span>
<span id="cb24-702"><a href="#cb24-702" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-703"><a href="#cb24-703" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 packcircles 包内置的 flare 数据集，获取边列表</span></span>
<span id="cb24-704"><a href="#cb24-704" aria-hidden="true" tabindex="-1"></a>data_edge <span class="ot">&lt;-</span> flare<span class="sc">$</span>edges</span>
<span id="cb24-705"><a href="#cb24-705" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-706"><a href="#cb24-706" aria-hidden="true" tabindex="-1"></a><span class="co"># 提取每个节点名称的最后一级（去掉前面的分层前缀），便于后续分层</span></span>
<span id="cb24-707"><a href="#cb24-707" aria-hidden="true" tabindex="-1"></a>data_edge<span class="sc">$</span>from <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">".*</span><span class="sc">\\</span><span class="st">."</span>, <span class="st">""</span>, data_edge<span class="sc">$</span>from)</span>
<span id="cb24-708"><a href="#cb24-708" aria-hidden="true" tabindex="-1"></a>data_edge<span class="sc">$</span>to <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">".*</span><span class="sc">\\</span><span class="st">."</span>, <span class="st">""</span>, data_edge<span class="sc">$</span>to)</span>
<span id="cb24-709"><a href="#cb24-709" aria-hidden="true" tabindex="-1"></a><span class="co"># head(data_edge) # 查看处理后的边列表</span></span>
<span id="cb24-710"><a href="#cb24-710" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-711"><a href="#cb24-711" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载 data.tree 包，用于将边列表转换为树结构</span></span>
<span id="cb24-712"><a href="#cb24-712" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.tree)</span>
<span id="cb24-713"><a href="#cb24-713" aria-hidden="true" tabindex="-1"></a><span class="co"># 将边列表转换为树结构对象</span></span>
<span id="cb24-714"><a href="#cb24-714" aria-hidden="true" tabindex="-1"></a>data_tree <span class="ot">&lt;-</span> <span class="fu">FromDataFrameNetwork</span>(data_edge)</span>
<span id="cb24-715"><a href="#cb24-715" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-716"><a href="#cb24-716" aria-hidden="true" tabindex="-1"></a><span class="co"># 将树结构转换为嵌套数据框，提取每一层的名称</span></span>
<span id="cb24-717"><a href="#cb24-717" aria-hidden="true" tabindex="-1"></a>data_nested <span class="ot">&lt;-</span> <span class="fu">ToDataFrameTree</span>(</span>
<span id="cb24-718"><a href="#cb24-718" aria-hidden="true" tabindex="-1"></a>    data_tree,</span>
<span id="cb24-719"><a href="#cb24-719" aria-hidden="true" tabindex="-1"></a>    <span class="at">level1 =</span> <span class="cf">function</span>(x) x<span class="sc">$</span>path[<span class="dv">2</span>], <span class="co"># 第一层</span></span>
<span id="cb24-720"><a href="#cb24-720" aria-hidden="true" tabindex="-1"></a>    <span class="at">level2 =</span> <span class="cf">function</span>(x) x<span class="sc">$</span>path[<span class="dv">3</span>], <span class="co"># 第二层</span></span>
<span id="cb24-721"><a href="#cb24-721" aria-hidden="true" tabindex="-1"></a>    <span class="at">level3 =</span> <span class="cf">function</span>(x) x<span class="sc">$</span>path[<span class="dv">4</span>], <span class="co"># 第三层</span></span>
<span id="cb24-722"><a href="#cb24-722" aria-hidden="true" tabindex="-1"></a>    <span class="at">level4 =</span> <span class="cf">function</span>(x) x<span class="sc">$</span>path[<span class="dv">5</span>]  <span class="co"># 第四层</span></span>
<span id="cb24-723"><a href="#cb24-723" aria-hidden="true" tabindex="-1"></a>)[<span class="sc">-</span><span class="dv">1</span>, <span class="sc">-</span><span class="dv">1</span>] <span class="co"># 去除根节点和第一列（树结构自带的 name）</span></span>
<span id="cb24-724"><a href="#cb24-724" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-725"><a href="#cb24-725" aria-hidden="true" tabindex="-1"></a><span class="co"># 去除包含 NA 的行，只保留完整路径</span></span>
<span id="cb24-726"><a href="#cb24-726" aria-hidden="true" tabindex="-1"></a>data_nested <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(data_nested)</span>
<span id="cb24-727"><a href="#cb24-727" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-728"><a href="#cb24-728" aria-hidden="true" tabindex="-1"></a><span class="co"># 构建 pathString 字段，格式为 roots/level1/level2/level3/level4</span></span>
<span id="cb24-729"><a href="#cb24-729" aria-hidden="true" tabindex="-1"></a>data_nested<span class="sc">$</span>pathString <span class="ot">&lt;-</span> <span class="fu">paste</span>(</span>
<span id="cb24-730"><a href="#cb24-730" aria-hidden="true" tabindex="-1"></a>    <span class="st">"roots"</span>,</span>
<span id="cb24-731"><a href="#cb24-731" aria-hidden="true" tabindex="-1"></a>    data_nested<span class="sc">$</span>level1,</span>
<span id="cb24-732"><a href="#cb24-732" aria-hidden="true" tabindex="-1"></a>    data_nested<span class="sc">$</span>level2,</span>
<span id="cb24-733"><a href="#cb24-733" aria-hidden="true" tabindex="-1"></a>    data_nested<span class="sc">$</span>level3,</span>
<span id="cb24-734"><a href="#cb24-734" aria-hidden="true" tabindex="-1"></a>    data_nested<span class="sc">$</span>level4,</span>
<span id="cb24-735"><a href="#cb24-735" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">"/"</span></span>
<span id="cb24-736"><a href="#cb24-736" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-737"><a href="#cb24-737" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-738"><a href="#cb24-738" aria-hidden="true" tabindex="-1"></a><span class="co"># 设置每个叶节点的 value（圆面积），此处统一为 1</span></span>
<span id="cb24-739"><a href="#cb24-739" aria-hidden="true" tabindex="-1"></a>data_nested<span class="sc">$</span>value <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb24-740"><a href="#cb24-740" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-741"><a href="#cb24-741" aria-hidden="true" tabindex="-1"></a><span class="co"># 将嵌套数据框转换为树结构对象</span></span>
<span id="cb24-742"><a href="#cb24-742" aria-hidden="true" tabindex="-1"></a>data_Node <span class="ot">&lt;-</span> <span class="fu">as.Node</span>(data_nested)</span>
<span id="cb24-743"><a href="#cb24-743" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-744"><a href="#cb24-744" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 circlepackeR 绘制可缩放的多层级圆形打包图</span></span>
<span id="cb24-745"><a href="#cb24-745" aria-hidden="true" tabindex="-1"></a><span class="fu">circlepackeR</span>(data_Node, <span class="at">size =</span> <span class="st">"value"</span>)</span>
<span id="cb24-746"><a href="#cb24-746" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-747"><a href="#cb24-747" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>