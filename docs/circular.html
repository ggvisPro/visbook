<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>25&nbsp; Circular – 数据可视化探索(从入门到放弃)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./waffle.html" rel="next">
<link href="./dendrogram.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-364982630eef5352dd1537128a8ed5cb.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">

<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>

<script src="site_libs/d3-bundle-5.16.0/d3-bundle.min.js"></script>

<script src="site_libs/d3-lasso-0.0.5/d3-lasso.min.js"></script>

<script src="site_libs/save-svg-as-png-1.4.17/save-svg-as-png.min.js"></script>

<script src="site_libs/flatbush-4.4.0/flatbush.min.js"></script>

<link href="site_libs/ggiraphjs-0.8.10/ggiraphjs.min.css" rel="stylesheet">

<script src="site_libs/ggiraphjs-0.8.10/ggiraphjs.min.js"></script>

<script src="site_libs/girafe-binding-0.8.13/girafe.js"></script>

<script src="site_libs/d3-3.5.6/./d3.min.js"></script>

<link href="site_libs/circlepackeR-0.1/./style.css" rel="stylesheet">

<script src="site_libs/circlepackeR-binding-0.0.0.9000/circlepackeR.js"></script>



</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./part-of-a-whole.html">Part of a Whole</a></li><li class="breadcrumb-item"><a href="./circular.html"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Circular</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">数据可视化探索(从入门到放弃)</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quick_start.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">0 Quick start</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./distribution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Distribution</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./beeswarm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Beeswarm</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./histogram.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Histogram</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./boxplot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Boxplot</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./density.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Density</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ridgeline.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Ridgeline</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./violin.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Violin</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./correlation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Correlation</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./scatter.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Scatter</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./heatmap.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Heatmap</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./correlogram.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Correlogram</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./bubble.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Bubble</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./connected-scatter.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Conn-Scatter</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./density2d.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Density 2D</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./ranking.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Ranking</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./bar.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Bar</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./spider.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Spider</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wordcloud.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Wordcloud</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./parallel.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Parallel</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lollipop.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Lollipop</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cir-bar.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Cir-bar</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./table.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Table</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./part-of-a-whole.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Part of a Whole</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./group-bar.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Group bar</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./treemap.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Treemap</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./pie.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Pie</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./donut.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Donut</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dendrogram.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Dendrogram</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./circular.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Circular</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./waffle.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Waffle</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">evolution</span></span>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./summary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Summary</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#pkg" id="toc-pkg" class="nav-link active" data-scroll-target="#pkg"><span class="header-section-number">25.1</span> PKG</a></li>
  <li><a href="#one-level" id="toc-one-level" class="nav-link" data-scroll-target="#one-level"><span class="header-section-number">25.2</span> One level</a>
  <ul class="collapse">
  <li><a href="#basic" id="toc-basic" class="nav-link" data-scroll-target="#basic"><span class="header-section-number">25.2.1</span> Basic</a></li>
  <li><a href="#color" id="toc-color" class="nav-link" data-scroll-target="#color"><span class="header-section-number">25.2.2</span> Color</a></li>
  <li><a href="#space" id="toc-space" class="nav-link" data-scroll-target="#space"><span class="header-section-number">25.2.3</span> Space</a></li>
  <li><a href="#interactive" id="toc-interactive" class="nav-link" data-scroll-target="#interactive"><span class="header-section-number">25.2.4</span> Interactive</a></li>
  </ul></li>
  <li><a href="#several-levels" id="toc-several-levels" class="nav-link" data-scroll-target="#several-levels"><span class="header-section-number">25.3</span> Several levels</a>
  <ul class="collapse">
  <li><a href="#ggraph" id="toc-ggraph" class="nav-link" data-scroll-target="#ggraph"><span class="header-section-number">25.3.1</span> <code>ggraph()</code></a></li>
  <li><a href="#type" id="toc-type" class="nav-link" data-scroll-target="#type"><span class="header-section-number">25.3.2</span> type</a></li>
  <li><a href="#color-1" id="toc-color-1" class="nav-link" data-scroll-target="#color-1"><span class="header-section-number">25.3.3</span> color</a></li>
  <li><a href="#label" id="toc-label" class="nav-link" data-scroll-target="#label"><span class="header-section-number">25.3.4</span> label</a></li>
  <li><a href="#hide" id="toc-hide" class="nav-link" data-scroll-target="#hide"><span class="header-section-number">25.3.5</span> Hide</a></li>
  <li><a href="#特定-label" id="toc-特定-label" class="nav-link" data-scroll-target="#特定-label"><span class="header-section-number">25.3.6</span> 特定 label</a></li>
  <li><a href="#可缩放" id="toc-可缩放" class="nav-link" data-scroll-target="#可缩放"><span class="header-section-number">25.3.7</span> 可缩放</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./part-of-a-whole.html">Part of a Whole</a></li><li class="breadcrumb-item"><a href="./circular.html"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Circular</span></a></li></ol></nav>
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span id="sec-circular" class="quarto-section-identifier"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Circular</span></span></h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="pkg" class="level2" data-number="25.1">
<h2 data-number="25.1" class="anchored" data-anchor-id="pkg"><span class="header-section-number">25.1</span> PKG</h2>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(packcircles) <span class="co"># for packing circles</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) <span class="co"># for data manipulation and visualization</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis) <span class="co"># for color palettes</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggiraph) <span class="co"># for interactive plots</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggraph) <span class="co"># for graph visualization</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(igraph) <span class="co"># for graph manipulation</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># remotes::install_github("jeromefroe/circlepackeR")</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(circlepackeR) <span class="co"># for interactive circle packing</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.tree)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="one-level" class="level2" data-number="25.2">
<h2 data-number="25.2" class="anchored" data-anchor-id="one-level"><span class="header-section-number">25.2</span> One level</h2>
<section id="basic" class="level3" data-number="25.2.1">
<h3 data-number="25.2.1" class="anchored" data-anchor-id="basic"><span class="header-section-number">25.2.1</span> Basic</h3>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(packcircles)  <span class="co"># 加载 packcircles 包，用于圆形打包</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)      <span class="co"># 加载 ggplot2 包，用于绘图</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 创建数据框，包含分组名称和对应的数值</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> <span class="fu">paste</span>(<span class="st">"Group"</span>, letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>]),   <span class="co"># 生成 20 个分组名</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">value =</span> <span class="fu">sample</span>(<span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">100</span>), <span class="dv">20</span>)          <span class="co"># 随机生成 20 个 1~100 之间的数值</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 生成圆形打包布局，返回每个圆的中心坐标 (x, y) 和半径 (radius)</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="co"># sizetype='area' 表示半径根据面积成比例分配</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>packing <span class="ot">&lt;-</span> <span class="fu">circleProgressiveLayout</span>(data<span class="sc">$</span>value, <span class="at">sizetype =</span> <span class="st">'area'</span>)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="co"># 将打包信息（中心坐标和半径）合并到原始数据框中</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">cbind</span>(data, packing)</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="co"># 检查半径与数值的关系（可选）</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="co"># plot(data$radius, data$value)</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="co"># 根据每个圆的中心和半径，生成用于绘制圆形的多边形顶点坐标</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a><span class="co"># npoints=50 表示每个圆用 50 个点近似</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>dat.gg <span class="ot">&lt;-</span> <span class="fu">circleLayoutVertices</span>(packing, <span class="at">npoints =</span> <span class="dv">50</span>)</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a><span class="co"># 绘制圆形打包图</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制圆形多边形（气泡）</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_polygon</span>(</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> dat.gg,</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">group =</span> id, <span class="at">fill =</span> <span class="fu">as.factor</span>(id)),</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">"black"</span>, <span class="at">alpha =</span> <span class="fl">0.6</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 在每个圆心添加文本标签，并根据 value 控制字体大小</span></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> data,</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">size =</span> value, <span class="at">label =</span> group)</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>)) <span class="sc">+</span>  <span class="co"># 设置字体大小范围</span></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置主题为无坐标轴、无背景</span></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span>         <span class="co"># 不显示图例</span></span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_equal</span>()                             <span class="co"># 保持 x、y 轴比例相等</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>Circle packing with packcircles</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="color" class="level3" data-number="25.2.2">
<h3 data-number="25.2.2" class="anchored" data-anchor-id="color"><span class="header-section-number">25.2.2</span> Color</h3>
<p>使用自定义调色板（magma）进行圆形打包可视化:</p>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggplot2 绘制圆形打包图，并自定义颜色</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制圆形多边形（气泡），每个圆用不同颜色填充</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_polygon</span>(</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> dat.gg,</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">group =</span> id, <span class="at">fill =</span> <span class="fu">as.factor</span>(id)), <span class="co"># 按 id 分组并填充颜色</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">"black"</span>,    <span class="co"># 圆边界为黑色</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">alpha =</span> <span class="fl">0.6</span>          <span class="co"># 设置透明度</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 使用 viridis 包中的 magma 调色板为每个圆分配颜色</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">magma</span>(<span class="fu">nrow</span>(data))) <span class="sc">+</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 在每个圆心添加文本标签，字体大小与 value 成比例</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> data,</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">size =</span> value, <span class="at">label =</span> group)</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>)) <span class="sc">+</span>  <span class="co"># 设置字体大小范围</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>                            <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span>         <span class="co"># 不显示图例</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_equal</span>()                             <span class="co"># 保持 x、y 轴比例相等</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>使用自定义调色板（magma）进行圆形打包可视化</figcaption>
</figure>
</div>
</div>
</div>
<p>使用渐变色（BuPu 调色板）根据 value 显示圆形打包图:</p>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 首先，将每个分组的 value 添加到 dat.gg 数据框中。</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 由于每个圆形多边形由 51 个点近似（npoints=50，首尾闭合），所以每个 value 需要重复 51 次。</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>dat.gg<span class="sc">$</span>value <span class="ot">&lt;-</span> <span class="fu">rep</span>(data<span class="sc">$</span>value, <span class="at">each =</span> <span class="dv">51</span>)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 绘制圆形打包图</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制圆形多边形（气泡），根据 value 使用渐变色填充</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_polygon</span>(</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> dat.gg,</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">group =</span> id, <span class="at">fill =</span> value),   <span class="co"># 按 value 渐变填充</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">"black"</span>,                      <span class="co"># 边界为黑色</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">alpha =</span> <span class="fl">0.6</span>                            <span class="co"># 设置透明度</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_distiller</span>(<span class="at">palette =</span> <span class="st">"BuPu"</span>, <span class="at">direction =</span> <span class="dv">1</span>) <span class="sc">+</span>  <span class="co"># 使用 BuPu 调色板</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 在每个圆心添加文本标签，字体大小与 value 成比例</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> data,</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">size =</span> value, <span class="at">label =</span> group)</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>)) <span class="sc">+</span>  <span class="co"># 设置字体大小范围</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置主题为无坐标轴、无背景</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span>         <span class="co"># 不显示图例</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_equal</span>()                             <span class="co"># 保持 x、y 轴比例相等</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>使用渐变色（BuPu 调色板）根据 value 显示圆形打包图</figcaption>
</figure>
</div>
</div>
</div>
<p>通过 theme() 函数及其 plot.background() 参数更改背景:</p>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggplot2 绘制圆形打包图，并设置黑色背景和自定义标题</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 绘制圆形多边形（气泡），根据 value 使用渐变色填充</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> dat.gg, </span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(x, y, <span class="at">group =</span> id, <span class="at">fill =</span> value),   <span class="co"># 按 value 渐变填充</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"grey"</span>,                       <span class="co"># 边界为灰色</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="fl">0.6</span>,                           <span class="co"># 设置透明度</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> .<span class="dv">5</span>                              <span class="co"># 边界线宽</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_distiller</span>(<span class="at">palette =</span> <span class="st">"Spectral"</span>, <span class="at">direction =</span> <span class="dv">1</span> ) <span class="sc">+</span>  <span class="co"># 使用 Spectral 调色板</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 在每个圆心添加标签，字体大小与 value 成比例</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label</span>(</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> data, </span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(x, y, <span class="at">size =</span> value, <span class="at">label =</span> group) <span class="co"># 标签内容为分组名</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>)) <span class="sc">+</span> <span class="co"># 设置字体大小范围</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 设置主题为无坐标轴、无背景，并自定义背景和标题颜色</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>()  <span class="sc">+</span> </span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span>,                        <span class="co"># 不显示图例</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"black"</span>),  <span class="co"># 设置背景为黑色</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"white"</span>)       <span class="co"># 标题字体为白色</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_equal</span>() <span class="sc">+</span>                                    <span class="co"># 保持 x、y 轴比例相等</span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"A custom circle packing with</span><span class="sc">\n</span><span class="st">black background"</span>) <span class="co"># 添加标题</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>自定义黑色背景的圆形打包图，使用Spectral调色板和标签</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="space" class="level3" data-number="25.2.3">
<h3 data-number="25.2.3" class="anchored" data-anchor-id="space"><span class="header-section-number">25.2.3</span> Space</h3>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 创建数据框，包含分组名称和对应的数值</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">group =</span> <span class="fu">paste</span>(<span class="st">"Group"</span>, letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>]),</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">value =</span> <span class="fu">sample</span>(<span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">100</span>), <span class="dv">20</span>)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 生成布局</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>packing <span class="ot">&lt;-</span> <span class="fu">circleProgressiveLayout</span>(data<span class="sc">$</span>value, <span class="at">sizetype =</span> <span class="st">'area'</span>)</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>packing<span class="sc">$</span>radius <span class="ot">&lt;-</span> <span class="fl">0.95</span> <span class="sc">*</span> packing<span class="sc">$</span>radius <span class="co"># 让直径小于 1, 留有空隙</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">cbind</span>(data, packing)</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>dat.gg <span class="ot">&lt;-</span> <span class="fu">circleLayoutVertices</span>(packing, <span class="at">npoints =</span> <span class="dv">50</span>)</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggplot2 绘制圆形打包图，采用 viridis 调色板</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制圆形多边形（气泡），每个圆用不同颜色填充</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_polygon</span>(</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> dat.gg,                           <span class="co"># 多边形顶点数据</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">group =</span> id, <span class="at">fill =</span> id),        <span class="co"># 按 id 分组并填充颜色</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">"black"</span>,                        <span class="co"># 边界为黑色</span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">alpha =</span> <span class="fl">0.6</span>                              <span class="co"># 设置透明度</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis</span>() <span class="sc">+</span>                     <span class="co"># 使用 viridis 调色板</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 在每个圆心添加文本标签，字体大小与 value 成比例</span></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> data,                             <span class="co"># 圆心及标签数据</span></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">size =</span> value, <span class="at">label =</span> group),  <span class="co"># 设置圆心坐标、字体大小和标签内容</span></span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="st">"black"</span>                          <span class="co"># 标签字体颜色为黑色</span></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>                             <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span>          <span class="co"># 不显示图例</span></span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_equal</span>()                              <span class="co"># 保持 x、y 轴比例相等</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>使用 viridis 调色板展示圆形打包图</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="interactive" class="level3" data-number="25.2.4">
<h3 data-number="25.2.4" class="anchored" data-anchor-id="interactive"><span class="header-section-number">25.2.4</span> Interactive</h3>
<p>使用 <code>ggiraph::girafe()</code> 函数生成交互式圆形打包图，悬停查看详细信息:</p>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载所需包</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(packcircles)   <span class="co"># 用于圆形打包布局</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)       <span class="co"># 用于绘图</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis)       <span class="co"># 用于配色</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggiraph)       <span class="co"># 用于交互式图形</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 创建数据框，包含分组名称和对应的数值</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> <span class="fu">paste</span>(</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Group_"</span>,</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sample</span>(letters, <span class="dv">70</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>),  <span class="co"># 随机生成 70 个字母</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sample</span>(letters, <span class="dv">70</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>),</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sample</span>(letters, <span class="dv">70</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>),</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">sep =</span> <span class="st">""</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">value =</span> <span class="fu">sample</span>(<span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">70</span>), <span class="dv">70</span>)          <span class="co"># 随机生成 70 个 1~70 之间的数值</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a><span class="co"># 添加文本列，用于气泡悬停时显示详细信息</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>text <span class="ot">&lt;-</span> <span class="fu">paste</span>(</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>    <span class="st">"name: "</span>, data<span class="sc">$</span>group, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>    <span class="st">"value: "</span>, data<span class="sc">$</span>value, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>    <span class="st">"You can add a story here!"</span></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a><span class="co"># 生成圆形打包布局，返回每个圆的中心坐标 (x, y) 和半径 (radius)</span></span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>packing <span class="ot">&lt;-</span> <span class="fu">circleProgressiveLayout</span>(data<span class="sc">$</span>value, <span class="at">sizetype =</span> <span class="st">'area'</span>)</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">cbind</span>(data, packing)</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a><span class="co"># 根据每个圆的中心和半径，生成用于绘制圆形的多边形顶点坐标</span></span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>dat.gg <span class="ot">&lt;-</span> <span class="fu">circleLayoutVertices</span>(packing, <span class="at">npoints =</span> <span class="dv">50</span>)</span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a><span class="co"># 绘制交互式圆形打包图</span></span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制交互式圆形多边形（气泡），可悬停显示 tooltip</span></span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_polygon_interactive</span>(</span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> dat.gg,</span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(</span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a>            x, y, <span class="at">group =</span> id, <span class="at">fill =</span> id,</span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a>            <span class="at">tooltip =</span> data<span class="sc">$</span>text[id],   <span class="co"># 悬停显示的文本</span></span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a>            <span class="at">data_id =</span> id               <span class="co"># 交互用的唯一标识</span></span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">"black"</span>,            <span class="co"># 边界为黑色</span></span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a>        <span class="at">alpha =</span> <span class="fl">0.6</span>                  <span class="co"># 设置透明度</span></span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis</span>() <span class="sc">+</span>         <span class="co"># 使用 viridis 调色板</span></span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 在每个圆心添加文本标签，去掉 "Group_" 前缀</span></span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(</span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> data,</span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">label =</span> <span class="fu">gsub</span>(<span class="st">"Group_"</span>, <span class="st">""</span>, group)),</span>
<span id="cb7-51"><a href="#cb7-51" aria-hidden="true" tabindex="-1"></a>        <span class="at">size =</span> <span class="dv">2</span>,</span>
<span id="cb7-52"><a href="#cb7-52" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="st">"black"</span></span>
<span id="cb7-53"><a href="#cb7-53" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb7-54"><a href="#cb7-54" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>                 <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb7-55"><a href="#cb7-55" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb7-56"><a href="#cb7-56" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">"none"</span>, </span>
<span id="cb7-57"><a href="#cb7-57" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.margin =</span> <span class="fu">unit</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>), <span class="st">"cm"</span>)  <span class="co"># 去除边距</span></span>
<span id="cb7-58"><a href="#cb7-58" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb7-59"><a href="#cb7-59" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_equal</span>()                  <span class="co"># 保持 x、y 轴比例相等</span></span>
<span id="cb7-60"><a href="#cb7-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-61"><a href="#cb7-61" aria-hidden="true" tabindex="-1"></a><span class="co"># 生成交互式图形</span></span>
<span id="cb7-62"><a href="#cb7-62" aria-hidden="true" tabindex="-1"></a><span class="fu">girafe</span>(<span class="at">ggobj =</span> p) <span class="co"># 旧版本用 ggiraph()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="girafe html-widget html-fill-item" id="htmlwidget-1039c1c697e5b6ee9105" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-1039c1c697e5b6ee9105">{"x":{"html":"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' class='ggiraph-svg' role='graphics-document' id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25' viewBox='0 0 504 360'>\n <defs id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_defs'>\n  <clipPath id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_c1'>\n   <rect x='0' y='0' width='504' height='360'/>\n  <\/clipPath>\n  <clipPath id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_c2'>\n   <rect x='50.8' y='0' width='402.39' height='360'/>\n  <\/clipPath>\n <\/defs>\n <g id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_rootg' class='ggiraph-svg-rootg'>\n  <g clip-path='url(#svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_c1)'>\n   <rect x='0' y='0' width='504' height='360' fill='#FFFFFF' fill-opacity='1' stroke='#FFFFFF' stroke-opacity='1' stroke-width='0.75' stroke-linejoin='round' stroke-linecap='round' class='ggiraph-svg-bg'/>\n  <\/g>\n  <g clip-path='url(#svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_c2)'>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e1' points='257.95,189.80 257.83,187.86 257.46,185.96 256.86,184.11 256.04,182.36 255.00,180.72 253.76,179.23 252.35,177.90 250.78,176.76 249.08,175.83 247.28,175.11 245.40,174.63 243.48,174.39 241.54,174.39 239.62,174.63 237.74,175.11 235.93,175.83 234.24,176.76 232.67,177.90 231.25,179.23 230.02,180.72 228.98,182.36 228.15,184.11 227.55,185.96 227.19,187.86 227.07,189.80 227.19,191.73 227.55,193.64 228.15,195.48 228.98,197.24 230.02,198.87 231.25,200.37 232.67,201.70 234.24,202.83 235.93,203.77 237.74,204.48 239.62,204.96 241.54,205.21 243.48,205.21 245.40,204.96 247.28,204.48 249.08,203.77 250.78,202.83 252.35,201.70 253.76,200.37 255.00,198.87 256.04,197.24 256.86,195.48 257.46,193.64 257.83,191.73 257.95,189.80' fill='#440154' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_tkv &amp;lt;br/&amp;gt; value:  28 &amp;lt;br/&amp;gt; You can add a story here!' data-id='1'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e2' points='292.96,189.80 292.83,187.60 292.41,185.44 291.73,183.35 290.80,181.36 289.62,179.51 288.22,177.81 286.62,176.31 284.84,175.02 282.91,173.96 280.87,173.15 278.74,172.60 276.56,172.33 274.36,172.33 272.18,172.60 270.05,173.15 268.00,173.96 266.08,175.02 264.30,176.31 262.69,177.81 261.29,179.51 260.11,181.36 259.18,183.35 258.50,185.44 258.09,187.60 257.95,189.80 258.09,191.99 258.50,194.15 259.18,196.24 260.11,198.23 261.29,200.09 262.69,201.78 264.30,203.29 266.08,204.58 268.00,205.64 270.05,206.45 272.18,207.00 274.36,207.27 276.56,207.27 278.74,207.00 280.87,206.45 282.91,205.64 284.84,204.58 286.62,203.29 288.22,201.78 289.62,200.09 290.80,198.23 291.73,196.24 292.41,194.15 292.83,191.99 292.96,189.80' fill='#46065A' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_hqo &amp;lt;br/&amp;gt; value:  36 &amp;lt;br/&amp;gt; You can add a story here!' data-id='2'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e3' points='278.96,224.95 278.78,222.14 278.25,219.38 277.38,216.70 276.18,214.16 274.68,211.78 272.88,209.61 270.83,207.68 268.55,206.03 266.09,204.67 263.47,203.64 260.74,202.94 257.95,202.59 255.14,202.59 252.34,202.94 249.62,203.64 247.00,204.67 244.53,206.03 242.26,207.68 240.20,209.61 238.41,211.78 236.90,214.16 235.70,216.70 234.83,219.38 234.31,222.14 234.13,224.95 234.31,227.76 234.83,230.53 235.70,233.20 236.90,235.75 238.41,238.13 240.20,240.30 242.26,242.22 244.53,243.88 247.00,245.23 249.62,246.27 252.34,246.97 255.14,247.32 257.95,247.32 260.74,246.97 263.47,246.27 266.09,245.23 268.55,243.88 270.83,242.22 272.88,240.30 274.68,238.13 276.18,235.75 277.38,233.20 278.25,230.53 278.78,227.76 278.96,224.95' fill='#460C5F' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_pag &amp;lt;br/&amp;gt; value:  59 &amp;lt;br/&amp;gt; You can add a story here!' data-id='3'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e4' points='237.95,210.00 237.88,208.90 237.68,207.82 237.34,206.78 236.87,205.78 236.28,204.86 235.58,204.01 234.78,203.26 233.89,202.61 232.92,202.08 231.90,201.68 230.84,201.40 229.75,201.26 228.65,201.26 227.56,201.40 226.49,201.68 225.47,202.08 224.51,202.61 223.62,203.26 222.82,204.01 222.12,204.86 221.53,205.78 221.06,206.78 220.72,207.82 220.51,208.90 220.44,210.00 220.51,211.10 220.72,212.18 221.06,213.22 221.53,214.22 222.12,215.15 222.82,215.99 223.62,216.75 224.51,217.39 225.47,217.92 226.49,218.33 227.56,218.60 228.65,218.74 229.75,218.74 230.84,218.60 231.90,218.33 232.92,217.92 233.89,217.39 234.78,216.75 235.58,215.99 236.28,215.15 236.87,214.22 237.34,213.22 237.68,212.18 237.88,211.10 237.95,210.00' fill='#471164' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_emc &amp;lt;br/&amp;gt; value:  9 &amp;lt;br/&amp;gt; You can add a story here!' data-id='4'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e5' points='227.35,193.81 227.24,192.09 226.92,190.41 226.39,188.77 225.65,187.22 224.73,185.77 223.64,184.44 222.38,183.26 220.99,182.25 219.49,181.43 217.89,180.79 216.22,180.37 214.52,180.15 212.80,180.15 211.10,180.37 209.43,180.79 207.83,181.43 206.33,182.25 204.94,183.26 203.68,184.44 202.59,185.77 201.67,187.22 200.94,188.77 200.40,190.41 200.08,192.09 199.97,193.81 200.08,195.53 200.40,197.21 200.94,198.85 201.67,200.40 202.59,201.85 203.68,203.18 204.94,204.36 206.33,205.37 207.83,206.19 209.43,206.83 211.10,207.25 212.80,207.47 214.52,207.47 216.22,207.25 217.89,206.83 219.49,206.19 220.99,205.37 222.38,204.36 223.64,203.18 224.73,201.85 225.65,200.40 226.39,198.85 226.92,197.21 227.24,195.53 227.35,193.81' fill='#481769' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_awo &amp;lt;br/&amp;gt; value:  22 &amp;lt;br/&amp;gt; You can add a story here!' data-id='5'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e6' points='244.50,157.32 244.31,154.38 243.76,151.47 242.85,148.66 241.59,145.99 240.01,143.50 238.12,141.22 235.97,139.20 233.58,137.46 230.99,136.04 228.24,134.95 225.38,134.22 222.45,133.85 219.50,133.85 216.57,134.22 213.70,134.95 210.96,136.04 208.37,137.46 205.98,139.20 203.83,141.22 201.94,143.50 200.36,145.99 199.10,148.66 198.19,151.47 197.63,154.38 197.45,157.32 197.63,160.27 198.19,163.18 199.10,165.98 200.36,168.66 201.94,171.15 203.83,173.43 205.98,175.45 208.37,177.19 210.96,178.61 213.70,179.70 216.57,180.43 219.50,180.80 222.45,180.80 225.38,180.43 228.24,179.70 230.99,178.61 233.58,177.19 235.97,175.45 238.12,173.43 240.01,171.15 241.59,168.66 242.85,165.98 243.76,163.18 244.31,160.27 244.50,157.32' fill='#481B6D' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_uaw &amp;lt;br/&amp;gt; value:  65 &amp;lt;br/&amp;gt; You can add a story here!' data-id='6'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e7' points='285.57,153.14 285.40,150.55 284.92,148.01 284.12,145.54 283.01,143.20 281.63,141.01 279.97,139.01 278.09,137.24 275.99,135.72 273.72,134.47 271.31,133.52 268.80,132.87 266.23,132.55 263.64,132.55 261.07,132.87 258.56,133.52 256.15,134.47 253.88,135.72 251.78,137.24 249.89,139.01 248.24,141.01 246.85,143.20 245.75,145.54 244.95,148.01 244.46,150.55 244.30,153.14 244.46,155.72 244.95,158.27 245.75,160.73 246.85,163.08 248.24,165.27 249.89,167.26 251.78,169.04 253.88,170.56 256.15,171.81 258.56,172.76 261.07,173.41 263.64,173.73 266.23,173.73 268.80,173.41 271.31,172.76 273.72,171.81 275.99,170.56 278.09,169.04 279.97,167.26 281.63,165.27 283.01,163.08 284.12,160.73 284.92,158.27 285.40,155.72 285.57,153.14' fill='#482071' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_dap &amp;lt;br/&amp;gt; value:  50 &amp;lt;br/&amp;gt; You can add a story here!' data-id='7'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e8' points='327.21,164.78 327.04,162.07 326.53,159.40 325.69,156.82 324.53,154.36 323.08,152.06 321.34,149.97 319.36,148.11 317.17,146.51 314.78,145.20 312.26,144.20 309.62,143.53 306.93,143.19 304.21,143.19 301.52,143.53 298.88,144.20 296.36,145.20 293.97,146.51 291.78,148.11 289.80,149.97 288.06,152.06 286.61,154.36 285.45,156.82 284.61,159.40 284.10,162.07 283.93,164.78 284.10,167.50 284.61,170.17 285.45,172.75 286.61,175.21 288.06,177.50 289.80,179.60 291.78,181.46 293.97,183.06 296.36,184.36 298.88,185.37 301.52,186.04 304.21,186.38 306.93,186.38 309.62,186.04 312.26,185.37 314.78,184.36 317.17,183.06 319.36,181.46 321.34,179.60 323.08,177.50 324.53,175.21 325.69,172.75 326.53,170.17 327.04,167.50 327.21,164.78' fill='#482576' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_hha &amp;lt;br/&amp;gt; value:  55 &amp;lt;br/&amp;gt; You can add a story here!' data-id='8'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e9' points='330.87,207.25 330.70,204.62 330.21,202.02 329.39,199.51 328.27,197.12 326.85,194.88 325.17,192.85 323.24,191.04 321.10,189.49 318.79,188.21 316.33,187.24 313.77,186.58 311.15,186.25 308.51,186.25 305.88,186.58 303.33,187.24 300.87,188.21 298.55,189.49 296.42,191.04 294.49,192.85 292.80,194.88 291.39,197.12 290.26,199.51 289.45,202.02 288.95,204.62 288.79,207.25 288.95,209.89 289.45,212.49 290.26,215.00 291.39,217.39 292.80,219.62 294.49,221.66 296.42,223.47 298.55,225.02 300.87,226.29 303.33,227.26 305.88,227.92 308.51,228.25 311.15,228.25 313.77,227.92 316.33,227.26 318.79,226.29 321.10,225.02 323.24,223.47 325.17,221.66 326.85,219.62 328.27,217.39 329.39,215.00 330.21,212.49 330.70,209.89 330.87,207.25' fill='#472A7A' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_dpq &amp;lt;br/&amp;gt; value:  52 &amp;lt;br/&amp;gt; You can add a story here!' data-id='9'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e10' points='318.16,248.76 317.98,245.88 317.44,243.05 316.55,240.31 315.32,237.69 313.77,235.26 311.93,233.04 309.83,231.06 307.50,229.36 304.97,227.97 302.29,226.91 299.49,226.19 296.63,225.83 293.74,225.83 290.88,226.19 288.09,226.91 285.40,227.97 282.87,229.36 280.54,231.06 278.44,233.04 276.60,235.26 275.05,237.69 273.82,240.31 272.93,243.05 272.39,245.88 272.21,248.76 272.39,251.64 272.93,254.48 273.82,257.22 275.05,259.83 276.60,262.27 278.44,264.49 280.54,266.47 282.87,268.16 285.40,269.55 288.09,270.61 290.88,271.33 293.74,271.69 296.63,271.69 299.49,271.33 302.29,270.61 304.97,269.55 307.50,268.16 309.83,266.47 311.93,264.49 313.77,262.27 315.32,259.83 316.55,257.22 317.44,254.48 317.98,251.64 318.16,248.76' fill='#472E7C' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_duu &amp;lt;br/&amp;gt; value:  62 &amp;lt;br/&amp;gt; You can add a story here!' data-id='10'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e11' points='234.45,229.65 234.36,228.14 234.07,226.66 233.61,225.22 232.96,223.85 232.15,222.58 231.19,221.41 230.09,220.38 228.87,219.49 227.54,218.76 226.14,218.21 224.68,217.83 223.18,217.64 221.67,217.64 220.17,217.83 218.70,218.21 217.30,218.76 215.97,219.49 214.75,220.38 213.65,221.41 212.69,222.58 211.88,223.85 211.23,225.22 210.77,226.66 210.48,228.14 210.39,229.65 210.48,231.16 210.77,232.64 211.23,234.08 211.88,235.45 212.69,236.72 213.65,237.89 214.75,238.92 215.97,239.81 217.30,240.54 218.70,241.09 220.17,241.47 221.67,241.66 223.18,241.66 224.68,241.47 226.14,241.09 227.54,240.54 228.87,239.81 230.09,238.92 231.19,237.89 232.15,236.72 232.96,235.45 233.61,234.08 234.07,232.64 234.36,231.16 234.45,229.65' fill='#46337F' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_ygd &amp;lt;br/&amp;gt; value:  17 &amp;lt;br/&amp;gt; You can add a story here!' data-id='11'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e12' points='212.57,218.61 212.44,216.47 212.04,214.37 211.38,212.34 210.47,210.41 209.32,208.60 207.96,206.96 206.40,205.50 204.67,204.24 202.80,203.21 200.82,202.42 198.75,201.89 196.63,201.62 194.49,201.62 192.37,201.89 190.30,202.42 188.31,203.21 186.44,204.24 184.71,205.50 183.15,206.96 181.79,208.60 180.65,210.41 179.74,212.34 179.08,214.37 178.68,216.47 178.54,218.61 178.68,220.74 179.08,222.84 179.74,224.87 180.65,226.80 181.79,228.61 183.15,230.25 184.71,231.71 186.44,232.97 188.31,234.00 190.30,234.79 192.37,235.32 194.49,235.59 196.63,235.59 198.75,235.32 200.82,234.79 202.80,234.00 204.67,232.97 206.40,231.71 207.96,230.25 209.32,228.61 210.47,226.80 211.38,224.87 212.04,222.84 212.44,220.74 212.57,218.61' fill='#453882' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_ajn &amp;lt;br/&amp;gt; value:  34 &amp;lt;br/&amp;gt; You can add a story here!' data-id='12'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e13' points='277.21,269.38 277.03,266.61 276.52,263.90 275.66,261.27 274.48,258.76 273.00,256.43 271.24,254.29 269.22,252.40 266.98,250.78 264.56,249.44 261.99,248.42 259.31,247.74 256.56,247.39 253.79,247.39 251.05,247.74 248.37,248.42 245.80,249.44 243.37,250.78 241.14,252.40 239.12,254.29 237.36,256.43 235.87,258.76 234.69,261.27 233.84,263.90 233.32,266.61 233.15,269.38 233.32,272.14 233.84,274.85 234.69,277.49 235.87,279.99 237.36,282.32 239.12,284.46 241.14,286.35 243.37,287.98 245.80,289.31 248.37,290.33 251.05,291.01 253.79,291.36 256.56,291.36 259.31,291.01 261.99,290.33 264.56,289.31 266.98,287.98 269.22,286.35 271.24,284.46 273.00,282.32 274.48,279.99 275.66,277.49 276.52,274.85 277.03,272.14 277.21,269.38' fill='#443C84' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_gvj &amp;lt;br/&amp;gt; value:  57 &amp;lt;br/&amp;gt; You can add a story here!' data-id='13'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e14' points='233.64,262.75 233.45,259.85 232.91,256.99 232.01,254.23 230.77,251.59 229.21,249.14 227.36,246.90 225.24,244.91 222.89,243.20 220.34,241.80 217.63,240.72 214.82,240.00 211.93,239.64 209.02,239.64 206.14,240.00 203.32,240.72 200.61,241.80 198.07,243.20 195.71,244.91 193.59,246.90 191.74,249.14 190.18,251.59 188.94,254.23 188.04,256.99 187.50,259.85 187.32,262.75 187.50,265.65 188.04,268.51 188.94,271.28 190.18,273.91 191.74,276.36 193.59,278.61 195.71,280.60 198.07,282.31 200.61,283.71 203.32,284.78 206.14,285.50 209.02,285.87 211.93,285.87 214.82,285.50 217.63,284.78 220.34,283.71 222.89,282.31 225.24,280.60 227.36,278.61 229.21,276.36 230.77,273.91 232.01,271.28 232.91,268.51 233.45,265.65 233.64,262.75' fill='#424086' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_tvx &amp;lt;br/&amp;gt; value:  63 &amp;lt;br/&amp;gt; You can add a story here!' data-id='14'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e15' points='249.62,136.99 249.57,136.17 249.42,135.37 249.17,134.59 248.82,133.85 248.38,133.15 247.85,132.52 247.26,131.96 246.59,131.48 245.88,131.09 245.11,130.78 244.32,130.58 243.51,130.48 242.69,130.48 241.88,130.58 241.08,130.78 240.32,131.09 239.60,131.48 238.94,131.96 238.34,132.52 237.82,133.15 237.38,133.85 237.03,134.59 236.78,135.37 236.63,136.17 236.57,136.99 236.63,137.81 236.78,138.61 237.03,139.39 237.38,140.13 237.82,140.83 238.34,141.46 238.94,142.02 239.60,142.50 240.32,142.89 241.08,143.20 241.88,143.40 242.69,143.50 243.51,143.50 244.32,143.40 245.11,143.20 245.88,142.89 246.59,142.50 247.26,142.02 247.85,141.46 248.38,140.83 248.82,140.13 249.17,139.39 249.42,138.61 249.57,137.81 249.62,136.99' fill='#404588' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_kdx &amp;lt;br/&amp;gt; value:  5 &amp;lt;br/&amp;gt; You can add a story here!' data-id='15'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e16' points='265.96,122.64 265.87,121.18 265.59,119.74 265.14,118.34 264.51,117.02 263.73,115.78 262.79,114.65 261.73,113.65 260.54,112.78 259.26,112.08 257.89,111.54 256.47,111.17 255.02,110.99 253.55,110.99 252.10,111.17 250.68,111.54 249.32,112.08 248.03,112.78 246.85,113.65 245.78,114.65 244.84,115.78 244.06,117.02 243.43,118.34 242.98,119.74 242.71,121.18 242.61,122.64 242.71,124.10 242.98,125.54 243.43,126.94 244.06,128.26 244.84,129.50 245.78,130.63 246.85,131.63 248.03,132.49 249.32,133.20 250.68,133.74 252.10,134.10 253.55,134.29 255.02,134.29 256.47,134.10 257.89,133.74 259.26,133.20 260.54,132.49 261.73,131.63 262.79,130.63 263.73,129.50 264.51,128.26 265.14,126.94 265.59,125.54 265.87,124.10 265.96,122.64' fill='#3F4889' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_tix &amp;lt;br/&amp;gt; value:  16 &amp;lt;br/&amp;gt; You can add a story here!' data-id='16'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e17' points='296.24,121.19 296.12,119.29 295.77,117.42 295.18,115.61 294.37,113.89 293.35,112.28 292.13,110.81 290.75,109.51 289.20,108.39 287.54,107.47 285.77,106.77 283.92,106.30 282.03,106.06 280.13,106.06 278.24,106.30 276.40,106.77 274.62,107.47 272.96,108.39 271.42,109.51 270.03,110.81 268.81,112.28 267.79,113.89 266.98,115.61 266.40,117.42 266.04,119.29 265.92,121.19 266.04,123.09 266.40,124.96 266.98,126.77 267.79,128.50 268.81,130.10 270.03,131.57 271.42,132.88 272.96,133.99 274.62,134.91 276.40,135.61 278.24,136.09 280.13,136.32 282.03,136.32 283.92,136.09 285.77,135.61 287.54,134.91 289.20,133.99 290.75,132.88 292.13,131.57 293.35,130.10 294.37,128.50 295.18,126.77 295.77,124.96 296.12,123.09 296.24,121.19' fill='#3D4D8A' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_jeq &amp;lt;br/&amp;gt; value:  27 &amp;lt;br/&amp;gt; You can add a story here!' data-id='17'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e18' points='336.53,124.33 336.38,121.80 335.90,119.30 335.12,116.89 334.03,114.59 332.67,112.45 331.06,110.49 329.20,108.76 327.15,107.26 324.93,106.04 322.57,105.11 320.11,104.47 317.59,104.16 315.05,104.16 312.53,104.47 310.07,105.11 307.71,106.04 305.49,107.26 303.43,108.76 301.58,110.49 299.96,112.45 298.60,114.59 297.52,116.89 296.74,119.30 296.26,121.80 296.10,124.33 296.26,126.87 296.74,129.36 297.52,131.77 298.60,134.07 299.96,136.21 301.58,138.17 303.43,139.91 305.49,141.40 307.71,142.62 310.07,143.56 312.53,144.19 315.05,144.51 317.59,144.51 320.11,144.19 322.57,143.56 324.93,142.62 327.15,141.40 329.20,139.91 331.06,138.17 332.67,136.21 334.03,134.07 335.12,131.77 335.90,129.36 336.38,126.87 336.53,124.33' fill='#3B518B' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_ovh &amp;lt;br/&amp;gt; value:  48 &amp;lt;br/&amp;gt; You can add a story here!' data-id='18'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e19' points='201.30,184.44 201.14,181.94 200.67,179.47 199.90,177.08 198.83,174.81 197.48,172.69 195.88,170.75 194.05,169.03 192.02,167.55 189.82,166.34 187.48,165.42 185.05,164.79 182.55,164.48 180.04,164.48 177.55,164.79 175.12,165.42 172.78,166.34 170.58,167.55 168.55,169.03 166.72,170.75 165.11,172.69 163.77,174.81 162.70,177.08 161.92,179.47 161.45,181.94 161.29,184.44 161.45,186.95 161.92,189.42 162.70,191.81 163.77,194.08 165.11,196.20 166.72,198.14 168.55,199.86 170.58,201.33 172.78,202.54 175.12,203.47 177.55,204.09 180.04,204.41 182.55,204.41 185.05,204.09 187.48,203.47 189.82,202.54 192.02,201.33 194.05,199.86 195.88,198.14 197.48,196.20 198.83,194.08 199.90,191.81 200.67,189.42 201.14,186.95 201.30,184.44' fill='#39558C' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_tkx &amp;lt;br/&amp;gt; value:  47 &amp;lt;br/&amp;gt; You can add a story here!' data-id='19'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e20' points='198.45,148.48 198.33,146.47 197.95,144.50 197.33,142.59 196.48,140.78 195.40,139.08 194.12,137.54 192.66,136.16 191.03,134.98 189.28,134.02 187.41,133.28 185.47,132.78 183.47,132.53 181.47,132.53 179.48,132.78 177.53,133.28 175.67,134.02 173.91,134.98 172.28,136.16 170.82,137.54 169.54,139.08 168.47,140.78 167.61,142.59 166.99,144.50 166.61,146.47 166.49,148.48 166.61,150.48 166.99,152.45 167.61,154.36 168.47,156.18 169.54,157.87 170.82,159.42 172.28,160.79 173.91,161.97 175.67,162.94 177.53,163.68 179.48,164.18 181.47,164.43 183.47,164.43 185.47,164.18 187.41,163.68 189.28,162.94 191.03,161.97 192.66,160.79 194.12,159.42 195.40,157.87 196.48,156.18 197.33,154.36 197.95,152.45 198.33,150.48 198.45,148.48' fill='#38598C' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_rdg &amp;lt;br/&amp;gt; value:  30 &amp;lt;br/&amp;gt; You can add a story here!' data-id='20'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e21' points='202.87,141.29 202.85,140.92 202.78,140.56 202.66,140.21 202.51,139.88 202.31,139.57 202.08,139.29 201.81,139.04 201.51,138.82 201.19,138.65 200.85,138.51 200.50,138.42 200.13,138.37 199.77,138.37 199.40,138.42 199.05,138.51 198.71,138.65 198.39,138.82 198.09,139.04 197.82,139.29 197.59,139.57 197.39,139.88 197.24,140.21 197.12,140.56 197.06,140.92 197.03,141.29 197.06,141.65 197.12,142.01 197.24,142.36 197.39,142.69 197.59,143.00 197.82,143.28 198.09,143.54 198.39,143.75 198.71,143.93 199.05,144.06 199.40,144.15 199.77,144.20 200.13,144.20 200.50,144.15 200.85,144.06 201.19,143.93 201.51,143.75 201.81,143.54 202.08,143.28 202.31,143.00 202.51,142.69 202.66,142.36 202.78,142.01 202.85,141.65 202.87,141.29' fill='#365D8D' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_sxp &amp;lt;br/&amp;gt; value:  1 &amp;lt;br/&amp;gt; You can add a story here!' data-id='21'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e22' points='220.26,119.98 220.11,117.67 219.68,115.39 218.96,113.18 217.98,111.09 216.73,109.13 215.26,107.35 213.57,105.76 211.69,104.40 209.66,103.28 207.51,102.43 205.26,101.85 202.96,101.56 200.64,101.56 198.35,101.85 196.10,102.43 193.95,103.28 191.92,104.40 190.04,105.76 188.35,107.35 186.87,109.13 185.63,111.09 184.64,113.18 183.93,115.39 183.49,117.67 183.35,119.98 183.49,122.29 183.93,124.57 184.64,126.77 185.63,128.87 186.87,130.83 188.35,132.61 190.04,134.20 191.92,135.56 193.95,136.68 196.10,137.53 198.35,138.11 200.64,138.40 202.96,138.40 205.26,138.11 207.51,137.53 209.66,136.68 211.69,135.56 213.57,134.20 215.26,132.61 216.73,130.83 217.98,128.87 218.96,126.77 219.68,124.57 220.11,122.29 220.26,119.98' fill='#34618D' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_jta &amp;lt;br/&amp;gt; value:  40 &amp;lt;br/&amp;gt; You can add a story here!' data-id='22'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e23' points='236.01,126.28 235.95,125.24 235.75,124.23 235.43,123.24 234.99,122.30 234.43,121.43 233.77,120.63 233.02,119.92 232.18,119.31 231.27,118.81 230.31,118.43 229.30,118.17 228.28,118.04 227.24,118.04 226.21,118.17 225.21,118.43 224.24,118.81 223.34,119.31 222.50,119.92 221.74,120.63 221.08,121.43 220.52,122.30 220.08,123.24 219.76,124.23 219.57,125.24 219.50,126.28 219.57,127.31 219.76,128.33 220.08,129.32 220.52,130.25 221.08,131.13 221.74,131.93 222.50,132.64 223.34,133.25 224.24,133.75 225.21,134.13 226.21,134.39 227.24,134.52 228.28,134.52 229.30,134.39 230.31,134.13 231.27,133.75 232.18,133.25 233.02,132.64 233.77,131.93 234.43,131.13 234.99,130.25 235.43,129.32 235.75,128.33 235.95,127.31 236.01,126.28' fill='#32648E' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_rbx &amp;lt;br/&amp;gt; value:  8 &amp;lt;br/&amp;gt; You can add a story here!' data-id='23'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e24' points='243.26,118.04 243.22,117.40 243.10,116.78 242.90,116.18 242.63,115.60 242.29,115.07 241.89,114.58 241.43,114.14 240.91,113.77 240.36,113.47 239.77,113.23 239.15,113.07 238.52,112.99 237.89,112.99 237.26,113.07 236.64,113.23 236.05,113.47 235.50,113.77 234.98,114.14 234.52,114.58 234.12,115.07 233.78,115.60 233.51,116.18 233.31,116.78 233.19,117.40 233.15,118.04 233.19,118.67 233.31,119.30 233.51,119.90 233.78,120.47 234.12,121.01 234.52,121.50 234.98,121.93 235.50,122.31 236.05,122.61 236.64,122.84 237.26,123.00 237.89,123.08 238.52,123.08 239.15,123.00 239.77,122.84 240.36,122.61 240.91,122.31 241.43,121.93 241.89,121.50 242.29,121.01 242.63,120.47 242.90,119.90 243.10,119.30 243.22,118.67 243.26,118.04' fill='#31688E' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_zzk &amp;lt;br/&amp;gt; value:  3 &amp;lt;br/&amp;gt; You can add a story here!' data-id='24'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e25' points='191.48,245.06 191.35,242.99 190.96,240.96 190.32,238.98 189.44,237.11 188.33,235.36 187.01,233.76 185.49,232.34 183.82,231.12 182.00,230.13 180.07,229.36 178.07,228.85 176.01,228.59 173.94,228.59 171.88,228.85 169.87,229.36 167.94,230.13 166.13,231.12 164.45,232.34 162.94,233.76 161.62,235.36 160.51,237.11 159.63,238.98 158.99,240.96 158.60,242.99 158.47,245.06 158.60,247.13 158.99,249.17 159.63,251.14 160.51,253.01 161.62,254.76 162.94,256.36 164.45,257.78 166.13,259.00 167.94,260.00 169.87,260.76 171.88,261.27 173.94,261.53 176.01,261.53 178.07,261.27 180.07,260.76 182.00,260.00 183.82,259.00 185.49,257.78 187.01,256.36 188.33,254.76 189.44,253.01 190.32,251.14 190.96,249.17 191.35,247.13 191.48,245.06' fill='#2F6C8E' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_ggt &amp;lt;br/&amp;gt; value:  32 &amp;lt;br/&amp;gt; You can add a story here!' data-id='25'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e26' points='362.46,151.89 362.31,149.55 361.87,147.24 361.15,145.01 360.15,142.89 358.89,140.91 357.40,139.10 355.69,137.49 353.79,136.11 351.73,134.98 349.55,134.12 347.28,133.54 344.95,133.24 342.60,133.24 340.27,133.54 338.00,134.12 335.82,134.98 333.76,136.11 331.87,137.49 330.16,139.10 328.66,140.91 327.40,142.89 326.40,145.01 325.68,147.24 325.24,149.55 325.09,151.89 325.24,154.23 325.68,156.53 326.40,158.77 327.40,160.89 328.66,162.87 330.16,164.68 331.87,166.28 333.76,167.66 335.82,168.79 338.00,169.66 340.27,170.24 342.60,170.53 344.95,170.53 347.28,170.24 349.55,169.66 351.73,168.79 353.79,167.66 355.69,166.28 357.40,164.68 358.89,162.87 360.15,160.89 361.15,158.77 361.87,156.53 362.31,154.23 362.46,151.89' fill='#2E6F8E' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_ahk &amp;lt;br/&amp;gt; value:  41 &amp;lt;br/&amp;gt; You can add a story here!' data-id='26'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e27' points='347.46,181.71 347.36,180.16 347.07,178.63 346.59,177.15 345.93,175.75 345.10,174.43 344.10,173.24 342.97,172.17 341.71,171.26 340.35,170.51 338.91,169.94 337.40,169.55 335.86,169.35 334.30,169.35 332.76,169.55 331.25,169.94 329.81,170.51 328.45,171.26 327.19,172.17 326.06,173.24 325.06,174.43 324.23,175.75 323.57,177.15 323.09,178.63 322.80,180.16 322.70,181.71 322.80,183.26 323.09,184.79 323.57,186.27 324.23,187.67 325.06,188.99 326.06,190.18 327.19,191.25 328.45,192.16 329.81,192.91 331.25,193.48 332.76,193.87 334.30,194.06 335.86,194.06 337.40,193.87 338.91,193.48 340.35,192.91 341.71,192.16 342.97,191.25 344.10,190.18 345.10,188.99 345.93,187.67 346.59,186.27 347.07,184.79 347.36,183.26 347.46,181.71' fill='#2C728E' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_vmt &amp;lt;br/&amp;gt; value:  18 &amp;lt;br/&amp;gt; You can add a story here!' data-id='27'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e28' points='349.95,203.15 349.87,201.93 349.64,200.74 349.27,199.58 348.75,198.49 348.10,197.46 347.33,196.52 346.44,195.69 345.46,194.98 344.39,194.39 343.26,193.94 342.08,193.64 340.88,193.49 339.66,193.49 338.46,193.64 337.28,193.94 336.15,194.39 335.09,194.98 334.10,195.69 333.22,196.52 332.44,197.46 331.79,198.49 331.27,199.58 330.90,200.74 330.67,201.93 330.59,203.15 330.67,204.36 330.90,205.55 331.27,206.71 331.79,207.81 332.44,208.84 333.22,209.77 334.10,210.60 335.09,211.32 336.15,211.90 337.28,212.35 338.46,212.65 339.66,212.81 340.88,212.81 342.08,212.65 343.26,212.35 344.39,211.90 345.46,211.32 346.44,210.60 347.33,209.77 348.10,208.84 348.75,207.81 349.27,206.71 349.64,205.55 349.87,204.36 349.95,203.15' fill='#2A768E' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_rff &amp;lt;br/&amp;gt; value:  11 &amp;lt;br/&amp;gt; You can add a story here!' data-id='28'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e29' points='337.81,215.28 337.78,214.76 337.68,214.25 337.52,213.76 337.30,213.29 337.02,212.85 336.69,212.45 336.31,212.10 335.89,211.79 335.44,211.54 334.96,211.35 334.45,211.22 333.94,211.16 333.42,211.16 332.91,211.22 332.41,211.35 331.92,211.54 331.47,211.79 331.05,212.10 330.67,212.45 330.34,212.85 330.07,213.29 329.84,213.76 329.68,214.25 329.59,214.76 329.56,215.28 329.59,215.79 329.68,216.30 329.84,216.80 330.07,217.27 330.34,217.70 330.67,218.10 331.05,218.46 331.47,218.76 331.92,219.01 332.41,219.20 332.91,219.33 333.42,219.40 333.94,219.40 334.45,219.33 334.96,219.20 335.44,219.01 335.89,218.76 336.31,218.46 336.69,218.10 337.02,217.70 337.30,217.27 337.52,216.80 337.68,216.30 337.78,215.79 337.81,215.28' fill='#29798E' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_jeu &amp;lt;br/&amp;gt; value:  2 &amp;lt;br/&amp;gt; You can add a story here!' data-id='29'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e30' points='340.67,228.44 340.60,227.29 340.38,226.15 340.02,225.05 339.53,224.00 338.91,223.02 338.17,222.13 337.32,221.33 336.39,220.65 335.37,220.09 334.29,219.67 333.17,219.38 332.02,219.23 330.86,219.23 329.71,219.38 328.59,219.67 327.51,220.09 326.50,220.65 325.56,221.33 324.72,222.13 323.98,223.02 323.36,224.00 322.86,225.05 322.50,226.15 322.29,227.29 322.21,228.44 322.29,229.60 322.50,230.74 322.86,231.84 323.36,232.89 323.98,233.87 324.72,234.76 325.56,235.55 326.50,236.23 327.51,236.79 328.59,237.22 329.71,237.51 330.86,237.65 332.02,237.65 333.17,237.51 334.29,237.22 335.37,236.79 336.39,236.23 337.32,235.55 338.17,234.76 338.91,233.87 339.53,232.89 340.02,231.84 340.38,230.74 340.60,229.60 340.67,228.44' fill='#287D8E' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_ezh &amp;lt;br/&amp;gt; value:  10 &amp;lt;br/&amp;gt; You can add a story here!' data-id='30'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e31' points='356.96,256.89 356.81,254.41 356.34,251.97 355.57,249.60 354.51,247.35 353.18,245.26 351.60,243.34 349.79,241.64 347.78,240.18 345.60,238.98 343.29,238.07 340.88,237.45 338.41,237.14 335.93,237.14 333.46,237.45 331.06,238.07 328.75,238.98 326.57,240.18 324.56,241.64 322.75,243.34 321.16,245.26 319.83,247.35 318.77,249.60 318.00,251.97 317.54,254.41 317.38,256.89 317.54,259.37 318.00,261.81 318.77,264.17 319.83,266.42 321.16,268.52 322.75,270.44 324.56,272.14 326.57,273.60 328.75,274.79 331.06,275.71 333.46,276.33 335.93,276.64 338.41,276.64 340.88,276.33 343.29,275.71 345.60,274.79 347.78,273.60 349.79,272.14 351.60,270.44 353.18,268.52 354.51,266.42 355.57,264.17 356.34,261.81 356.81,259.37 356.96,256.89' fill='#26818E' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_xhv &amp;lt;br/&amp;gt; value:  46 &amp;lt;br/&amp;gt; You can add a story here!' data-id='31'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e32' points='258.98,97.22 258.85,95.19 258.47,93.18 257.84,91.24 256.97,89.40 255.88,87.68 254.57,86.10 253.09,84.71 251.44,83.51 249.65,82.52 247.75,81.77 245.78,81.27 243.75,81.01 241.71,81.01 239.69,81.27 237.71,81.77 235.81,82.52 234.03,83.51 232.38,84.71 230.89,86.10 229.59,87.68 228.50,89.40 227.63,91.24 227.00,93.18 226.61,95.19 226.49,97.22 226.61,99.26 227.00,101.26 227.63,103.21 228.50,105.05 229.59,106.77 230.89,108.35 232.38,109.74 234.03,110.94 235.81,111.92 237.71,112.68 239.69,113.18 241.71,113.44 243.75,113.44 245.78,113.18 247.75,112.68 249.65,111.92 251.44,110.94 253.09,109.74 254.57,108.35 255.88,106.77 256.97,105.05 257.84,103.21 258.47,101.26 258.85,99.26 258.98,97.22' fill='#25848E' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_ygc &amp;lt;br/&amp;gt; value:  31 &amp;lt;br/&amp;gt; You can add a story here!' data-id='32'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e33' points='301.03,83.88 300.86,81.09 300.33,78.35 299.47,75.70 298.28,73.17 296.79,70.82 295.01,68.67 292.98,66.76 290.72,65.12 288.27,63.77 285.68,62.74 282.97,62.05 280.21,61.70 277.42,61.70 274.65,62.05 271.94,62.74 269.35,63.77 266.90,65.12 264.65,66.76 262.61,68.67 260.83,70.82 259.34,73.17 258.15,75.70 257.29,78.35 256.76,81.09 256.59,83.88 256.76,86.66 257.29,89.40 258.15,92.06 259.34,94.58 260.83,96.94 262.61,99.09 264.65,101.00 266.90,102.64 269.35,103.99 271.94,105.01 274.65,105.71 277.42,106.06 280.21,106.06 282.97,105.71 285.68,105.01 288.27,103.99 290.72,102.64 292.98,101.00 295.01,99.09 296.79,96.94 298.28,94.58 299.47,92.06 300.33,89.40 300.86,86.66 301.03,83.88' fill='#24878E' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_nym &amp;lt;br/&amp;gt; value:  58 &amp;lt;br/&amp;gt; You can add a story here!' data-id='33'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e34' points='178.54,218.35 178.46,216.93 178.19,215.54 177.75,214.19 177.15,212.90 176.39,211.71 175.48,210.61 174.45,209.64 173.30,208.81 172.06,208.12 170.74,207.60 169.36,207.25 167.95,207.07 166.53,207.07 165.13,207.25 163.75,207.60 162.43,208.12 161.19,208.81 160.04,209.64 159.01,210.61 158.10,211.71 157.34,212.90 156.74,214.19 156.30,215.54 156.03,216.93 155.94,218.35 156.03,219.77 156.30,221.16 156.74,222.51 157.34,223.79 158.10,224.99 159.01,226.09 160.04,227.06 161.19,227.89 162.43,228.57 163.75,229.10 165.13,229.45 166.53,229.63 167.95,229.63 169.36,229.45 170.74,229.10 172.06,228.57 173.30,227.89 174.45,227.06 175.48,226.09 176.39,224.99 177.15,223.79 177.75,222.51 178.19,221.16 178.46,219.77 178.54,218.35' fill='#228B8D' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_ocv &amp;lt;br/&amp;gt; value:  15 &amp;lt;br/&amp;gt; You can add a story here!' data-id='34'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e35' points='163.44,197.57 163.27,194.91 162.77,192.29 161.95,189.75 160.81,187.34 159.38,185.09 157.68,183.03 155.74,181.20 153.58,179.64 151.24,178.35 148.76,177.37 146.18,176.70 143.53,176.37 140.86,176.37 138.22,176.70 135.63,177.37 133.15,178.35 130.81,179.64 128.66,181.20 126.71,183.03 125.01,185.09 123.58,187.34 122.45,189.75 121.62,192.29 121.12,194.91 120.95,197.57 121.12,200.23 121.62,202.85 122.45,205.39 123.58,207.80 125.01,210.06 126.71,212.11 128.66,213.94 130.81,215.51 133.15,216.79 135.63,217.77 138.22,218.44 140.86,218.77 143.53,218.77 146.18,218.44 148.76,217.77 151.24,216.79 153.58,215.51 155.74,213.94 157.68,212.11 159.38,210.06 160.81,207.80 161.95,205.39 162.77,202.85 163.27,200.23 163.44,197.57' fill='#218F8D' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_iev &amp;lt;br/&amp;gt; value:  53 &amp;lt;br/&amp;gt; You can add a story here!' data-id='35'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e36' points='327.42,280.92 327.31,279.17 326.98,277.44 326.44,275.77 325.69,274.18 324.75,272.69 323.63,271.34 322.35,270.14 320.92,269.10 319.38,268.26 317.75,267.61 316.05,267.17 314.30,266.95 312.55,266.95 310.80,267.17 309.10,267.61 307.47,268.26 305.93,269.10 304.51,270.14 303.23,271.34 302.10,272.69 301.16,274.18 300.41,275.77 299.87,277.44 299.54,279.17 299.43,280.92 299.54,282.67 299.87,284.40 300.41,286.07 301.16,287.66 302.10,289.14 303.23,290.50 304.51,291.70 305.93,292.73 307.47,293.58 309.10,294.23 310.80,294.67 312.55,294.89 314.30,294.89 316.05,294.67 317.75,294.23 319.38,293.58 320.92,292.73 322.35,291.70 323.63,290.50 324.75,289.14 325.69,287.66 326.44,286.07 326.98,284.40 327.31,282.67 327.42,280.92' fill='#20928C' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_jeh &amp;lt;br/&amp;gt; value:  23 &amp;lt;br/&amp;gt; You can add a story here!' data-id='36'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e37' points='306.96,303.15 306.78,300.32 306.25,297.53 305.37,294.83 304.16,292.26 302.64,289.86 300.83,287.68 298.76,285.73 296.47,284.07 293.98,282.70 291.34,281.65 288.59,280.95 285.77,280.59 282.94,280.59 280.12,280.95 277.37,281.65 274.73,282.70 272.24,284.07 269.95,285.73 267.88,287.68 266.07,289.86 264.55,292.26 263.34,294.83 262.46,297.53 261.93,300.32 261.75,303.15 261.93,305.98 262.46,308.77 263.34,311.47 264.55,314.04 266.07,316.43 267.88,318.62 269.95,320.56 272.24,322.23 274.73,323.60 277.37,324.64 280.12,325.35 282.94,325.71 285.77,325.71 288.59,325.35 291.34,324.64 293.98,323.60 296.47,322.23 298.76,320.56 300.83,318.62 302.64,316.43 304.16,314.04 305.37,311.47 306.25,308.77 306.78,305.98 306.96,303.15' fill='#1F958B' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_roc &amp;lt;br/&amp;gt; value:  60 &amp;lt;br/&amp;gt; You can add a story here!' data-id='37'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e38' points='231.62,77.45 231.42,74.39 230.85,71.38 229.90,68.47 228.60,65.69 226.95,63.10 225.00,60.74 222.77,58.64 220.28,56.84 217.60,55.36 214.75,54.23 211.78,53.47 208.74,53.09 205.67,53.09 202.63,53.47 199.66,54.23 196.81,55.36 194.12,56.84 191.64,58.64 189.41,60.74 187.45,63.10 185.81,65.69 184.51,68.47 183.56,71.38 182.98,74.39 182.79,77.45 182.98,80.51 183.56,83.52 184.51,86.44 185.81,89.21 187.45,91.80 189.41,94.16 191.64,96.26 194.12,98.06 196.81,99.54 199.66,100.67 202.63,101.43 205.67,101.82 208.74,101.82 211.78,101.43 214.75,100.67 217.60,99.54 220.28,98.06 222.77,96.26 225.00,94.16 226.95,91.80 228.60,89.21 229.90,86.44 230.85,83.52 231.42,80.51 231.62,77.45' fill='#1F998A' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_dgb &amp;lt;br/&amp;gt; value:  70 &amp;lt;br/&amp;gt; You can add a story here!' data-id='38'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e39' points='329.77,89.55 329.66,87.72 329.31,85.92 328.75,84.17 327.97,82.52 326.99,80.97 325.82,79.56 324.48,78.30 323.00,77.23 321.40,76.34 319.69,75.67 317.92,75.21 316.10,74.98 314.27,74.98 312.45,75.21 310.68,75.67 308.97,76.34 307.37,77.23 305.88,78.30 304.55,79.56 303.38,80.97 302.40,82.52 301.62,84.17 301.05,85.92 300.71,87.72 300.59,89.55 300.71,91.37 301.05,93.17 301.62,94.92 302.40,96.57 303.38,98.12 304.55,99.53 305.88,100.79 307.37,101.86 308.97,102.75 310.68,103.42 312.45,103.88 314.27,104.11 316.10,104.11 317.92,103.88 319.69,103.42 321.40,102.75 323.00,101.86 324.48,100.79 325.82,99.53 326.99,98.12 327.97,96.57 328.75,94.92 329.31,93.17 329.66,91.37 329.77,89.55' fill='#1E9C89' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_upe &amp;lt;br/&amp;gt; value:  25 &amp;lt;br/&amp;gt; You can add a story here!' data-id='39'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e40' points='163.77,173.12 163.71,172.22 163.54,171.34 163.27,170.49 162.88,169.68 162.40,168.92 161.83,168.23 161.18,167.61 160.45,167.08 159.66,166.65 158.83,166.32 157.96,166.10 157.07,165.99 156.17,165.99 155.28,166.10 154.41,166.32 153.58,166.65 152.79,167.08 152.06,167.61 151.41,168.23 150.84,168.92 150.36,169.68 149.98,170.49 149.70,171.34 149.53,172.22 149.47,173.12 149.53,174.01 149.70,174.90 149.98,175.75 150.36,176.56 150.84,177.32 151.41,178.01 152.06,178.63 152.79,179.15 153.58,179.59 154.41,179.92 155.28,180.14 156.17,180.25 157.07,180.25 157.96,180.14 158.83,179.92 159.66,179.59 160.45,179.15 161.18,178.63 161.83,178.01 162.40,177.32 162.88,176.56 163.27,175.75 163.54,174.90 163.71,174.01 163.77,173.12' fill='#1FA088' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_lty &amp;lt;br/&amp;gt; value:  6 &amp;lt;br/&amp;gt; You can add a story here!' data-id='40'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e41' points='167.42,155.45 167.34,154.13 167.09,152.84 166.68,151.58 166.12,150.38 165.41,149.27 164.57,148.25 163.61,147.35 162.54,146.57 161.38,145.93 160.15,145.45 158.87,145.12 157.56,144.95 156.24,144.95 154.93,145.12 153.65,145.45 152.42,145.93 151.27,146.57 150.20,147.35 149.23,148.25 148.39,149.27 147.68,150.38 147.12,151.58 146.71,152.84 146.47,154.13 146.38,155.45 146.47,156.77 146.71,158.07 147.12,159.33 147.68,160.52 148.39,161.64 149.23,162.65 150.20,163.56 151.27,164.34 152.42,164.97 153.65,165.46 154.93,165.79 156.24,165.95 157.56,165.95 158.87,165.79 160.15,165.46 161.38,164.97 162.54,164.34 163.61,163.56 164.57,162.65 165.41,161.64 166.12,160.52 166.68,159.33 167.09,158.07 167.34,156.77 167.42,155.45' fill='#20A386' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_wgu &amp;lt;br/&amp;gt; value:  13 &amp;lt;br/&amp;gt; You can add a story here!' data-id='41'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e42' points='357.84,174.98 357.80,174.25 357.66,173.53 357.43,172.84 357.12,172.17 356.73,171.55 356.26,170.99 355.73,170.49 355.14,170.06 354.49,169.70 353.81,169.43 353.10,169.25 352.38,169.16 351.64,169.16 350.92,169.25 350.21,169.43 349.52,169.70 348.88,170.06 348.29,170.49 347.75,170.99 347.29,171.55 346.89,172.17 346.58,172.84 346.36,173.53 346.22,174.25 346.17,174.98 346.22,175.72 346.36,176.44 346.58,177.13 346.89,177.80 347.29,178.41 347.75,178.98 348.29,179.48 348.88,179.91 349.52,180.26 350.21,180.53 350.92,180.72 351.64,180.81 352.38,180.81 353.10,180.72 353.81,180.53 354.49,180.26 355.14,179.91 355.73,179.48 356.26,178.98 356.73,178.41 357.12,177.80 357.43,177.13 357.66,176.44 357.80,175.72 357.84,174.98' fill='#22A785' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_vmy &amp;lt;br/&amp;gt; value:  4 &amp;lt;br/&amp;gt; You can add a story here!' data-id='42'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e43' points='373.15,192.05 373.05,190.41 372.74,188.80 372.24,187.24 371.54,185.76 370.66,184.38 369.61,183.11 368.42,181.99 367.09,181.03 365.66,180.24 364.13,179.64 362.55,179.23 360.92,179.02 359.28,179.02 357.66,179.23 356.07,179.64 354.55,180.24 353.11,181.03 351.78,181.99 350.59,183.11 349.55,184.38 348.67,185.76 347.97,187.24 347.46,188.80 347.16,190.41 347.05,192.05 347.16,193.68 347.46,195.29 347.97,196.85 348.67,198.33 349.55,199.72 350.59,200.98 351.78,202.10 353.11,203.06 354.55,203.85 356.07,204.46 357.66,204.86 359.28,205.07 360.92,205.07 362.55,204.86 364.13,204.46 365.66,203.85 367.09,203.06 368.42,202.10 369.61,200.98 370.66,199.72 371.54,198.33 372.24,196.85 372.74,195.29 373.05,193.68 373.15,192.05' fill='#24AA83' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_eeo &amp;lt;br/&amp;gt; value:  20 &amp;lt;br/&amp;gt; You can add a story here!' data-id='43'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e44' points='261.82,305.35 261.70,303.49 261.35,301.65 260.77,299.88 259.98,298.18 258.98,296.61 257.79,295.17 256.42,293.89 254.91,292.79 253.27,291.89 251.54,291.20 249.73,290.74 247.87,290.50 246.01,290.50 244.15,290.74 242.34,291.20 240.60,291.89 238.97,292.79 237.46,293.89 236.09,295.17 234.90,296.61 233.90,298.18 233.11,299.88 232.53,301.65 232.18,303.49 232.06,305.35 232.18,307.22 232.53,309.05 233.11,310.83 233.90,312.52 234.90,314.10 236.09,315.54 237.46,316.82 238.97,317.91 240.60,318.82 242.34,319.50 244.15,319.97 246.01,320.20 247.87,320.20 249.73,319.97 251.54,319.50 253.27,318.82 254.91,317.91 256.42,316.82 257.79,315.54 258.98,314.10 259.98,312.52 260.77,310.83 261.35,309.05 261.70,307.22 261.82,305.35' fill='#27AD81' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_upp &amp;lt;br/&amp;gt; value:  26 &amp;lt;br/&amp;gt; You can add a story here!' data-id='44'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e45' points='232.06,304.97 231.91,302.58 231.46,300.22 230.72,297.93 229.70,295.76 228.41,293.73 226.88,291.88 225.13,290.23 223.18,288.82 221.08,287.66 218.84,286.78 216.51,286.18 214.13,285.88 211.73,285.88 209.34,286.18 207.02,286.78 204.78,287.66 202.68,288.82 200.73,290.23 198.98,291.88 197.45,293.73 196.16,295.76 195.14,297.93 194.40,300.22 193.95,302.58 193.80,304.97 193.95,307.37 194.40,309.73 195.14,312.02 196.16,314.19 197.45,316.22 198.98,318.07 200.73,319.72 202.68,321.13 204.78,322.29 207.02,323.17 209.34,323.77 211.73,324.07 214.13,324.07 216.51,323.77 218.84,323.17 221.08,322.29 223.18,321.13 225.13,319.72 226.88,318.07 228.41,316.22 229.70,314.19 230.72,312.02 231.46,309.73 231.91,307.37 232.06,304.97' fill='#2BB17E' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_eax &amp;lt;br/&amp;gt; value:  43 &amp;lt;br/&amp;gt; You can add a story here!' data-id='45'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e46' points='374.79,223.83 374.65,221.67 374.25,219.54 373.58,217.48 372.66,215.52 371.49,213.69 370.11,212.02 368.53,210.53 366.78,209.26 364.88,208.21 362.86,207.42 360.76,206.88 358.61,206.61 356.44,206.61 354.29,206.88 352.19,207.42 350.18,208.21 348.28,209.26 346.52,210.53 344.94,212.02 343.56,213.69 342.40,215.52 341.48,217.48 340.81,219.54 340.40,221.67 340.27,223.83 340.40,226.00 340.81,228.13 341.48,230.19 342.40,232.15 343.56,233.98 344.94,235.65 346.52,237.14 348.28,238.41 350.18,239.45 352.19,240.25 354.29,240.79 356.44,241.06 358.61,241.06 360.76,240.79 362.86,240.25 364.88,239.45 366.78,238.41 368.53,237.14 370.11,235.65 371.49,233.98 372.66,232.15 373.58,230.19 374.25,228.13 374.65,226.00 374.79,223.83' fill='#30B47C' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_ipc &amp;lt;br/&amp;gt; value:  35 &amp;lt;br/&amp;gt; You can add a story here!' data-id='46'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e47' points='398.63,256.10 398.47,253.49 397.98,250.92 397.17,248.43 396.05,246.06 394.65,243.85 392.98,241.83 391.08,240.04 388.96,238.51 386.67,237.24 384.23,236.28 381.70,235.63 379.10,235.30 376.48,235.30 373.89,235.63 371.35,236.28 368.92,237.24 366.63,238.51 364.51,240.04 362.60,241.83 360.93,243.85 359.53,246.06 358.42,248.43 357.61,250.92 357.12,253.49 356.95,256.10 357.12,258.71 357.61,261.28 358.42,263.77 359.53,266.14 360.93,268.35 362.60,270.36 364.51,272.16 366.63,273.69 368.92,274.95 371.35,275.92 373.89,276.57 376.48,276.90 379.10,276.90 381.70,276.57 384.23,275.92 386.67,274.95 388.96,273.69 391.08,272.16 392.98,270.36 394.65,268.35 396.05,266.14 397.17,263.77 397.98,261.28 398.47,258.71 398.63,256.10' fill='#35B779' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_dot &amp;lt;br/&amp;gt; value:  51 &amp;lt;br/&amp;gt; You can add a story here!' data-id='47'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e48' points='409.24,205.84 409.09,203.38 408.63,200.97 407.87,198.63 406.82,196.41 405.50,194.33 403.94,192.44 402.15,190.75 400.16,189.31 398.00,188.12 395.72,187.22 393.34,186.61 390.90,186.30 388.44,186.30 386.00,186.61 383.62,187.22 381.33,188.12 379.18,189.31 377.19,190.75 375.40,192.44 373.83,194.33 372.52,196.41 371.47,198.63 370.71,200.97 370.25,203.38 370.09,205.84 370.25,208.29 370.71,210.70 371.47,213.04 372.52,215.27 373.83,217.34 375.40,219.24 377.19,220.92 379.18,222.36 381.33,223.55 383.62,224.45 386.00,225.06 388.44,225.37 390.90,225.37 393.34,225.06 395.72,224.45 398.00,223.55 400.16,222.36 402.15,220.92 403.94,219.24 405.50,217.34 406.82,215.27 407.87,213.04 408.63,210.70 409.09,208.29 409.24,205.84' fill='#3BBB75' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_zhg &amp;lt;br/&amp;gt; value:  45 &amp;lt;br/&amp;gt; You can add a story here!' data-id='48'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e49' points='173.01,129.22 172.88,127.25 172.51,125.31 171.90,123.44 171.06,121.65 170.01,119.99 168.75,118.47 167.31,117.11 165.71,115.95 163.98,115.00 162.15,114.28 160.24,113.79 158.28,113.54 156.31,113.54 154.35,113.79 152.44,114.28 150.60,115.00 148.87,115.95 147.28,117.11 145.84,118.47 144.58,119.99 143.52,121.65 142.68,123.44 142.07,125.31 141.70,127.25 141.58,129.22 141.70,131.19 142.07,133.13 142.68,135.01 143.52,136.79 144.58,138.46 145.84,139.98 147.28,141.33 148.87,142.49 150.60,143.44 152.44,144.17 154.35,144.66 156.31,144.90 158.28,144.90 160.24,144.66 162.15,144.17 163.98,143.44 165.71,142.49 167.31,141.33 168.75,139.98 170.01,138.46 171.06,136.79 171.90,135.01 172.51,133.13 172.88,131.19 173.01,129.22' fill='#41BD72' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_iwp &amp;lt;br/&amp;gt; value:  29 &amp;lt;br/&amp;gt; You can add a story here!' data-id='49'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e50' points='184.33,89.56 184.14,86.54 183.57,83.57 182.64,80.70 181.35,77.97 179.73,75.41 177.81,73.09 175.60,71.02 173.16,69.24 170.51,67.79 167.70,66.67 164.77,65.92 161.78,65.54 158.75,65.54 155.76,65.92 152.83,66.67 150.02,67.79 147.37,69.24 144.93,71.02 142.72,73.09 140.80,75.41 139.18,77.97 137.89,80.70 136.96,83.57 136.39,86.54 136.20,89.56 136.39,92.57 136.96,95.54 137.89,98.42 139.18,101.15 140.80,103.70 142.72,106.03 144.93,108.10 147.37,109.87 150.02,111.33 152.83,112.44 155.76,113.19 158.75,113.57 161.78,113.57 164.77,113.19 167.70,112.44 170.51,111.33 173.16,109.87 175.60,108.10 177.81,106.03 179.73,103.70 181.35,101.15 182.64,98.42 183.57,95.54 184.14,92.57 184.33,89.56' fill='#48C16E' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_phc &amp;lt;br/&amp;gt; value:  68 &amp;lt;br/&amp;gt; You can add a story here!' data-id='50'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e51' points='196.46,290.26 196.28,287.41 195.75,284.60 194.86,281.87 193.64,279.28 192.11,276.87 190.28,274.66 188.20,272.70 185.88,271.02 183.38,269.64 180.71,268.59 177.94,267.88 175.10,267.52 172.24,267.52 169.40,267.88 166.63,268.59 163.97,269.64 161.46,271.02 159.15,272.70 157.06,274.66 155.23,276.87 153.70,279.28 152.48,281.87 151.60,284.60 151.06,287.41 150.88,290.26 151.06,293.12 151.60,295.93 152.48,298.65 153.70,301.24 155.23,303.66 157.06,305.86 159.15,307.82 161.46,309.50 163.97,310.88 166.63,311.94 169.40,312.65 172.24,313.01 175.10,313.01 177.94,312.65 180.71,311.94 183.38,310.88 185.88,309.50 188.20,307.82 190.28,305.86 192.11,303.66 193.64,301.24 194.86,298.65 195.75,295.93 196.28,293.12 196.46,290.26' fill='#50C46A' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_obj &amp;lt;br/&amp;gt; value:  61 &amp;lt;br/&amp;gt; You can add a story here!' data-id='51'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e52' points='162.62,261.54 162.48,259.25 162.05,257.00 161.34,254.83 160.37,252.76 159.14,250.83 157.68,249.06 156.02,247.50 154.17,246.15 152.16,245.05 150.03,244.21 147.82,243.64 145.55,243.35 143.26,243.35 140.99,243.64 138.77,244.21 136.64,245.05 134.64,246.15 132.79,247.50 131.12,249.06 129.66,250.83 128.43,252.76 127.46,254.83 126.75,257.00 126.32,259.25 126.18,261.54 126.32,263.82 126.75,266.07 127.46,268.24 128.43,270.31 129.66,272.25 131.12,274.01 132.79,275.58 134.64,276.92 136.64,278.02 138.77,278.87 140.99,279.44 143.26,279.72 145.55,279.72 147.82,279.44 150.03,278.87 152.16,278.02 154.17,276.92 156.02,275.58 157.68,274.01 159.14,272.25 160.37,270.31 161.34,268.24 162.05,266.07 162.48,263.82 162.62,261.54' fill='#57C666' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_hck &amp;lt;br/&amp;gt; value:  39 &amp;lt;br/&amp;gt; You can add a story here!' data-id='52'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e53' points='348.56,101.64 348.47,100.28 348.21,98.93 347.79,97.62 347.21,96.38 346.47,95.23 345.60,94.17 344.60,93.23 343.49,92.43 342.29,91.77 341.01,91.26 339.68,90.92 338.32,90.75 336.95,90.75 335.59,90.92 334.27,91.26 332.99,91.77 331.79,92.43 330.68,93.23 329.68,94.17 328.81,95.23 328.07,96.38 327.49,97.62 327.06,98.93 326.81,100.28 326.72,101.64 326.81,103.01 327.06,104.36 327.49,105.66 328.07,106.90 328.81,108.06 329.68,109.12 330.68,110.06 331.79,110.86 332.99,111.52 334.27,112.03 335.59,112.37 336.95,112.54 338.32,112.54 339.68,112.37 341.01,112.03 342.29,111.52 343.49,110.86 344.60,110.06 345.60,109.12 346.47,108.06 347.21,106.90 347.79,105.66 348.21,104.36 348.47,103.01 348.56,101.64' fill='#5EC962' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_acy &amp;lt;br/&amp;gt; value:  14 &amp;lt;br/&amp;gt; You can add a story here!' data-id='53'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e54' points='378.53,119.28 378.39,117.02 377.97,114.80 377.27,112.65 376.31,110.61 375.10,108.70 373.66,106.96 372.01,105.42 370.18,104.09 368.20,103.00 366.10,102.17 363.91,101.61 361.67,101.32 359.41,101.32 357.17,101.61 354.99,102.17 352.89,103.00 350.91,104.09 349.08,105.42 347.43,106.96 345.99,108.70 344.78,110.61 343.82,112.65 343.12,114.80 342.70,117.02 342.56,119.28 342.70,121.53 343.12,123.75 343.82,125.90 344.78,127.94 345.99,129.85 347.43,131.59 349.08,133.13 350.91,134.46 352.89,135.55 354.99,136.38 357.17,136.94 359.41,137.23 361.67,137.23 363.91,136.94 366.10,136.38 368.20,135.55 370.18,134.46 372.01,133.13 373.66,131.59 375.10,129.85 376.31,127.94 377.27,125.90 377.97,123.75 378.39,121.53 378.53,119.28' fill='#67CC5C' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_mue &amp;lt;br/&amp;gt; value:  38 &amp;lt;br/&amp;gt; You can add a story here!' data-id='54'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e55' points='270.85,50.61 270.66,47.64 270.10,44.72 269.18,41.89 267.92,39.19 266.32,36.68 264.42,34.39 262.25,32.35 259.84,30.60 257.24,29.17 254.47,28.07 251.58,27.33 248.63,26.96 245.65,26.96 242.70,27.33 239.82,28.07 237.05,29.17 234.44,30.60 232.03,32.35 229.86,34.39 227.96,36.68 226.37,39.19 225.10,41.89 224.18,44.72 223.62,47.64 223.44,50.61 223.62,53.59 224.18,56.51 225.10,59.34 226.37,62.03 227.96,64.55 229.86,66.84 232.03,68.88 234.44,70.63 237.05,72.06 239.82,73.16 242.70,73.90 245.65,74.27 248.63,74.27 251.58,73.90 254.47,73.16 257.24,72.06 259.84,70.63 262.25,68.88 264.42,66.84 266.32,64.55 267.92,62.03 269.18,59.34 270.10,56.51 270.66,53.59 270.85,50.61' fill='#6FCF57' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_ilg &amp;lt;br/&amp;gt; value:  66 &amp;lt;br/&amp;gt; You can add a story here!' data-id='55'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e56' points='401.12,150.00 400.97,147.57 400.51,145.19 399.76,142.88 398.73,140.68 397.43,138.62 395.88,136.75 394.11,135.09 392.14,133.66 390.01,132.49 387.75,131.59 385.39,130.99 382.98,130.68 380.55,130.68 378.14,130.99 375.79,131.59 373.53,132.49 371.40,133.66 369.43,135.09 367.66,136.75 366.11,138.62 364.81,140.68 363.77,142.88 363.02,145.19 362.57,147.57 362.41,150.00 362.57,152.43 363.02,154.81 363.77,157.13 364.81,159.32 366.11,161.38 367.66,163.25 369.43,164.91 371.40,166.34 373.53,167.51 375.79,168.41 378.14,169.01 380.55,169.32 382.98,169.32 385.39,169.01 387.75,168.41 390.01,167.51 392.14,166.34 394.11,164.91 395.88,163.25 397.43,161.38 398.73,159.32 399.76,157.13 400.51,154.81 400.97,152.43 401.12,150.00' fill='#78D152' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_mrr &amp;lt;br/&amp;gt; value:  44 &amp;lt;br/&amp;gt; You can add a story here!' data-id='56'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e57' points='430.38,174.12 430.23,171.75 429.79,169.42 429.05,167.16 428.04,165.01 426.77,163.01 425.26,161.18 423.53,159.55 421.60,158.16 419.52,157.01 417.31,156.14 415.01,155.55 412.66,155.25 410.28,155.25 407.93,155.55 405.63,156.14 403.42,157.01 401.34,158.16 399.42,159.55 397.69,161.18 396.17,163.01 394.90,165.01 393.89,167.16 393.16,169.42 392.71,171.75 392.56,174.12 392.71,176.49 393.16,178.83 393.89,181.09 394.90,183.23 396.17,185.24 397.69,187.07 399.42,188.69 401.34,190.09 403.42,191.23 405.63,192.11 407.93,192.70 410.28,193.00 412.66,193.00 415.01,192.70 417.31,192.11 419.52,191.23 421.60,190.09 423.53,188.69 425.26,187.07 426.77,185.24 428.04,183.23 429.05,181.09 429.79,178.83 430.23,176.49 430.38,174.12' fill='#81D34D' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_qhk &amp;lt;br/&amp;gt; value:  42 &amp;lt;br/&amp;gt; You can add a story here!' data-id='57'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e58' points='137.50,232.67 137.31,229.63 136.74,226.64 135.80,223.74 134.51,220.99 132.88,218.42 130.94,216.07 128.72,213.99 126.25,212.20 123.59,210.73 120.76,209.61 117.81,208.86 114.79,208.48 111.74,208.48 108.73,208.86 105.78,209.61 102.95,210.73 100.28,212.20 97.82,213.99 95.60,216.07 93.66,218.42 92.03,220.99 90.73,223.74 89.79,226.64 89.22,229.63 89.03,232.67 89.22,235.70 89.79,238.69 90.73,241.59 92.03,244.34 93.66,246.91 95.60,249.26 97.82,251.34 100.28,253.13 102.95,254.60 105.78,255.72 108.73,256.47 111.74,256.86 114.79,256.86 117.81,256.47 120.76,255.72 123.59,254.60 126.25,253.13 128.72,251.34 130.94,249.26 132.88,246.91 134.51,244.34 135.80,241.59 136.74,238.69 137.31,235.70 137.50,232.67' fill='#8AD647' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_hnb &amp;lt;br/&amp;gt; value:  69 &amp;lt;br/&amp;gt; You can add a story here!' data-id='58'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e59' points='146.50,158.22 146.33,155.48 145.81,152.79 144.97,150.18 143.80,147.70 142.33,145.39 140.58,143.27 138.58,141.40 136.37,139.78 133.96,138.46 131.41,137.45 128.76,136.77 126.04,136.43 123.29,136.43 120.57,136.77 117.92,137.45 115.37,138.46 112.97,139.78 110.75,141.40 108.75,143.27 107.00,145.39 105.53,147.70 104.36,150.18 103.52,152.79 103.00,155.48 102.83,158.22 103.00,160.96 103.52,163.65 104.36,166.26 105.53,168.74 107.00,171.06 108.75,173.17 110.75,175.05 112.97,176.66 115.37,177.98 117.92,178.99 120.57,179.67 123.29,180.01 126.04,180.01 128.76,179.67 131.41,178.99 133.96,177.98 136.37,176.66 138.58,175.05 140.58,173.17 142.33,171.06 143.80,168.74 144.97,166.26 145.81,163.65 146.33,160.96 146.50,158.22' fill='#94D741' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_ufc &amp;lt;br/&amp;gt; value:  56 &amp;lt;br/&amp;gt; You can add a story here!' data-id='59'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e60' points='371.43,284.52 371.32,282.72 370.98,280.96 370.43,279.25 369.66,277.63 368.70,276.11 367.55,274.73 366.25,273.50 364.79,272.45 363.22,271.58 361.55,270.92 359.81,270.47 358.03,270.25 356.24,270.25 354.46,270.47 352.72,270.92 351.05,271.58 349.47,272.45 348.02,273.50 346.71,274.73 345.57,276.11 344.61,277.63 343.84,279.25 343.29,280.96 342.95,282.72 342.84,284.52 342.95,286.31 343.29,288.07 343.84,289.78 344.61,291.40 345.57,292.92 346.71,294.30 348.02,295.53 349.47,296.59 351.05,297.45 352.72,298.11 354.46,298.56 356.24,298.78 358.03,298.78 359.81,298.56 361.55,298.11 363.22,297.45 364.79,296.59 366.25,295.53 367.55,294.30 368.70,292.92 369.66,291.40 370.43,289.78 370.98,288.07 371.32,286.31 371.43,284.52' fill='#9DD93B' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_suw &amp;lt;br/&amp;gt; value:  24 &amp;lt;br/&amp;gt; You can add a story here!' data-id='60'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e61' points='347.10,299.27 346.99,297.59 346.68,295.94 346.16,294.35 345.45,292.83 344.55,291.41 343.48,290.11 342.25,288.96 340.89,287.98 339.42,287.17 337.86,286.55 336.23,286.13 334.57,285.92 332.89,285.92 331.22,286.13 329.60,286.55 328.04,287.17 326.56,287.98 325.21,288.96 323.98,290.11 322.91,291.41 322.01,292.83 321.30,294.35 320.78,295.94 320.46,297.59 320.36,299.27 320.46,300.94 320.78,302.59 321.30,304.19 322.01,305.71 322.91,307.13 323.98,308.42 325.21,309.57 326.56,310.56 328.04,311.37 329.60,311.98 331.22,312.40 332.89,312.61 334.57,312.61 336.23,312.40 337.86,311.98 339.42,311.37 340.89,310.56 342.25,309.57 343.48,308.42 344.55,307.13 345.45,305.71 346.16,304.19 346.68,302.59 346.99,300.94 347.10,299.27' fill='#A7DB35' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_bvu &amp;lt;br/&amp;gt; value:  21 &amp;lt;br/&amp;gt; You can add a story here!' data-id='61'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e62' points='434.90,237.21 434.74,234.65 434.26,232.13 433.47,229.69 432.38,227.37 431.00,225.20 429.37,223.23 427.50,221.47 425.42,219.96 423.18,218.73 420.79,217.78 418.31,217.15 415.76,216.83 413.20,216.83 410.65,217.15 408.17,217.78 405.78,218.73 403.53,219.96 401.46,221.47 399.59,223.23 397.95,225.20 396.58,227.37 395.49,229.69 394.70,232.13 394.21,234.65 394.05,237.21 394.21,239.77 394.70,242.29 395.49,244.73 396.58,247.05 397.95,249.22 399.59,251.19 401.46,252.95 403.53,254.46 405.78,255.69 408.17,256.64 410.65,257.27 413.20,257.60 415.76,257.60 418.31,257.27 420.79,256.64 423.18,255.69 425.42,254.46 427.50,252.95 429.37,251.19 431.00,249.22 432.38,247.05 433.47,244.73 434.26,242.29 434.74,239.77 434.90,237.21' fill='#B1DD2E' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_kzb &amp;lt;br/&amp;gt; value:  49 &amp;lt;br/&amp;gt; You can add a story here!' data-id='62'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e63' points='335.41,325.92 335.27,323.70 334.86,321.51 334.17,319.39 333.22,317.37 332.02,315.49 330.60,313.77 328.98,312.25 327.18,310.94 325.22,309.86 323.15,309.04 320.99,308.49 318.78,308.21 316.55,308.21 314.34,308.49 312.18,309.04 310.11,309.86 308.16,310.94 306.35,312.25 304.73,313.77 303.31,315.49 302.11,317.37 301.16,319.39 300.47,321.51 300.06,323.70 299.92,325.92 300.06,328.15 300.47,330.34 301.16,332.46 302.11,334.47 303.31,336.36 304.73,338.07 306.35,339.60 308.16,340.91 310.11,341.98 312.18,342.80 314.34,343.36 316.55,343.64 318.78,343.64 320.99,343.36 323.15,342.80 325.22,341.98 327.18,340.91 328.98,339.60 330.60,338.07 332.02,336.36 333.22,334.47 334.17,332.46 334.86,330.34 335.27,328.15 335.41,325.92' fill='#BADE28' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_dsw &amp;lt;br/&amp;gt; value:  37 &amp;lt;br/&amp;gt; You can add a story here!' data-id='63'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e64' points='143.98,115.00 143.81,112.31 143.30,109.66 142.47,107.10 141.33,104.67 139.88,102.39 138.17,100.32 136.20,98.47 134.02,96.89 131.67,95.59 129.16,94.60 126.55,93.93 123.88,93.60 121.19,93.60 118.52,93.93 115.91,94.60 113.41,95.59 111.05,96.89 108.87,98.47 106.90,100.32 105.19,102.39 103.75,104.67 102.60,107.10 101.77,109.66 101.26,112.31 101.09,115.00 101.26,117.68 101.77,120.33 102.60,122.89 103.75,125.33 105.19,127.60 106.90,129.67 108.87,131.52 111.05,133.10 113.41,134.40 115.91,135.39 118.52,136.06 121.19,136.40 123.88,136.40 126.55,136.06 129.16,135.39 131.67,134.40 134.02,133.10 136.20,131.52 138.17,129.67 139.88,127.60 141.33,125.33 142.47,122.89 143.30,120.33 143.81,117.68 143.98,115.00' fill='#C4E021' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_efz &amp;lt;br/&amp;gt; value:  54 &amp;lt;br/&amp;gt; You can add a story here!' data-id='64'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e65' points='317.46,40.20 317.27,37.21 316.71,34.26 315.79,31.41 314.51,28.69 312.90,26.16 310.99,23.85 308.80,21.80 306.38,20.03 303.75,18.59 300.96,17.49 298.05,16.74 295.08,16.36 292.08,16.36 289.10,16.74 286.20,17.49 283.41,18.59 280.78,20.03 278.35,21.80 276.17,23.85 274.26,26.16 272.65,28.69 271.37,31.41 270.44,34.26 269.88,37.21 269.69,40.20 269.88,43.19 270.44,46.14 271.37,48.99 272.65,51.71 274.26,54.24 276.17,56.55 278.35,58.60 280.78,60.37 283.41,61.81 286.20,62.92 289.10,63.66 292.08,64.04 295.08,64.04 298.05,63.66 300.96,62.92 303.75,61.81 306.38,60.37 308.80,58.60 310.99,56.55 312.90,54.24 314.51,51.71 315.79,48.99 316.71,46.14 317.27,43.19 317.46,40.20' fill='#CFE11C' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_nqv &amp;lt;br/&amp;gt; value:  67 &amp;lt;br/&amp;gt; You can add a story here!' data-id='65'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e66' points='345.19,61.13 345.05,59.03 344.66,56.96 344.01,54.96 343.11,53.05 341.98,51.27 340.64,49.65 339.11,48.21 337.41,46.97 335.56,45.96 333.60,45.19 331.56,44.66 329.48,44.40 327.37,44.40 325.28,44.66 323.24,45.19 321.29,45.96 319.44,46.97 317.74,48.21 316.20,49.65 314.86,51.27 313.74,53.05 312.84,54.96 312.19,56.96 311.79,59.03 311.66,61.13 311.79,63.23 312.19,65.30 312.84,67.30 313.74,69.20 314.86,70.98 316.20,72.60 317.74,74.04 319.44,75.28 321.29,76.29 323.24,77.07 325.28,77.59 327.37,77.86 329.48,77.86 331.56,77.59 333.60,77.07 335.56,76.29 337.41,75.28 339.11,74.04 340.64,72.60 341.98,70.98 343.11,69.20 344.01,67.30 344.66,65.30 345.05,63.23 345.19,61.13' fill='#D8E219' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_cjr &amp;lt;br/&amp;gt; value:  33 &amp;lt;br/&amp;gt; You can add a story here!' data-id='66'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e67' points='346.99,83.08 346.93,82.11 346.74,81.16 346.44,80.24 346.03,79.36 345.51,78.54 344.89,77.79 344.19,77.13 343.40,76.56 342.55,76.09 341.65,75.74 340.71,75.49 339.75,75.37 338.78,75.37 337.82,75.49 336.88,75.74 335.98,76.09 335.13,76.56 334.35,77.13 333.64,77.79 333.02,78.54 332.50,79.36 332.09,80.24 331.79,81.16 331.61,82.11 331.55,83.08 331.61,84.04 331.79,85.00 332.09,85.92 332.50,86.80 333.02,87.62 333.64,88.36 334.35,89.03 335.13,89.60 335.98,90.06 336.88,90.42 337.82,90.66 338.78,90.78 339.75,90.78 340.71,90.66 341.65,90.42 342.55,90.06 343.40,89.60 344.19,89.03 344.89,88.36 345.51,87.62 346.03,86.80 346.44,85.92 346.74,85.00 346.93,84.04 346.99,83.08' fill='#E2E418' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_xjr &amp;lt;br/&amp;gt; value:  7 &amp;lt;br/&amp;gt; You can add a story here!' data-id='67'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e68' points='115.78,189.88 115.60,186.96 115.05,184.08 114.14,181.29 112.89,178.64 111.32,176.16 109.46,173.91 107.32,171.90 104.95,170.18 102.38,168.76 99.65,167.68 96.81,166.95 93.90,166.59 90.97,166.59 88.06,166.95 85.23,167.68 82.50,168.76 79.93,170.18 77.56,171.90 75.42,173.91 73.55,176.16 71.98,178.64 70.73,181.29 69.83,184.08 69.28,186.96 69.10,189.88 69.28,192.81 69.83,195.69 70.73,198.48 71.98,201.13 73.55,203.61 75.42,205.86 77.56,207.87 79.93,209.59 82.50,211.01 85.23,212.09 88.06,212.81 90.97,213.18 93.90,213.18 96.81,212.81 99.65,212.09 102.38,211.01 104.95,209.59 107.32,207.87 109.46,205.86 111.32,203.61 112.89,201.13 114.14,198.48 115.05,195.69 115.60,192.81 115.78,189.88' fill='#EBE51B' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_vri &amp;lt;br/&amp;gt; value:  64 &amp;lt;br/&amp;gt; You can add a story here!' data-id='68'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e69' points='273.35,329.31 273.25,327.72 272.95,326.15 272.46,324.63 271.78,323.19 270.92,321.84 269.90,320.61 268.74,319.51 267.45,318.58 266.05,317.81 264.56,317.22 263.01,316.82 261.43,316.62 259.83,316.62 258.25,316.82 256.70,317.22 255.21,317.81 253.81,318.58 252.52,319.51 251.36,320.61 250.34,321.84 249.48,323.19 248.80,324.63 248.31,326.15 248.01,327.72 247.91,329.31 248.01,330.91 248.31,332.48 248.80,334.00 249.48,335.44 250.34,336.79 251.36,338.02 252.52,339.12 253.81,340.05 255.21,340.82 256.70,341.41 258.25,341.81 259.83,342.01 261.43,342.01 263.01,341.81 264.56,341.41 266.05,340.82 267.45,340.05 268.74,339.12 269.90,338.02 270.92,336.79 271.78,335.44 272.46,334.00 272.95,332.48 273.25,330.91 273.35,329.31' fill='#F5E61F' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_xwy &amp;lt;br/&amp;gt; value:  19 &amp;lt;br/&amp;gt; You can add a story here!' data-id='69'/>\n   <polygon id='svg_f7ac231d_c0b8_479f_b989_d1791d02bd25_e70' points='247.92,328.61 247.84,327.35 247.60,326.10 247.21,324.89 246.67,323.74 245.99,322.67 245.18,321.69 244.26,320.82 243.23,320.08 242.12,319.47 240.94,319.00 239.71,318.68 238.45,318.52 237.18,318.52 235.92,318.68 234.69,319.00 233.51,319.47 232.40,320.08 231.37,320.82 230.45,321.69 229.64,322.67 228.96,323.74 228.42,324.89 228.02,326.10 227.79,327.35 227.71,328.61 227.79,329.88 228.02,331.13 228.42,332.33 228.96,333.48 229.64,334.55 230.45,335.53 231.37,336.40 232.40,337.15 233.51,337.76 234.69,338.23 235.92,338.54 237.18,338.70 238.45,338.70 239.71,338.54 240.94,338.23 242.12,337.76 243.23,337.15 244.26,336.40 245.18,335.53 245.99,334.55 246.67,333.48 247.21,332.33 247.60,331.13 247.84,329.88 247.92,328.61' fill='#FDE725' fill-opacity='0.6' stroke='#000000' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt' title='name:  Group_lhf &amp;lt;br/&amp;gt; value:  12 &amp;lt;br/&amp;gt; You can add a story here!' data-id='70'/>\n   <text x='238.88' y='191.84' font-size='4.27pt' font-family='Arial'>tkv<\/text>\n   <text x='270.72' y='191.84' font-size='4.27pt' font-family='Arial'>hqo<\/text>\n   <text x='251.8' y='226.99' font-size='4.27pt' font-family='Arial'>pag<\/text>\n   <text x='223.83' y='212.04' font-size='4.27pt' font-family='Arial'>emc<\/text>\n   <text x='208.44' y='195.85' font-size='4.27pt' font-family='Arial'>awo<\/text>\n   <text x='215.76' y='159.36' font-size='4.27pt' font-family='Arial'>uaw<\/text>\n   <text x='260.19' y='155.18' font-size='4.27pt' font-family='Arial'>dap<\/text>\n   <text x='300.83' y='166.82' font-size='4.27pt' font-family='Arial'>hha<\/text>\n   <text x='305.09' y='209.29' font-size='4.27pt' font-family='Arial'>dpq<\/text>\n   <text x='290.44' y='250.8' font-size='4.27pt' font-family='Arial'>duu<\/text>\n   <text x='217.84' y='231.69' font-size='4.27pt' font-family='Arial'>ygd<\/text>\n   <text x='191.76' y='220.64' font-size='4.27pt' font-family='Arial'>ajn<\/text>\n   <text x='251.54' y='271.41' font-size='4.27pt' font-family='Arial'>gvj<\/text>\n   <text x='206.84' y='264.79' font-size='4.27pt' font-family='Arial'>tvx<\/text>\n   <text x='238.67' y='139.03' font-size='4.27pt' font-family='Arial'>kdx<\/text>\n   <text x='251.44' y='124.68' font-size='4.27pt' font-family='Arial'>tix<\/text>\n   <text x='277.29' y='123.23' font-size='4.27pt' font-family='Arial'>jeq<\/text>\n   <text x='311.74' y='126.37' font-size='4.27pt' font-family='Arial'>ovh<\/text>\n   <text x='177.67' y='186.48' font-size='4.27pt' font-family='Arial'>tkx<\/text>\n   <text x='178.36' y='150.51' font-size='4.27pt' font-family='Arial'>rdg<\/text>\n   <text x='195.53' y='143.32' font-size='4.27pt' font-family='Arial'>sxp<\/text>\n   <text x='198.8' y='122.02' font-size='4.27pt' font-family='Arial'>jta<\/text>\n   <text x='223.81' y='128.32' font-size='4.27pt' font-family='Arial'>rbx<\/text>\n   <text x='233.94' y='120.08' font-size='4.27pt' font-family='Arial'>zzk<\/text>\n   <text x='171.02' y='247.1' font-size='4.27pt' font-family='Arial'>ggt<\/text>\n   <text x='339.19' y='153.93' font-size='4.27pt' font-family='Arial'>ahk<\/text>\n   <text x='330.5' y='183.75' font-size='4.27pt' font-family='Arial'>vmt<\/text>\n   <text x='337.8' y='205.18' font-size='4.27pt' font-family='Arial'>rff<\/text>\n   <text x='329.89' y='217.32' font-size='4.27pt' font-family='Arial'>jeu<\/text>\n   <text x='326.86' y='230.48' font-size='4.27pt' font-family='Arial'>ezh<\/text>\n   <text x='332.75' y='258.93' font-size='4.27pt' font-family='Arial'>xhv<\/text>\n   <text x='238.31' y='99.26' font-size='4.27pt' font-family='Arial'>ygc<\/text>\n   <text x='273.44' y='85.92' font-size='4.27pt' font-family='Arial'>nym<\/text>\n   <text x='162.82' y='220.39' font-size='4.27pt' font-family='Arial'>ocv<\/text>\n   <text x='138.56' y='199.61' font-size='4.27pt' font-family='Arial'>iev<\/text>\n   <text x='309.63' y='282.96' font-size='4.27pt' font-family='Arial'>jeh<\/text>\n   <text x='280.41' y='305.19' font-size='4.27pt' font-family='Arial'>roc<\/text>\n   <text x='202.46' y='79.49' font-size='4.27pt' font-family='Arial'>dgb<\/text>\n   <text x='310.44' y='91.58' font-size='4.27pt' font-family='Arial'>upe<\/text>\n   <text x='153.78' y='175.16' font-size='4.27pt' font-family='Arial'>lty<\/text>\n   <text x='151.69' y='157.49' font-size='4.27pt' font-family='Arial'>wgu<\/text>\n   <text x='346.8' y='177.02' font-size='4.27pt' font-family='Arial'>vmy<\/text>\n   <text x='355.36' y='194.08' font-size='4.27pt' font-family='Arial'>eeo<\/text>\n   <text x='242.2' y='307.39' font-size='4.27pt' font-family='Arial'>upp<\/text>\n   <text x='208.35' y='307.01' font-size='4.27pt' font-family='Arial'>eax<\/text>\n   <text x='353.89' y='225.87' font-size='4.27pt' font-family='Arial'>ipc<\/text>\n   <text x='373.84' y='258.14' font-size='4.27pt' font-family='Arial'>dot<\/text>\n   <text x='385.09' y='207.87' font-size='4.27pt' font-family='Arial'>zhg<\/text>\n   <text x='153.02' y='131.26' font-size='4.27pt' font-family='Arial'>iwp<\/text>\n   <text x='155.68' y='91.6' font-size='4.27pt' font-family='Arial'>phc<\/text>\n   <text x='169.88' y='292.3' font-size='4.27pt' font-family='Arial'>obj<\/text>\n   <text x='139.98' y='263.57' font-size='4.27pt' font-family='Arial'>hck<\/text>\n   <text x='333.21' y='103.68' font-size='4.27pt' font-family='Arial'>acy<\/text>\n   <text x='355.01' y='121.31' font-size='4.27pt' font-family='Arial'>mue<\/text>\n   <text x='244.29' y='52.65' font-size='4.27pt' font-family='Arial'>ilg<\/text>\n   <text x='377.51' y='152.04' font-size='4.27pt' font-family='Arial'>mrr<\/text>\n   <text x='406.89' y='176.16' font-size='4.27pt' font-family='Arial'>qhk<\/text>\n   <text x='108.53' y='234.7' font-size='4.27pt' font-family='Arial'>hnb<\/text>\n   <text x='120.87' y='160.26' font-size='4.27pt' font-family='Arial'>ufc<\/text>\n   <text x='352.08' y='286.55' font-size='4.27pt' font-family='Arial'>suw<\/text>\n   <text x='329.15' y='301.31' font-size='4.27pt' font-family='Arial'>bvu<\/text>\n   <text x='410.05' y='239.25' font-size='4.27pt' font-family='Arial'>kzb<\/text>\n   <text x='312.61' y='327.96' font-size='4.27pt' font-family='Arial'>dsw<\/text>\n   <text x='118.74' y='117.03' font-size='4.27pt' font-family='Arial'>efz<\/text>\n   <text x='289' y='42.24' font-size='4.27pt' font-family='Arial'>nqv<\/text>\n   <text x='325.42' y='63.16' font-size='4.27pt' font-family='Arial'>cjr<\/text>\n   <text x='336.26' y='85.11' font-size='4.27pt' font-family='Arial'>xjr<\/text>\n   <text x='89.44' y='191.92' font-size='4.27pt' font-family='Arial'>vri<\/text>\n   <text x='255.73' y='331.35' font-size='4.27pt' font-family='Arial'>xwy<\/text>\n   <text x='234.81' y='330.65' font-size='4.27pt' font-family='Arial'>lhf<\/text>\n  <\/g>\n <\/g>\n<\/svg>","js":null,"uid":"svg_f7ac231d_c0b8_479f_b989_d1791d02bd25","ratio":1.4,"settings":{"tooltip":{"css":".tooltip_SVGID_ { padding:5px;background:black;color:white;border-radius:2px;text-align:left; ; position:absolute;pointer-events:none;z-index:999;}","placement":"doc","opacity":0.9,"offx":10,"offy":10,"use_cursor_pos":true,"use_fill":false,"use_stroke":false,"delay_over":200,"delay_out":500},"hover":{"css":".hover_data_SVGID_ { fill:orange;stroke:black;cursor:pointer; }\ntext.hover_data_SVGID_ { stroke:none;fill:orange; }\ncircle.hover_data_SVGID_ { fill:orange;stroke:black; }\nline.hover_data_SVGID_, polyline.hover_data_SVGID_ { fill:none;stroke:orange; }\nrect.hover_data_SVGID_, polygon.hover_data_SVGID_, path.hover_data_SVGID_ { fill:orange;stroke:none; }\nimage.hover_data_SVGID_ { stroke:orange; }","reactive":true,"nearest_distance":null},"hover_inv":{"css":""},"hover_key":{"css":".hover_key_SVGID_ { fill:orange;stroke:black;cursor:pointer; }\ntext.hover_key_SVGID_ { stroke:none;fill:orange; }\ncircle.hover_key_SVGID_ { fill:orange;stroke:black; }\nline.hover_key_SVGID_, polyline.hover_key_SVGID_ { fill:none;stroke:orange; }\nrect.hover_key_SVGID_, polygon.hover_key_SVGID_, path.hover_key_SVGID_ { fill:orange;stroke:none; }\nimage.hover_key_SVGID_ { stroke:orange; }","reactive":true},"hover_theme":{"css":".hover_theme_SVGID_ { fill:orange;stroke:black;cursor:pointer; }\ntext.hover_theme_SVGID_ { stroke:none;fill:orange; }\ncircle.hover_theme_SVGID_ { fill:orange;stroke:black; }\nline.hover_theme_SVGID_, polyline.hover_theme_SVGID_ { fill:none;stroke:orange; }\nrect.hover_theme_SVGID_, polygon.hover_theme_SVGID_, path.hover_theme_SVGID_ { fill:orange;stroke:none; }\nimage.hover_theme_SVGID_ { stroke:orange; }","reactive":true},"select":{"css":".select_data_SVGID_ { fill:red;stroke:black;cursor:pointer; }\ntext.select_data_SVGID_ { stroke:none;fill:red; }\ncircle.select_data_SVGID_ { fill:red;stroke:black; }\nline.select_data_SVGID_, polyline.select_data_SVGID_ { fill:none;stroke:red; }\nrect.select_data_SVGID_, polygon.select_data_SVGID_, path.select_data_SVGID_ { fill:red;stroke:none; }\nimage.select_data_SVGID_ { stroke:red; }","type":"multiple","only_shiny":true,"selected":[]},"select_inv":{"css":""},"select_key":{"css":".select_key_SVGID_ { fill:red;stroke:black;cursor:pointer; }\ntext.select_key_SVGID_ { stroke:none;fill:red; }\ncircle.select_key_SVGID_ { fill:red;stroke:black; }\nline.select_key_SVGID_, polyline.select_key_SVGID_ { fill:none;stroke:red; }\nrect.select_key_SVGID_, polygon.select_key_SVGID_, path.select_key_SVGID_ { fill:red;stroke:none; }\nimage.select_key_SVGID_ { stroke:red; }","type":"single","only_shiny":true,"selected":[]},"select_theme":{"css":".select_theme_SVGID_ { fill:red;stroke:black;cursor:pointer; }\ntext.select_theme_SVGID_ { stroke:none;fill:red; }\ncircle.select_theme_SVGID_ { fill:red;stroke:black; }\nline.select_theme_SVGID_, polyline.select_theme_SVGID_ { fill:none;stroke:red; }\nrect.select_theme_SVGID_, polygon.select_theme_SVGID_, path.select_theme_SVGID_ { fill:red;stroke:none; }\nimage.select_theme_SVGID_ { stroke:red; }","type":"single","only_shiny":true,"selected":[]},"zoom":{"min":1,"max":1,"duration":300},"toolbar":{"position":"topright","pngname":"diagram","tooltips":null,"fixed":false,"hidden":[],"delay_over":200,"delay_out":500},"sizing":{"rescale":true,"width":1}}},"evals":[],"jsHooks":[]}</script>
<p>交互式圆形打包图（circle packing），可悬停显示详细信息</p>
</div>
</div>
</section>
</section>
<section id="several-levels" class="level2" data-number="25.3">
<h2 data-number="25.3" class="anchored" data-anchor-id="several-levels"><span class="header-section-number">25.3</span> Several levels</h2>
<section id="ggraph" class="level3" data-number="25.3.1">
<h3 data-number="25.3.1" class="anchored" data-anchor-id="ggraph"><span class="header-section-number">25.3.1</span> <code>ggraph()</code></h3>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggraph) <span class="co"># 用于图形可视化</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(igraph) <span class="co"># 用于图形操作</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载 edges 和 vertices 数据，flare 数据集内置于 packcircles 包</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>edges <span class="ot">&lt;-</span> flare<span class="sc">$</span>edges  <span class="co"># 边数据，描述节点之间的父子关系</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 通常我们还会有一个节点信息表，包含每个节点的属性</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>vertices <span class="ot">&lt;-</span> flare<span class="sc">$</span>vertices  <span class="co"># 节点数据，包含节点名称、分组等信息</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 igraph 包将边和节点数据转换为图对象</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>mygraph <span class="ot">&lt;-</span> <span class="fu">graph_from_data_frame</span>(edges, <span class="at">vertices =</span> vertices)</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggraph 包绘制多层级圆形打包图</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'circlepack'</span>) <span class="sc">+</span> </span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_circle</span>() <span class="sc">+</span>         <span class="co"># 绘制每个节点的圆</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>()                 <span class="co"># 去除坐标轴和背景</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="576"></p>
<figcaption>多层级圆形打包图（circle packing），展示层级结构数据</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="type" class="level3" data-number="25.3.2">
<h3 data-number="25.3.2" class="anchored" data-anchor-id="type"><span class="header-section-number">25.3.2</span> type</h3>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'dendrogram'</span>, <span class="at">circular =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_edge_diagonal</span>() <span class="sc">+</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="576"></p>
<figcaption>dendrogram, circle packing</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'dendrogram'</span>, <span class="at">circular =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_edge_diagonal</span>() <span class="sc">+</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>dendrogram, not circle packing</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="st">'treemap'</span>, <span class="at">weight =</span> size) <span class="sc">+</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_node_tile</span>(<span class="fu">aes</span>(<span class="at">fill =</span> depth), <span class="at">size =</span> <span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>treemap</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="st">'partition'</span>, <span class="at">circular =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_node_arc_bar</span>(<span class="fu">aes</span>(<span class="at">fill =</span> depth), <span class="at">size =</span> <span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>partition</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggraph 绘制基础网络图，展示节点与边的关系</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph) <span class="sc">+</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制边（连线），表示节点之间的连接关系</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_edge_link</span>() <span class="sc">+</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制节点（点），表示网络中的各个实体</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_point</span>() <span class="sc">+</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 去除坐标轴和背景，使图形更简洁</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 不显示图例</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>基础网络图：节点与连线的可视化</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="color-1" class="level3" data-number="25.3.3">
<h3 data-number="25.3.3" class="anchored" data-anchor-id="color-1"><span class="header-section-number">25.3.3</span> color</h3>
<p>节点颜色根据深度变化:</p>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggraph 绘制圆形打包图，节点颜色根据深度变化</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'circlepack'</span>, <span class="at">weight=</span>size) <span class="sc">+</span> </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_node_circle</span>(<span class="fu">aes</span>(<span class="at">fill =</span> depth)) <span class="sc">+</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span> </span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"FALSE"</span>)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>p</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="576"></p>
<figcaption>圆形打包图：节点颜色根据深度变化</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">scale_fill_viridis</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="576"></p>
<figcaption>viridis 调色板应用于圆形打包图</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">scale_fill_distiller</span>(<span class="at">palette =</span> <span class="st">"RdPu"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="576"></p>
<figcaption>colorBrewer 调色板应用于圆形打包图</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="label" class="level3" data-number="25.3.4">
<h3 data-number="25.3.4" class="anchored" data-anchor-id="label"><span class="header-section-number">25.3.4</span> label</h3>
<p>适用于层级不特别多的情况</p>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 仅保留有下级的边（即 to 在 from 中出现）</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>edges <span class="ot">&lt;-</span> flare<span class="sc">$</span>edges <span class="sc">|&gt;</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(to <span class="sc">%in%</span> from) <span class="sc">|&gt;</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">droplevels</span>()</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 仅保留参与这些边的节点</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>vertices <span class="ot">&lt;-</span> flare<span class="sc">$</span>vertices <span class="sc">|&gt;</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(name <span class="sc">%in%</span> <span class="fu">c</span>(edges<span class="sc">$</span>from, edges<span class="sc">$</span>to)) <span class="sc">|&gt;</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">droplevels</span>()</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 随机生成每个节点的 size 属性（可根据实际数据调整）</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>vertices<span class="sc">$</span>size <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="fu">nrow</span>(vertices))</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a><span class="co"># 重新构建 igraph 图对象</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>mygraph <span class="ot">&lt;-</span> <span class="fu">graph_from_data_frame</span>(edges, <span class="at">vertices =</span> vertices)</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggraph 绘制多层级圆形打包图</span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'circlepack'</span>, <span class="at">weight =</span> size) <span class="sc">+</span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制每个节点的圆，颜色根据深度变化</span></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_circle</span>(<span class="fu">aes</span>(<span class="at">fill =</span> depth)) <span class="sc">+</span></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 仅在叶节点（leaf=TRUE）处添加标签，标签内容为 shortName，字体大小与 size 成比例</span></span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_text</span>(<span class="fu">aes</span>(</span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">label =</span> shortName,    <span class="co"># 标签内容</span></span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">filter =</span> leaf,        <span class="co"># 仅叶节点显示</span></span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill =</span> depth,         <span class="co"># 标签颜色与深度一致</span></span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">size =</span> size           <span class="co"># 字体大小与 size 成比例</span></span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">+</span></span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>                          <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"FALSE"</span>) <span class="sc">+</span>      <span class="co"># 不显示图例</span></span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis</span>()                    <span class="co"># 使用 viridis 调色板</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" width="576"></p>
<figcaption>带标签的多层级圆形打包图（circle packing），仅叶节点显示标签</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggraph 绘制多层级圆形打包图，节点颜色根据深度变化，叶节点显示标签</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'circlepack'</span>, <span class="at">weight =</span> size) <span class="sc">+</span> </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制每个节点的圆，颜色根据深度变化</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_circle</span>(<span class="fu">aes</span>(<span class="at">fill =</span> depth)) <span class="sc">+</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 仅在叶节点（leaf=TRUE）处添加标签，标签内容为 shortName，字体大小与 size 成比例</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_label</span>(</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">label =</span> shortName,  <span class="co"># 标签内容为节点的 shortName</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">filter =</span> leaf,      <span class="co"># 仅叶节点显示标签</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> size         <span class="co"># 字体大小与 size 成比例</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>                          <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"FALSE"</span>) <span class="sc">+</span>      <span class="co"># 不显示图例</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis</span>()                    <span class="co"># 使用 viridis 调色板</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="576"></p>
<figcaption>带标签的多层级圆形打包图（circle packing），仅叶节点显示标签</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="hide" class="level3" data-number="25.3.5">
<h3 data-number="25.3.5" class="anchored" data-anchor-id="hide"><span class="header-section-number">25.3.5</span> Hide</h3>
<p>隐藏1个或多个外层大圈:</p>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 packcircles 包内置的 flare 数据集，包含层级结构的边和节点信息</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>edges <span class="ot">=</span> flare<span class="sc">$</span>edges         <span class="co"># 边数据，描述父子关系</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>vertices <span class="ot">=</span> flare<span class="sc">$</span>vertices   <span class="co"># 节点数据，包含节点属性</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 构建 igraph 图对象</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>mygraph <span class="ot">&lt;-</span> <span class="fu">graph_from_data_frame</span>(edges, <span class="at">vertices =</span> vertices)</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 绘制多层级圆形打包图，隐藏最外层大圈（depth=0 填充为白色）</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'circlepack'</span>, <span class="at">weight =</span> size) <span class="sc">+</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制每个节点的圆，填充和边框颜色根据深度分组</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_circle</span>(<span class="fu">aes</span>(<span class="at">fill =</span> <span class="fu">as.factor</span>(depth), <span class="at">color =</span> <span class="fu">as.factor</span>(depth))) <span class="sc">+</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置不同深度的填充颜色，最外层（depth=0）为白色，其余用 viridis 调色板</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>            <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"white"</span>,           <span class="co"># 最外层隐藏</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>            <span class="st">"1"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">1</span>],     <span class="co"># 第一层</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>            <span class="st">"2"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">2</span>],     <span class="co"># 第二层</span></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>            <span class="st">"3"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">3</span>],     <span class="co"># 第三层</span></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>            <span class="st">"4"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">4</span>]      <span class="co"># 第四层</span></span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置不同深度的边框颜色，最外层为白色，其余为黑色</span></span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_manual</span>(</span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>            <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"white"</span>,           <span class="co"># 最外层隐藏</span></span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>            <span class="st">"1"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>            <span class="st">"2"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a>            <span class="st">"3"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a>            <span class="st">"4"</span> <span class="ot">=</span> <span class="st">"black"</span></span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb19-32"><a href="#cb19-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>                        <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb19-33"><a href="#cb19-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"FALSE"</span>)      <span class="co"># 不显示图例</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" width="576"></p>
<figcaption>隐藏最外层大圈的多层级圆形打包图（circle packing）</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggraph 绘制多层级圆形打包图，隐藏最外层和第二层大圈</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'circlepack'</span>, <span class="at">weight =</span> size) <span class="sc">+</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制每个节点的圆，填充和边框颜色根据深度分组</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_circle</span>(<span class="fu">aes</span>(<span class="at">fill =</span> <span class="fu">as.factor</span>(depth), <span class="at">color =</span> <span class="fu">as.factor</span>(depth))) <span class="sc">+</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置不同深度的填充颜色，前两层（depth=0,1）为白色，其余用 magma 调色板</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>            <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"white"</span>,           <span class="co"># 最外层隐藏</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>            <span class="st">"1"</span> <span class="ot">=</span> <span class="st">"white"</span>,           <span class="co"># 第二层隐藏</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>            <span class="st">"2"</span> <span class="ot">=</span> <span class="fu">magma</span>(<span class="dv">4</span>)[<span class="dv">2</span>],       <span class="co"># 第三层</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>            <span class="st">"3"</span> <span class="ot">=</span> <span class="fu">magma</span>(<span class="dv">4</span>)[<span class="dv">3</span>],       <span class="co"># 第四层</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>            <span class="st">"4"</span> <span class="ot">=</span> <span class="fu">magma</span>(<span class="dv">4</span>)[<span class="dv">4</span>]        <span class="co"># 第五层</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置不同深度的边框颜色，前两层为白色，其余为黑色</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_manual</span>(</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>            <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"white"</span>,           <span class="co"># 最外层隐藏</span></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>            <span class="st">"1"</span> <span class="ot">=</span> <span class="st">"white"</span>,           <span class="co"># 第二层隐藏</span></span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>            <span class="st">"2"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>            <span class="st">"3"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>            <span class="st">"4"</span> <span class="ot">=</span> <span class="st">"black"</span></span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>                        <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"FALSE"</span>)      <span class="co"># 不显示图例</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid figure-img" width="576"></p>
<figcaption>隐藏前两层大圈的多层级圆形打包图（circle packing）</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="特定-label" class="level3" data-number="25.3.6">
<h3 data-number="25.3.6" class="anchored" data-anchor-id="特定-label"><span class="header-section-number">25.3.6</span> 特定 label</h3>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载 data.tree 包，用于树结构操作</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.tree)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 重新加载边和节点数据</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>edges <span class="ot">&lt;-</span> flare<span class="sc">$</span>edges</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>vertices <span class="ot">&lt;-</span> flare<span class="sc">$</span>vertices</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 将边数据转换为树结构，便于获取每个节点的层级信息</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>tree <span class="ot">&lt;-</span> <span class="fu">FromDataFrameNetwork</span>(edges)</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 获取每个节点的名称和层级，并合并到原始节点数据框</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>mylevels <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> tree<span class="sc">$</span><span class="fu">Get</span>(<span class="st">'name'</span>),      <span class="co"># 节点名称</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">level =</span> tree<span class="sc">$</span><span class="fu">Get</span>(<span class="st">"level"</span>)     <span class="co"># 节点层级（根节点为1）</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>vertices <span class="ot">&lt;-</span> vertices <span class="sc">%&gt;%</span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(., mylevels, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"name"</span> <span class="ot">=</span> <span class="st">"name"</span>))</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a><span class="co"># 仅为 level=2 的节点添加标签，其余节点标签为 NA</span></span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>vertices <span class="ot">&lt;-</span> vertices <span class="sc">%&gt;%</span></span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">new_label =</span> <span class="fu">ifelse</span>(level <span class="sc">==</span> <span class="dv">2</span>, shortName, <span class="cn">NA</span>))</span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a><span class="co"># 构建 igraph 图对象</span></span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>mygraph <span class="ot">&lt;-</span> <span class="fu">graph_from_data_frame</span>(edges, <span class="at">vertices =</span> vertices)</span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a><span class="co"># 绘制多层级圆形打包图</span></span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'circlepack'</span>, <span class="at">weight =</span> size) <span class="sc">+</span></span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制每个节点的圆，填充和边框颜色根据深度分组</span></span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_circle</span>(<span class="fu">aes</span>(<span class="at">fill =</span> <span class="fu">as.factor</span>(depth), <span class="at">color =</span> <span class="fu">as.factor</span>(depth))) <span class="sc">+</span></span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置不同深度的填充颜色，最外层为白色，其余用 viridis 调色板</span></span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb21-32"><a href="#cb21-32" aria-hidden="true" tabindex="-1"></a>        <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"white"</span>,</span>
<span id="cb21-33"><a href="#cb21-33" aria-hidden="true" tabindex="-1"></a>        <span class="st">"1"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">1</span>],</span>
<span id="cb21-34"><a href="#cb21-34" aria-hidden="true" tabindex="-1"></a>        <span class="st">"2"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">2</span>],</span>
<span id="cb21-35"><a href="#cb21-35" aria-hidden="true" tabindex="-1"></a>        <span class="st">"3"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">3</span>],</span>
<span id="cb21-36"><a href="#cb21-36" aria-hidden="true" tabindex="-1"></a>        <span class="st">"4"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">4</span>]</span>
<span id="cb21-37"><a href="#cb21-37" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">+</span></span>
<span id="cb21-38"><a href="#cb21-38" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置不同深度的边框颜色，最外层为白色，其余为黑色</span></span>
<span id="cb21-39"><a href="#cb21-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb21-40"><a href="#cb21-40" aria-hidden="true" tabindex="-1"></a>        <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"white"</span>,</span>
<span id="cb21-41"><a href="#cb21-41" aria-hidden="true" tabindex="-1"></a>        <span class="st">"1"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb21-42"><a href="#cb21-42" aria-hidden="true" tabindex="-1"></a>        <span class="st">"2"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb21-43"><a href="#cb21-43" aria-hidden="true" tabindex="-1"></a>        <span class="st">"3"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb21-44"><a href="#cb21-44" aria-hidden="true" tabindex="-1"></a>        <span class="st">"4"</span> <span class="ot">=</span> <span class="st">"black"</span></span>
<span id="cb21-45"><a href="#cb21-45" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">+</span></span>
<span id="cb21-46"><a href="#cb21-46" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 仅为 new_label 非 NA 的节点添加标签（即 level=2 的节点）</span></span>
<span id="cb21-47"><a href="#cb21-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_label</span>(<span class="fu">aes</span>(<span class="at">label =</span> new_label), <span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb21-48"><a href="#cb21-48" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 去除坐标轴和背景，设置无图例和无边距</span></span>
<span id="cb21-49"><a href="#cb21-49" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb21-50"><a href="#cb21-50" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb21-51"><a href="#cb21-51" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">"FALSE"</span>,</span>
<span id="cb21-52"><a href="#cb21-52" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.margin =</span> <span class="fu">unit</span>(<span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">4</span>), <span class="st">"cm"</span>)</span>
<span id="cb21-53"><a href="#cb21-53" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="circular_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid figure-img" width="576"></p>
<figcaption>仅为特定层级（如 level=2）节点添加标签的多层级圆形打包图</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="可缩放" class="level3" data-number="25.3.7">
<h3 data-number="25.3.7" class="anchored" data-anchor-id="可缩放"><span class="header-section-number">25.3.7</span> 可缩放</h3>
<p><code>circlePacker</code> 包可以用来创建交互式和可缩放圆形堆积图</p>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载 circlepackeR 包，用于创建可缩放的交互式圆形打包图</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(circlepackeR)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 构建一个嵌套数据框，包含多层级结构信息</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">root =</span> <span class="fu">rep</span>(<span class="st">"root"</span>, <span class="dv">15</span>),                                 <span class="co"># 根节点</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">"group A"</span>, <span class="dv">5</span>), <span class="fu">rep</span>(<span class="st">"group B"</span>, <span class="dv">5</span>), <span class="fu">rep</span>(<span class="st">"group C"</span>, <span class="dv">5</span>)), <span class="co"># 一级分组</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">subgroup =</span> <span class="fu">rep</span>(letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>], <span class="at">each =</span> <span class="dv">3</span>),                 <span class="co"># 二级分组</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">subsubgroup =</span> <span class="fu">rep</span>(letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>], <span class="dv">5</span>),                     <span class="co"># 三级分组</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">value =</span> <span class="fu">sample</span>(<span class="fu">seq</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>), <span class="dv">15</span>)                           <span class="co"># 每个叶节点的数值</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 data.tree 包将数据转换为树结构</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.tree)</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a><span class="co"># 构建 pathString 字段，格式为 root/group/subgroup/subsubgroup</span></span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>pathString <span class="ot">&lt;-</span> <span class="fu">paste</span>(</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">"world"</span>,                <span class="co"># 根节点名称</span></span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>    data<span class="sc">$</span>group,             <span class="co"># 一级分组</span></span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>    data<span class="sc">$</span>subgroup,          <span class="co"># 二级分组</span></span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>    data<span class="sc">$</span>subsubgroup,       <span class="co"># 三级分组</span></span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">"/"</span></span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a><span class="co"># 转换为树结构对象</span></span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>population <span class="ot">&lt;-</span> <span class="fu">as.Node</span>(data)</span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a><span class="co"># 绘制可缩放的交互式圆形打包图</span></span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a><span class="co"># color_min 和 color_max 可自定义颜色范围</span></span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a><span class="fu">circlepackeR</span>(</span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a>    population,                 <span class="co"># 层级结构数据</span></span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="st">"value"</span>,             <span class="co"># 用于圆面积的数值字段</span></span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">color_min =</span> <span class="st">"hsl(56,80%,80%)"</span>,   <span class="co"># 最小值对应的颜色</span></span>
<span id="cb22-32"><a href="#cb22-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">color_max =</span> <span class="st">"hsl(341,30%,40%)"</span>   <span class="co"># 最大值对应的颜色</span></span>
<span id="cb22-33"><a href="#cb22-33" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="circlepackeR html-widget html-fill-item" id="htmlwidget-2119ed3bb2c5926cb2b4" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-2119ed3bb2c5926cb2b4">{"x":{"data":{"name":"world","children":[{"name":"group A","children":[{"name":"a","children":[{"name":"a","group":"group A","subgroup":"a","subsubgroup":"a","value":14},{"name":"b","group":"group A","subgroup":"a","subsubgroup":"b","value":8},{"name":"c","group":"group A","subgroup":"a","subsubgroup":"c","value":11}]},{"name":"b","children":[{"name":"a","group":"group A","subgroup":"b","subsubgroup":"a","value":3},{"name":"b","group":"group A","subgroup":"b","subsubgroup":"b","value":7}]}]},{"name":"group B","children":[{"name":"b","children":[{"name":"c","group":"group B","subgroup":"b","subsubgroup":"c","value":12}]},{"name":"c","children":[{"name":"a","group":"group B","subgroup":"c","subsubgroup":"a","value":2},{"name":"b","group":"group B","subgroup":"c","subsubgroup":"b","value":15},{"name":"c","group":"group B","subgroup":"c","subsubgroup":"c","value":5}]},{"name":"d","children":[{"name":"a","group":"group B","subgroup":"d","subsubgroup":"a","value":13}]}]},{"name":"group C","children":[{"name":"d","children":[{"name":"b","group":"group C","subgroup":"d","subsubgroup":"b","value":1},{"name":"c","group":"group C","subgroup":"d","subsubgroup":"c","value":9}]},{"name":"e","children":[{"name":"a","group":"group C","subgroup":"e","subsubgroup":"a","value":10},{"name":"b","group":"group C","subgroup":"e","subsubgroup":"b","value":6},{"name":"c","group":"group C","subgroup":"e","subsubgroup":"c","value":4}]}]}]},"options":{"size":"value","color_min":"hsl(56,80%,80%)","color_max":"hsl(341,30%,40%)"}},"evals":[],"jsHooks":[]}</script>
<p>可缩放交互式多层级圆形打包图（circle packing），使用 circlepackeR 包</p>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载 circlepackeR 包，用于绘制交互式圆形打包图</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(circlepackeR)</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载 ggraph 包（本例未直接用到，但常用于网络可视化）</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggraph)</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 packcircles 包内置的 flare 数据集，获取边列表</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>data_edge <span class="ot">&lt;-</span> flare<span class="sc">$</span>edges</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 提取每个节点名称的最后一级（去掉前面的分层前缀），便于后续分层</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>data_edge<span class="sc">$</span>from <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">".*</span><span class="sc">\\</span><span class="st">."</span>, <span class="st">""</span>, data_edge<span class="sc">$</span>from)</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>data_edge<span class="sc">$</span>to <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">".*</span><span class="sc">\\</span><span class="st">."</span>, <span class="st">""</span>, data_edge<span class="sc">$</span>to)</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a><span class="co"># head(data_edge) # 查看处理后的边列表</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载 data.tree 包，用于将边列表转换为树结构</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.tree)</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a><span class="co"># 将边列表转换为树结构对象</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>data_tree <span class="ot">&lt;-</span> <span class="fu">FromDataFrameNetwork</span>(data_edge)</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a><span class="co"># 将树结构转换为嵌套数据框，提取每一层的名称</span></span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>data_nested <span class="ot">&lt;-</span> <span class="fu">ToDataFrameTree</span>(</span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>    data_tree,</span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">level1 =</span> <span class="cf">function</span>(x) x<span class="sc">$</span>path[<span class="dv">2</span>], <span class="co"># 第一层</span></span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">level2 =</span> <span class="cf">function</span>(x) x<span class="sc">$</span>path[<span class="dv">3</span>], <span class="co"># 第二层</span></span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">level3 =</span> <span class="cf">function</span>(x) x<span class="sc">$</span>path[<span class="dv">4</span>], <span class="co"># 第三层</span></span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">level4 =</span> <span class="cf">function</span>(x) x<span class="sc">$</span>path[<span class="dv">5</span>]  <span class="co"># 第四层</span></span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a>)[<span class="sc">-</span><span class="dv">1</span>, <span class="sc">-</span><span class="dv">1</span>] <span class="co"># 去除根节点和第一列（树结构自带的 name）</span></span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a><span class="co"># 去除包含 NA 的行，只保留完整路径</span></span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a>data_nested <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(data_nested)</span>
<span id="cb23-30"><a href="#cb23-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-31"><a href="#cb23-31" aria-hidden="true" tabindex="-1"></a><span class="co"># 构建 pathString 字段，格式为 roots/level1/level2/level3/level4</span></span>
<span id="cb23-32"><a href="#cb23-32" aria-hidden="true" tabindex="-1"></a>data_nested<span class="sc">$</span>pathString <span class="ot">&lt;-</span> <span class="fu">paste</span>(</span>
<span id="cb23-33"><a href="#cb23-33" aria-hidden="true" tabindex="-1"></a>    <span class="st">"roots"</span>,</span>
<span id="cb23-34"><a href="#cb23-34" aria-hidden="true" tabindex="-1"></a>    data_nested<span class="sc">$</span>level1,</span>
<span id="cb23-35"><a href="#cb23-35" aria-hidden="true" tabindex="-1"></a>    data_nested<span class="sc">$</span>level2,</span>
<span id="cb23-36"><a href="#cb23-36" aria-hidden="true" tabindex="-1"></a>    data_nested<span class="sc">$</span>level3,</span>
<span id="cb23-37"><a href="#cb23-37" aria-hidden="true" tabindex="-1"></a>    data_nested<span class="sc">$</span>level4,</span>
<span id="cb23-38"><a href="#cb23-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">"/"</span></span>
<span id="cb23-39"><a href="#cb23-39" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-40"><a href="#cb23-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-41"><a href="#cb23-41" aria-hidden="true" tabindex="-1"></a><span class="co"># 设置每个叶节点的 value（圆面积），此处统一为 1</span></span>
<span id="cb23-42"><a href="#cb23-42" aria-hidden="true" tabindex="-1"></a>data_nested<span class="sc">$</span>value <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb23-43"><a href="#cb23-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-44"><a href="#cb23-44" aria-hidden="true" tabindex="-1"></a><span class="co"># 将嵌套数据框转换为树结构对象</span></span>
<span id="cb23-45"><a href="#cb23-45" aria-hidden="true" tabindex="-1"></a>data_Node <span class="ot">&lt;-</span> <span class="fu">as.Node</span>(data_nested)</span>
<span id="cb23-46"><a href="#cb23-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-47"><a href="#cb23-47" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 circlepackeR 绘制可缩放的多层级圆形打包图</span></span>
<span id="cb23-48"><a href="#cb23-48" aria-hidden="true" tabindex="-1"></a><span class="fu">circlepackeR</span>(data_Node, <span class="at">size =</span> <span class="st">"value"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="circlepackeR html-widget html-fill-item" id="htmlwidget-7d3e212e4a039d854bdb" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-7d3e212e4a039d854bdb">{"x":{"data":{"name":"roots","children":[{"name":"vis","children":[{"name":"data","children":[{"name":"converters","children":[{"name":"Converters","level1":"vis","level2":"data","level3":"converters","level4":"Converters","value":1},{"name":"DelimitedTextConverter","level1":"vis","level2":"data","level3":"converters","level4":"DelimitedTextConverter","value":1},{"name":"GraphMLConverter","level1":"vis","level2":"data","level3":"converters","level4":"GraphMLConverter","value":1},{"name":"IDataConverter","level1":"vis","level2":"data","level3":"converters","level4":"IDataConverter","value":1},{"name":"JSONConverter","level1":"vis","level2":"data","level3":"converters","level4":"JSONConverter","value":1}]},{"name":"render","children":[{"name":"ArrowType","level1":"vis","level2":"data","level3":"render","level4":"ArrowType","value":1},{"name":"EdgeRenderer","level1":"vis","level2":"data","level3":"render","level4":"EdgeRenderer","value":1},{"name":"IRenderer","level1":"vis","level2":"data","level3":"render","level4":"IRenderer","value":1},{"name":"ShapeRenderer","level1":"vis","level2":"data","level3":"render","level4":"ShapeRenderer","value":1}]}]},{"name":"operator","children":[{"name":"distortion","children":[{"name":"BifocalDistortion","level1":"vis","level2":"operator","level3":"distortion","level4":"BifocalDistortion","value":1},{"name":"Distortion","level1":"vis","level2":"operator","level3":"distortion","level4":"Distortion","value":1},{"name":"FisheyeDistortion","level1":"vis","level2":"operator","level3":"distortion","level4":"FisheyeDistortion","value":1}]},{"name":"encoder","children":[{"name":"ColorEncoder","level1":"vis","level2":"operator","level3":"encoder","level4":"ColorEncoder","value":1},{"name":"Encoder","level1":"vis","level2":"operator","level3":"encoder","level4":"Encoder","value":1},{"name":"PropertyEncoder","level1":"vis","level2":"operator","level3":"encoder","level4":"PropertyEncoder","value":1},{"name":"ShapeEncoder","level1":"vis","level2":"operator","level3":"encoder","level4":"ShapeEncoder","value":1},{"name":"SizeEncoder","level1":"vis","level2":"operator","level3":"encoder","level4":"SizeEncoder","value":1}]},{"name":"filter","children":[{"name":"FisheyeTreeFilter","level1":"vis","level2":"operator","level3":"filter","level4":"FisheyeTreeFilter","value":1},{"name":"GraphDistanceFilter","level1":"vis","level2":"operator","level3":"filter","level4":"GraphDistanceFilter","value":1},{"name":"VisibilityFilter","level1":"vis","level2":"operator","level3":"filter","level4":"VisibilityFilter","value":1}]},{"name":"label","children":[{"name":"Labeler","level1":"vis","level2":"operator","level3":"label","level4":"Labeler","value":1},{"name":"RadialLabeler","level1":"vis","level2":"operator","level3":"label","level4":"RadialLabeler","value":1},{"name":"StackedAreaLabeler","level1":"vis","level2":"operator","level3":"label","level4":"StackedAreaLabeler","value":1}]},{"name":"layout","children":[{"name":"AxisLayout","level1":"vis","level2":"operator","level3":"layout","level4":"AxisLayout","value":1},{"name":"BundledEdgeRouter","level1":"vis","level2":"operator","level3":"layout","level4":"BundledEdgeRouter","value":1},{"name":"CircleLayout","level1":"vis","level2":"operator","level3":"layout","level4":"CircleLayout","value":1},{"name":"CirclePackingLayout","level1":"vis","level2":"operator","level3":"layout","level4":"CirclePackingLayout","value":1},{"name":"DendrogramLayout","level1":"vis","level2":"operator","level3":"layout","level4":"DendrogramLayout","value":1},{"name":"ForceDirectedLayout","level1":"vis","level2":"operator","level3":"layout","level4":"ForceDirectedLayout","value":1},{"name":"IcicleTreeLayout","level1":"vis","level2":"operator","level3":"layout","level4":"IcicleTreeLayout","value":1},{"name":"IndentedTreeLayout","level1":"vis","level2":"operator","level3":"layout","level4":"IndentedTreeLayout","value":1},{"name":"Layout","level1":"vis","level2":"operator","level3":"layout","level4":"Layout","value":1},{"name":"NodeLinkTreeLayout","level1":"vis","level2":"operator","level3":"layout","level4":"NodeLinkTreeLayout","value":1},{"name":"PieLayout","level1":"vis","level2":"operator","level3":"layout","level4":"PieLayout","value":1},{"name":"RadialTreeLayout","level1":"vis","level2":"operator","level3":"layout","level4":"RadialTreeLayout","value":1},{"name":"RandomLayout","level1":"vis","level2":"operator","level3":"layout","level4":"RandomLayout","value":1},{"name":"StackedAreaLayout","level1":"vis","level2":"operator","level3":"layout","level4":"StackedAreaLayout","value":1},{"name":"TreeMapLayout","level1":"vis","level2":"operator","level3":"layout","level4":"TreeMapLayout","value":1}]}]}]}]},"options":{"size":"value","color_min":"hsl(152,80%,80%)","color_max":"hsl(228,30%,40%)"}},"evals":[],"jsHooks":[]}</script>
<p>将 edge list 转换为嵌套结构并用 circlepackeR 绘制多层级圆形打包图</p>
</div>
</div>


<!-- -->

</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./dendrogram.html" class="pagination-link" aria-label="Dendrogram">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Dendrogram</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./waffle.html" class="pagination-link" aria-label="Waffle">
        <span class="nav-page-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Waffle</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb24" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># Circular {#sec-circular}</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="fu">## PKG</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(packcircles) <span class="co"># for packing circles</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) <span class="co"># for data manipulation and visualization</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis) <span class="co"># for color palettes</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggiraph) <span class="co"># for interactive plots</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggraph) <span class="co"># for graph visualization</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(igraph) <span class="co"># for graph manipulation</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a><span class="co"># remotes::install_github("jeromefroe/circlepackeR")</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(circlepackeR) <span class="co"># for interactive circle packing</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.tree)</span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a><span class="fu">## One level</span></span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a><span class="fu">### Basic</span></span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Circle packing with packcircles"</span></span>
<span id="cb24-27"><a href="#cb24-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-28"><a href="#cb24-28" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(packcircles)  <span class="co"># 加载 packcircles 包，用于圆形打包</span></span>
<span id="cb24-29"><a href="#cb24-29" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)      <span class="co"># 加载 ggplot2 包，用于绘图</span></span>
<span id="cb24-30"><a href="#cb24-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-31"><a href="#cb24-31" aria-hidden="true" tabindex="-1"></a><span class="co"># 创建数据框，包含分组名称和对应的数值</span></span>
<span id="cb24-32"><a href="#cb24-32" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb24-33"><a href="#cb24-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> <span class="fu">paste</span>(<span class="st">"Group"</span>, letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>]),   <span class="co"># 生成 20 个分组名</span></span>
<span id="cb24-34"><a href="#cb24-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">value =</span> <span class="fu">sample</span>(<span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">100</span>), <span class="dv">20</span>)          <span class="co"># 随机生成 20 个 1~100 之间的数值</span></span>
<span id="cb24-35"><a href="#cb24-35" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-36"><a href="#cb24-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-37"><a href="#cb24-37" aria-hidden="true" tabindex="-1"></a><span class="co"># 生成圆形打包布局，返回每个圆的中心坐标 (x, y) 和半径 (radius)</span></span>
<span id="cb24-38"><a href="#cb24-38" aria-hidden="true" tabindex="-1"></a><span class="co"># sizetype='area' 表示半径根据面积成比例分配</span></span>
<span id="cb24-39"><a href="#cb24-39" aria-hidden="true" tabindex="-1"></a>packing <span class="ot">&lt;-</span> <span class="fu">circleProgressiveLayout</span>(data<span class="sc">$</span>value, <span class="at">sizetype =</span> <span class="st">'area'</span>)</span>
<span id="cb24-40"><a href="#cb24-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-41"><a href="#cb24-41" aria-hidden="true" tabindex="-1"></a><span class="co"># 将打包信息（中心坐标和半径）合并到原始数据框中</span></span>
<span id="cb24-42"><a href="#cb24-42" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">cbind</span>(data, packing)</span>
<span id="cb24-43"><a href="#cb24-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-44"><a href="#cb24-44" aria-hidden="true" tabindex="-1"></a><span class="co"># 检查半径与数值的关系（可选）</span></span>
<span id="cb24-45"><a href="#cb24-45" aria-hidden="true" tabindex="-1"></a><span class="co"># plot(data$radius, data$value)</span></span>
<span id="cb24-46"><a href="#cb24-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-47"><a href="#cb24-47" aria-hidden="true" tabindex="-1"></a><span class="co"># 根据每个圆的中心和半径，生成用于绘制圆形的多边形顶点坐标</span></span>
<span id="cb24-48"><a href="#cb24-48" aria-hidden="true" tabindex="-1"></a><span class="co"># npoints=50 表示每个圆用 50 个点近似</span></span>
<span id="cb24-49"><a href="#cb24-49" aria-hidden="true" tabindex="-1"></a>dat.gg <span class="ot">&lt;-</span> <span class="fu">circleLayoutVertices</span>(packing, <span class="at">npoints =</span> <span class="dv">50</span>)</span>
<span id="cb24-50"><a href="#cb24-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-51"><a href="#cb24-51" aria-hidden="true" tabindex="-1"></a><span class="co"># 绘制圆形打包图</span></span>
<span id="cb24-52"><a href="#cb24-52" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb24-53"><a href="#cb24-53" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制圆形多边形（气泡）</span></span>
<span id="cb24-54"><a href="#cb24-54" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_polygon</span>(</span>
<span id="cb24-55"><a href="#cb24-55" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> dat.gg,</span>
<span id="cb24-56"><a href="#cb24-56" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">group =</span> id, <span class="at">fill =</span> <span class="fu">as.factor</span>(id)),</span>
<span id="cb24-57"><a href="#cb24-57" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">"black"</span>, <span class="at">alpha =</span> <span class="fl">0.6</span></span>
<span id="cb24-58"><a href="#cb24-58" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-59"><a href="#cb24-59" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 在每个圆心添加文本标签，并根据 value 控制字体大小</span></span>
<span id="cb24-60"><a href="#cb24-60" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(</span>
<span id="cb24-61"><a href="#cb24-61" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> data,</span>
<span id="cb24-62"><a href="#cb24-62" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">size =</span> value, <span class="at">label =</span> group)</span>
<span id="cb24-63"><a href="#cb24-63" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-64"><a href="#cb24-64" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>)) <span class="sc">+</span>  <span class="co"># 设置字体大小范围</span></span>
<span id="cb24-65"><a href="#cb24-65" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置主题为无坐标轴、无背景</span></span>
<span id="cb24-66"><a href="#cb24-66" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb24-67"><a href="#cb24-67" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span>         <span class="co"># 不显示图例</span></span>
<span id="cb24-68"><a href="#cb24-68" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_equal</span>()                             <span class="co"># 保持 x、y 轴比例相等</span></span>
<span id="cb24-69"><a href="#cb24-69" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-70"><a href="#cb24-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-71"><a href="#cb24-71" aria-hidden="true" tabindex="-1"></a><span class="fu">### Color </span></span>
<span id="cb24-72"><a href="#cb24-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-73"><a href="#cb24-73" aria-hidden="true" tabindex="-1"></a>使用自定义调色板（magma）进行圆形打包可视化: </span>
<span id="cb24-74"><a href="#cb24-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-77"><a href="#cb24-77" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-78"><a href="#cb24-78" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "使用自定义调色板（magma）进行圆形打包可视化"</span></span>
<span id="cb24-79"><a href="#cb24-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-80"><a href="#cb24-80" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggplot2 绘制圆形打包图，并自定义颜色</span></span>
<span id="cb24-81"><a href="#cb24-81" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb24-82"><a href="#cb24-82" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制圆形多边形（气泡），每个圆用不同颜色填充</span></span>
<span id="cb24-83"><a href="#cb24-83" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_polygon</span>(</span>
<span id="cb24-84"><a href="#cb24-84" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> dat.gg,</span>
<span id="cb24-85"><a href="#cb24-85" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">group =</span> id, <span class="at">fill =</span> <span class="fu">as.factor</span>(id)), <span class="co"># 按 id 分组并填充颜色</span></span>
<span id="cb24-86"><a href="#cb24-86" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">"black"</span>,    <span class="co"># 圆边界为黑色</span></span>
<span id="cb24-87"><a href="#cb24-87" aria-hidden="true" tabindex="-1"></a>        <span class="at">alpha =</span> <span class="fl">0.6</span>          <span class="co"># 设置透明度</span></span>
<span id="cb24-88"><a href="#cb24-88" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-89"><a href="#cb24-89" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 使用 viridis 包中的 magma 调色板为每个圆分配颜色</span></span>
<span id="cb24-90"><a href="#cb24-90" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">magma</span>(<span class="fu">nrow</span>(data))) <span class="sc">+</span></span>
<span id="cb24-91"><a href="#cb24-91" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 在每个圆心添加文本标签，字体大小与 value 成比例</span></span>
<span id="cb24-92"><a href="#cb24-92" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(</span>
<span id="cb24-93"><a href="#cb24-93" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> data,</span>
<span id="cb24-94"><a href="#cb24-94" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">size =</span> value, <span class="at">label =</span> group)</span>
<span id="cb24-95"><a href="#cb24-95" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-96"><a href="#cb24-96" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>)) <span class="sc">+</span>  <span class="co"># 设置字体大小范围</span></span>
<span id="cb24-97"><a href="#cb24-97" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>                            <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb24-98"><a href="#cb24-98" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span>         <span class="co"># 不显示图例</span></span>
<span id="cb24-99"><a href="#cb24-99" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_equal</span>()                             <span class="co"># 保持 x、y 轴比例相等</span></span>
<span id="cb24-100"><a href="#cb24-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-101"><a href="#cb24-101" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-102"><a href="#cb24-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-103"><a href="#cb24-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-104"><a href="#cb24-104" aria-hidden="true" tabindex="-1"></a>使用渐变色（BuPu 调色板）根据 value 显示圆形打包图: </span>
<span id="cb24-105"><a href="#cb24-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-108"><a href="#cb24-108" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-109"><a href="#cb24-109" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "使用渐变色（BuPu 调色板）根据 value 显示圆形打包图"</span></span>
<span id="cb24-110"><a href="#cb24-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-111"><a href="#cb24-111" aria-hidden="true" tabindex="-1"></a><span class="co"># 首先，将每个分组的 value 添加到 dat.gg 数据框中。</span></span>
<span id="cb24-112"><a href="#cb24-112" aria-hidden="true" tabindex="-1"></a><span class="co"># 由于每个圆形多边形由 51 个点近似（npoints=50，首尾闭合），所以每个 value 需要重复 51 次。</span></span>
<span id="cb24-113"><a href="#cb24-113" aria-hidden="true" tabindex="-1"></a>dat.gg<span class="sc">$</span>value <span class="ot">&lt;-</span> <span class="fu">rep</span>(data<span class="sc">$</span>value, <span class="at">each =</span> <span class="dv">51</span>)</span>
<span id="cb24-114"><a href="#cb24-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-115"><a href="#cb24-115" aria-hidden="true" tabindex="-1"></a><span class="co"># 绘制圆形打包图</span></span>
<span id="cb24-116"><a href="#cb24-116" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb24-117"><a href="#cb24-117" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制圆形多边形（气泡），根据 value 使用渐变色填充</span></span>
<span id="cb24-118"><a href="#cb24-118" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_polygon</span>(</span>
<span id="cb24-119"><a href="#cb24-119" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> dat.gg,</span>
<span id="cb24-120"><a href="#cb24-120" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">group =</span> id, <span class="at">fill =</span> value),   <span class="co"># 按 value 渐变填充</span></span>
<span id="cb24-121"><a href="#cb24-121" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">"black"</span>,                      <span class="co"># 边界为黑色</span></span>
<span id="cb24-122"><a href="#cb24-122" aria-hidden="true" tabindex="-1"></a>        <span class="at">alpha =</span> <span class="fl">0.6</span>                            <span class="co"># 设置透明度</span></span>
<span id="cb24-123"><a href="#cb24-123" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-124"><a href="#cb24-124" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_distiller</span>(<span class="at">palette =</span> <span class="st">"BuPu"</span>, <span class="at">direction =</span> <span class="dv">1</span>) <span class="sc">+</span>  <span class="co"># 使用 BuPu 调色板</span></span>
<span id="cb24-125"><a href="#cb24-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-126"><a href="#cb24-126" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 在每个圆心添加文本标签，字体大小与 value 成比例</span></span>
<span id="cb24-127"><a href="#cb24-127" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(</span>
<span id="cb24-128"><a href="#cb24-128" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> data,</span>
<span id="cb24-129"><a href="#cb24-129" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">size =</span> value, <span class="at">label =</span> group)</span>
<span id="cb24-130"><a href="#cb24-130" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-131"><a href="#cb24-131" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>)) <span class="sc">+</span>  <span class="co"># 设置字体大小范围</span></span>
<span id="cb24-132"><a href="#cb24-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-133"><a href="#cb24-133" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置主题为无坐标轴、无背景</span></span>
<span id="cb24-134"><a href="#cb24-134" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb24-135"><a href="#cb24-135" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span>         <span class="co"># 不显示图例</span></span>
<span id="cb24-136"><a href="#cb24-136" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_equal</span>()                             <span class="co"># 保持 x、y 轴比例相等</span></span>
<span id="cb24-137"><a href="#cb24-137" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-138"><a href="#cb24-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-139"><a href="#cb24-139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-140"><a href="#cb24-140" aria-hidden="true" tabindex="-1"></a>通过 theme() 函数及其 plot.background() 参数更改背景: </span>
<span id="cb24-141"><a href="#cb24-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-144"><a href="#cb24-144" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-145"><a href="#cb24-145" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "自定义黑色背景的圆形打包图，使用Spectral调色板和标签"</span></span>
<span id="cb24-146"><a href="#cb24-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-147"><a href="#cb24-147" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggplot2 绘制圆形打包图，并设置黑色背景和自定义标题</span></span>
<span id="cb24-148"><a href="#cb24-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-149"><a href="#cb24-149" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb24-150"><a href="#cb24-150" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-151"><a href="#cb24-151" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 绘制圆形多边形（气泡），根据 value 使用渐变色填充</span></span>
<span id="cb24-152"><a href="#cb24-152" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(</span>
<span id="cb24-153"><a href="#cb24-153" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> dat.gg, </span>
<span id="cb24-154"><a href="#cb24-154" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(x, y, <span class="at">group =</span> id, <span class="at">fill =</span> value),   <span class="co"># 按 value 渐变填充</span></span>
<span id="cb24-155"><a href="#cb24-155" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"grey"</span>,                       <span class="co"># 边界为灰色</span></span>
<span id="cb24-156"><a href="#cb24-156" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="fl">0.6</span>,                           <span class="co"># 设置透明度</span></span>
<span id="cb24-157"><a href="#cb24-157" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> .<span class="dv">5</span>                              <span class="co"># 边界线宽</span></span>
<span id="cb24-158"><a href="#cb24-158" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb24-159"><a href="#cb24-159" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_distiller</span>(<span class="at">palette =</span> <span class="st">"Spectral"</span>, <span class="at">direction =</span> <span class="dv">1</span> ) <span class="sc">+</span>  <span class="co"># 使用 Spectral 调色板</span></span>
<span id="cb24-160"><a href="#cb24-160" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-161"><a href="#cb24-161" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 在每个圆心添加标签，字体大小与 value 成比例</span></span>
<span id="cb24-162"><a href="#cb24-162" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label</span>(</span>
<span id="cb24-163"><a href="#cb24-163" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> data, </span>
<span id="cb24-164"><a href="#cb24-164" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(x, y, <span class="at">size =</span> value, <span class="at">label =</span> group) <span class="co"># 标签内容为分组名</span></span>
<span id="cb24-165"><a href="#cb24-165" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb24-166"><a href="#cb24-166" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>)) <span class="sc">+</span> <span class="co"># 设置字体大小范围</span></span>
<span id="cb24-167"><a href="#cb24-167" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-168"><a href="#cb24-168" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 设置主题为无坐标轴、无背景，并自定义背景和标题颜色</span></span>
<span id="cb24-169"><a href="#cb24-169" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>()  <span class="sc">+</span> </span>
<span id="cb24-170"><a href="#cb24-170" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb24-171"><a href="#cb24-171" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span>,                        <span class="co"># 不显示图例</span></span>
<span id="cb24-172"><a href="#cb24-172" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"black"</span>),  <span class="co"># 设置背景为黑色</span></span>
<span id="cb24-173"><a href="#cb24-173" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"white"</span>)       <span class="co"># 标题字体为白色</span></span>
<span id="cb24-174"><a href="#cb24-174" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb24-175"><a href="#cb24-175" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_equal</span>() <span class="sc">+</span>                                    <span class="co"># 保持 x、y 轴比例相等</span></span>
<span id="cb24-176"><a href="#cb24-176" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"A custom circle packing with</span><span class="sc">\n</span><span class="st">black background"</span>) <span class="co"># 添加标题</span></span>
<span id="cb24-177"><a href="#cb24-177" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-178"><a href="#cb24-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-179"><a href="#cb24-179" aria-hidden="true" tabindex="-1"></a><span class="fu">### Space</span></span>
<span id="cb24-180"><a href="#cb24-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-181"><a href="#cb24-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-184"><a href="#cb24-184" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-185"><a href="#cb24-185" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: 使用 viridis 调色板展示圆形打包图</span></span>
<span id="cb24-186"><a href="#cb24-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-187"><a href="#cb24-187" aria-hidden="true" tabindex="-1"></a><span class="co"># 创建数据框，包含分组名称和对应的数值</span></span>
<span id="cb24-188"><a href="#cb24-188" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb24-189"><a href="#cb24-189" aria-hidden="true" tabindex="-1"></a>  <span class="at">group =</span> <span class="fu">paste</span>(<span class="st">"Group"</span>, letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>]),</span>
<span id="cb24-190"><a href="#cb24-190" aria-hidden="true" tabindex="-1"></a>  <span class="at">value =</span> <span class="fu">sample</span>(<span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">100</span>), <span class="dv">20</span>)</span>
<span id="cb24-191"><a href="#cb24-191" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-192"><a href="#cb24-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-193"><a href="#cb24-193" aria-hidden="true" tabindex="-1"></a><span class="co"># 生成布局</span></span>
<span id="cb24-194"><a href="#cb24-194" aria-hidden="true" tabindex="-1"></a>packing <span class="ot">&lt;-</span> <span class="fu">circleProgressiveLayout</span>(data<span class="sc">$</span>value, <span class="at">sizetype =</span> <span class="st">'area'</span>)</span>
<span id="cb24-195"><a href="#cb24-195" aria-hidden="true" tabindex="-1"></a>packing<span class="sc">$</span>radius <span class="ot">&lt;-</span> <span class="fl">0.95</span> <span class="sc">*</span> packing<span class="sc">$</span>radius <span class="co"># 让直径小于 1, 留有空隙</span></span>
<span id="cb24-196"><a href="#cb24-196" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">cbind</span>(data, packing)</span>
<span id="cb24-197"><a href="#cb24-197" aria-hidden="true" tabindex="-1"></a>dat.gg <span class="ot">&lt;-</span> <span class="fu">circleLayoutVertices</span>(packing, <span class="at">npoints =</span> <span class="dv">50</span>)</span>
<span id="cb24-198"><a href="#cb24-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-199"><a href="#cb24-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-200"><a href="#cb24-200" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggplot2 绘制圆形打包图，采用 viridis 调色板</span></span>
<span id="cb24-201"><a href="#cb24-201" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb24-202"><a href="#cb24-202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-203"><a href="#cb24-203" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制圆形多边形（气泡），每个圆用不同颜色填充</span></span>
<span id="cb24-204"><a href="#cb24-204" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_polygon</span>(</span>
<span id="cb24-205"><a href="#cb24-205" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> dat.gg,                           <span class="co"># 多边形顶点数据</span></span>
<span id="cb24-206"><a href="#cb24-206" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">group =</span> id, <span class="at">fill =</span> id),        <span class="co"># 按 id 分组并填充颜色</span></span>
<span id="cb24-207"><a href="#cb24-207" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">"black"</span>,                        <span class="co"># 边界为黑色</span></span>
<span id="cb24-208"><a href="#cb24-208" aria-hidden="true" tabindex="-1"></a>        <span class="at">alpha =</span> <span class="fl">0.6</span>                              <span class="co"># 设置透明度</span></span>
<span id="cb24-209"><a href="#cb24-209" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-210"><a href="#cb24-210" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis</span>() <span class="sc">+</span>                     <span class="co"># 使用 viridis 调色板</span></span>
<span id="cb24-211"><a href="#cb24-211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-212"><a href="#cb24-212" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 在每个圆心添加文本标签，字体大小与 value 成比例</span></span>
<span id="cb24-213"><a href="#cb24-213" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(</span>
<span id="cb24-214"><a href="#cb24-214" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> data,                             <span class="co"># 圆心及标签数据</span></span>
<span id="cb24-215"><a href="#cb24-215" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">size =</span> value, <span class="at">label =</span> group),  <span class="co"># 设置圆心坐标、字体大小和标签内容</span></span>
<span id="cb24-216"><a href="#cb24-216" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="st">"black"</span>                          <span class="co"># 标签字体颜色为黑色</span></span>
<span id="cb24-217"><a href="#cb24-217" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-218"><a href="#cb24-218" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>                             <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb24-219"><a href="#cb24-219" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span>          <span class="co"># 不显示图例</span></span>
<span id="cb24-220"><a href="#cb24-220" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_equal</span>()                              <span class="co"># 保持 x、y 轴比例相等</span></span>
<span id="cb24-221"><a href="#cb24-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-222"><a href="#cb24-222" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-223"><a href="#cb24-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-224"><a href="#cb24-224" aria-hidden="true" tabindex="-1"></a><span class="fu">### Interactive</span></span>
<span id="cb24-225"><a href="#cb24-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-226"><a href="#cb24-226" aria-hidden="true" tabindex="-1"></a>使用 <span class="in">`ggiraph::girafe()`</span> 函数生成交互式圆形打包图，悬停查看详细信息:</span>
<span id="cb24-227"><a href="#cb24-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-230"><a href="#cb24-230" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-231"><a href="#cb24-231" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "交互式圆形打包图（circle packing），可悬停显示详细信息"</span></span>
<span id="cb24-232"><a href="#cb24-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-233"><a href="#cb24-233" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载所需包</span></span>
<span id="cb24-234"><a href="#cb24-234" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(packcircles)   <span class="co"># 用于圆形打包布局</span></span>
<span id="cb24-235"><a href="#cb24-235" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)       <span class="co"># 用于绘图</span></span>
<span id="cb24-236"><a href="#cb24-236" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis)       <span class="co"># 用于配色</span></span>
<span id="cb24-237"><a href="#cb24-237" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggiraph)       <span class="co"># 用于交互式图形</span></span>
<span id="cb24-238"><a href="#cb24-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-239"><a href="#cb24-239" aria-hidden="true" tabindex="-1"></a><span class="co"># 创建数据框，包含分组名称和对应的数值</span></span>
<span id="cb24-240"><a href="#cb24-240" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb24-241"><a href="#cb24-241" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> <span class="fu">paste</span>(</span>
<span id="cb24-242"><a href="#cb24-242" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Group_"</span>,</span>
<span id="cb24-243"><a href="#cb24-243" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sample</span>(letters, <span class="dv">70</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>),  <span class="co"># 随机生成 70 个字母</span></span>
<span id="cb24-244"><a href="#cb24-244" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sample</span>(letters, <span class="dv">70</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>),</span>
<span id="cb24-245"><a href="#cb24-245" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sample</span>(letters, <span class="dv">70</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>),</span>
<span id="cb24-246"><a href="#cb24-246" aria-hidden="true" tabindex="-1"></a>        <span class="at">sep =</span> <span class="st">""</span></span>
<span id="cb24-247"><a href="#cb24-247" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb24-248"><a href="#cb24-248" aria-hidden="true" tabindex="-1"></a>    <span class="at">value =</span> <span class="fu">sample</span>(<span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">70</span>), <span class="dv">70</span>)          <span class="co"># 随机生成 70 个 1~70 之间的数值</span></span>
<span id="cb24-249"><a href="#cb24-249" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-250"><a href="#cb24-250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-251"><a href="#cb24-251" aria-hidden="true" tabindex="-1"></a><span class="co"># 添加文本列，用于气泡悬停时显示详细信息</span></span>
<span id="cb24-252"><a href="#cb24-252" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>text <span class="ot">&lt;-</span> <span class="fu">paste</span>(</span>
<span id="cb24-253"><a href="#cb24-253" aria-hidden="true" tabindex="-1"></a>    <span class="st">"name: "</span>, data<span class="sc">$</span>group, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb24-254"><a href="#cb24-254" aria-hidden="true" tabindex="-1"></a>    <span class="st">"value: "</span>, data<span class="sc">$</span>value, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb24-255"><a href="#cb24-255" aria-hidden="true" tabindex="-1"></a>    <span class="st">"You can add a story here!"</span></span>
<span id="cb24-256"><a href="#cb24-256" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-257"><a href="#cb24-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-258"><a href="#cb24-258" aria-hidden="true" tabindex="-1"></a><span class="co"># 生成圆形打包布局，返回每个圆的中心坐标 (x, y) 和半径 (radius)</span></span>
<span id="cb24-259"><a href="#cb24-259" aria-hidden="true" tabindex="-1"></a>packing <span class="ot">&lt;-</span> <span class="fu">circleProgressiveLayout</span>(data<span class="sc">$</span>value, <span class="at">sizetype =</span> <span class="st">'area'</span>)</span>
<span id="cb24-260"><a href="#cb24-260" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">cbind</span>(data, packing)</span>
<span id="cb24-261"><a href="#cb24-261" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-262"><a href="#cb24-262" aria-hidden="true" tabindex="-1"></a><span class="co"># 根据每个圆的中心和半径，生成用于绘制圆形的多边形顶点坐标</span></span>
<span id="cb24-263"><a href="#cb24-263" aria-hidden="true" tabindex="-1"></a>dat.gg <span class="ot">&lt;-</span> <span class="fu">circleLayoutVertices</span>(packing, <span class="at">npoints =</span> <span class="dv">50</span>)</span>
<span id="cb24-264"><a href="#cb24-264" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-265"><a href="#cb24-265" aria-hidden="true" tabindex="-1"></a><span class="co"># 绘制交互式圆形打包图</span></span>
<span id="cb24-266"><a href="#cb24-266" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb24-267"><a href="#cb24-267" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制交互式圆形多边形（气泡），可悬停显示 tooltip</span></span>
<span id="cb24-268"><a href="#cb24-268" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_polygon_interactive</span>(</span>
<span id="cb24-269"><a href="#cb24-269" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> dat.gg,</span>
<span id="cb24-270"><a href="#cb24-270" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(</span>
<span id="cb24-271"><a href="#cb24-271" aria-hidden="true" tabindex="-1"></a>            x, y, <span class="at">group =</span> id, <span class="at">fill =</span> id,</span>
<span id="cb24-272"><a href="#cb24-272" aria-hidden="true" tabindex="-1"></a>            <span class="at">tooltip =</span> data<span class="sc">$</span>text[id],   <span class="co"># 悬停显示的文本</span></span>
<span id="cb24-273"><a href="#cb24-273" aria-hidden="true" tabindex="-1"></a>            <span class="at">data_id =</span> id               <span class="co"># 交互用的唯一标识</span></span>
<span id="cb24-274"><a href="#cb24-274" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb24-275"><a href="#cb24-275" aria-hidden="true" tabindex="-1"></a>        <span class="at">colour =</span> <span class="st">"black"</span>,            <span class="co"># 边界为黑色</span></span>
<span id="cb24-276"><a href="#cb24-276" aria-hidden="true" tabindex="-1"></a>        <span class="at">alpha =</span> <span class="fl">0.6</span>                  <span class="co"># 设置透明度</span></span>
<span id="cb24-277"><a href="#cb24-277" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-278"><a href="#cb24-278" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis</span>() <span class="sc">+</span>         <span class="co"># 使用 viridis 调色板</span></span>
<span id="cb24-279"><a href="#cb24-279" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 在每个圆心添加文本标签，去掉 "Group_" 前缀</span></span>
<span id="cb24-280"><a href="#cb24-280" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(</span>
<span id="cb24-281"><a href="#cb24-281" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> data,</span>
<span id="cb24-282"><a href="#cb24-282" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(x, y, <span class="at">label =</span> <span class="fu">gsub</span>(<span class="st">"Group_"</span>, <span class="st">""</span>, group)),</span>
<span id="cb24-283"><a href="#cb24-283" aria-hidden="true" tabindex="-1"></a>        <span class="at">size =</span> <span class="dv">2</span>,</span>
<span id="cb24-284"><a href="#cb24-284" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="st">"black"</span></span>
<span id="cb24-285"><a href="#cb24-285" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-286"><a href="#cb24-286" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>                 <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb24-287"><a href="#cb24-287" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb24-288"><a href="#cb24-288" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">"none"</span>, </span>
<span id="cb24-289"><a href="#cb24-289" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.margin =</span> <span class="fu">unit</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>), <span class="st">"cm"</span>)  <span class="co"># 去除边距</span></span>
<span id="cb24-290"><a href="#cb24-290" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-291"><a href="#cb24-291" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_equal</span>()                  <span class="co"># 保持 x、y 轴比例相等</span></span>
<span id="cb24-292"><a href="#cb24-292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-293"><a href="#cb24-293" aria-hidden="true" tabindex="-1"></a><span class="co"># 生成交互式图形</span></span>
<span id="cb24-294"><a href="#cb24-294" aria-hidden="true" tabindex="-1"></a><span class="fu">girafe</span>(<span class="at">ggobj =</span> p) <span class="co"># 旧版本用 ggiraph()</span></span>
<span id="cb24-295"><a href="#cb24-295" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-296"><a href="#cb24-296" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-297"><a href="#cb24-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-298"><a href="#cb24-298" aria-hidden="true" tabindex="-1"></a><span class="fu">## Several levels</span></span>
<span id="cb24-299"><a href="#cb24-299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-300"><a href="#cb24-300" aria-hidden="true" tabindex="-1"></a><span class="fu">### `ggraph()`</span></span>
<span id="cb24-301"><a href="#cb24-301" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-304"><a href="#cb24-304" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-305"><a href="#cb24-305" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "多层级圆形打包图（circle packing），展示层级结构数据"</span></span>
<span id="cb24-306"><a href="#cb24-306" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb24-307"><a href="#cb24-307" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 6</span></span>
<span id="cb24-308"><a href="#cb24-308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-309"><a href="#cb24-309" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggraph) <span class="co"># 用于图形可视化</span></span>
<span id="cb24-310"><a href="#cb24-310" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(igraph) <span class="co"># 用于图形操作</span></span>
<span id="cb24-311"><a href="#cb24-311" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb24-312"><a href="#cb24-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-313"><a href="#cb24-313" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载 edges 和 vertices 数据，flare 数据集内置于 packcircles 包</span></span>
<span id="cb24-314"><a href="#cb24-314" aria-hidden="true" tabindex="-1"></a>edges <span class="ot">&lt;-</span> flare<span class="sc">$</span>edges  <span class="co"># 边数据，描述节点之间的父子关系</span></span>
<span id="cb24-315"><a href="#cb24-315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-316"><a href="#cb24-316" aria-hidden="true" tabindex="-1"></a><span class="co"># 通常我们还会有一个节点信息表，包含每个节点的属性</span></span>
<span id="cb24-317"><a href="#cb24-317" aria-hidden="true" tabindex="-1"></a>vertices <span class="ot">&lt;-</span> flare<span class="sc">$</span>vertices  <span class="co"># 节点数据，包含节点名称、分组等信息</span></span>
<span id="cb24-318"><a href="#cb24-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-319"><a href="#cb24-319" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 igraph 包将边和节点数据转换为图对象</span></span>
<span id="cb24-320"><a href="#cb24-320" aria-hidden="true" tabindex="-1"></a>mygraph <span class="ot">&lt;-</span> <span class="fu">graph_from_data_frame</span>(edges, <span class="at">vertices =</span> vertices)</span>
<span id="cb24-321"><a href="#cb24-321" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-322"><a href="#cb24-322" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggraph 包绘制多层级圆形打包图</span></span>
<span id="cb24-323"><a href="#cb24-323" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'circlepack'</span>) <span class="sc">+</span> </span>
<span id="cb24-324"><a href="#cb24-324" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_circle</span>() <span class="sc">+</span>         <span class="co"># 绘制每个节点的圆</span></span>
<span id="cb24-325"><a href="#cb24-325" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>()                 <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb24-326"><a href="#cb24-326" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-327"><a href="#cb24-327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-328"><a href="#cb24-328" aria-hidden="true" tabindex="-1"></a><span class="fu">### type</span></span>
<span id="cb24-329"><a href="#cb24-329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-332"><a href="#cb24-332" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-333"><a href="#cb24-333" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: dendrogram, circle packing</span></span>
<span id="cb24-334"><a href="#cb24-334" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb24-335"><a href="#cb24-335" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 6</span></span>
<span id="cb24-336"><a href="#cb24-336" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-337"><a href="#cb24-337" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'dendrogram'</span>, <span class="at">circular =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb24-338"><a href="#cb24-338" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_edge_diagonal</span>() <span class="sc">+</span></span>
<span id="cb24-339"><a href="#cb24-339" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb24-340"><a href="#cb24-340" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb24-341"><a href="#cb24-341" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-342"><a href="#cb24-342" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-345"><a href="#cb24-345" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-346"><a href="#cb24-346" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: dendrogram, not circle packing</span></span>
<span id="cb24-347"><a href="#cb24-347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-348"><a href="#cb24-348" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'dendrogram'</span>, <span class="at">circular =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb24-349"><a href="#cb24-349" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_edge_diagonal</span>() <span class="sc">+</span></span>
<span id="cb24-350"><a href="#cb24-350" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb24-351"><a href="#cb24-351" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb24-352"><a href="#cb24-352" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-353"><a href="#cb24-353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-356"><a href="#cb24-356" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-357"><a href="#cb24-357" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: treemap</span></span>
<span id="cb24-358"><a href="#cb24-358" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-359"><a href="#cb24-359" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="st">'treemap'</span>, <span class="at">weight =</span> size) <span class="sc">+</span></span>
<span id="cb24-360"><a href="#cb24-360" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_node_tile</span>(<span class="fu">aes</span>(<span class="at">fill =</span> depth), <span class="at">size =</span> <span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb24-361"><a href="#cb24-361" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb24-362"><a href="#cb24-362" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb24-363"><a href="#cb24-363" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-364"><a href="#cb24-364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-367"><a href="#cb24-367" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-368"><a href="#cb24-368" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: partition</span></span>
<span id="cb24-369"><a href="#cb24-369" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-370"><a href="#cb24-370" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="st">'partition'</span>, <span class="at">circular =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb24-371"><a href="#cb24-371" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_node_arc_bar</span>(<span class="fu">aes</span>(<span class="at">fill =</span> depth), <span class="at">size =</span> <span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb24-372"><a href="#cb24-372" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb24-373"><a href="#cb24-373" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb24-374"><a href="#cb24-374" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-375"><a href="#cb24-375" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-378"><a href="#cb24-378" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-379"><a href="#cb24-379" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "基础网络图：节点与连线的可视化"</span></span>
<span id="cb24-380"><a href="#cb24-380" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-381"><a href="#cb24-381" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggraph 绘制基础网络图，展示节点与边的关系</span></span>
<span id="cb24-382"><a href="#cb24-382" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph) <span class="sc">+</span></span>
<span id="cb24-383"><a href="#cb24-383" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制边（连线），表示节点之间的连接关系</span></span>
<span id="cb24-384"><a href="#cb24-384" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_edge_link</span>() <span class="sc">+</span></span>
<span id="cb24-385"><a href="#cb24-385" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制节点（点），表示网络中的各个实体</span></span>
<span id="cb24-386"><a href="#cb24-386" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_point</span>() <span class="sc">+</span></span>
<span id="cb24-387"><a href="#cb24-387" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 去除坐标轴和背景，使图形更简洁</span></span>
<span id="cb24-388"><a href="#cb24-388" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb24-389"><a href="#cb24-389" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 不显示图例</span></span>
<span id="cb24-390"><a href="#cb24-390" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb24-391"><a href="#cb24-391" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-392"><a href="#cb24-392" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-393"><a href="#cb24-393" aria-hidden="true" tabindex="-1"></a><span class="fu">### color</span></span>
<span id="cb24-394"><a href="#cb24-394" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-395"><a href="#cb24-395" aria-hidden="true" tabindex="-1"></a>节点颜色根据深度变化: </span>
<span id="cb24-396"><a href="#cb24-396" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-399"><a href="#cb24-399" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-400"><a href="#cb24-400" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: 圆形打包图：节点颜色根据深度变化</span></span>
<span id="cb24-401"><a href="#cb24-401" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb24-402"><a href="#cb24-402" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 6</span></span>
<span id="cb24-403"><a href="#cb24-403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-404"><a href="#cb24-404" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggraph 绘制圆形打包图，节点颜色根据深度变化</span></span>
<span id="cb24-405"><a href="#cb24-405" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'circlepack'</span>, <span class="at">weight=</span>size) <span class="sc">+</span> </span>
<span id="cb24-406"><a href="#cb24-406" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_node_circle</span>(<span class="fu">aes</span>(<span class="at">fill =</span> depth)) <span class="sc">+</span></span>
<span id="cb24-407"><a href="#cb24-407" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span> </span>
<span id="cb24-408"><a href="#cb24-408" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"FALSE"</span>)</span>
<span id="cb24-409"><a href="#cb24-409" aria-hidden="true" tabindex="-1"></a>p</span>
<span id="cb24-410"><a href="#cb24-410" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-411"><a href="#cb24-411" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-414"><a href="#cb24-414" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-415"><a href="#cb24-415" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: viridis 调色板应用于圆形打包图</span></span>
<span id="cb24-416"><a href="#cb24-416" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb24-417"><a href="#cb24-417" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 6</span></span>
<span id="cb24-418"><a href="#cb24-418" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-419"><a href="#cb24-419" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">scale_fill_viridis</span>()</span>
<span id="cb24-420"><a href="#cb24-420" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-421"><a href="#cb24-421" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-424"><a href="#cb24-424" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-425"><a href="#cb24-425" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: colorBrewer 调色板应用于圆形打包图</span></span>
<span id="cb24-426"><a href="#cb24-426" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb24-427"><a href="#cb24-427" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 6</span></span>
<span id="cb24-428"><a href="#cb24-428" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-429"><a href="#cb24-429" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">scale_fill_distiller</span>(<span class="at">palette =</span> <span class="st">"RdPu"</span>) </span>
<span id="cb24-430"><a href="#cb24-430" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-431"><a href="#cb24-431" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-432"><a href="#cb24-432" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-433"><a href="#cb24-433" aria-hidden="true" tabindex="-1"></a><span class="fu">### label</span></span>
<span id="cb24-434"><a href="#cb24-434" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-435"><a href="#cb24-435" aria-hidden="true" tabindex="-1"></a>适用于层级不特别多的情况</span>
<span id="cb24-436"><a href="#cb24-436" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-439"><a href="#cb24-439" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-440"><a href="#cb24-440" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "带标签的多层级圆形打包图（circle packing），仅叶节点显示标签"</span></span>
<span id="cb24-441"><a href="#cb24-441" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb24-442"><a href="#cb24-442" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 6</span></span>
<span id="cb24-443"><a href="#cb24-443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-444"><a href="#cb24-444" aria-hidden="true" tabindex="-1"></a><span class="co"># 仅保留有下级的边（即 to 在 from 中出现）</span></span>
<span id="cb24-445"><a href="#cb24-445" aria-hidden="true" tabindex="-1"></a>edges <span class="ot">&lt;-</span> flare<span class="sc">$</span>edges <span class="sc">|&gt;</span></span>
<span id="cb24-446"><a href="#cb24-446" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(to <span class="sc">%in%</span> from) <span class="sc">|&gt;</span></span>
<span id="cb24-447"><a href="#cb24-447" aria-hidden="true" tabindex="-1"></a>    <span class="fu">droplevels</span>()</span>
<span id="cb24-448"><a href="#cb24-448" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-449"><a href="#cb24-449" aria-hidden="true" tabindex="-1"></a><span class="co"># 仅保留参与这些边的节点</span></span>
<span id="cb24-450"><a href="#cb24-450" aria-hidden="true" tabindex="-1"></a>vertices <span class="ot">&lt;-</span> flare<span class="sc">$</span>vertices <span class="sc">|&gt;</span></span>
<span id="cb24-451"><a href="#cb24-451" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(name <span class="sc">%in%</span> <span class="fu">c</span>(edges<span class="sc">$</span>from, edges<span class="sc">$</span>to)) <span class="sc">|&gt;</span></span>
<span id="cb24-452"><a href="#cb24-452" aria-hidden="true" tabindex="-1"></a>    <span class="fu">droplevels</span>()</span>
<span id="cb24-453"><a href="#cb24-453" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-454"><a href="#cb24-454" aria-hidden="true" tabindex="-1"></a><span class="co"># 随机生成每个节点的 size 属性（可根据实际数据调整）</span></span>
<span id="cb24-455"><a href="#cb24-455" aria-hidden="true" tabindex="-1"></a>vertices<span class="sc">$</span>size <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="fu">nrow</span>(vertices))</span>
<span id="cb24-456"><a href="#cb24-456" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-457"><a href="#cb24-457" aria-hidden="true" tabindex="-1"></a><span class="co"># 重新构建 igraph 图对象</span></span>
<span id="cb24-458"><a href="#cb24-458" aria-hidden="true" tabindex="-1"></a>mygraph <span class="ot">&lt;-</span> <span class="fu">graph_from_data_frame</span>(edges, <span class="at">vertices =</span> vertices)</span>
<span id="cb24-459"><a href="#cb24-459" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-460"><a href="#cb24-460" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggraph 绘制多层级圆形打包图</span></span>
<span id="cb24-461"><a href="#cb24-461" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'circlepack'</span>, <span class="at">weight =</span> size) <span class="sc">+</span></span>
<span id="cb24-462"><a href="#cb24-462" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制每个节点的圆，颜色根据深度变化</span></span>
<span id="cb24-463"><a href="#cb24-463" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_circle</span>(<span class="fu">aes</span>(<span class="at">fill =</span> depth)) <span class="sc">+</span></span>
<span id="cb24-464"><a href="#cb24-464" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 仅在叶节点（leaf=TRUE）处添加标签，标签内容为 shortName，字体大小与 size 成比例</span></span>
<span id="cb24-465"><a href="#cb24-465" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_text</span>(<span class="fu">aes</span>(</span>
<span id="cb24-466"><a href="#cb24-466" aria-hidden="true" tabindex="-1"></a>        <span class="at">label =</span> shortName,    <span class="co"># 标签内容</span></span>
<span id="cb24-467"><a href="#cb24-467" aria-hidden="true" tabindex="-1"></a>        <span class="at">filter =</span> leaf,        <span class="co"># 仅叶节点显示</span></span>
<span id="cb24-468"><a href="#cb24-468" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill =</span> depth,         <span class="co"># 标签颜色与深度一致</span></span>
<span id="cb24-469"><a href="#cb24-469" aria-hidden="true" tabindex="-1"></a>        <span class="at">size =</span> size           <span class="co"># 字体大小与 size 成比例</span></span>
<span id="cb24-470"><a href="#cb24-470" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">+</span></span>
<span id="cb24-471"><a href="#cb24-471" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>                          <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb24-472"><a href="#cb24-472" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"FALSE"</span>) <span class="sc">+</span>      <span class="co"># 不显示图例</span></span>
<span id="cb24-473"><a href="#cb24-473" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis</span>()                    <span class="co"># 使用 viridis 调色板</span></span>
<span id="cb24-474"><a href="#cb24-474" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-475"><a href="#cb24-475" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-476"><a href="#cb24-476" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-479"><a href="#cb24-479" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-480"><a href="#cb24-480" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "带标签的多层级圆形打包图（circle packing），仅叶节点显示标签"</span></span>
<span id="cb24-481"><a href="#cb24-481" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb24-482"><a href="#cb24-482" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 6</span></span>
<span id="cb24-483"><a href="#cb24-483" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-484"><a href="#cb24-484" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggraph 绘制多层级圆形打包图，节点颜色根据深度变化，叶节点显示标签</span></span>
<span id="cb24-485"><a href="#cb24-485" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'circlepack'</span>, <span class="at">weight =</span> size) <span class="sc">+</span> </span>
<span id="cb24-486"><a href="#cb24-486" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制每个节点的圆，颜色根据深度变化</span></span>
<span id="cb24-487"><a href="#cb24-487" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_circle</span>(<span class="fu">aes</span>(<span class="at">fill =</span> depth)) <span class="sc">+</span></span>
<span id="cb24-488"><a href="#cb24-488" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 仅在叶节点（leaf=TRUE）处添加标签，标签内容为 shortName，字体大小与 size 成比例</span></span>
<span id="cb24-489"><a href="#cb24-489" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_label</span>(</span>
<span id="cb24-490"><a href="#cb24-490" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(</span>
<span id="cb24-491"><a href="#cb24-491" aria-hidden="true" tabindex="-1"></a>            <span class="at">label =</span> shortName,  <span class="co"># 标签内容为节点的 shortName</span></span>
<span id="cb24-492"><a href="#cb24-492" aria-hidden="true" tabindex="-1"></a>            <span class="at">filter =</span> leaf,      <span class="co"># 仅叶节点显示标签</span></span>
<span id="cb24-493"><a href="#cb24-493" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> size         <span class="co"># 字体大小与 size 成比例</span></span>
<span id="cb24-494"><a href="#cb24-494" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb24-495"><a href="#cb24-495" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-496"><a href="#cb24-496" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>                          <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb24-497"><a href="#cb24-497" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"FALSE"</span>) <span class="sc">+</span>      <span class="co"># 不显示图例</span></span>
<span id="cb24-498"><a href="#cb24-498" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis</span>()                    <span class="co"># 使用 viridis 调色板</span></span>
<span id="cb24-499"><a href="#cb24-499" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-500"><a href="#cb24-500" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-501"><a href="#cb24-501" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-502"><a href="#cb24-502" aria-hidden="true" tabindex="-1"></a><span class="fu">### Hide</span></span>
<span id="cb24-503"><a href="#cb24-503" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-504"><a href="#cb24-504" aria-hidden="true" tabindex="-1"></a>隐藏1个或多个外层大圈:</span>
<span id="cb24-505"><a href="#cb24-505" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-508"><a href="#cb24-508" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-509"><a href="#cb24-509" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "隐藏最外层大圈的多层级圆形打包图（circle packing）"</span></span>
<span id="cb24-510"><a href="#cb24-510" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb24-511"><a href="#cb24-511" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 6</span></span>
<span id="cb24-512"><a href="#cb24-512" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-513"><a href="#cb24-513" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 packcircles 包内置的 flare 数据集，包含层级结构的边和节点信息</span></span>
<span id="cb24-514"><a href="#cb24-514" aria-hidden="true" tabindex="-1"></a>edges <span class="ot">=</span> flare<span class="sc">$</span>edges         <span class="co"># 边数据，描述父子关系</span></span>
<span id="cb24-515"><a href="#cb24-515" aria-hidden="true" tabindex="-1"></a>vertices <span class="ot">=</span> flare<span class="sc">$</span>vertices   <span class="co"># 节点数据，包含节点属性</span></span>
<span id="cb24-516"><a href="#cb24-516" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-517"><a href="#cb24-517" aria-hidden="true" tabindex="-1"></a><span class="co"># 构建 igraph 图对象</span></span>
<span id="cb24-518"><a href="#cb24-518" aria-hidden="true" tabindex="-1"></a>mygraph <span class="ot">&lt;-</span> <span class="fu">graph_from_data_frame</span>(edges, <span class="at">vertices =</span> vertices)</span>
<span id="cb24-519"><a href="#cb24-519" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-520"><a href="#cb24-520" aria-hidden="true" tabindex="-1"></a><span class="co"># 绘制多层级圆形打包图，隐藏最外层大圈（depth=0 填充为白色）</span></span>
<span id="cb24-521"><a href="#cb24-521" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'circlepack'</span>, <span class="at">weight =</span> size) <span class="sc">+</span></span>
<span id="cb24-522"><a href="#cb24-522" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制每个节点的圆，填充和边框颜色根据深度分组</span></span>
<span id="cb24-523"><a href="#cb24-523" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_circle</span>(<span class="fu">aes</span>(<span class="at">fill =</span> <span class="fu">as.factor</span>(depth), <span class="at">color =</span> <span class="fu">as.factor</span>(depth))) <span class="sc">+</span></span>
<span id="cb24-524"><a href="#cb24-524" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置不同深度的填充颜色，最外层（depth=0）为白色，其余用 viridis 调色板</span></span>
<span id="cb24-525"><a href="#cb24-525" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(</span>
<span id="cb24-526"><a href="#cb24-526" aria-hidden="true" tabindex="-1"></a>        <span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb24-527"><a href="#cb24-527" aria-hidden="true" tabindex="-1"></a>            <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"white"</span>,           <span class="co"># 最外层隐藏</span></span>
<span id="cb24-528"><a href="#cb24-528" aria-hidden="true" tabindex="-1"></a>            <span class="st">"1"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">1</span>],     <span class="co"># 第一层</span></span>
<span id="cb24-529"><a href="#cb24-529" aria-hidden="true" tabindex="-1"></a>            <span class="st">"2"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">2</span>],     <span class="co"># 第二层</span></span>
<span id="cb24-530"><a href="#cb24-530" aria-hidden="true" tabindex="-1"></a>            <span class="st">"3"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">3</span>],     <span class="co"># 第三层</span></span>
<span id="cb24-531"><a href="#cb24-531" aria-hidden="true" tabindex="-1"></a>            <span class="st">"4"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">4</span>]      <span class="co"># 第四层</span></span>
<span id="cb24-532"><a href="#cb24-532" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb24-533"><a href="#cb24-533" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-534"><a href="#cb24-534" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置不同深度的边框颜色，最外层为白色，其余为黑色</span></span>
<span id="cb24-535"><a href="#cb24-535" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_manual</span>(</span>
<span id="cb24-536"><a href="#cb24-536" aria-hidden="true" tabindex="-1"></a>        <span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb24-537"><a href="#cb24-537" aria-hidden="true" tabindex="-1"></a>            <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"white"</span>,           <span class="co"># 最外层隐藏</span></span>
<span id="cb24-538"><a href="#cb24-538" aria-hidden="true" tabindex="-1"></a>            <span class="st">"1"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb24-539"><a href="#cb24-539" aria-hidden="true" tabindex="-1"></a>            <span class="st">"2"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb24-540"><a href="#cb24-540" aria-hidden="true" tabindex="-1"></a>            <span class="st">"3"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb24-541"><a href="#cb24-541" aria-hidden="true" tabindex="-1"></a>            <span class="st">"4"</span> <span class="ot">=</span> <span class="st">"black"</span></span>
<span id="cb24-542"><a href="#cb24-542" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb24-543"><a href="#cb24-543" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-544"><a href="#cb24-544" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>                        <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb24-545"><a href="#cb24-545" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"FALSE"</span>)      <span class="co"># 不显示图例</span></span>
<span id="cb24-546"><a href="#cb24-546" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-547"><a href="#cb24-547" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-550"><a href="#cb24-550" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-551"><a href="#cb24-551" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "隐藏前两层大圈的多层级圆形打包图（circle packing）"</span></span>
<span id="cb24-552"><a href="#cb24-552" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb24-553"><a href="#cb24-553" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 6</span></span>
<span id="cb24-554"><a href="#cb24-554" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-555"><a href="#cb24-555" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 ggraph 绘制多层级圆形打包图，隐藏最外层和第二层大圈</span></span>
<span id="cb24-556"><a href="#cb24-556" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'circlepack'</span>, <span class="at">weight =</span> size) <span class="sc">+</span></span>
<span id="cb24-557"><a href="#cb24-557" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制每个节点的圆，填充和边框颜色根据深度分组</span></span>
<span id="cb24-558"><a href="#cb24-558" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_circle</span>(<span class="fu">aes</span>(<span class="at">fill =</span> <span class="fu">as.factor</span>(depth), <span class="at">color =</span> <span class="fu">as.factor</span>(depth))) <span class="sc">+</span></span>
<span id="cb24-559"><a href="#cb24-559" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置不同深度的填充颜色，前两层（depth=0,1）为白色，其余用 magma 调色板</span></span>
<span id="cb24-560"><a href="#cb24-560" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(</span>
<span id="cb24-561"><a href="#cb24-561" aria-hidden="true" tabindex="-1"></a>        <span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb24-562"><a href="#cb24-562" aria-hidden="true" tabindex="-1"></a>            <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"white"</span>,           <span class="co"># 最外层隐藏</span></span>
<span id="cb24-563"><a href="#cb24-563" aria-hidden="true" tabindex="-1"></a>            <span class="st">"1"</span> <span class="ot">=</span> <span class="st">"white"</span>,           <span class="co"># 第二层隐藏</span></span>
<span id="cb24-564"><a href="#cb24-564" aria-hidden="true" tabindex="-1"></a>            <span class="st">"2"</span> <span class="ot">=</span> <span class="fu">magma</span>(<span class="dv">4</span>)[<span class="dv">2</span>],       <span class="co"># 第三层</span></span>
<span id="cb24-565"><a href="#cb24-565" aria-hidden="true" tabindex="-1"></a>            <span class="st">"3"</span> <span class="ot">=</span> <span class="fu">magma</span>(<span class="dv">4</span>)[<span class="dv">3</span>],       <span class="co"># 第四层</span></span>
<span id="cb24-566"><a href="#cb24-566" aria-hidden="true" tabindex="-1"></a>            <span class="st">"4"</span> <span class="ot">=</span> <span class="fu">magma</span>(<span class="dv">4</span>)[<span class="dv">4</span>]        <span class="co"># 第五层</span></span>
<span id="cb24-567"><a href="#cb24-567" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb24-568"><a href="#cb24-568" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-569"><a href="#cb24-569" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置不同深度的边框颜色，前两层为白色，其余为黑色</span></span>
<span id="cb24-570"><a href="#cb24-570" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_manual</span>(</span>
<span id="cb24-571"><a href="#cb24-571" aria-hidden="true" tabindex="-1"></a>        <span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb24-572"><a href="#cb24-572" aria-hidden="true" tabindex="-1"></a>            <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"white"</span>,           <span class="co"># 最外层隐藏</span></span>
<span id="cb24-573"><a href="#cb24-573" aria-hidden="true" tabindex="-1"></a>            <span class="st">"1"</span> <span class="ot">=</span> <span class="st">"white"</span>,           <span class="co"># 第二层隐藏</span></span>
<span id="cb24-574"><a href="#cb24-574" aria-hidden="true" tabindex="-1"></a>            <span class="st">"2"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb24-575"><a href="#cb24-575" aria-hidden="true" tabindex="-1"></a>            <span class="st">"3"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb24-576"><a href="#cb24-576" aria-hidden="true" tabindex="-1"></a>            <span class="st">"4"</span> <span class="ot">=</span> <span class="st">"black"</span></span>
<span id="cb24-577"><a href="#cb24-577" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb24-578"><a href="#cb24-578" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb24-579"><a href="#cb24-579" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>                        <span class="co"># 去除坐标轴和背景</span></span>
<span id="cb24-580"><a href="#cb24-580" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"FALSE"</span>)      <span class="co"># 不显示图例</span></span>
<span id="cb24-581"><a href="#cb24-581" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-582"><a href="#cb24-582" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-583"><a href="#cb24-583" aria-hidden="true" tabindex="-1"></a><span class="fu">### 特定 label</span></span>
<span id="cb24-584"><a href="#cb24-584" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-587"><a href="#cb24-587" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-588"><a href="#cb24-588" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "仅为特定层级（如 level=2）节点添加标签的多层级圆形打包图"</span></span>
<span id="cb24-589"><a href="#cb24-589" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb24-590"><a href="#cb24-590" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 6</span></span>
<span id="cb24-591"><a href="#cb24-591" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-592"><a href="#cb24-592" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载 data.tree 包，用于树结构操作</span></span>
<span id="cb24-593"><a href="#cb24-593" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.tree)</span>
<span id="cb24-594"><a href="#cb24-594" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-595"><a href="#cb24-595" aria-hidden="true" tabindex="-1"></a><span class="co"># 重新加载边和节点数据</span></span>
<span id="cb24-596"><a href="#cb24-596" aria-hidden="true" tabindex="-1"></a>edges <span class="ot">&lt;-</span> flare<span class="sc">$</span>edges</span>
<span id="cb24-597"><a href="#cb24-597" aria-hidden="true" tabindex="-1"></a>vertices <span class="ot">&lt;-</span> flare<span class="sc">$</span>vertices</span>
<span id="cb24-598"><a href="#cb24-598" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-599"><a href="#cb24-599" aria-hidden="true" tabindex="-1"></a><span class="co"># 将边数据转换为树结构，便于获取每个节点的层级信息</span></span>
<span id="cb24-600"><a href="#cb24-600" aria-hidden="true" tabindex="-1"></a>tree <span class="ot">&lt;-</span> <span class="fu">FromDataFrameNetwork</span>(edges)</span>
<span id="cb24-601"><a href="#cb24-601" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-602"><a href="#cb24-602" aria-hidden="true" tabindex="-1"></a><span class="co"># 获取每个节点的名称和层级，并合并到原始节点数据框</span></span>
<span id="cb24-603"><a href="#cb24-603" aria-hidden="true" tabindex="-1"></a>mylevels <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb24-604"><a href="#cb24-604" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> tree<span class="sc">$</span><span class="fu">Get</span>(<span class="st">'name'</span>),      <span class="co"># 节点名称</span></span>
<span id="cb24-605"><a href="#cb24-605" aria-hidden="true" tabindex="-1"></a>    <span class="at">level =</span> tree<span class="sc">$</span><span class="fu">Get</span>(<span class="st">"level"</span>)     <span class="co"># 节点层级（根节点为1）</span></span>
<span id="cb24-606"><a href="#cb24-606" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-607"><a href="#cb24-607" aria-hidden="true" tabindex="-1"></a>vertices <span class="ot">&lt;-</span> vertices <span class="sc">%&gt;%</span></span>
<span id="cb24-608"><a href="#cb24-608" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(., mylevels, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"name"</span> <span class="ot">=</span> <span class="st">"name"</span>))</span>
<span id="cb24-609"><a href="#cb24-609" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-610"><a href="#cb24-610" aria-hidden="true" tabindex="-1"></a><span class="co"># 仅为 level=2 的节点添加标签，其余节点标签为 NA</span></span>
<span id="cb24-611"><a href="#cb24-611" aria-hidden="true" tabindex="-1"></a>vertices <span class="ot">&lt;-</span> vertices <span class="sc">%&gt;%</span></span>
<span id="cb24-612"><a href="#cb24-612" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">new_label =</span> <span class="fu">ifelse</span>(level <span class="sc">==</span> <span class="dv">2</span>, shortName, <span class="cn">NA</span>))</span>
<span id="cb24-613"><a href="#cb24-613" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-614"><a href="#cb24-614" aria-hidden="true" tabindex="-1"></a><span class="co"># 构建 igraph 图对象</span></span>
<span id="cb24-615"><a href="#cb24-615" aria-hidden="true" tabindex="-1"></a>mygraph <span class="ot">&lt;-</span> <span class="fu">graph_from_data_frame</span>(edges, <span class="at">vertices =</span> vertices)</span>
<span id="cb24-616"><a href="#cb24-616" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-617"><a href="#cb24-617" aria-hidden="true" tabindex="-1"></a><span class="co"># 绘制多层级圆形打包图</span></span>
<span id="cb24-618"><a href="#cb24-618" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(mygraph, <span class="at">layout =</span> <span class="st">'circlepack'</span>, <span class="at">weight =</span> size) <span class="sc">+</span></span>
<span id="cb24-619"><a href="#cb24-619" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 绘制每个节点的圆，填充和边框颜色根据深度分组</span></span>
<span id="cb24-620"><a href="#cb24-620" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_circle</span>(<span class="fu">aes</span>(<span class="at">fill =</span> <span class="fu">as.factor</span>(depth), <span class="at">color =</span> <span class="fu">as.factor</span>(depth))) <span class="sc">+</span></span>
<span id="cb24-621"><a href="#cb24-621" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置不同深度的填充颜色，最外层为白色，其余用 viridis 调色板</span></span>
<span id="cb24-622"><a href="#cb24-622" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb24-623"><a href="#cb24-623" aria-hidden="true" tabindex="-1"></a>        <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"white"</span>,</span>
<span id="cb24-624"><a href="#cb24-624" aria-hidden="true" tabindex="-1"></a>        <span class="st">"1"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">1</span>],</span>
<span id="cb24-625"><a href="#cb24-625" aria-hidden="true" tabindex="-1"></a>        <span class="st">"2"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">2</span>],</span>
<span id="cb24-626"><a href="#cb24-626" aria-hidden="true" tabindex="-1"></a>        <span class="st">"3"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">3</span>],</span>
<span id="cb24-627"><a href="#cb24-627" aria-hidden="true" tabindex="-1"></a>        <span class="st">"4"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">4</span>)[<span class="dv">4</span>]</span>
<span id="cb24-628"><a href="#cb24-628" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">+</span></span>
<span id="cb24-629"><a href="#cb24-629" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 设置不同深度的边框颜色，最外层为白色，其余为黑色</span></span>
<span id="cb24-630"><a href="#cb24-630" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb24-631"><a href="#cb24-631" aria-hidden="true" tabindex="-1"></a>        <span class="st">"0"</span> <span class="ot">=</span> <span class="st">"white"</span>,</span>
<span id="cb24-632"><a href="#cb24-632" aria-hidden="true" tabindex="-1"></a>        <span class="st">"1"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb24-633"><a href="#cb24-633" aria-hidden="true" tabindex="-1"></a>        <span class="st">"2"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb24-634"><a href="#cb24-634" aria-hidden="true" tabindex="-1"></a>        <span class="st">"3"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb24-635"><a href="#cb24-635" aria-hidden="true" tabindex="-1"></a>        <span class="st">"4"</span> <span class="ot">=</span> <span class="st">"black"</span></span>
<span id="cb24-636"><a href="#cb24-636" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">+</span></span>
<span id="cb24-637"><a href="#cb24-637" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 仅为 new_label 非 NA 的节点添加标签（即 level=2 的节点）</span></span>
<span id="cb24-638"><a href="#cb24-638" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_node_label</span>(<span class="fu">aes</span>(<span class="at">label =</span> new_label), <span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb24-639"><a href="#cb24-639" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 去除坐标轴和背景，设置无图例和无边距</span></span>
<span id="cb24-640"><a href="#cb24-640" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb24-641"><a href="#cb24-641" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb24-642"><a href="#cb24-642" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">"FALSE"</span>,</span>
<span id="cb24-643"><a href="#cb24-643" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.margin =</span> <span class="fu">unit</span>(<span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">4</span>), <span class="st">"cm"</span>)</span>
<span id="cb24-644"><a href="#cb24-644" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb24-645"><a href="#cb24-645" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-646"><a href="#cb24-646" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-647"><a href="#cb24-647" aria-hidden="true" tabindex="-1"></a><span class="fu">### 可缩放</span></span>
<span id="cb24-648"><a href="#cb24-648" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-649"><a href="#cb24-649" aria-hidden="true" tabindex="-1"></a><span class="in">`circlePacker`</span> 包可以用来创建交互式和可缩放圆形堆积图</span>
<span id="cb24-650"><a href="#cb24-650" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-653"><a href="#cb24-653" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-654"><a href="#cb24-654" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "可缩放交互式多层级圆形打包图（circle packing），使用 circlepackeR 包"</span></span>
<span id="cb24-655"><a href="#cb24-655" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-656"><a href="#cb24-656" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载 circlepackeR 包，用于创建可缩放的交互式圆形打包图</span></span>
<span id="cb24-657"><a href="#cb24-657" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(circlepackeR)</span>
<span id="cb24-658"><a href="#cb24-658" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-659"><a href="#cb24-659" aria-hidden="true" tabindex="-1"></a><span class="co"># 构建一个嵌套数据框，包含多层级结构信息</span></span>
<span id="cb24-660"><a href="#cb24-660" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb24-661"><a href="#cb24-661" aria-hidden="true" tabindex="-1"></a>    <span class="at">root =</span> <span class="fu">rep</span>(<span class="st">"root"</span>, <span class="dv">15</span>),                                 <span class="co"># 根节点</span></span>
<span id="cb24-662"><a href="#cb24-662" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">"group A"</span>, <span class="dv">5</span>), <span class="fu">rep</span>(<span class="st">"group B"</span>, <span class="dv">5</span>), <span class="fu">rep</span>(<span class="st">"group C"</span>, <span class="dv">5</span>)), <span class="co"># 一级分组</span></span>
<span id="cb24-663"><a href="#cb24-663" aria-hidden="true" tabindex="-1"></a>    <span class="at">subgroup =</span> <span class="fu">rep</span>(letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>], <span class="at">each =</span> <span class="dv">3</span>),                 <span class="co"># 二级分组</span></span>
<span id="cb24-664"><a href="#cb24-664" aria-hidden="true" tabindex="-1"></a>    <span class="at">subsubgroup =</span> <span class="fu">rep</span>(letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>], <span class="dv">5</span>),                     <span class="co"># 三级分组</span></span>
<span id="cb24-665"><a href="#cb24-665" aria-hidden="true" tabindex="-1"></a>    <span class="at">value =</span> <span class="fu">sample</span>(<span class="fu">seq</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>), <span class="dv">15</span>)                           <span class="co"># 每个叶节点的数值</span></span>
<span id="cb24-666"><a href="#cb24-666" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-667"><a href="#cb24-667" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-668"><a href="#cb24-668" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 data.tree 包将数据转换为树结构</span></span>
<span id="cb24-669"><a href="#cb24-669" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.tree)</span>
<span id="cb24-670"><a href="#cb24-670" aria-hidden="true" tabindex="-1"></a><span class="co"># 构建 pathString 字段，格式为 root/group/subgroup/subsubgroup</span></span>
<span id="cb24-671"><a href="#cb24-671" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>pathString <span class="ot">&lt;-</span> <span class="fu">paste</span>(</span>
<span id="cb24-672"><a href="#cb24-672" aria-hidden="true" tabindex="-1"></a>    <span class="st">"world"</span>,                <span class="co"># 根节点名称</span></span>
<span id="cb24-673"><a href="#cb24-673" aria-hidden="true" tabindex="-1"></a>    data<span class="sc">$</span>group,             <span class="co"># 一级分组</span></span>
<span id="cb24-674"><a href="#cb24-674" aria-hidden="true" tabindex="-1"></a>    data<span class="sc">$</span>subgroup,          <span class="co"># 二级分组</span></span>
<span id="cb24-675"><a href="#cb24-675" aria-hidden="true" tabindex="-1"></a>    data<span class="sc">$</span>subsubgroup,       <span class="co"># 三级分组</span></span>
<span id="cb24-676"><a href="#cb24-676" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">"/"</span></span>
<span id="cb24-677"><a href="#cb24-677" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-678"><a href="#cb24-678" aria-hidden="true" tabindex="-1"></a><span class="co"># 转换为树结构对象</span></span>
<span id="cb24-679"><a href="#cb24-679" aria-hidden="true" tabindex="-1"></a>population <span class="ot">&lt;-</span> <span class="fu">as.Node</span>(data)</span>
<span id="cb24-680"><a href="#cb24-680" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-681"><a href="#cb24-681" aria-hidden="true" tabindex="-1"></a><span class="co"># 绘制可缩放的交互式圆形打包图</span></span>
<span id="cb24-682"><a href="#cb24-682" aria-hidden="true" tabindex="-1"></a><span class="co"># color_min 和 color_max 可自定义颜色范围</span></span>
<span id="cb24-683"><a href="#cb24-683" aria-hidden="true" tabindex="-1"></a><span class="fu">circlepackeR</span>(</span>
<span id="cb24-684"><a href="#cb24-684" aria-hidden="true" tabindex="-1"></a>    population,                 <span class="co"># 层级结构数据</span></span>
<span id="cb24-685"><a href="#cb24-685" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="st">"value"</span>,             <span class="co"># 用于圆面积的数值字段</span></span>
<span id="cb24-686"><a href="#cb24-686" aria-hidden="true" tabindex="-1"></a>    <span class="at">color_min =</span> <span class="st">"hsl(56,80%,80%)"</span>,   <span class="co"># 最小值对应的颜色</span></span>
<span id="cb24-687"><a href="#cb24-687" aria-hidden="true" tabindex="-1"></a>    <span class="at">color_max =</span> <span class="st">"hsl(341,30%,40%)"</span>   <span class="co"># 最大值对应的颜色</span></span>
<span id="cb24-688"><a href="#cb24-688" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-689"><a href="#cb24-689" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-690"><a href="#cb24-690" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-691"><a href="#cb24-691" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-692"><a href="#cb24-692" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-695"><a href="#cb24-695" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb24-696"><a href="#cb24-696" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "将 edge list 转换为嵌套结构并用 circlepackeR 绘制多层级圆形打包图"</span></span>
<span id="cb24-697"><a href="#cb24-697" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-698"><a href="#cb24-698" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载 circlepackeR 包，用于绘制交互式圆形打包图</span></span>
<span id="cb24-699"><a href="#cb24-699" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(circlepackeR)</span>
<span id="cb24-700"><a href="#cb24-700" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载 ggraph 包（本例未直接用到，但常用于网络可视化）</span></span>
<span id="cb24-701"><a href="#cb24-701" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggraph)</span>
<span id="cb24-702"><a href="#cb24-702" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-703"><a href="#cb24-703" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 packcircles 包内置的 flare 数据集，获取边列表</span></span>
<span id="cb24-704"><a href="#cb24-704" aria-hidden="true" tabindex="-1"></a>data_edge <span class="ot">&lt;-</span> flare<span class="sc">$</span>edges</span>
<span id="cb24-705"><a href="#cb24-705" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-706"><a href="#cb24-706" aria-hidden="true" tabindex="-1"></a><span class="co"># 提取每个节点名称的最后一级（去掉前面的分层前缀），便于后续分层</span></span>
<span id="cb24-707"><a href="#cb24-707" aria-hidden="true" tabindex="-1"></a>data_edge<span class="sc">$</span>from <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">".*</span><span class="sc">\\</span><span class="st">."</span>, <span class="st">""</span>, data_edge<span class="sc">$</span>from)</span>
<span id="cb24-708"><a href="#cb24-708" aria-hidden="true" tabindex="-1"></a>data_edge<span class="sc">$</span>to <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">".*</span><span class="sc">\\</span><span class="st">."</span>, <span class="st">""</span>, data_edge<span class="sc">$</span>to)</span>
<span id="cb24-709"><a href="#cb24-709" aria-hidden="true" tabindex="-1"></a><span class="co"># head(data_edge) # 查看处理后的边列表</span></span>
<span id="cb24-710"><a href="#cb24-710" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-711"><a href="#cb24-711" aria-hidden="true" tabindex="-1"></a><span class="co"># 加载 data.tree 包，用于将边列表转换为树结构</span></span>
<span id="cb24-712"><a href="#cb24-712" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.tree)</span>
<span id="cb24-713"><a href="#cb24-713" aria-hidden="true" tabindex="-1"></a><span class="co"># 将边列表转换为树结构对象</span></span>
<span id="cb24-714"><a href="#cb24-714" aria-hidden="true" tabindex="-1"></a>data_tree <span class="ot">&lt;-</span> <span class="fu">FromDataFrameNetwork</span>(data_edge)</span>
<span id="cb24-715"><a href="#cb24-715" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-716"><a href="#cb24-716" aria-hidden="true" tabindex="-1"></a><span class="co"># 将树结构转换为嵌套数据框，提取每一层的名称</span></span>
<span id="cb24-717"><a href="#cb24-717" aria-hidden="true" tabindex="-1"></a>data_nested <span class="ot">&lt;-</span> <span class="fu">ToDataFrameTree</span>(</span>
<span id="cb24-718"><a href="#cb24-718" aria-hidden="true" tabindex="-1"></a>    data_tree,</span>
<span id="cb24-719"><a href="#cb24-719" aria-hidden="true" tabindex="-1"></a>    <span class="at">level1 =</span> <span class="cf">function</span>(x) x<span class="sc">$</span>path[<span class="dv">2</span>], <span class="co"># 第一层</span></span>
<span id="cb24-720"><a href="#cb24-720" aria-hidden="true" tabindex="-1"></a>    <span class="at">level2 =</span> <span class="cf">function</span>(x) x<span class="sc">$</span>path[<span class="dv">3</span>], <span class="co"># 第二层</span></span>
<span id="cb24-721"><a href="#cb24-721" aria-hidden="true" tabindex="-1"></a>    <span class="at">level3 =</span> <span class="cf">function</span>(x) x<span class="sc">$</span>path[<span class="dv">4</span>], <span class="co"># 第三层</span></span>
<span id="cb24-722"><a href="#cb24-722" aria-hidden="true" tabindex="-1"></a>    <span class="at">level4 =</span> <span class="cf">function</span>(x) x<span class="sc">$</span>path[<span class="dv">5</span>]  <span class="co"># 第四层</span></span>
<span id="cb24-723"><a href="#cb24-723" aria-hidden="true" tabindex="-1"></a>)[<span class="sc">-</span><span class="dv">1</span>, <span class="sc">-</span><span class="dv">1</span>] <span class="co"># 去除根节点和第一列（树结构自带的 name）</span></span>
<span id="cb24-724"><a href="#cb24-724" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-725"><a href="#cb24-725" aria-hidden="true" tabindex="-1"></a><span class="co"># 去除包含 NA 的行，只保留完整路径</span></span>
<span id="cb24-726"><a href="#cb24-726" aria-hidden="true" tabindex="-1"></a>data_nested <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(data_nested)</span>
<span id="cb24-727"><a href="#cb24-727" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-728"><a href="#cb24-728" aria-hidden="true" tabindex="-1"></a><span class="co"># 构建 pathString 字段，格式为 roots/level1/level2/level3/level4</span></span>
<span id="cb24-729"><a href="#cb24-729" aria-hidden="true" tabindex="-1"></a>data_nested<span class="sc">$</span>pathString <span class="ot">&lt;-</span> <span class="fu">paste</span>(</span>
<span id="cb24-730"><a href="#cb24-730" aria-hidden="true" tabindex="-1"></a>    <span class="st">"roots"</span>,</span>
<span id="cb24-731"><a href="#cb24-731" aria-hidden="true" tabindex="-1"></a>    data_nested<span class="sc">$</span>level1,</span>
<span id="cb24-732"><a href="#cb24-732" aria-hidden="true" tabindex="-1"></a>    data_nested<span class="sc">$</span>level2,</span>
<span id="cb24-733"><a href="#cb24-733" aria-hidden="true" tabindex="-1"></a>    data_nested<span class="sc">$</span>level3,</span>
<span id="cb24-734"><a href="#cb24-734" aria-hidden="true" tabindex="-1"></a>    data_nested<span class="sc">$</span>level4,</span>
<span id="cb24-735"><a href="#cb24-735" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">"/"</span></span>
<span id="cb24-736"><a href="#cb24-736" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-737"><a href="#cb24-737" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-738"><a href="#cb24-738" aria-hidden="true" tabindex="-1"></a><span class="co"># 设置每个叶节点的 value（圆面积），此处统一为 1</span></span>
<span id="cb24-739"><a href="#cb24-739" aria-hidden="true" tabindex="-1"></a>data_nested<span class="sc">$</span>value <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb24-740"><a href="#cb24-740" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-741"><a href="#cb24-741" aria-hidden="true" tabindex="-1"></a><span class="co"># 将嵌套数据框转换为树结构对象</span></span>
<span id="cb24-742"><a href="#cb24-742" aria-hidden="true" tabindex="-1"></a>data_Node <span class="ot">&lt;-</span> <span class="fu">as.Node</span>(data_nested)</span>
<span id="cb24-743"><a href="#cb24-743" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-744"><a href="#cb24-744" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 circlepackeR 绘制可缩放的多层级圆形打包图</span></span>
<span id="cb24-745"><a href="#cb24-745" aria-hidden="true" tabindex="-1"></a><span class="fu">circlepackeR</span>(data_Node, <span class="at">size =</span> <span class="st">"value"</span>)</span>
<span id="cb24-746"><a href="#cb24-746" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-747"><a href="#cb24-747" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>